/*! For license information please see main.82b27ce7.js.LICENSE.txt */
!function(){var e={438:function(e,t,n){"use strict";function r(e){for(var t="https://mui.com/production-error/?code="+e,n=1;n<arguments.length;n+=1)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified Material-UI error #"+e+"; visit "+t+" for the full message."}function i(e){if("string"!==typeof e)throw new Error(r(7));return e.charAt(0).toUpperCase()+e.slice(1)}function a(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce((function(e,t){return null==t?e:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];e.apply(this,r),t.apply(this,r)}}),(function(){}))}function o(){return o=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o.apply(this,arguments)}n.r(t),n.d(t,{capitalize:function(){return i},createChainedFunction:function(){return a},createSvgIcon:function(){return kr},debounce:function(){return br},deprecatedPropType:function(){return wr},isMuiElement:function(){return xr},ownerDocument:function(){return _r},ownerWindow:function(){return Ir},requirePropFactory:function(){return Sr},setRef:function(){return Er},unstable_useId:function(){return Pr},unsupportedProp:function(){return Tr},useControlled:function(){return Cr},useEventCallback:function(){return Nr},useForkRef:function(){return Rr},useIsFocusVisible:function(){return Br}});var u=n(791);function s(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}function c(e,t){if(null==e)return{};var n,r,i=s(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function l(e){var t,n,r="";if("string"==typeof e||"number"==typeof e)r+=e;else if("object"==typeof e)if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(n=l(e[t]))&&(r&&(r+=" "),r+=n);else for(t in e)e[t]&&(r&&(r+=" "),r+=t);return r}var f=function(){for(var e,t,n=0,r="";n<arguments.length;)(e=arguments[n++])&&(t=l(e))&&(r&&(r+=" "),r+=t);return r},h=n(110),d=n.n(h),p="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},v="object"===("undefined"===typeof window?"undefined":p(window))&&"object"===("undefined"===typeof document?"undefined":p(document))&&9===document.nodeType,m=n(144),y=n(611);function g(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,(0,y.Z)(e,t)}var k=n(326),b={}.constructor;function w(e){if(null==e||"object"!==typeof e)return e;if(Array.isArray(e))return e.map(w);if(e.constructor!==b)return e;var t={};for(var n in e)t[n]=w(e[n]);return t}function x(e,t,n){void 0===e&&(e="unnamed");var r=n.jss,i=w(t),a=r.plugins.onCreateRule(e,i,n);return a||(e[0],null)}var _=function(e,t){for(var n="",r=0;r<e.length&&"!important"!==e[r];r++)n&&(n+=t),n+=e[r];return n},I=function(e){if(!Array.isArray(e))return e;var t="";if(Array.isArray(e[0]))for(var n=0;n<e.length&&"!important"!==e[n];n++)t&&(t+=", "),t+=_(e[n]," ");else t=_(e,", ");return"!important"===e[e.length-1]&&(t+=" !important"),t};function S(e){return e&&!1===e.format?{linebreak:"",space:""}:{linebreak:"\n",space:" "}}function E(e,t){for(var n="",r=0;r<t;r++)n+="  ";return n+e}function T(e,t,n){void 0===n&&(n={});var r="";if(!t)return r;var i=n.indent,a=void 0===i?0:i,o=t.fallbacks;!1===n.format&&(a=-1/0);var u=S(n),s=u.linebreak,c=u.space;if(e&&a++,o)if(Array.isArray(o))for(var l=0;l<o.length;l++){var f=o[l];for(var h in f){var d=f[h];null!=d&&(r&&(r+=s),r+=E(h+":"+c+I(d)+";",a))}}else for(var p in o){var v=o[p];null!=v&&(r&&(r+=s),r+=E(p+":"+c+I(v)+";",a))}for(var m in t){var y=t[m];null!=y&&"fallbacks"!==m&&(r&&(r+=s),r+=E(m+":"+c+I(y)+";",a))}return(r||n.allowEmpty)&&e?(r&&(r=""+s+r+s),E(""+e+c+"{"+r,--a)+E("}",a)):r}var C=/([[\].#*$><+~=|^:(),"'`\s])/g,A="undefined"!==typeof CSS&&CSS.escape,N=function(e){return A?A(e):e.replace(C,"\\$1")},R=function(){function e(e,t,n){this.type="style",this.isProcessed=!1;var r=n.sheet,i=n.Renderer;this.key=e,this.options=n,this.style=t,r?this.renderer=r.renderer:i&&(this.renderer=new i)}return e.prototype.prop=function(e,t,n){if(void 0===t)return this.style[e];var r=!!n&&n.force;if(!r&&this.style[e]===t)return this;var i=t;n&&!1===n.process||(i=this.options.jss.plugins.onChangeValue(t,e,this));var a=null==i||!1===i,o=e in this.style;if(a&&!o&&!r)return this;var u=a&&o;if(u?delete this.style[e]:this.style[e]=i,this.renderable&&this.renderer)return u?this.renderer.removeProperty(this.renderable,e):this.renderer.setProperty(this.renderable,e,i),this;var s=this.options.sheet;return s&&s.attached,this},e}(),P=function(e){function t(t,n,r){var i;i=e.call(this,t,n,r)||this;var a=r.selector,o=r.scoped,u=r.sheet,s=r.generateId;return a?i.selectorText=a:!1!==o&&(i.id=s((0,k.Z)((0,k.Z)(i)),u),i.selectorText="."+N(i.id)),i}g(t,e);var n=t.prototype;return n.applyTo=function(e){var t=this.renderer;if(t){var n=this.toJSON();for(var r in n)t.setProperty(e,r,n[r])}return this},n.toJSON=function(){var e={};for(var t in this.style){var n=this.style[t];"object"!==typeof n?e[t]=n:Array.isArray(n)&&(e[t]=I(n))}return e},n.toString=function(e){var t=this.options.sheet,n=!!t&&t.options.link?o({},e,{allowEmpty:!0}):e;return T(this.selectorText,this.style,n)},(0,m.Z)(t,[{key:"selector",set:function(e){if(e!==this.selectorText){this.selectorText=e;var t=this.renderer,n=this.renderable;if(n&&t)t.setSelector(n,e)||t.replaceRule(n,this)}},get:function(){return this.selectorText}}]),t}(R),O={onCreateRule:function(e,t,n){return"@"===e[0]||n.parent&&"keyframes"===n.parent.type?null:new P(e,t,n)}},D={indent:1,children:!0},L=/@([\w-]+)/,M=function(){function e(e,t,n){this.type="conditional",this.isProcessed=!1,this.key=e;var r=e.match(L);for(var i in this.at=r?r[1]:"unknown",this.query=n.name||"@"+this.at,this.options=n,this.rules=new oe(o({},n,{parent:this})),t)this.rules.add(i,t[i]);this.rules.process()}var t=e.prototype;return t.getRule=function(e){return this.rules.get(e)},t.indexOf=function(e){return this.rules.indexOf(e)},t.addRule=function(e,t,n){var r=this.rules.add(e,t,n);return r?(this.options.jss.plugins.onProcessRule(r),r):null},t.replaceRule=function(e,t,n){var r=this.rules.replace(e,t,n);return r&&this.options.jss.plugins.onProcessRule(r),r},t.toString=function(e){void 0===e&&(e=D);var t=S(e).linebreak;if(null==e.indent&&(e.indent=D.indent),null==e.children&&(e.children=D.children),!1===e.children)return this.query+" {}";var n=this.rules.toString(e);return n?this.query+" {"+t+n+t+"}":""},e}(),F=/@container|@media|@supports\s+/,j={onCreateRule:function(e,t,n){return F.test(e)?new M(e,t,n):null}},U={indent:1,children:!0},V=/@keyframes\s+([\w-]+)/,Z=function(){function e(e,t,n){this.type="keyframes",this.at="@keyframes",this.isProcessed=!1;var r=e.match(V);r&&r[1]?this.name=r[1]:this.name="noname",this.key=this.type+"-"+this.name,this.options=n;var i=n.scoped,a=n.sheet,u=n.generateId;for(var s in this.id=!1===i?this.name:N(u(this,a)),this.rules=new oe(o({},n,{parent:this})),t)this.rules.add(s,t[s],o({},n,{parent:this}));this.rules.process()}return e.prototype.toString=function(e){void 0===e&&(e=U);var t=S(e).linebreak;if(null==e.indent&&(e.indent=U.indent),null==e.children&&(e.children=U.children),!1===e.children)return this.at+" "+this.id+" {}";var n=this.rules.toString(e);return n&&(n=""+t+n+t),this.at+" "+this.id+" {"+n+"}"},e}(),z=/@keyframes\s+/,B=/\$([\w-]+)/g,q=function(e,t){return"string"===typeof e?e.replace(B,(function(e,n){return n in t?t[n]:e})):e},G=function(e,t,n){var r=e[t],i=q(r,n);i!==r&&(e[t]=i)},K={onCreateRule:function(e,t,n){return"string"===typeof e&&z.test(e)?new Z(e,t,n):null},onProcessStyle:function(e,t,n){return"style"===t.type&&n?("animation-name"in e&&G(e,"animation-name",n.keyframes),"animation"in e&&G(e,"animation",n.keyframes),e):e},onChangeValue:function(e,t,n){var r=n.options.sheet;if(!r)return e;switch(t){case"animation":case"animation-name":return q(e,r.keyframes);default:return e}}},W=function(e){function t(){return e.apply(this,arguments)||this}return g(t,e),t.prototype.toString=function(e){var t=this.options.sheet,n=!!t&&t.options.link?o({},e,{allowEmpty:!0}):e;return T(this.key,this.style,n)},t}(R),H={onCreateRule:function(e,t,n){return n.parent&&"keyframes"===n.parent.type?new W(e,t,n):null}},Q=function(){function e(e,t,n){this.type="font-face",this.at="@font-face",this.isProcessed=!1,this.key=e,this.style=t,this.options=n}return e.prototype.toString=function(e){var t=S(e).linebreak;if(Array.isArray(this.style)){for(var n="",r=0;r<this.style.length;r++)n+=T(this.at,this.style[r]),this.style[r+1]&&(n+=t);return n}return T(this.at,this.style,e)},e}(),Y=/@font-face/,$={onCreateRule:function(e,t,n){return Y.test(e)?new Q(e,t,n):null}},X=function(){function e(e,t,n){this.type="viewport",this.at="@viewport",this.isProcessed=!1,this.key=e,this.style=t,this.options=n}return e.prototype.toString=function(e){return T(this.key,this.style,e)},e}(),J={onCreateRule:function(e,t,n){return"@viewport"===e||"@-ms-viewport"===e?new X(e,t,n):null}},ee=function(){function e(e,t,n){this.type="simple",this.isProcessed=!1,this.key=e,this.value=t,this.options=n}return e.prototype.toString=function(e){if(Array.isArray(this.value)){for(var t="",n=0;n<this.value.length;n++)t+=this.key+" "+this.value[n]+";",this.value[n+1]&&(t+="\n");return t}return this.key+" "+this.value+";"},e}(),te={"@charset":!0,"@import":!0,"@namespace":!0},ne={onCreateRule:function(e,t,n){return e in te?new ee(e,t,n):null}},re=[O,j,K,H,$,J,ne],ie={process:!0},ae={force:!0,process:!0},oe=function(){function e(e){this.map={},this.raw={},this.index=[],this.counter=0,this.options=e,this.classes=e.classes,this.keyframes=e.keyframes}var t=e.prototype;return t.add=function(e,t,n){var r=this.options,i=r.parent,a=r.sheet,u=r.jss,s=r.Renderer,c=r.generateId,l=r.scoped,f=o({classes:this.classes,parent:i,sheet:a,jss:u,Renderer:s,generateId:c,scoped:l,name:e,keyframes:this.keyframes,selector:void 0},n),h=e;e in this.raw&&(h=e+"-d"+this.counter++),this.raw[h]=t,h in this.classes&&(f.selector="."+N(this.classes[h]));var d=x(h,t,f);if(!d)return null;this.register(d);var p=void 0===f.index?this.index.length:f.index;return this.index.splice(p,0,d),d},t.replace=function(e,t,n){var r=this.get(e),i=this.index.indexOf(r);r&&this.remove(r);var a=n;return-1!==i&&(a=o({},n,{index:i})),this.add(e,t,a)},t.get=function(e){return this.map[e]},t.remove=function(e){this.unregister(e),delete this.raw[e.key],this.index.splice(this.index.indexOf(e),1)},t.indexOf=function(e){return this.index.indexOf(e)},t.process=function(){var e=this.options.jss.plugins;this.index.slice(0).forEach(e.onProcessRule,e)},t.register=function(e){this.map[e.key]=e,e instanceof P?(this.map[e.selector]=e,e.id&&(this.classes[e.key]=e.id)):e instanceof Z&&this.keyframes&&(this.keyframes[e.name]=e.id)},t.unregister=function(e){delete this.map[e.key],e instanceof P?(delete this.map[e.selector],delete this.classes[e.key]):e instanceof Z&&delete this.keyframes[e.name]},t.update=function(){var e,t,n;if("string"===typeof(arguments.length<=0?void 0:arguments[0])?(e=arguments.length<=0?void 0:arguments[0],t=arguments.length<=1?void 0:arguments[1],n=arguments.length<=2?void 0:arguments[2]):(t=arguments.length<=0?void 0:arguments[0],n=arguments.length<=1?void 0:arguments[1],e=null),e)this.updateOne(this.get(e),t,n);else for(var r=0;r<this.index.length;r++)this.updateOne(this.index[r],t,n)},t.updateOne=function(t,n,r){void 0===r&&(r=ie);var i=this.options,a=i.jss.plugins,o=i.sheet;if(t.rules instanceof e)t.rules.update(n,r);else{var u=t.style;if(a.onUpdate(n,t,o,r),r.process&&u&&u!==t.style){for(var s in a.onProcessStyle(t.style,t,o),t.style){var c=t.style[s];c!==u[s]&&t.prop(s,c,ae)}for(var l in u){var f=t.style[l],h=u[l];null==f&&f!==h&&t.prop(l,null,ae)}}}},t.toString=function(e){for(var t="",n=this.options.sheet,r=!!n&&n.options.link,i=S(e).linebreak,a=0;a<this.index.length;a++){var o=this.index[a].toString(e);(o||r)&&(t&&(t+=i),t+=o)}return t},e}(),ue=function(){function e(e,t){for(var n in this.attached=!1,this.deployed=!1,this.classes={},this.keyframes={},this.options=o({},t,{sheet:this,parent:this,classes:this.classes,keyframes:this.keyframes}),t.Renderer&&(this.renderer=new t.Renderer(this)),this.rules=new oe(this.options),e)this.rules.add(n,e[n]);this.rules.process()}var t=e.prototype;return t.attach=function(){return this.attached||(this.renderer&&this.renderer.attach(),this.attached=!0,this.deployed||this.deploy()),this},t.detach=function(){return this.attached?(this.renderer&&this.renderer.detach(),this.attached=!1,this):this},t.addRule=function(e,t,n){var r=this.queue;this.attached&&!r&&(this.queue=[]);var i=this.rules.add(e,t,n);return i?(this.options.jss.plugins.onProcessRule(i),this.attached?this.deployed?(r?r.push(i):(this.insertRule(i),this.queue&&(this.queue.forEach(this.insertRule,this),this.queue=void 0)),i):i:(this.deployed=!1,i)):null},t.replaceRule=function(e,t,n){var r=this.rules.get(e);if(!r)return this.addRule(e,t,n);var i=this.rules.replace(e,t,n);return i&&this.options.jss.plugins.onProcessRule(i),this.attached?this.deployed?(this.renderer&&(i?r.renderable&&this.renderer.replaceRule(r.renderable,i):this.renderer.deleteRule(r)),i):i:(this.deployed=!1,i)},t.insertRule=function(e){this.renderer&&this.renderer.insertRule(e)},t.addRules=function(e,t){var n=[];for(var r in e){var i=this.addRule(r,e[r],t);i&&n.push(i)}return n},t.getRule=function(e){return this.rules.get(e)},t.deleteRule=function(e){var t="object"===typeof e?e:this.rules.get(e);return!(!t||this.attached&&!t.renderable)&&(this.rules.remove(t),!(this.attached&&t.renderable&&this.renderer)||this.renderer.deleteRule(t.renderable))},t.indexOf=function(e){return this.rules.indexOf(e)},t.deploy=function(){return this.renderer&&this.renderer.deploy(),this.deployed=!0,this},t.update=function(){var e;return(e=this.rules).update.apply(e,arguments),this},t.updateOne=function(e,t,n){return this.rules.updateOne(e,t,n),this},t.toString=function(e){return this.rules.toString(e)},e}(),se=function(){function e(){this.plugins={internal:[],external:[]},this.registry={}}var t=e.prototype;return t.onCreateRule=function(e,t,n){for(var r=0;r<this.registry.onCreateRule.length;r++){var i=this.registry.onCreateRule[r](e,t,n);if(i)return i}return null},t.onProcessRule=function(e){if(!e.isProcessed){for(var t=e.options.sheet,n=0;n<this.registry.onProcessRule.length;n++)this.registry.onProcessRule[n](e,t);e.style&&this.onProcessStyle(e.style,e,t),e.isProcessed=!0}},t.onProcessStyle=function(e,t,n){for(var r=0;r<this.registry.onProcessStyle.length;r++)t.style=this.registry.onProcessStyle[r](t.style,t,n)},t.onProcessSheet=function(e){for(var t=0;t<this.registry.onProcessSheet.length;t++)this.registry.onProcessSheet[t](e)},t.onUpdate=function(e,t,n,r){for(var i=0;i<this.registry.onUpdate.length;i++)this.registry.onUpdate[i](e,t,n,r)},t.onChangeValue=function(e,t,n){for(var r=e,i=0;i<this.registry.onChangeValue.length;i++)r=this.registry.onChangeValue[i](r,t,n);return r},t.use=function(e,t){void 0===t&&(t={queue:"external"});var n=this.plugins[t.queue];-1===n.indexOf(e)&&(n.push(e),this.registry=[].concat(this.plugins.external,this.plugins.internal).reduce((function(e,t){for(var n in t)n in e&&e[n].push(t[n]);return e}),{onCreateRule:[],onProcessRule:[],onProcessStyle:[],onProcessSheet:[],onChangeValue:[],onUpdate:[]}))},e}(),ce=function(){function e(){this.registry=[]}var t=e.prototype;return t.add=function(e){var t=this.registry,n=e.options.index;if(-1===t.indexOf(e))if(0===t.length||n>=this.index)t.push(e);else for(var r=0;r<t.length;r++)if(t[r].options.index>n)return void t.splice(r,0,e)},t.reset=function(){this.registry=[]},t.remove=function(e){var t=this.registry.indexOf(e);this.registry.splice(t,1)},t.toString=function(e){for(var t=void 0===e?{}:e,n=t.attached,r=s(t,["attached"]),i=S(r).linebreak,a="",o=0;o<this.registry.length;o++){var u=this.registry[o];null!=n&&u.attached!==n||(a&&(a+=i),a+=u.toString(r))}return a},(0,m.Z)(e,[{key:"index",get:function(){return 0===this.registry.length?0:this.registry[this.registry.length-1].options.index}}]),e}(),le=new ce,fe="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window&&window.Math===Math?window:"undefined"!==typeof self&&self.Math===Math?self:Function("return this")(),he="2f1acc6c3a606b082e5eef5e54414ffb";null==fe[he]&&(fe[he]=0);var de=fe[he]++,pe=function(e){void 0===e&&(e={});var t=0;return function(n,r){t+=1;var i="",a="";return r&&(r.options.classNamePrefix&&(a=r.options.classNamePrefix),null!=r.options.jss.id&&(i=String(r.options.jss.id))),e.minify?""+(a||"c")+de+i+t:a+n.key+"-"+de+(i?"-"+i:"")+"-"+t}},ve=function(e){var t;return function(){return t||(t=e()),t}},me=function(e,t){try{return e.attributeStyleMap?e.attributeStyleMap.get(t):e.style.getPropertyValue(t)}catch(n){return""}},ye=function(e,t,n){try{var r=n;if(Array.isArray(n)&&(r=I(n)),e.attributeStyleMap)e.attributeStyleMap.set(t,r);else{var i=r?r.indexOf("!important"):-1,a=i>-1?r.substr(0,i-1):r;e.style.setProperty(t,a,i>-1?"important":"")}}catch(o){return!1}return!0},ge=function(e,t){try{e.attributeStyleMap?e.attributeStyleMap.delete(t):e.style.removeProperty(t)}catch(n){}},ke=function(e,t){return e.selectorText=t,e.selectorText===t},be=ve((function(){return document.querySelector("head")}));function we(e){var t=le.registry;if(t.length>0){var n=function(e,t){for(var n=0;n<e.length;n++){var r=e[n];if(r.attached&&r.options.index>t.index&&r.options.insertionPoint===t.insertionPoint)return r}return null}(t,e);if(n&&n.renderer)return{parent:n.renderer.element.parentNode,node:n.renderer.element};if(n=function(e,t){for(var n=e.length-1;n>=0;n--){var r=e[n];if(r.attached&&r.options.insertionPoint===t.insertionPoint)return r}return null}(t,e),n&&n.renderer)return{parent:n.renderer.element.parentNode,node:n.renderer.element.nextSibling}}var r=e.insertionPoint;if(r&&"string"===typeof r){var i=function(e){for(var t=be(),n=0;n<t.childNodes.length;n++){var r=t.childNodes[n];if(8===r.nodeType&&r.nodeValue.trim()===e)return r}return null}(r);if(i)return{parent:i.parentNode,node:i.nextSibling}}return!1}var xe=ve((function(){var e=document.querySelector('meta[property="csp-nonce"]');return e?e.getAttribute("content"):null})),_e=function(e,t,n){try{"insertRule"in e?e.insertRule(t,n):"appendRule"in e&&e.appendRule(t)}catch(r){return!1}return e.cssRules[n]},Ie=function(e,t){var n=e.cssRules.length;return void 0===t||t>n?n:t},Se=function(){function e(e){this.getPropertyValue=me,this.setProperty=ye,this.removeProperty=ge,this.setSelector=ke,this.hasInsertedRules=!1,this.cssRules=[],e&&le.add(e),this.sheet=e;var t=this.sheet?this.sheet.options:{},n=t.media,r=t.meta,i=t.element;this.element=i||function(){var e=document.createElement("style");return e.textContent="\n",e}(),this.element.setAttribute("data-jss",""),n&&this.element.setAttribute("media",n),r&&this.element.setAttribute("data-meta",r);var a=xe();a&&this.element.setAttribute("nonce",a)}var t=e.prototype;return t.attach=function(){if(!this.element.parentNode&&this.sheet){!function(e,t){var n=t.insertionPoint,r=we(t);if(!1!==r&&r.parent)r.parent.insertBefore(e,r.node);else if(n&&"number"===typeof n.nodeType){var i=n,a=i.parentNode;a&&a.insertBefore(e,i.nextSibling)}else be().appendChild(e)}(this.element,this.sheet.options);var e=Boolean(this.sheet&&this.sheet.deployed);this.hasInsertedRules&&e&&(this.hasInsertedRules=!1,this.deploy())}},t.detach=function(){if(this.sheet){var e=this.element.parentNode;e&&e.removeChild(this.element),this.sheet.options.link&&(this.cssRules=[],this.element.textContent="\n")}},t.deploy=function(){var e=this.sheet;e&&(e.options.link?this.insertRules(e.rules):this.element.textContent="\n"+e.toString()+"\n")},t.insertRules=function(e,t){for(var n=0;n<e.index.length;n++)this.insertRule(e.index[n],n,t)},t.insertRule=function(e,t,n){if(void 0===n&&(n=this.element.sheet),e.rules){var r=e,i=n;if("conditional"===e.type||"keyframes"===e.type){var a=Ie(n,t);if(!1===(i=_e(n,r.toString({children:!1}),a)))return!1;this.refCssRule(e,a,i)}return this.insertRules(r.rules,i),i}var o=e.toString();if(!o)return!1;var u=Ie(n,t),s=_e(n,o,u);return!1!==s&&(this.hasInsertedRules=!0,this.refCssRule(e,u,s),s)},t.refCssRule=function(e,t,n){e.renderable=n,e.options.parent instanceof ue&&this.cssRules.splice(t,0,n)},t.deleteRule=function(e){var t=this.element.sheet,n=this.indexOf(e);return-1!==n&&(t.deleteRule(n),this.cssRules.splice(n,1),!0)},t.indexOf=function(e){return this.cssRules.indexOf(e)},t.replaceRule=function(e,t){var n=this.indexOf(e);return-1!==n&&(this.element.sheet.deleteRule(n),this.cssRules.splice(n,1),this.insertRule(t,n))},t.getRules=function(){return this.element.sheet.cssRules},e}(),Ee=0,Te=function(){function e(e){this.id=Ee++,this.version="10.10.0",this.plugins=new se,this.options={id:{minify:!1},createGenerateId:pe,Renderer:v?Se:null,plugins:[]},this.generateId=pe({minify:!1});for(var t=0;t<re.length;t++)this.plugins.use(re[t],{queue:"internal"});this.setup(e)}var t=e.prototype;return t.setup=function(e){return void 0===e&&(e={}),e.createGenerateId&&(this.options.createGenerateId=e.createGenerateId),e.id&&(this.options.id=o({},this.options.id,e.id)),(e.createGenerateId||e.id)&&(this.generateId=this.options.createGenerateId(this.options.id)),null!=e.insertionPoint&&(this.options.insertionPoint=e.insertionPoint),"Renderer"in e&&(this.options.Renderer=e.Renderer),e.plugins&&this.use.apply(this,e.plugins),this},t.createStyleSheet=function(e,t){void 0===t&&(t={});var n=t.index;"number"!==typeof n&&(n=0===le.index?0:le.index+1);var r=new ue(e,o({},t,{jss:this,generateId:t.generateId||this.generateId,insertionPoint:this.options.insertionPoint,Renderer:this.options.Renderer,index:n}));return this.plugins.onProcessSheet(r),r},t.removeStyleSheet=function(e){return e.detach(),le.remove(e),this},t.createRule=function(e,t,n){if(void 0===t&&(t={}),void 0===n&&(n={}),"object"===typeof e)return this.createRule(void 0,e,t);var r=o({},n,{name:e,jss:this,Renderer:this.options.Renderer});r.generateId||(r.generateId=this.generateId),r.classes||(r.classes={}),r.keyframes||(r.keyframes={});var i=x(e,t,r);return i&&this.plugins.onProcessRule(i),i},t.use=function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return n.forEach((function(t){e.plugins.use(t)})),this},e}(),Ce=function(e){return new Te(e)},Ae="object"===typeof CSS&&null!=CSS&&"number"in CSS;function Ne(e){var t=null;for(var n in e){var r=e[n],i=typeof r;if("function"===i)t||(t={}),t[n]=r;else if("object"===i&&null!==r&&!Array.isArray(r)){var a=Ne(r);a&&(t||(t={}),t[n]=a)}}return t}Ce();function Re(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.baseClasses,n=e.newClasses;e.Component;if(!n)return t;var r=o({},t);return Object.keys(n).forEach((function(e){n[e]&&(r[e]="".concat(t[e]," ").concat(n[e]))})),r}var Pe={set:function(e,t,n,r){var i=e.get(t);i||(i=new Map,e.set(t,i)),i.set(n,r)},get:function(e,t,n){var r=e.get(t);return r?r.get(n):void 0},delete:function(e,t,n){e.get(t).delete(n)}},Oe=Pe;var De=u.createContext(null);function Le(){return u.useContext(De)}var Me="function"===typeof Symbol&&Symbol.for?Symbol.for("mui.nested"):"__THEME_NESTED__",Fe=["checked","disabled","error","focused","focusVisible","required","expanded","selected"];var je=Date.now(),Ue="fnValues"+je,Ve="fnStyle"+ ++je,Ze=function(){return{onCreateRule:function(e,t,n){if("function"!==typeof t)return null;var r=x(e,{},n);return r[Ve]=t,r},onProcessStyle:function(e,t){if(Ue in t||Ve in t)return e;var n={};for(var r in e){var i=e[r];"function"===typeof i&&(delete e[r],n[r]=i)}return t[Ue]=n,e},onUpdate:function(e,t,n,r){var i=t,a=i[Ve];a&&(i.style=a(e)||{});var o=i[Ue];if(o)for(var u in o)i.prop(u,o[u](e),r)}}},ze="@global",Be="@global ",qe=function(){function e(e,t,n){for(var r in this.type="global",this.at=ze,this.isProcessed=!1,this.key=e,this.options=n,this.rules=new oe(o({},n,{parent:this})),t)this.rules.add(r,t[r]);this.rules.process()}var t=e.prototype;return t.getRule=function(e){return this.rules.get(e)},t.addRule=function(e,t,n){var r=this.rules.add(e,t,n);return r&&this.options.jss.plugins.onProcessRule(r),r},t.replaceRule=function(e,t,n){var r=this.rules.replace(e,t,n);return r&&this.options.jss.plugins.onProcessRule(r),r},t.indexOf=function(e){return this.rules.indexOf(e)},t.toString=function(e){return this.rules.toString(e)},e}(),Ge=function(){function e(e,t,n){this.type="global",this.at=ze,this.isProcessed=!1,this.key=e,this.options=n;var r=e.substr(8);this.rule=n.jss.createRule(r,t,o({},n,{parent:this}))}return e.prototype.toString=function(e){return this.rule?this.rule.toString(e):""},e}(),Ke=/\s*,\s*/g;function We(e,t){for(var n=e.split(Ke),r="",i=0;i<n.length;i++)r+=t+" "+n[i].trim(),n[i+1]&&(r+=", ");return r}var He=function(){return{onCreateRule:function(e,t,n){if(!e)return null;if(e===ze)return new qe(e,t,n);if("@"===e[0]&&e.substr(0,8)===Be)return new Ge(e,t,n);var r=n.parent;return r&&("global"===r.type||r.options.parent&&"global"===r.options.parent.type)&&(n.scoped=!1),n.selector||!1!==n.scoped||(n.selector=e),null},onProcessRule:function(e,t){"style"===e.type&&t&&(function(e,t){var n=e.options,r=e.style,i=r?r[ze]:null;if(i){for(var a in i)t.addRule(a,i[a],o({},n,{selector:We(a,e.selector)}));delete r[ze]}}(e,t),function(e,t){var n=e.options,r=e.style;for(var i in r)if("@"===i[0]&&i.substr(0,ze.length)===ze){var a=We(i.substr(ze.length),e.selector);t.addRule(a,r[i],o({},n,{selector:a})),delete r[i]}}(e,t))}}},Qe=/\s*,\s*/g,Ye=/&/g,$e=/\$([\w-]+)/g;var Xe=function(){function e(e,t){return function(n,r){var i=e.getRule(r)||t&&t.getRule(r);return i?i.selector:r}}function t(e,t){for(var n=t.split(Qe),r=e.split(Qe),i="",a=0;a<n.length;a++)for(var o=n[a],u=0;u<r.length;u++){var s=r[u];i&&(i+=", "),i+=-1!==s.indexOf("&")?s.replace(Ye,o):o+" "+s}return i}function n(e,t,n){if(n)return o({},n,{index:n.index+1});var r=e.options.nestingLevel;r=void 0===r?1:r+1;var i=o({},e.options,{nestingLevel:r,index:t.indexOf(e)+1});return delete i.name,i}return{onProcessStyle:function(r,i,a){if("style"!==i.type)return r;var u,s,c=i,l=c.options.parent;for(var f in r){var h=-1!==f.indexOf("&"),d="@"===f[0];if(h||d){if(u=n(c,l,u),h){var p=t(f,c.selector);s||(s=e(l,a)),p=p.replace($e,s);var v=c.key+"-"+f;"replaceRule"in l?l.replaceRule(v,r[f],o({},u,{selector:p})):l.addRule(v,r[f],o({},u,{selector:p}))}else d&&l.addRule(f,{},u).addRule(c.key,r[f],{selector:c.selector});delete r[f]}}return r}}},Je=/[A-Z]/g,et=/^ms-/,tt={};function nt(e){return"-"+e.toLowerCase()}var rt=function(e){if(tt.hasOwnProperty(e))return tt[e];var t=e.replace(Je,nt);return tt[e]=et.test(t)?"-"+t:t};function it(e){var t={};for(var n in e){t[0===n.indexOf("--")?n:rt(n)]=e[n]}return e.fallbacks&&(Array.isArray(e.fallbacks)?t.fallbacks=e.fallbacks.map(it):t.fallbacks=it(e.fallbacks)),t}var at=function(){return{onProcessStyle:function(e){if(Array.isArray(e)){for(var t=0;t<e.length;t++)e[t]=it(e[t]);return e}return it(e)},onChangeValue:function(e,t,n){if(0===t.indexOf("--"))return e;var r=rt(t);return t===r?e:(n.prop(r,e),null)}}},ot=Ae&&CSS?CSS.px:"px",ut=Ae&&CSS?CSS.ms:"ms",st=Ae&&CSS?CSS.percent:"%";function ct(e){var t=/(-[a-z])/g,n=function(e){return e[1].toUpperCase()},r={};for(var i in e)r[i]=e[i],r[i.replace(t,n)]=e[i];return r}var lt=ct({"animation-delay":ut,"animation-duration":ut,"background-position":ot,"background-position-x":ot,"background-position-y":ot,"background-size":ot,border:ot,"border-bottom":ot,"border-bottom-left-radius":ot,"border-bottom-right-radius":ot,"border-bottom-width":ot,"border-left":ot,"border-left-width":ot,"border-radius":ot,"border-right":ot,"border-right-width":ot,"border-top":ot,"border-top-left-radius":ot,"border-top-right-radius":ot,"border-top-width":ot,"border-width":ot,"border-block":ot,"border-block-end":ot,"border-block-end-width":ot,"border-block-start":ot,"border-block-start-width":ot,"border-block-width":ot,"border-inline":ot,"border-inline-end":ot,"border-inline-end-width":ot,"border-inline-start":ot,"border-inline-start-width":ot,"border-inline-width":ot,"border-start-start-radius":ot,"border-start-end-radius":ot,"border-end-start-radius":ot,"border-end-end-radius":ot,margin:ot,"margin-bottom":ot,"margin-left":ot,"margin-right":ot,"margin-top":ot,"margin-block":ot,"margin-block-end":ot,"margin-block-start":ot,"margin-inline":ot,"margin-inline-end":ot,"margin-inline-start":ot,padding:ot,"padding-bottom":ot,"padding-left":ot,"padding-right":ot,"padding-top":ot,"padding-block":ot,"padding-block-end":ot,"padding-block-start":ot,"padding-inline":ot,"padding-inline-end":ot,"padding-inline-start":ot,"mask-position-x":ot,"mask-position-y":ot,"mask-size":ot,height:ot,width:ot,"min-height":ot,"max-height":ot,"min-width":ot,"max-width":ot,bottom:ot,left:ot,top:ot,right:ot,inset:ot,"inset-block":ot,"inset-block-end":ot,"inset-block-start":ot,"inset-inline":ot,"inset-inline-end":ot,"inset-inline-start":ot,"box-shadow":ot,"text-shadow":ot,"column-gap":ot,"column-rule":ot,"column-rule-width":ot,"column-width":ot,"font-size":ot,"font-size-delta":ot,"letter-spacing":ot,"text-decoration-thickness":ot,"text-indent":ot,"text-stroke":ot,"text-stroke-width":ot,"word-spacing":ot,motion:ot,"motion-offset":ot,outline:ot,"outline-offset":ot,"outline-width":ot,perspective:ot,"perspective-origin-x":st,"perspective-origin-y":st,"transform-origin":st,"transform-origin-x":st,"transform-origin-y":st,"transform-origin-z":st,"transition-delay":ut,"transition-duration":ut,"vertical-align":ot,"flex-basis":ot,"shape-margin":ot,size:ot,gap:ot,grid:ot,"grid-gap":ot,"row-gap":ot,"grid-row-gap":ot,"grid-column-gap":ot,"grid-template-rows":ot,"grid-template-columns":ot,"grid-auto-rows":ot,"grid-auto-columns":ot,"box-shadow-x":ot,"box-shadow-y":ot,"box-shadow-blur":ot,"box-shadow-spread":ot,"font-line-height":ot,"text-shadow-x":ot,"text-shadow-y":ot,"text-shadow-blur":ot});function ft(e,t,n){if(null==t)return t;if(Array.isArray(t))for(var r=0;r<t.length;r++)t[r]=ft(e,t[r],n);else if("object"===typeof t)if("fallbacks"===e)for(var i in t)t[i]=ft(i,t[i],n);else for(var a in t)t[a]=ft(e+"-"+a,t[a],n);else if("number"===typeof t&&!1===isNaN(t)){var o=n[e]||lt[e];return!o||0===t&&o===ot?t.toString():"function"===typeof o?o(t).toString():""+t+o}return t}var ht=function(e){void 0===e&&(e={});var t=ct(e);return{onProcessStyle:function(e,n){if("style"!==n.type)return e;for(var r in e)e[r]=ft(r,e[r],t);return e},onChangeValue:function(e,n){return ft(n,e,t)}}},dt=n(433),pt="",vt="",mt="",yt="",gt=v&&"ontouchstart"in document.documentElement;if(v){var kt={Moz:"-moz-",ms:"-ms-",O:"-o-",Webkit:"-webkit-"},bt=document.createElement("p").style;for(var wt in kt)if(wt+"Transform"in bt){pt=wt,vt=kt[wt];break}"Webkit"===pt&&"msHyphens"in bt&&(pt="ms",vt=kt.ms,yt="edge"),"Webkit"===pt&&"-apple-trailing-word"in bt&&(mt="apple")}var xt={js:pt,css:vt,vendor:mt,browser:yt,isTouch:gt};var _t={noPrefill:["appearance"],supportedProperty:function(e){return"appearance"===e&&("ms"===xt.js?"-webkit-"+e:xt.css+e)}},It={noPrefill:["color-adjust"],supportedProperty:function(e){return"color-adjust"===e&&("Webkit"===xt.js?xt.css+"print-"+e:e)}},St=/[-\s]+(.)?/g;function Et(e,t){return t?t.toUpperCase():""}function Tt(e){return e.replace(St,Et)}function Ct(e){return Tt("-"+e)}var At,Nt={noPrefill:["mask"],supportedProperty:function(e,t){if(!/^mask/.test(e))return!1;if("Webkit"===xt.js){var n="mask-image";if(Tt(n)in t)return e;if(xt.js+Ct(n)in t)return xt.css+e}return e}},Rt={noPrefill:["text-orientation"],supportedProperty:function(e){return"text-orientation"===e&&("apple"!==xt.vendor||xt.isTouch?e:xt.css+e)}},Pt={noPrefill:["transform"],supportedProperty:function(e,t,n){return"transform"===e&&(n.transform?e:xt.css+e)}},Ot={noPrefill:["transition"],supportedProperty:function(e,t,n){return"transition"===e&&(n.transition?e:xt.css+e)}},Dt={noPrefill:["writing-mode"],supportedProperty:function(e){return"writing-mode"===e&&("Webkit"===xt.js||"ms"===xt.js&&"edge"!==xt.browser?xt.css+e:e)}},Lt={noPrefill:["user-select"],supportedProperty:function(e){return"user-select"===e&&("Moz"===xt.js||"ms"===xt.js||"apple"===xt.vendor?xt.css+e:e)}},Mt={supportedProperty:function(e,t){return!!/^break-/.test(e)&&("Webkit"===xt.js?"WebkitColumn"+Ct(e)in t&&xt.css+"column-"+e:"Moz"===xt.js&&("page"+Ct(e)in t&&"page-"+e))}},Ft={supportedProperty:function(e,t){if(!/^(border|margin|padding)-inline/.test(e))return!1;if("Moz"===xt.js)return e;var n=e.replace("-inline","");return xt.js+Ct(n)in t&&xt.css+n}},jt={supportedProperty:function(e,t){return Tt(e)in t&&e}},Ut={supportedProperty:function(e,t){var n=Ct(e);return"-"===e[0]||"-"===e[0]&&"-"===e[1]?e:xt.js+n in t?xt.css+e:"Webkit"!==xt.js&&"Webkit"+n in t&&"-webkit-"+e}},Vt={supportedProperty:function(e){return"scroll-snap"===e.substring(0,11)&&("ms"===xt.js?""+xt.css+e:e)}},Zt={supportedProperty:function(e){return"overscroll-behavior"===e&&("ms"===xt.js?xt.css+"scroll-chaining":e)}},zt={"flex-grow":"flex-positive","flex-shrink":"flex-negative","flex-basis":"flex-preferred-size","justify-content":"flex-pack",order:"flex-order","align-items":"flex-align","align-content":"flex-line-pack"},Bt={supportedProperty:function(e,t){var n=zt[e];return!!n&&(xt.js+Ct(n)in t&&xt.css+n)}},qt={flex:"box-flex","flex-grow":"box-flex","flex-direction":["box-orient","box-direction"],order:"box-ordinal-group","align-items":"box-align","flex-flow":["box-orient","box-direction"],"justify-content":"box-pack"},Gt=Object.keys(qt),Kt=function(e){return xt.css+e},Wt={supportedProperty:function(e,t,n){var r=n.multiple;if(Gt.indexOf(e)>-1){var i=qt[e];if(!Array.isArray(i))return xt.js+Ct(i)in t&&xt.css+i;if(!r)return!1;for(var a=0;a<i.length;a++)if(!(xt.js+Ct(i[0])in t))return!1;return i.map(Kt)}return!1}},Ht=[_t,It,Nt,Rt,Pt,Ot,Dt,Lt,Mt,Ft,jt,Ut,Vt,Zt,Bt,Wt],Qt=Ht.filter((function(e){return e.supportedProperty})).map((function(e){return e.supportedProperty})),Yt=Ht.filter((function(e){return e.noPrefill})).reduce((function(e,t){return e.push.apply(e,(0,dt.Z)(t.noPrefill)),e}),[]),$t={};if(v){At=document.createElement("p");var Xt=window.getComputedStyle(document.documentElement,"");for(var Jt in Xt)isNaN(Jt)||($t[Xt[Jt]]=Xt[Jt]);Yt.forEach((function(e){return delete $t[e]}))}function en(e,t){if(void 0===t&&(t={}),!At)return e;if(null!=$t[e])return $t[e];"transition"!==e&&"transform"!==e||(t[e]=e in At.style);for(var n=0;n<Qt.length&&($t[e]=Qt[n](e,At.style,t),!$t[e]);n++);try{At.style[e]=""}catch(r){return!1}return $t[e]}var tn,nn={},rn={transition:1,"transition-property":1,"-webkit-transition":1,"-webkit-transition-property":1},an=/(^\s*[\w-]+)|, (\s*[\w-]+)(?![^()]*\))/g;function on(e,t,n){if("var"===t)return"var";if("all"===t)return"all";if("all"===n)return", all";var r=t?en(t):", "+en(n);return r||(t||n)}function un(e,t){var n=t;if(!tn||"content"===e)return t;if("string"!==typeof n||!isNaN(parseInt(n,10)))return n;var r=e+n;if(null!=nn[r])return nn[r];try{tn.style[e]=n}catch(i){return nn[r]=!1,!1}if(rn[e])n=n.replace(an,on);else if(""===tn.style[e]&&("-ms-flex"===(n=xt.css+n)&&(tn.style[e]="-ms-flexbox"),tn.style[e]=n,""===tn.style[e]))return nn[r]=!1,!1;return tn.style[e]="",nn[r]=n,nn[r]}v&&(tn=document.createElement("p"));var sn=function(){function e(t){for(var n in t){var r=t[n];if("fallbacks"===n&&Array.isArray(r))t[n]=r.map(e);else{var i=!1,a=en(n);a&&a!==n&&(i=!0);var o=!1,u=un(a,I(r));u&&u!==r&&(o=!0),(i||o)&&(i&&delete t[n],t[a||n]=u||r)}}return t}return{onProcessRule:function(e){if("keyframes"===e.type){var t=e;t.at=function(e){return"-"===e[1]||"ms"===xt.js?e:"@"+xt.css+"keyframes"+e.substr(10)}(t.at)}},onProcessStyle:function(t,n){return"style"!==n.type?t:e(t)},onChangeValue:function(e,t){return un(t,I(e))||e}}};var cn=function(){var e=function(e,t){return e.length===t.length?e>t?1:-1:e.length-t.length};return{onProcessStyle:function(t,n){if("style"!==n.type)return t;for(var r={},i=Object.keys(t).sort(e),a=0;a<i.length;a++)r[i[a]]=t[i[a]];return r}}};var ln=Ce({plugins:[Ze(),He(),Xe(),at(),ht(),"undefined"===typeof window?null:sn(),cn()]}),fn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.disableGlobal,n=void 0!==t&&t,r=e.productionPrefix,i=void 0===r?"jss":r,a=e.seed,o=void 0===a?"":a,u=""===o?"":"".concat(o,"-"),s=0,c=function(){return s+=1};return function(e,t){var r=t.options.name;if(r&&0===r.indexOf("Mui")&&!t.options.link&&!n){if(-1!==Fe.indexOf(e.key))return"Mui-".concat(e.key);var a="".concat(u).concat(r,"-").concat(e.key);return t.options.theme[Me]&&""===o?"".concat(a,"-").concat(c()):a}return"".concat(u).concat(i).concat(c())}}(),hn={disableGeneration:!1,generateClassName:fn,jss:ln,sheetsCache:null,sheetsManager:new Map,sheetsRegistry:null},dn=u.createContext(hn);var pn=-1e9;var vn=n(2);function mn(e){return e&&"object"===(0,vn.Z)(e)&&e.constructor===Object}function yn(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{clone:!0},r=n.clone?o({},e):e;return mn(e)&&mn(t)&&Object.keys(t).forEach((function(i){"__proto__"!==i&&(mn(t[i])&&i in e?r[i]=yn(e[i],t[i],n):r[i]=t[i])})),r}var gn={};function kn(e,t){var n=e.state,r=e.theme,i=e.stylesOptions,a=e.stylesCreator,u=e.name;if(!i.disableGeneration){var s=Oe.get(i.sheetsManager,a,r);s||(s={refs:0,staticSheet:null,dynamicStyles:null},Oe.set(i.sheetsManager,a,r,s));var c=o({},a.options,i,{theme:r,flip:"boolean"===typeof i.flip?i.flip:"rtl"===r.direction});c.generateId=c.serverGenerateClassName||c.generateClassName;var l=i.sheetsRegistry;if(0===s.refs){var f;i.sheetsCache&&(f=Oe.get(i.sheetsCache,a,r));var h=a.create(r,u);f||((f=i.jss.createStyleSheet(h,o({link:!1},c))).attach(),i.sheetsCache&&Oe.set(i.sheetsCache,a,r,f)),l&&l.add(f),s.staticSheet=f,s.dynamicStyles=Ne(h)}if(s.dynamicStyles){var d=i.jss.createStyleSheet(s.dynamicStyles,o({link:!0},c));d.update(t),d.attach(),n.dynamicSheet=d,n.classes=Re({baseClasses:s.staticSheet.classes,newClasses:d.classes}),l&&l.add(d)}else n.classes=s.staticSheet.classes;s.refs+=1}}function bn(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.name,r=t.classNamePrefix,i=t.Component,a=t.defaultTheme,s=void 0===a?gn:a,l=c(t,["name","classNamePrefix","Component","defaultTheme"]),f=function(e){var t="function"===typeof e;return{create:function(n,r){var i;try{i=t?e(n):e}catch(s){throw s}if(!r||!n.overrides||!n.overrides[r])return i;var a=n.overrides[r],u=o({},i);return Object.keys(a).forEach((function(e){u[e]=yn(u[e],a[e])})),u},options:{}}}(e),h=n||r||"makeStyles";f.options={index:pn+=1,name:n,meta:h,classNamePrefix:h};return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Le()||s,r=o({},u.useContext(dn),l),a=u.useRef(),c=u.useRef();!function(e,t){var n,r=u.useRef([]),i=u.useMemo((function(){return{}}),t);r.current!==i&&(r.current=i,n=e()),u.useEffect((function(){return function(){n&&n()}}),[i])}((function(){var i={name:n,state:{},stylesCreator:f,stylesOptions:r,theme:t};return kn(i,e),c.current=!1,a.current=i,function(){!function(e){var t=e.state,n=e.theme,r=e.stylesOptions,i=e.stylesCreator;if(!r.disableGeneration){var a=Oe.get(r.sheetsManager,i,n);a.refs-=1;var o=r.sheetsRegistry;0===a.refs&&(Oe.delete(r.sheetsManager,i,n),r.jss.removeStyleSheet(a.staticSheet),o&&o.remove(a.staticSheet)),t.dynamicSheet&&(r.jss.removeStyleSheet(t.dynamicSheet),o&&o.remove(t.dynamicSheet))}}(i)}}),[t,f]),u.useEffect((function(){c.current&&function(e,t){var n=e.state;n.dynamicSheet&&n.dynamicSheet.update(t)}(a.current,e),c.current=!0}));var h=function(e,t,n){var r=e.state;if(e.stylesOptions.disableGeneration)return t||{};r.cacheClasses||(r.cacheClasses={value:null,lastProp:null,lastJSS:{}});var i=!1;return r.classes!==r.cacheClasses.lastJSS&&(r.cacheClasses.lastJSS=r.classes,i=!0),t!==r.cacheClasses.lastProp&&(r.cacheClasses.lastProp=t,i=!0),i&&(r.cacheClasses.value=Re({baseClasses:r.cacheClasses.lastJSS,newClasses:t,Component:n})),r.cacheClasses.value}(a.current,e.classes,i);return h}}var wn=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(n){var r=t.defaultTheme,i=t.withTheme,a=void 0!==i&&i,s=t.name,l=c(t,["defaultTheme","withTheme","name"]);var f=s,h=bn(e,o({defaultTheme:r,Component:n,name:s||n.displayName,classNamePrefix:f},l)),p=u.forwardRef((function(e,t){e.classes;var i,l=e.innerRef,f=c(e,["classes","innerRef"]),d=h(o({},n.defaultProps,e)),p=f;return("string"===typeof s||a)&&(i=Le()||r,s&&(p=function(e){var t=e.theme,n=e.name,r=e.props;if(!t||!t.props||!t.props[n])return r;var i,a=t.props[n];for(i in a)void 0===r[i]&&(r[i]=a[i]);return r}({theme:i,name:s,props:f})),a&&!p.theme&&(p.theme=i)),u.createElement(n,o({ref:l||t,classes:d},p))}));return d()(p,n),p}},xn=["xs","sm","md","lg","xl"];var _n=n(942);function In(e,t,n){var r;return o({gutters:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return console.warn(["Material-UI: theme.mixins.gutters() is deprecated.","You can use the source of the mixin directly:","\n      paddingLeft: theme.spacing(2),\n      paddingRight: theme.spacing(2),\n      [theme.breakpoints.up('sm')]: {\n        paddingLeft: theme.spacing(3),\n        paddingRight: theme.spacing(3),\n      },\n      "].join("\n")),o({paddingLeft:t(2),paddingRight:t(2)},n,(0,_n.Z)({},e.up("sm"),o({paddingLeft:t(3),paddingRight:t(3)},n[e.up("sm")])))},toolbar:(r={minHeight:56},(0,_n.Z)(r,"".concat(e.up("xs")," and (orientation: landscape)"),{minHeight:48}),(0,_n.Z)(r,e.up("sm"),{minHeight:64}),r)},n)}var Sn={black:"#000",white:"#fff"},En={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#d5d5d5",A200:"#aaaaaa",A400:"#303030",A700:"#616161"},Tn={50:"#e8eaf6",100:"#c5cae9",200:"#9fa8da",300:"#7986cb",400:"#5c6bc0",500:"#3f51b5",600:"#3949ab",700:"#303f9f",800:"#283593",900:"#1a237e",A100:"#8c9eff",A200:"#536dfe",A400:"#3d5afe",A700:"#304ffe"},Cn={50:"#fce4ec",100:"#f8bbd0",200:"#f48fb1",300:"#f06292",400:"#ec407a",500:"#e91e63",600:"#d81b60",700:"#c2185b",800:"#ad1457",900:"#880e4f",A100:"#ff80ab",A200:"#ff4081",A400:"#f50057",A700:"#c51162"},An={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",A100:"#ff8a80",A200:"#ff5252",A400:"#ff1744",A700:"#d50000"},Nn={50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",A100:"#ffd180",A200:"#ffab40",A400:"#ff9100",A700:"#ff6d00"},Rn={50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",A100:"#82b1ff",A200:"#448aff",A400:"#2979ff",A700:"#2962ff"},Pn={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",A100:"#b9f6ca",A200:"#69f0ae",A400:"#00e676",A700:"#00c853"};function On(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return Math.min(Math.max(t,e),n)}function Dn(e){if(e.type)return e;if("#"===e.charAt(0))return Dn(function(e){e=e.substr(1);var t=new RegExp(".{1,".concat(e.length>=6?2:1,"}"),"g"),n=e.match(t);return n&&1===n[0].length&&(n=n.map((function(e){return e+e}))),n?"rgb".concat(4===n.length?"a":"","(").concat(n.map((function(e,t){return t<3?parseInt(e,16):Math.round(parseInt(e,16)/255*1e3)/1e3})).join(", "),")"):""}(e));var t=e.indexOf("("),n=e.substring(0,t);if(-1===["rgb","rgba","hsl","hsla"].indexOf(n))throw new Error(r(3,e));var i=e.substring(t+1,e.length-1).split(",");return{type:n,values:i=i.map((function(e){return parseFloat(e)}))}}function Ln(e){var t=e.type,n=e.values;return-1!==t.indexOf("rgb")?n=n.map((function(e,t){return t<3?parseInt(e,10):e})):-1!==t.indexOf("hsl")&&(n[1]="".concat(n[1],"%"),n[2]="".concat(n[2],"%")),"".concat(t,"(").concat(n.join(", "),")")}function Mn(e){var t="hsl"===(e=Dn(e)).type?Dn(function(e){var t=(e=Dn(e)).values,n=t[0],r=t[1]/100,i=t[2]/100,a=r*Math.min(i,1-i),o=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(e+n/30)%12;return i-a*Math.max(Math.min(t-3,9-t,1),-1)},u="rgb",s=[Math.round(255*o(0)),Math.round(255*o(8)),Math.round(255*o(4))];return"hsla"===e.type&&(u+="a",s.push(t[3])),Ln({type:u,values:s})}(e)).values:e.values;return t=t.map((function(e){return(e/=255)<=.03928?e/12.92:Math.pow((e+.055)/1.055,2.4)})),Number((.2126*t[0]+.7152*t[1]+.0722*t[2]).toFixed(3))}function Fn(e,t){if(e=Dn(e),t=On(t),-1!==e.type.indexOf("hsl"))e.values[2]*=1-t;else if(-1!==e.type.indexOf("rgb"))for(var n=0;n<3;n+=1)e.values[n]*=1-t;return Ln(e)}function jn(e,t){if(e=Dn(e),t=On(t),-1!==e.type.indexOf("hsl"))e.values[2]+=(100-e.values[2])*t;else if(-1!==e.type.indexOf("rgb"))for(var n=0;n<3;n+=1)e.values[n]+=(255-e.values[n])*t;return Ln(e)}var Un={text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.54)",disabled:"rgba(0, 0, 0, 0.38)",hint:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:Sn.white,default:En[50]},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}},Vn={text:{primary:Sn.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",hint:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:En[800],default:"#303030"},action:{active:Sn.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}};function Zn(e,t,n,r){var i=r.light||r,a=r.dark||1.5*r;e[t]||(e.hasOwnProperty(n)?e[t]=e[n]:"light"===t?e.light=jn(e.main,i):"dark"===t&&(e.dark=Fn(e.main,a)))}function zn(e){var t=e.primary,n=void 0===t?{light:Tn[300],main:Tn[500],dark:Tn[700]}:t,i=e.secondary,a=void 0===i?{light:Cn.A200,main:Cn.A400,dark:Cn.A700}:i,u=e.error,s=void 0===u?{light:An[300],main:An[500],dark:An[700]}:u,l=e.warning,f=void 0===l?{light:Nn[300],main:Nn[500],dark:Nn[700]}:l,h=e.info,d=void 0===h?{light:Rn[300],main:Rn[500],dark:Rn[700]}:h,p=e.success,v=void 0===p?{light:Pn[300],main:Pn[500],dark:Pn[700]}:p,m=e.type,y=void 0===m?"light":m,g=e.contrastThreshold,k=void 0===g?3:g,b=e.tonalOffset,w=void 0===b?.2:b,x=c(e,["primary","secondary","error","warning","info","success","type","contrastThreshold","tonalOffset"]);function _(e){var t=function(e,t){var n=Mn(e),r=Mn(t);return(Math.max(n,r)+.05)/(Math.min(n,r)+.05)}(e,Vn.text.primary)>=k?Vn.text.primary:Un.text.primary;return t}var I=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:300,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:700;if(!(e=o({},e)).main&&e[t]&&(e.main=e[t]),!e.main)throw new Error(r(4,t));if("string"!==typeof e.main)throw new Error(r(5,JSON.stringify(e.main)));return Zn(e,"light",n,w),Zn(e,"dark",i,w),e.contrastText||(e.contrastText=_(e.main)),e},S={dark:Vn,light:Un};return yn(o({common:Sn,type:y,primary:I(n),secondary:I(a,"A400","A200","A700"),error:I(s),warning:I(f),info:I(d),success:I(v),grey:En,contrastThreshold:k,getContrastText:_,augmentColor:I,tonalOffset:w},S[y]),x)}function Bn(e){return Math.round(1e5*e)/1e5}function qn(e){return Bn(e)}var Gn={textTransform:"uppercase"},Kn='"Roboto", "Helvetica", "Arial", sans-serif';function Wn(e,t){var n="function"===typeof t?t(e):t,r=n.fontFamily,i=void 0===r?Kn:r,a=n.fontSize,u=void 0===a?14:a,s=n.fontWeightLight,l=void 0===s?300:s,f=n.fontWeightRegular,h=void 0===f?400:f,d=n.fontWeightMedium,p=void 0===d?500:d,v=n.fontWeightBold,m=void 0===v?700:v,y=n.htmlFontSize,g=void 0===y?16:y,k=n.allVariants,b=n.pxToRem,w=c(n,["fontFamily","fontSize","fontWeightLight","fontWeightRegular","fontWeightMedium","fontWeightBold","htmlFontSize","allVariants","pxToRem"]);var x=u/14,_=b||function(e){return"".concat(e/g*x,"rem")},I=function(e,t,n,r,a){return o({fontFamily:i,fontWeight:e,fontSize:_(t),lineHeight:n},i===Kn?{letterSpacing:"".concat(Bn(r/t),"em")}:{},a,k)},S={h1:I(l,96,1.167,-1.5),h2:I(l,60,1.2,-.5),h3:I(h,48,1.167,0),h4:I(h,34,1.235,.25),h5:I(h,24,1.334,0),h6:I(p,20,1.6,.15),subtitle1:I(h,16,1.75,.15),subtitle2:I(p,14,1.57,.1),body1:I(h,16,1.5,.15),body2:I(h,14,1.43,.15),button:I(p,14,1.75,.4,Gn),caption:I(h,12,1.66,.4),overline:I(h,12,2.66,1,Gn)};return yn(o({htmlFontSize:g,pxToRem:_,round:qn,fontFamily:i,fontSize:u,fontWeightLight:l,fontWeightRegular:h,fontWeightMedium:p,fontWeightBold:m},S),w,{clone:!1})}function Hn(){return["".concat(arguments.length<=0?void 0:arguments[0],"px ").concat(arguments.length<=1?void 0:arguments[1],"px ").concat(arguments.length<=2?void 0:arguments[2],"px ").concat(arguments.length<=3?void 0:arguments[3],"px rgba(0,0,0,").concat(.2,")"),"".concat(arguments.length<=4?void 0:arguments[4],"px ").concat(arguments.length<=5?void 0:arguments[5],"px ").concat(arguments.length<=6?void 0:arguments[6],"px ").concat(arguments.length<=7?void 0:arguments[7],"px rgba(0,0,0,").concat(.14,")"),"".concat(arguments.length<=8?void 0:arguments[8],"px ").concat(arguments.length<=9?void 0:arguments[9],"px ").concat(arguments.length<=10?void 0:arguments[10],"px ").concat(arguments.length<=11?void 0:arguments[11],"px rgba(0,0,0,").concat(.12,")")].join(",")}var Qn=["none",Hn(0,2,1,-1,0,1,1,0,0,1,3,0),Hn(0,3,1,-2,0,2,2,0,0,1,5,0),Hn(0,3,3,-2,0,3,4,0,0,1,8,0),Hn(0,2,4,-1,0,4,5,0,0,1,10,0),Hn(0,3,5,-1,0,5,8,0,0,1,14,0),Hn(0,3,5,-1,0,6,10,0,0,1,18,0),Hn(0,4,5,-2,0,7,10,1,0,2,16,1),Hn(0,5,5,-3,0,8,10,1,0,3,14,2),Hn(0,5,6,-3,0,9,12,1,0,3,16,2),Hn(0,6,6,-3,0,10,14,1,0,4,18,3),Hn(0,6,7,-4,0,11,15,1,0,4,20,3),Hn(0,7,8,-4,0,12,17,2,0,5,22,4),Hn(0,7,8,-4,0,13,19,2,0,5,24,4),Hn(0,7,9,-4,0,14,21,2,0,5,26,4),Hn(0,8,9,-5,0,15,22,2,0,6,28,5),Hn(0,8,10,-5,0,16,24,2,0,6,30,5),Hn(0,8,11,-5,0,17,26,2,0,6,32,5),Hn(0,9,11,-5,0,18,28,2,0,7,34,6),Hn(0,9,12,-6,0,19,29,2,0,7,36,6),Hn(0,10,13,-6,0,20,31,3,0,8,38,7),Hn(0,10,13,-6,0,21,33,3,0,8,40,7),Hn(0,10,14,-6,0,22,35,3,0,8,42,7),Hn(0,11,14,-7,0,23,36,3,0,9,44,8),Hn(0,11,15,-7,0,24,38,3,0,9,46,8)],Yn={borderRadius:4},$n=n(439),Xn={xs:0,sm:600,md:960,lg:1280,xl:1920},Jn={keys:["xs","sm","md","lg","xl"],up:function(e){return"@media (min-width:".concat(Xn[e],"px)")}};var er=function(e,t){return t?yn(e,t,{clone:!1}):e};var tr={m:"margin",p:"padding"},nr={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},rr={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},ir=function(e){var t={};return function(n){return void 0===t[n]&&(t[n]=e(n)),t[n]}}((function(e){if(e.length>2){if(!rr[e])return[e];e=rr[e]}var t=e.split(""),n=(0,$n.Z)(t,2),r=n[0],i=n[1],a=tr[r],o=nr[i]||"";return Array.isArray(o)?o.map((function(e){return a+e})):[a+o]})),ar=["m","mt","mr","mb","ml","mx","my","p","pt","pr","pb","pl","px","py","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY"];function or(e){var t=e.spacing||8;return"number"===typeof t?function(e){return t*e}:Array.isArray(t)?function(e){return t[e]}:"function"===typeof t?t:function(){}}function ur(e,t){return function(n){return e.reduce((function(e,r){return e[r]=function(e,t){if("string"===typeof t||null==t)return t;var n=e(Math.abs(t));return t>=0?n:"number"===typeof n?-n:"-".concat(n)}(t,n),e}),{})}}function sr(e){var t=or(e.theme);return Object.keys(e).map((function(n){if(-1===ar.indexOf(n))return null;var r=ur(ir(n),t),i=e[n];return function(e,t,n){if(Array.isArray(t)){var r=e.theme.breakpoints||Jn;return t.reduce((function(e,i,a){return e[r.up(r.keys[a])]=n(t[a]),e}),{})}if("object"===(0,vn.Z)(t)){var i=e.theme.breakpoints||Jn;return Object.keys(t).reduce((function(e,r){return e[i.up(r)]=n(t[r]),e}),{})}return n(t)}(e,i,r)})).reduce(er,{})}sr.propTypes={},sr.filterProps=ar;var cr={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},lr={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function fr(e){return"".concat(Math.round(e),"ms")}var hr={easing:cr,duration:lr,create:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:["all"],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.duration,r=void 0===n?lr.standard:n,i=t.easing,a=void 0===i?cr.easeInOut:i,o=t.delay,u=void 0===o?0:o;c(t,["duration","easing","delay"]);return(Array.isArray(e)?e:[e]).map((function(e){return"".concat(e," ").concat("string"===typeof r?r:fr(r)," ").concat(a," ").concat("string"===typeof u?u:fr(u))})).join(",")},getAutoHeightDuration:function(e){if(!e)return 0;var t=e/36;return Math.round(10*(4+15*Math.pow(t,.25)+t/5))}},dr={mobileStepper:1e3,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500};function pr(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.breakpoints,n=void 0===t?{}:t,r=e.mixins,i=void 0===r?{}:r,a=e.palette,u=void 0===a?{}:a,s=e.spacing,l=e.typography,f=void 0===l?{}:l,h=c(e,["breakpoints","mixins","palette","spacing","typography"]),d=zn(u),p=function(e){var t=e.values,n=void 0===t?{xs:0,sm:600,md:960,lg:1280,xl:1920}:t,r=e.unit,i=void 0===r?"px":r,a=e.step,u=void 0===a?5:a,s=c(e,["values","unit","step"]);function l(e){var t="number"===typeof n[e]?n[e]:e;return"@media (min-width:".concat(t).concat(i,")")}function f(e,t){var r=xn.indexOf(t);return r===xn.length-1?l(e):"@media (min-width:".concat("number"===typeof n[e]?n[e]:e).concat(i,") and ")+"(max-width:".concat((-1!==r&&"number"===typeof n[xn[r+1]]?n[xn[r+1]]:t)-u/100).concat(i,")")}return o({keys:xn,values:n,up:l,down:function(e){var t=xn.indexOf(e)+1,r=n[xn[t]];return t===xn.length?l("xs"):"@media (max-width:".concat(("number"===typeof r&&t>0?r:e)-u/100).concat(i,")")},between:f,only:function(e){return f(e,e)},width:function(e){return n[e]}},s)}(n),v=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8;if(e.mui)return e;var t=or({spacing:e}),n=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return 0===n.length?t(1):1===n.length?t(n[0]):n.map((function(e){if("string"===typeof e)return e;var n=t(e);return"number"===typeof n?"".concat(n,"px"):n})).join(" ")};return Object.defineProperty(n,"unit",{get:function(){return e}}),n.mui=!0,n}(s),m=yn({breakpoints:p,direction:"ltr",mixins:In(p,v,i),overrides:{},palette:d,props:{},shadows:Qn,typography:Wn(d,f),spacing:v,shape:Yn,transitions:hr,zIndex:dr},h),y=arguments.length,g=new Array(y>1?y-1:0),k=1;k<y;k++)g[k-1]=arguments[k];return m=g.reduce((function(e,t){return yn(e,t)}),m)}var vr=pr();var mr=function(e,t){return wn(e,o({defaultTheme:vr},t))},yr=u.forwardRef((function(e,t){var n=e.children,r=e.classes,a=e.className,s=e.color,l=void 0===s?"inherit":s,h=e.component,d=void 0===h?"svg":h,p=e.fontSize,v=void 0===p?"medium":p,m=e.htmlColor,y=e.titleAccess,g=e.viewBox,k=void 0===g?"0 0 24 24":g,b=c(e,["children","classes","className","color","component","fontSize","htmlColor","titleAccess","viewBox"]);return u.createElement(d,o({className:f(r.root,a,"inherit"!==l&&r["color".concat(i(l))],"default"!==v&&"medium"!==v&&r["fontSize".concat(i(v))]),focusable:"false",viewBox:k,color:m,"aria-hidden":!y||void 0,role:y?"img":void 0,ref:t},b),n,y?u.createElement("title",null,y):null)}));yr.muiName="SvgIcon";var gr=mr((function(e){return{root:{userSelect:"none",width:"1em",height:"1em",display:"inline-block",fill:"currentColor",flexShrink:0,fontSize:e.typography.pxToRem(24),transition:e.transitions.create("fill",{duration:e.transitions.duration.shorter})},colorPrimary:{color:e.palette.primary.main},colorSecondary:{color:e.palette.secondary.main},colorAction:{color:e.palette.action.active},colorError:{color:e.palette.error.main},colorDisabled:{color:e.palette.action.disabled},fontSizeInherit:{fontSize:"inherit"},fontSizeSmall:{fontSize:e.typography.pxToRem(20)},fontSizeLarge:{fontSize:e.typography.pxToRem(35)}}}),{name:"MuiSvgIcon"})(yr);function kr(e,t){var n=function(t,n){return u.createElement(gr,o({ref:n},t),e)};return n.muiName=gr.muiName,u.memo(u.forwardRef(n))}function br(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:166;function r(){for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];var o=this;clearTimeout(t),t=setTimeout((function(){e.apply(o,i)}),n)}return r.clear=function(){clearTimeout(t)},r}function wr(e,t){return function(){return null}}function xr(e,t){return u.isValidElement(e)&&-1!==t.indexOf(e.type.muiName)}function _r(e){return e&&e.ownerDocument||document}function Ir(e){return _r(e).defaultView||window}function Sr(e){return function(){return null}}function Er(e,t){"function"===typeof e?e(t):e&&(e.current=t)}function Tr(e,t,n,r,i){return null}function Cr(e){var t=e.controlled,n=e.default,r=(e.name,e.state,u.useRef(void 0!==t).current),i=u.useState(n),a=i[0],o=i[1];return[r?t:a,u.useCallback((function(e){r||o(e)}),[])]}var Ar="undefined"!==typeof window?u.useLayoutEffect:u.useEffect;function Nr(e){var t=u.useRef(e);return Ar((function(){t.current=e})),u.useCallback((function(){return t.current.apply(void 0,arguments)}),[])}function Rr(e,t){return u.useMemo((function(){return null==e&&null==t?null:function(n){Er(e,n),Er(t,n)}}),[e,t])}function Pr(e){var t=u.useState(e),n=t[0],r=t[1],i=e||n;return u.useEffect((function(){null==n&&r("mui-".concat(Math.round(1e5*Math.random())))}),[n]),i}var Or=n(164),Dr=!0,Lr=!1,Mr=null,Fr={text:!0,search:!0,url:!0,tel:!0,email:!0,password:!0,number:!0,date:!0,month:!0,week:!0,time:!0,datetime:!0,"datetime-local":!0};function jr(e){e.metaKey||e.altKey||e.ctrlKey||(Dr=!0)}function Ur(){Dr=!1}function Vr(){"hidden"===this.visibilityState&&Lr&&(Dr=!0)}function Zr(e){var t=e.target;try{return t.matches(":focus-visible")}catch(n){}return Dr||function(e){var t=e.type,n=e.tagName;return!("INPUT"!==n||!Fr[t]||e.readOnly)||"TEXTAREA"===n&&!e.readOnly||!!e.isContentEditable}(t)}function zr(){Lr=!0,window.clearTimeout(Mr),Mr=window.setTimeout((function(){Lr=!1}),100)}function Br(){return{isFocusVisible:Zr,onBlurVisible:zr,ref:u.useCallback((function(e){var t,n=Or.findDOMNode(e);null!=n&&((t=n.ownerDocument).addEventListener("keydown",jr,!0),t.addEventListener("mousedown",Ur,!0),t.addEventListener("pointerdown",Ur,!0),t.addEventListener("touchstart",Ur,!0),t.addEventListener("visibilitychange",Vr,!0))}),[])}}},880:function(e,t,n){"use strict";var r=n(836),i=n(263);t.Z=void 0;var a=i(n(791)),o=(0,r(n(894)).default)(a.createElement("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"}),"Search");t.Z=o},86:function(e,t,n){"use strict";var r=n(836),i=n(263);t.Z=void 0;var a=i(n(791)),o=(0,r(n(894)).default)(a.createElement("path",{d:"M7 18c-1.1 0-1.99.9-1.99 2S5.9 22 7 22s2-.9 2-2-.9-2-2-2zM1 2v2h2l3.6 7.59-1.35 2.45c-.16.28-.25.61-.25.96 0 1.1.9 2 2 2h12v-2H7.42c-.14 0-.25-.11-.25-.25l.03-.12.9-1.63h7.45c.75 0 1.41-.41 1.75-1.03l3.58-6.49c.08-.14.12-.31.12-.48 0-.55-.45-1-1-1H5.21l-.94-2H1zm16 16c-1.1 0-1.99.9-1.99 2s.89 2 1.99 2 2-.9 2-2-.9-2-2-2z"}),"ShoppingCart");t.Z=o},894:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return r.createSvgIcon}});var r=n(438)},110:function(e,t,n){"use strict";var r=n(309),i={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},a={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},o={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},u={};function s(e){return r.isMemo(e)?o:u[e.$$typeof]||i}u[r.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},u[r.Memo]=o;var c=Object.defineProperty,l=Object.getOwnPropertyNames,f=Object.getOwnPropertySymbols,h=Object.getOwnPropertyDescriptor,d=Object.getPrototypeOf,p=Object.prototype;e.exports=function e(t,n,r){if("string"!==typeof n){if(p){var i=d(n);i&&i!==p&&e(t,i,r)}var o=l(n);f&&(o=o.concat(f(n)));for(var u=s(t),v=s(n),m=0;m<o.length;++m){var y=o[m];if(!a[y]&&(!r||!r[y])&&(!v||!v[y])&&(!u||!u[y])){var g=h(n,y);try{c(t,y,g)}catch(k){}}}}return t}},746:function(e,t){"use strict";var n="function"===typeof Symbol&&Symbol.for,r=n?Symbol.for("react.element"):60103,i=n?Symbol.for("react.portal"):60106,a=n?Symbol.for("react.fragment"):60107,o=n?Symbol.for("react.strict_mode"):60108,u=n?Symbol.for("react.profiler"):60114,s=n?Symbol.for("react.provider"):60109,c=n?Symbol.for("react.context"):60110,l=n?Symbol.for("react.async_mode"):60111,f=n?Symbol.for("react.concurrent_mode"):60111,h=n?Symbol.for("react.forward_ref"):60112,d=n?Symbol.for("react.suspense"):60113,p=n?Symbol.for("react.suspense_list"):60120,v=n?Symbol.for("react.memo"):60115,m=n?Symbol.for("react.lazy"):60116,y=n?Symbol.for("react.block"):60121,g=n?Symbol.for("react.fundamental"):60117,k=n?Symbol.for("react.responder"):60118,b=n?Symbol.for("react.scope"):60119;function w(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case l:case f:case a:case u:case o:case d:return e;default:switch(e=e&&e.$$typeof){case c:case h:case m:case v:case s:return e;default:return t}}case i:return t}}}function x(e){return w(e)===f}t.AsyncMode=l,t.ConcurrentMode=f,t.ContextConsumer=c,t.ContextProvider=s,t.Element=r,t.ForwardRef=h,t.Fragment=a,t.Lazy=m,t.Memo=v,t.Portal=i,t.Profiler=u,t.StrictMode=o,t.Suspense=d,t.isAsyncMode=function(e){return x(e)||w(e)===l},t.isConcurrentMode=x,t.isContextConsumer=function(e){return w(e)===c},t.isContextProvider=function(e){return w(e)===s},t.isElement=function(e){return"object"===typeof e&&null!==e&&e.$$typeof===r},t.isForwardRef=function(e){return w(e)===h},t.isFragment=function(e){return w(e)===a},t.isLazy=function(e){return w(e)===m},t.isMemo=function(e){return w(e)===v},t.isPortal=function(e){return w(e)===i},t.isProfiler=function(e){return w(e)===u},t.isStrictMode=function(e){return w(e)===o},t.isSuspense=function(e){return w(e)===d},t.isValidElementType=function(e){return"string"===typeof e||"function"===typeof e||e===a||e===f||e===u||e===o||e===d||e===p||"object"===typeof e&&null!==e&&(e.$$typeof===m||e.$$typeof===v||e.$$typeof===s||e.$$typeof===c||e.$$typeof===h||e.$$typeof===g||e.$$typeof===k||e.$$typeof===b||e.$$typeof===y)},t.typeOf=w},309:function(e,t,n){"use strict";e.exports=n(746)},725:function(e){"use strict";var t=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable;e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(e){r[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(i){return!1}}()?Object.assign:function(e,i){for(var a,o,u=function(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}(e),s=1;s<arguments.length;s++){for(var c in a=Object(arguments[s]))n.call(a,c)&&(u[c]=a[c]);if(t){o=t(a);for(var l=0;l<o.length;l++)r.call(a,o[l])&&(u[o[l]]=a[o[l]])}}return u}},888:function(e,t,n){"use strict";var r=n(47);function i(){}function a(){}a.resetWarningCache=i,e.exports=function(){function e(e,t,n,i,a,o){if(o!==r){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:a,resetWarningCache:i};return n.PropTypes=n,n}},7:function(e,t,n){e.exports=n(888)()},47:function(e){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},482:function(e,t,n){"use strict";var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=s(n(7)),o=s(n(791)),u=n(432);function s(e){return e&&e.__esModule?e:{default:e}}var c={thousandSeparator:a.default.oneOfType([a.default.string,a.default.oneOf([!0])]),thousandSpacing:a.default.oneOf(["2","2s","3","4"]),decimalSeparator:a.default.string,decimalScale:a.default.number,fixedDecimalScale:a.default.bool,displayType:a.default.oneOf(["input","text"]),prefix:a.default.string,suffix:a.default.string,format:a.default.oneOfType([a.default.string,a.default.func]),removeFormatting:a.default.func,mask:a.default.oneOfType([a.default.string,a.default.arrayOf(a.default.string)]),value:a.default.oneOfType([a.default.number,a.default.string]),isNumericString:a.default.bool,customInput:a.default.func,allowNegative:a.default.bool,onValueChange:a.default.func,onKeyDown:a.default.func,onMouseUp:a.default.func,onChange:a.default.func,onFocus:a.default.func,onBlur:a.default.func,type:a.default.oneOf(["text","tel"]),isAllowed:a.default.func,renderText:a.default.func},l={displayType:"input",decimalSeparator:".",thousandSpacing:"3",fixedDecimalScale:!1,prefix:"",suffix:"",allowNegative:!0,isNumericString:!1,type:"text",onValueChange:u.noop,onChange:u.noop,onKeyDown:u.noop,onMouseUp:u.noop,onFocus:u.noop,onBlur:u.noop,isAllowed:u.returnTrue},f=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));n.validateProps();var r=n.formatValueProp();return n.state={value:r,numAsString:n.removeFormatting(r)},n.onChange=n.onChange.bind(n),n.onKeyDown=n.onKeyDown.bind(n),n.onMouseUp=n.onMouseUp.bind(n),n.onFocus=n.onFocus.bind(n),n.onBlur=n.onBlur.bind(n),n}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),i(t,[{key:"componentDidUpdate",value:function(e){this.updateValueIfRequired(e)}},{key:"updateValueIfRequired",value:function(e){var t=this.props,n=this.state;if(e!==t){this.validateProps();var r=n.value,i=n.numAsString||"",a=void 0===t.value?this.formatNumString(i):this.formatValueProp();a!==r&&this.setState({value:a,numAsString:this.removeFormatting(a)})}}},{key:"getFloatString",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=this.getSeparators().decimalSeparator,n=this.getNumberRegex(!0),r="-"===e[0];r&&(e=e.replace("-",""));var i=(e=(e.match(n)||[]).join("").replace(t,".")).indexOf(".");return-1!==i&&(e=e.substring(0,i)+"."+e.substring(i+1,e.length).replace(new RegExp((0,u.escapeRegExp)(t),"g"),"")),r&&(e="-"+e),e}},{key:"getNumberRegex",value:function(e,t){var n=this.props,r=n.format,i=n.decimalScale,a=this.getSeparators().decimalSeparator;return new RegExp("\\d"+(!a||0===i||t||r?"":"|"+(0,u.escapeRegExp)(a)),e?"g":void 0)}},{key:"getSeparators",value:function(){var e=this.props,t=e.decimalSeparator,n=e.thousandSpacing,r=this.props.thousandSeparator;return!0===r&&(r=","),{decimalSeparator:t,thousandSeparator:r,thousandSpacing:n}}},{key:"getMaskAtIndex",value:function(e){var t=this.props.mask,n=void 0===t?" ":t;return"string"===typeof n?n:n[e]||" "}},{key:"validateProps",value:function(){var e=this.props.mask,t=this.getSeparators(),n=t.decimalSeparator,r=t.thousandSeparator;if(n===r)throw new Error("\n          Decimal separator can't be same as thousand separator.\n\n          thousandSeparator: "+r+' (thousandSeparator = {true} is same as thousandSeparator = ",")\n          decimalSeparator: '+n+" (default value for decimalSeparator is .)\n       ");if(e&&("string"===e?e:e.toString()).match(/\d/g))throw new Error("\n          Mask "+e+" should not contain numeric character;\n        ")}},{key:"splitDecimal",value:function(e){var t=this.props.allowNegative,n="-"===e[0],r=n&&t,i=(e=e.replace("-","")).split(".");return{beforeDecimal:i[0],afterDecimal:i[1]||"",hasNagation:n,addNegation:r}}},{key:"setPatchedCaretPosition",value:function(e,t,n){(0,u.setCaretPosition)(e,t),setTimeout((function(){e.value===n&&(0,u.setCaretPosition)(e,t)}),0)}},{key:"correctCaretPosition",value:function(e,t,n){var r=this.props,i=r.prefix,a=r.suffix,o=r.format;if(!o){var s="-"===e[0];return Math.min(Math.max(t,i.length+(s?1:0)),e.length-a.length)}if("function"===typeof o)return t;if("#"===o[t]&&(0,u.charIsNumber)(e[t]))return t;if("#"===o[t-1]&&(0,u.charIsNumber)(e[t-1]))return t;var c=o.indexOf("#"),l=o.lastIndexOf("#");t=Math.min(Math.max(t,c),l+1);for(var f=o.substring(t,o.length).indexOf("#"),h=t,d=t+(-1===f?0:f);h>c&&("#"!==o[h]||!(0,u.charIsNumber)(e[h]));)h-=1;return!(0,u.charIsNumber)(e[d])||"left"===n&&t!==c||t-h<d-t?h+1:d}},{key:"getCaretPosition",value:function(e,t,n){var r=this.props.format,i=this.state.value,a=this.getNumberRegex(!0),o=(e.match(a)||[]).join(""),u=(t.match(a)||[]).join(""),s=void 0,c=void 0;for(s=0,c=0;c<n;c++){var l=e[c]||"",f=t[s]||"";if((l.match(a)||l===f)&&("0"!==l||!f.match(a)||"0"===f||o.length===u.length)){for(;l!==t[s]&&s<t.length;)s++;s++}}return"string"!==typeof r||i||(s=t.length),s=this.correctCaretPosition(t,s)}},{key:"removePrefixAndSuffix",value:function(e){var t=this.props,n=t.format,r=t.prefix,i=t.suffix;if(!n&&e){var a="-"===e[0];a&&(e=e.substring(1,e.length));var o=(e=r&&0===e.indexOf(r)?e.substring(r.length,e.length):e).lastIndexOf(i);e=i&&-1!==o&&o===e.length-i.length?e.substring(0,o):e,a&&(e="-"+e)}return e}},{key:"removePatternFormatting",value:function(e){for(var t=this.props.format.split("#").filter((function(e){return""!==e})),n=0,r="",i=0,a=t.length;i<=a;i++){var o=t[i]||"",u=i===a?e.length:e.indexOf(o,n);if(-1===u){r=e;break}r+=e.substring(n,u),n=u+o.length}return(r.match(/\d/g)||[]).join("")}},{key:"removeFormatting",value:function(e){var t=this.props,n=t.format,r=t.removeFormatting;return e?(n?e="string"===typeof n?this.removePatternFormatting(e):"function"===typeof r?r(e):(e.match(/\d/g)||[]).join(""):(e=this.removePrefixAndSuffix(e),e=this.getFloatString(e)),e):e}},{key:"formatWithPattern",value:function(e){for(var t=this.props.format,n=0,r=t.split(""),i=0,a=t.length;i<a;i++)"#"===t[i]&&(r[i]=e[n]||this.getMaskAtIndex(n),n+=1);return r.join("")}},{key:"formatThousand",value:function(e,t,n){var r=void 0;switch(n){case u.thousandGroupSpacing.two:r=/(\d)(?=(\d{2})+(?!\d))/g;break;case u.thousandGroupSpacing.twoScaled:r=/(\d)(?=(((\d{2})+)(\d{1})(?!\d)))/g;break;case u.thousandGroupSpacing.four:r=/(\d)(?=(\d{4})+(?!\d))/g;break;default:r=/(\d)(?=(\d{3})+(?!\d))/g}return e.replace(r,"$1"+t)}},{key:"formatAsNumber",value:function(e){var t=this.props,n=t.decimalScale,r=t.fixedDecimalScale,i=t.prefix,a=t.suffix,o=this.getSeparators(),s=o.thousandSeparator,c=o.decimalSeparator,l=o.thousandSpacing,f=-1!==e.indexOf(".")||n&&r,h=this.splitDecimal(e),d=h.beforeDecimal,p=h.afterDecimal,v=h.addNegation;return void 0!==n&&(p=(0,u.limitToScale)(p,n,r)),s&&(d=this.formatThousand(d,s,l)),i&&(d=i+d),a&&(p+=a),v&&(d="-"+d),e=d+(f&&c||"")+p}},{key:"formatNumString",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=this.props.format,n=e;return""===e?n="":"-"!==e||t?n="string"===typeof t?this.formatWithPattern(n):"function"===typeof t?t(n):this.formatAsNumber(n):(n="-",e=""),n}},{key:"formatValueProp",value:function(){var e=this.props,t=e.format,n=e.decimalScale,r=e.fixedDecimalScale,i=this.props,a=i.value,o=i.isNumericString;return void 0===a?"":("number"===typeof a&&(a=a.toString(),o=!0),o&&!t&&"number"===typeof n&&(a=(0,u.roundToPrecision)(a,n,r)),o?this.formatNumString(a):this.formatInput(a))}},{key:"formatNegation",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=this.props.allowNegative,n=new RegExp("(-)"),r=new RegExp("(-)(.)*(-)"),i=n.test(e),a=r.test(e);return e=e.replace(/-/g,""),i&&!a&&t&&(e="-"+e),e}},{key:"formatInput",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return this.props.format||(e=this.formatNegation(e)),e=this.removeFormatting(e),this.formatNumString(e)}},{key:"isCharacterAFormat",value:function(e,t){var n=this.props,r=n.format,i=n.prefix,a=n.suffix,o=n.decimalScale,u=n.fixedDecimalScale,s=this.getSeparators().decimalSeparator;return"string"===typeof r&&"#"!==r[e]||!(r||!(e<i.length||e>=t.length-a.length||o&&u&&t[e]===s))}},{key:"checkIfFormatGotDeleted",value:function(e,t,n){for(var r=e;r<t;r++)if(this.isCharacterAFormat(r,n))return!0;return!1}},{key:"correctInputValue",value:function(e,t,n){var r=this.props.format,i=this.state.numAsString||"";if(n.length>=t.length||!n.length)return n;var a=e,o=(0,u.splitString)(t,e),s=(0,u.splitString)(n,e),c=o[1].lastIndexOf(s[1]),l=a+(-1!==c?o[1].substring(0,c):"").length;if(this.checkIfFormatGotDeleted(a,l,t)&&(n=t),!r){var f=this.removeFormatting(n),h=this.splitDecimal(f),d=h.beforeDecimal,p=h.afterDecimal,v=h.addNegation;if(f.length<i.length&&""===d&&!parseFloat(p))return v?"-":""}return n}},{key:"onChange",value:function(e){e.persist();var t=e.target,n=t.value,r=this.state,i=this.props,a=i.isAllowed,o=r.value||"",u=Math.max(t.selectionStart,t.selectionEnd);n=this.correctInputValue(u,o,n);var s=this.formatInput(n)||"",c=this.removeFormatting(s),l={formattedValue:s,value:c,floatValue:parseFloat(c)};a(l)||(s=o),t.value=s;var f=this.getCaretPosition(n,s,u);this.setPatchedCaretPosition(t,f,s),s!==o?this.setState({value:s,numAsString:c},(function(){i.onValueChange(l),i.onChange(e)})):i.onChange(e)}},{key:"onBlur",value:function(e){var t=this.props,n=this.state,r=t.format,i=t.onBlur,a=n.numAsString,o=n.value;if(!r){a=(0,u.fixLeadingZero)(a);var s=this.formatNumString(a),c={formattedValue:s,value:a,floatValue:parseFloat(a)};if(s!==o)return e.persist(),void this.setState({value:s,numAsString:a},(function(){t.onValueChange(c),i(e)}))}i(e)}},{key:"onKeyDown",value:function(e){var t=e.target,n=e.key,r=t.selectionEnd,i=t.value,a=t.selectionStart,o=void 0,u=this.props,s=u.decimalScale,c=u.fixedDecimalScale,l=u.prefix,f=u.suffix,h=u.format,d=u.onKeyDown,p=void 0!==s&&c,v=this.getNumberRegex(!1,p),m=new RegExp("-"),y="string"===typeof h;if("ArrowLeft"===n||"Backspace"===n?o=a-1:"ArrowRight"===n?o=a+1:"Delete"===n&&(o=a),void 0!==o&&a===r){var g=o,k=y?h.indexOf("#"):l.length,b=y?h.lastIndexOf("#")+1:i.length-f.length;if("ArrowLeft"===n||"ArrowRight"===n){var w="ArrowLeft"===n?"left":"right";g=this.correctCaretPosition(i,o,w)}else if("Delete"!==n||v.test(i[o])||m.test(i[o])){if("Backspace"===n&&!v.test(i[o])&&!m.test(i[o])){for(;!v.test(i[g-1])&&g>k;)g--;g=this.correctCaretPosition(i,g,"left")}}else for(;!v.test(i[g])&&g<b;)g++;(g!==o||o<k||o>b)&&(e.preventDefault(),this.setPatchedCaretPosition(t,g,i)),e.isUnitTestRun&&this.setPatchedCaretPosition(t,g,i),this.props.onKeyDown(e)}else d(e)}},{key:"onMouseUp",value:function(e){var t=e.target,n=t.selectionStart,r=t.selectionEnd,i=t.value;if(n===r){var a=this.correctCaretPosition(i,n);a!==n&&this.setPatchedCaretPosition(t,a,i)}this.props.onMouseUp(e)}},{key:"onFocus",value:function(e){var t=this;e.persist(),setTimeout((function(){var n=e.target,r=n.selectionStart,i=n.value,a=t.correctCaretPosition(i,r);a!==r&&t.setPatchedCaretPosition(n,a,i),t.props.onFocus(e)}))}},{key:"render",value:function(){var e=this.props,t=e.type,n=e.displayType,i=e.customInput,a=e.renderText,s=this.state.value,l=(0,u.omit)(this.props,c),f=r({},l,{type:t,value:s,onChange:this.onChange,onKeyDown:this.onKeyDown,onMouseUp:this.onMouseUp,onFocus:this.onFocus,onBlur:this.onBlur});if("text"===n)return a?a(s)||null:o.default.createElement("span",l,s);if(i){var h=i;return o.default.createElement(h,f)}return o.default.createElement("input",f)}}]),t}(o.default.Component);f.propTypes=c,f.defaultProps=l,e.exports=f},432:function(e,t){"use strict";function n(e,t,n){for(var r="",i=n?"0":"",a=0;a<=t-1;a++)r+=e[a]||i;return r}Object.defineProperty(t,"__esModule",{value:!0}),t.noop=function(){},t.returnTrue=function(){return!0},t.charIsNumber=function(e){return!!(e||"").match(/\d/)},t.escapeRegExp=function(e){return e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},t.fixLeadingZero=function(e){if(!e)return e;var t="-"===e[0];t&&(e=e.substring(1,e.length));var n=e.split("."),r=n[0].replace(/^0+/,"")||"0",i=n[1]||"";return(t?"-":"")+r+(i?"."+i:"")},t.splitString=function(e,t){return[e.substring(0,t),e.substring(t)]},t.limitToScale=n,t.roundToPrecision=function(e,t,r){var i=e.split("."),a=parseFloat("0."+(i[1]||"0")).toFixed(t).split("."),o=i[0].split("").reverse().reduce((function(e,t,n){return e.length>n?(Number(e[0])+Number(t)).toString()+e.substring(1,e.length):t+e}),a[0]),u=n(a[1]||"",(i[1]||"").length,r);return o+(u?"."+u:"")},t.omit=function(e,t){var n={};return Object.keys(e).forEach((function(r){t[r]||(n[r]=e[r])})),n},t.setCaretPosition=function(e,t){if(e.value=e.value,null!==e){if(e.createTextRange){var n=e.createTextRange();return n.move("character",t),n.select(),!0}return e.selectionStart||0===e.selectionStart?(e.focus(),e.setSelectionRange(t,t),!0):(e.focus(),!1)}};t.thousandGroupSpacing={two:"2",twoScaled:"2s",three:"3",four:"4"}},463:function(e,t,n){"use strict";var r=n(791),i=n(725),a=n(296);function o(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!r)throw Error(o(227));var u=new Set,s={};function c(e,t){l(e,t),l(e+"Capture",t)}function l(e,t){for(s[e]=t,e=0;e<t.length;e++)u.add(t[e])}var f=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,d=Object.prototype.hasOwnProperty,p={},v={};function m(e,t,n,r,i,a,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=o}var y={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){y[e]=new m(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];y[t]=new m(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){y[e]=new m(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){y[e]=new m(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){y[e]=new m(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){y[e]=new m(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){y[e]=new m(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){y[e]=new m(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){y[e]=new m(e,5,!1,e.toLowerCase(),null,!1,!1)}));var g=/[\-:]([a-z])/g;function k(e){return e[1].toUpperCase()}function b(e,t,n,r){var i=y.hasOwnProperty(t)?y[t]:null;(null!==i?0===i.type:!r&&(2<t.length&&("o"===t[0]||"O"===t[0])&&("n"===t[1]||"N"===t[1])))||(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!d.call(v,e)||!d.call(p,e)&&(h.test(e)?v[e]=!0:(p[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(g,k);y[t]=new m(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(g,k);y[t]=new m(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(g,k);y[t]=new m(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){y[e]=new m(e,1,!1,e.toLowerCase(),null,!1,!1)})),y.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){y[e]=new m(e,1,!1,e.toLowerCase(),null,!0,!0)}));var w=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,x=60103,_=60106,I=60107,S=60108,E=60114,T=60109,C=60110,A=60112,N=60113,R=60120,P=60115,O=60116,D=60121,L=60128,M=60129,F=60130,j=60131;if("function"===typeof Symbol&&Symbol.for){var U=Symbol.for;x=U("react.element"),_=U("react.portal"),I=U("react.fragment"),S=U("react.strict_mode"),E=U("react.profiler"),T=U("react.provider"),C=U("react.context"),A=U("react.forward_ref"),N=U("react.suspense"),R=U("react.suspense_list"),P=U("react.memo"),O=U("react.lazy"),D=U("react.block"),U("react.scope"),L=U("react.opaque.id"),M=U("react.debug_trace_mode"),F=U("react.offscreen"),j=U("react.legacy_hidden")}var V,Z="function"===typeof Symbol&&Symbol.iterator;function z(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=Z&&e[Z]||e["@@iterator"])?e:null}function B(e){if(void 0===V)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);V=t&&t[1]||""}return"\n"+V+e}var q=!1;function G(e,t){if(!e||q)return"";q=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(s){var r=s}Reflect.construct(e,[],t)}else{try{t.call()}catch(s){r=s}e.call(t.prototype)}else{try{throw Error()}catch(s){r=s}e()}}catch(s){if(s&&r&&"string"===typeof s.stack){for(var i=s.stack.split("\n"),a=r.stack.split("\n"),o=i.length-1,u=a.length-1;1<=o&&0<=u&&i[o]!==a[u];)u--;for(;1<=o&&0<=u;o--,u--)if(i[o]!==a[u]){if(1!==o||1!==u)do{if(o--,0>--u||i[o]!==a[u])return"\n"+i[o].replace(" at new "," at ")}while(1<=o&&0<=u);break}}}finally{q=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?B(e):""}function K(e){switch(e.tag){case 5:return B(e.type);case 16:return B("Lazy");case 13:return B("Suspense");case 19:return B("SuspenseList");case 0:case 2:case 15:return e=G(e.type,!1);case 11:return e=G(e.type.render,!1);case 22:return e=G(e.type._render,!1);case 1:return e=G(e.type,!0);default:return""}}function W(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case I:return"Fragment";case _:return"Portal";case E:return"Profiler";case S:return"StrictMode";case N:return"Suspense";case R:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case C:return(e.displayName||"Context")+".Consumer";case T:return(e._context.displayName||"Context")+".Provider";case A:var t=e.render;return t=t.displayName||t.name||"",e.displayName||(""!==t?"ForwardRef("+t+")":"ForwardRef");case P:return W(e.type);case D:return W(e._render);case O:t=e._payload,e=e._init;try{return W(e(t))}catch(n){}}return null}function H(e){switch(typeof e){case"boolean":case"number":case"object":case"string":case"undefined":return e;default:return""}}function Q(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function Y(e){e._valueTracker||(e._valueTracker=function(e){var t=Q(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function $(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=Q(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function X(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function J(e,t){var n=t.checked;return i({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function ee(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=H(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function te(e,t){null!=(t=t.checked)&&b(e,"checked",t,!1)}function ne(e,t){te(e,t);var n=H(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ie(e,t.type,n):t.hasOwnProperty("defaultValue")&&ie(e,t.type,H(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function re(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ie(e,t,n){"number"===t&&X(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}function ae(e,t){return e=i({children:void 0},t),(t=function(e){var t="";return r.Children.forEach(e,(function(e){null!=e&&(t+=e)})),t}(t.children))&&(e.children=t),e}function oe(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+H(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function ue(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(o(91));return i({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function se(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(o(92));if(Array.isArray(n)){if(!(1>=n.length))throw Error(o(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:H(n)}}function ce(e,t){var n=H(t.value),r=H(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function le(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}var fe={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg"};function he(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function de(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?he(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var pe,ve,me=(ve=function(e,t){if(e.namespaceURI!==fe.svg||"innerHTML"in e)e.innerHTML=t;else{for((pe=pe||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=pe.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return ve(e,t)}))}:ve);function ye(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var ge={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ke=["Webkit","ms","Moz","O"];function be(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||ge.hasOwnProperty(e)&&ge[e]?(""+t).trim():t+"px"}function we(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=be(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(ge).forEach((function(e){ke.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),ge[t]=ge[e]}))}));var xe=i({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function _e(e,t){if(t){if(xe[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(o(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(o(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(o(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(o(62))}}function Ie(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function Se(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Ee=null,Te=null,Ce=null;function Ae(e){if(e=ni(e)){if("function"!==typeof Ee)throw Error(o(280));var t=e.stateNode;t&&(t=ii(t),Ee(e.stateNode,e.type,t))}}function Ne(e){Te?Ce?Ce.push(e):Ce=[e]:Te=e}function Re(){if(Te){var e=Te,t=Ce;if(Ce=Te=null,Ae(e),t)for(e=0;e<t.length;e++)Ae(t[e])}}function Pe(e,t){return e(t)}function Oe(e,t,n,r,i){return e(t,n,r,i)}function De(){}var Le=Pe,Me=!1,Fe=!1;function je(){null===Te&&null===Ce||(De(),Re())}function Ue(e,t){var n=e.stateNode;if(null===n)return null;var r=ii(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(o(231,t,typeof n));return n}var Ve=!1;if(f)try{var Ze={};Object.defineProperty(Ze,"passive",{get:function(){Ve=!0}}),window.addEventListener("test",Ze,Ze),window.removeEventListener("test",Ze,Ze)}catch(ve){Ve=!1}function ze(e,t,n,r,i,a,o,u,s){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(l){this.onError(l)}}var Be=!1,qe=null,Ge=!1,Ke=null,We={onError:function(e){Be=!0,qe=e}};function He(e,t,n,r,i,a,o,u,s){Be=!1,qe=null,ze.apply(We,arguments)}function Qe(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(1026&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function Ye(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function $e(e){if(Qe(e)!==e)throw Error(o(188))}function Xe(e){if(e=function(e){var t=e.alternate;if(!t){if(null===(t=Qe(e)))throw Error(o(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var a=i.alternate;if(null===a){if(null!==(r=i.return)){n=r;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===n)return $e(i),e;if(a===r)return $e(i),t;a=a.sibling}throw Error(o(188))}if(n.return!==r.return)n=i,r=a;else{for(var u=!1,s=i.child;s;){if(s===n){u=!0,n=i,r=a;break}if(s===r){u=!0,r=i,n=a;break}s=s.sibling}if(!u){for(s=a.child;s;){if(s===n){u=!0,n=a,r=i;break}if(s===r){u=!0,r=a,n=i;break}s=s.sibling}if(!u)throw Error(o(189))}}if(n.alternate!==r)throw Error(o(190))}if(3!==n.tag)throw Error(o(188));return n.stateNode.current===n?e:t}(e),!e)return null;for(var t=e;;){if(5===t.tag||6===t.tag)return t;if(t.child)t.child.return=t,t=t.child;else{if(t===e)break;for(;!t.sibling;){if(!t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}}return null}function Je(e,t){for(var n=e.alternate;null!==t;){if(t===e||t===n)return!0;t=t.return}return!1}var et,tt,nt,rt,it=!1,at=[],ot=null,ut=null,st=null,ct=new Map,lt=new Map,ft=[],ht="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function dt(e,t,n,r,i){return{blockedOn:e,domEventName:t,eventSystemFlags:16|n,nativeEvent:i,targetContainers:[r]}}function pt(e,t){switch(e){case"focusin":case"focusout":ot=null;break;case"dragenter":case"dragleave":ut=null;break;case"mouseover":case"mouseout":st=null;break;case"pointerover":case"pointerout":ct.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":lt.delete(t.pointerId)}}function vt(e,t,n,r,i,a){return null===e||e.nativeEvent!==a?(e=dt(t,n,r,i,a),null!==t&&(null!==(t=ni(t))&&tt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function mt(e){var t=ti(e.target);if(null!==t){var n=Qe(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=Ye(n)))return e.blockedOn=t,void rt(e.lanePriority,(function(){a.unstable_runWithPriority(e.priority,(function(){nt(n)}))}))}else if(3===t&&n.stateNode.hydrate)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function yt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Xt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=ni(n))&&tt(t),e.blockedOn=n,!1;t.shift()}return!0}function gt(e,t,n){yt(e)&&n.delete(t)}function kt(){for(it=!1;0<at.length;){var e=at[0];if(null!==e.blockedOn){null!==(e=ni(e.blockedOn))&&et(e);break}for(var t=e.targetContainers;0<t.length;){var n=Xt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n){e.blockedOn=n;break}t.shift()}null===e.blockedOn&&at.shift()}null!==ot&&yt(ot)&&(ot=null),null!==ut&&yt(ut)&&(ut=null),null!==st&&yt(st)&&(st=null),ct.forEach(gt),lt.forEach(gt)}function bt(e,t){e.blockedOn===t&&(e.blockedOn=null,it||(it=!0,a.unstable_scheduleCallback(a.unstable_NormalPriority,kt)))}function wt(e){function t(t){return bt(t,e)}if(0<at.length){bt(at[0],e);for(var n=1;n<at.length;n++){var r=at[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==ot&&bt(ot,e),null!==ut&&bt(ut,e),null!==st&&bt(st,e),ct.forEach(t),lt.forEach(t),n=0;n<ft.length;n++)(r=ft[n]).blockedOn===e&&(r.blockedOn=null);for(;0<ft.length&&null===(n=ft[0]).blockedOn;)mt(n),null===n.blockedOn&&ft.shift()}function xt(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var _t={animationend:xt("Animation","AnimationEnd"),animationiteration:xt("Animation","AnimationIteration"),animationstart:xt("Animation","AnimationStart"),transitionend:xt("Transition","TransitionEnd")},It={},St={};function Et(e){if(It[e])return It[e];if(!_t[e])return e;var t,n=_t[e];for(t in n)if(n.hasOwnProperty(t)&&t in St)return It[e]=n[t];return e}f&&(St=document.createElement("div").style,"AnimationEvent"in window||(delete _t.animationend.animation,delete _t.animationiteration.animation,delete _t.animationstart.animation),"TransitionEvent"in window||delete _t.transitionend.transition);var Tt=Et("animationend"),Ct=Et("animationiteration"),At=Et("animationstart"),Nt=Et("transitionend"),Rt=new Map,Pt=new Map,Ot=["abort","abort",Tt,"animationEnd",Ct,"animationIteration",At,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",Nt,"transitionEnd","waiting","waiting"];function Dt(e,t){for(var n=0;n<e.length;n+=2){var r=e[n],i=e[n+1];i="on"+(i[0].toUpperCase()+i.slice(1)),Pt.set(r,t),Rt.set(r,i),c(i,[r])}}(0,a.unstable_now)();var Lt=8;function Mt(e){if(0!==(1&e))return Lt=15,1;if(0!==(2&e))return Lt=14,2;if(0!==(4&e))return Lt=13,4;var t=24&e;return 0!==t?(Lt=12,t):0!==(32&e)?(Lt=11,32):0!==(t=192&e)?(Lt=10,t):0!==(256&e)?(Lt=9,256):0!==(t=3584&e)?(Lt=8,t):0!==(4096&e)?(Lt=7,4096):0!==(t=4186112&e)?(Lt=6,t):0!==(t=62914560&e)?(Lt=5,t):67108864&e?(Lt=4,67108864):0!==(134217728&e)?(Lt=3,134217728):0!==(t=805306368&e)?(Lt=2,t):0!==(1073741824&e)?(Lt=1,1073741824):(Lt=8,e)}function Ft(e,t){var n=e.pendingLanes;if(0===n)return Lt=0;var r=0,i=0,a=e.expiredLanes,o=e.suspendedLanes,u=e.pingedLanes;if(0!==a)r=a,i=Lt=15;else if(0!==(a=134217727&n)){var s=a&~o;0!==s?(r=Mt(s),i=Lt):0!==(u&=a)&&(r=Mt(u),i=Lt)}else 0!==(a=n&~o)?(r=Mt(a),i=Lt):0!==u&&(r=Mt(u),i=Lt);if(0===r)return 0;if(r=n&((0>(r=31-Bt(r))?0:1<<r)<<1)-1,0!==t&&t!==r&&0===(t&o)){if(Mt(t),i<=Lt)return t;Lt=i}if(0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-Bt(t)),r|=e[n],t&=~i;return r}function jt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function Ut(e,t){switch(e){case 15:return 1;case 14:return 2;case 12:return 0===(e=Vt(24&~t))?Ut(10,t):e;case 10:return 0===(e=Vt(192&~t))?Ut(8,t):e;case 8:return 0===(e=Vt(3584&~t))&&(0===(e=Vt(4186112&~t))&&(e=512)),e;case 2:return 0===(t=Vt(805306368&~t))&&(t=268435456),t}throw Error(o(358,e))}function Vt(e){return e&-e}function Zt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function zt(e,t,n){e.pendingLanes|=t;var r=t-1;e.suspendedLanes&=r,e.pingedLanes&=r,(e=e.eventTimes)[t=31-Bt(t)]=n}var Bt=Math.clz32?Math.clz32:function(e){return 0===e?32:31-(qt(e)/Gt|0)|0},qt=Math.log,Gt=Math.LN2;var Kt=a.unstable_UserBlockingPriority,Wt=a.unstable_runWithPriority,Ht=!0;function Qt(e,t,n,r){Me||De();var i=$t,a=Me;Me=!0;try{Oe(i,e,t,n,r)}finally{(Me=a)||je()}}function Yt(e,t,n,r){Wt(Kt,$t.bind(null,e,t,n,r))}function $t(e,t,n,r){var i;if(Ht)if((i=0===(4&t))&&0<at.length&&-1<ht.indexOf(e))e=dt(null,e,t,n,r),at.push(e);else{var a=Xt(e,t,n,r);if(null===a)i&&pt(e,r);else{if(i){if(-1<ht.indexOf(e))return e=dt(a,e,t,n,r),void at.push(e);if(function(e,t,n,r,i){switch(t){case"focusin":return ot=vt(ot,e,t,n,r,i),!0;case"dragenter":return ut=vt(ut,e,t,n,r,i),!0;case"mouseover":return st=vt(st,e,t,n,r,i),!0;case"pointerover":var a=i.pointerId;return ct.set(a,vt(ct.get(a)||null,e,t,n,r,i)),!0;case"gotpointercapture":return a=i.pointerId,lt.set(a,vt(lt.get(a)||null,e,t,n,r,i)),!0}return!1}(a,e,t,n,r))return;pt(e,r)}Dr(e,t,r,null,n)}}}function Xt(e,t,n,r){var i=Se(r);if(null!==(i=ti(i))){var a=Qe(i);if(null===a)i=null;else{var o=a.tag;if(13===o){if(null!==(i=Ye(a)))return i;i=null}else if(3===o){if(a.stateNode.hydrate)return 3===a.tag?a.stateNode.containerInfo:null;i=null}else a!==i&&(i=null)}}return Dr(e,t,r,i,n),null}var Jt=null,en=null,tn=null;function nn(){if(tn)return tn;var e,t,n=en,r=n.length,i="value"in Jt?Jt.value:Jt.textContent,a=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[a-t];t++);return tn=i.slice(e,1<t?1-t:void 0)}function rn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function an(){return!0}function on(){return!1}function un(e){function t(t,n,r,i,a){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?an:on,this.isPropagationStopped=on,this}return i(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=an)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=an)},persist:function(){},isPersistent:an}),t}var sn,cn,ln,fn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},hn=un(fn),dn=i({},fn,{view:0,detail:0}),pn=un(dn),vn=i({},dn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Tn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ln&&(ln&&"mousemove"===e.type?(sn=e.screenX-ln.screenX,cn=e.screenY-ln.screenY):cn=sn=0,ln=e),sn)},movementY:function(e){return"movementY"in e?e.movementY:cn}}),mn=un(vn),yn=un(i({},vn,{dataTransfer:0})),gn=un(i({},dn,{relatedTarget:0})),kn=un(i({},fn,{animationName:0,elapsedTime:0,pseudoElement:0})),bn=i({},fn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),wn=un(bn),xn=un(i({},fn,{data:0})),_n={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},In={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Sn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function En(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Sn[e])&&!!t[e]}function Tn(){return En}var Cn=i({},dn,{key:function(e){if(e.key){var t=_n[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=rn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?In[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Tn,charCode:function(e){return"keypress"===e.type?rn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?rn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),An=un(Cn),Nn=un(i({},vn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Rn=un(i({},dn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Tn})),Pn=un(i({},fn,{propertyName:0,elapsedTime:0,pseudoElement:0})),On=i({},vn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Dn=un(On),Ln=[9,13,27,32],Mn=f&&"CompositionEvent"in window,Fn=null;f&&"documentMode"in document&&(Fn=document.documentMode);var jn=f&&"TextEvent"in window&&!Fn,Un=f&&(!Mn||Fn&&8<Fn&&11>=Fn),Vn=String.fromCharCode(32),Zn=!1;function zn(e,t){switch(e){case"keyup":return-1!==Ln.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Bn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var qn=!1;var Gn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Kn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Gn[e.type]:"textarea"===t}function Wn(e,t,n,r){Ne(r),0<(t=Mr(t,"onChange")).length&&(n=new hn("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Hn=null,Qn=null;function Yn(e){Cr(e,0)}function $n(e){if($(ri(e)))return e}function Xn(e,t){if("change"===e)return t}var Jn=!1;if(f){var er;if(f){var tr="oninput"in document;if(!tr){var nr=document.createElement("div");nr.setAttribute("oninput","return;"),tr="function"===typeof nr.oninput}er=tr}else er=!1;Jn=er&&(!document.documentMode||9<document.documentMode)}function rr(){Hn&&(Hn.detachEvent("onpropertychange",ir),Qn=Hn=null)}function ir(e){if("value"===e.propertyName&&$n(Qn)){var t=[];if(Wn(t,Qn,e,Se(e)),e=Yn,Me)e(t);else{Me=!0;try{Pe(e,t)}finally{Me=!1,je()}}}}function ar(e,t,n){"focusin"===e?(rr(),Qn=n,(Hn=t).attachEvent("onpropertychange",ir)):"focusout"===e&&rr()}function or(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return $n(Qn)}function ur(e,t){if("click"===e)return $n(t)}function sr(e,t){if("input"===e||"change"===e)return $n(t)}var cr="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},lr=Object.prototype.hasOwnProperty;function fr(e,t){if(cr(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++)if(!lr.call(t,n[r])||!cr(e[n[r]],t[n[r]]))return!1;return!0}function hr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function dr(e,t){var n,r=hr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=hr(r)}}function pr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?pr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function vr(){for(var e=window,t=X();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=X((e=t.contentWindow).document)}return t}function mr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var yr=f&&"documentMode"in document&&11>=document.documentMode,gr=null,kr=null,br=null,wr=!1;function xr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;wr||null==gr||gr!==X(r)||("selectionStart"in(r=gr)&&mr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},br&&fr(br,r)||(br=r,0<(r=Mr(kr,"onSelect")).length&&(t=new hn("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=gr)))}Dt("cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focusin focus focusout blur input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0),Dt("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1),Dt(Ot,2);for(var _r="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),Ir=0;Ir<_r.length;Ir++)Pt.set(_r[Ir],0);l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),c("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),c("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),c("onBeforeInput",["compositionend","keypress","textInput","paste"]),c("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Sr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Er=new Set("cancel close invalid load scroll toggle".split(" ").concat(Sr));function Tr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,a,u,s,c){if(He.apply(this,arguments),Be){if(!Be)throw Error(o(198));var l=qe;Be=!1,qe=null,Ge||(Ge=!0,Ke=l)}}(r,t,void 0,e),e.currentTarget=null}function Cr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var o=r.length-1;0<=o;o--){var u=r[o],s=u.instance,c=u.currentTarget;if(u=u.listener,s!==a&&i.isPropagationStopped())break e;Tr(i,u,c),a=s}else for(o=0;o<r.length;o++){if(s=(u=r[o]).instance,c=u.currentTarget,u=u.listener,s!==a&&i.isPropagationStopped())break e;Tr(i,u,c),a=s}}}if(Ge)throw e=Ke,Ge=!1,Ke=null,e}function Ar(e,t){var n=ai(t),r=e+"__bubble";n.has(r)||(Or(t,e,2,!1),n.add(r))}var Nr="_reactListening"+Math.random().toString(36).slice(2);function Rr(e){e[Nr]||(e[Nr]=!0,u.forEach((function(t){Er.has(t)||Pr(t,!1,e,null),Pr(t,!0,e,null)})))}function Pr(e,t,n,r){var i=4<arguments.length&&void 0!==arguments[4]?arguments[4]:0,a=n;if("selectionchange"===e&&9!==n.nodeType&&(a=n.ownerDocument),null!==r&&!t&&Er.has(e)){if("scroll"!==e)return;i|=2,a=r}var o=ai(a),u=e+"__"+(t?"capture":"bubble");o.has(u)||(t&&(i|=4),Or(a,e,i,t),o.add(u))}function Or(e,t,n,r){var i=Pt.get(t);switch(void 0===i?2:i){case 0:i=Qt;break;case 1:i=Yt;break;default:i=$t}n=i.bind(null,t,n,e),i=void 0,!Ve||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Dr(e,t,n,r,i){var a=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var u=r.stateNode.containerInfo;if(u===i||8===u.nodeType&&u.parentNode===i)break;if(4===o)for(o=r.return;null!==o;){var s=o.tag;if((3===s||4===s)&&((s=o.stateNode.containerInfo)===i||8===s.nodeType&&s.parentNode===i))return;o=o.return}for(;null!==u;){if(null===(o=ti(u)))return;if(5===(s=o.tag)||6===s){r=a=o;continue e}u=u.parentNode}}r=r.return}!function(e,t,n){if(Fe)return e(t,n);Fe=!0;try{return Le(e,t,n)}finally{Fe=!1,je()}}((function(){var r=a,i=Se(n),o=[];e:{var u=Rt.get(e);if(void 0!==u){var s=hn,c=e;switch(e){case"keypress":if(0===rn(n))break e;case"keydown":case"keyup":s=An;break;case"focusin":c="focus",s=gn;break;case"focusout":c="blur",s=gn;break;case"beforeblur":case"afterblur":s=gn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":s=mn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":s=yn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":s=Rn;break;case Tt:case Ct:case At:s=kn;break;case Nt:s=Pn;break;case"scroll":s=pn;break;case"wheel":s=Dn;break;case"copy":case"cut":case"paste":s=wn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":s=Nn}var l=0!==(4&t),f=!l&&"scroll"===e,h=l?null!==u?u+"Capture":null:u;l=[];for(var d,p=r;null!==p;){var v=(d=p).stateNode;if(5===d.tag&&null!==v&&(d=v,null!==h&&(null!=(v=Ue(p,h))&&l.push(Lr(p,v,d)))),f)break;p=p.return}0<l.length&&(u=new s(u,c,null,n,i),o.push({event:u,listeners:l}))}}if(0===(7&t)){if(s="mouseout"===e||"pointerout"===e,(!(u="mouseover"===e||"pointerover"===e)||0!==(16&t)||!(c=n.relatedTarget||n.fromElement)||!ti(c)&&!c[Jr])&&(s||u)&&(u=i.window===i?i:(u=i.ownerDocument)?u.defaultView||u.parentWindow:window,s?(s=r,null!==(c=(c=n.relatedTarget||n.toElement)?ti(c):null)&&(c!==(f=Qe(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(s=null,c=r),s!==c)){if(l=mn,v="onMouseLeave",h="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(l=Nn,v="onPointerLeave",h="onPointerEnter",p="pointer"),f=null==s?u:ri(s),d=null==c?u:ri(c),(u=new l(v,p+"leave",s,n,i)).target=f,u.relatedTarget=d,v=null,ti(i)===r&&((l=new l(h,p+"enter",c,n,i)).target=d,l.relatedTarget=f,v=l),f=v,s&&c)e:{for(h=c,p=0,d=l=s;d;d=Fr(d))p++;for(d=0,v=h;v;v=Fr(v))d++;for(;0<p-d;)l=Fr(l),p--;for(;0<d-p;)h=Fr(h),d--;for(;p--;){if(l===h||null!==h&&l===h.alternate)break e;l=Fr(l),h=Fr(h)}l=null}else l=null;null!==s&&jr(o,u,s,l,!1),null!==c&&null!==f&&jr(o,f,c,l,!0)}if("select"===(s=(u=r?ri(r):window).nodeName&&u.nodeName.toLowerCase())||"input"===s&&"file"===u.type)var m=Xn;else if(Kn(u))if(Jn)m=sr;else{m=or;var y=ar}else(s=u.nodeName)&&"input"===s.toLowerCase()&&("checkbox"===u.type||"radio"===u.type)&&(m=ur);switch(m&&(m=m(e,r))?Wn(o,m,n,i):(y&&y(e,u,r),"focusout"===e&&(y=u._wrapperState)&&y.controlled&&"number"===u.type&&ie(u,"number",u.value)),y=r?ri(r):window,e){case"focusin":(Kn(y)||"true"===y.contentEditable)&&(gr=y,kr=r,br=null);break;case"focusout":br=kr=gr=null;break;case"mousedown":wr=!0;break;case"contextmenu":case"mouseup":case"dragend":wr=!1,xr(o,n,i);break;case"selectionchange":if(yr)break;case"keydown":case"keyup":xr(o,n,i)}var g;if(Mn)e:{switch(e){case"compositionstart":var k="onCompositionStart";break e;case"compositionend":k="onCompositionEnd";break e;case"compositionupdate":k="onCompositionUpdate";break e}k=void 0}else qn?zn(e,n)&&(k="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(k="onCompositionStart");k&&(Un&&"ko"!==n.locale&&(qn||"onCompositionStart"!==k?"onCompositionEnd"===k&&qn&&(g=nn()):(en="value"in(Jt=i)?Jt.value:Jt.textContent,qn=!0)),0<(y=Mr(r,k)).length&&(k=new xn(k,e,null,n,i),o.push({event:k,listeners:y}),g?k.data=g:null!==(g=Bn(n))&&(k.data=g))),(g=jn?function(e,t){switch(e){case"compositionend":return Bn(t);case"keypress":return 32!==t.which?null:(Zn=!0,Vn);case"textInput":return(e=t.data)===Vn&&Zn?null:e;default:return null}}(e,n):function(e,t){if(qn)return"compositionend"===e||!Mn&&zn(e,t)?(e=nn(),tn=en=Jt=null,qn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Un&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Mr(r,"onBeforeInput")).length&&(i=new xn("onBeforeInput","beforeinput",null,n,i),o.push({event:i,listeners:r}),i.data=g))}Cr(o,t)}))}function Lr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Mr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,a=i.stateNode;5===i.tag&&null!==a&&(i=a,null!=(a=Ue(e,n))&&r.unshift(Lr(e,a,i)),null!=(a=Ue(e,t))&&r.push(Lr(e,a,i))),e=e.return}return r}function Fr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function jr(e,t,n,r,i){for(var a=t._reactName,o=[];null!==n&&n!==r;){var u=n,s=u.alternate,c=u.stateNode;if(null!==s&&s===r)break;5===u.tag&&null!==c&&(u=c,i?null!=(s=Ue(n,a))&&o.unshift(Lr(n,s,u)):i||null!=(s=Ue(n,a))&&o.push(Lr(n,s,u))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}function Ur(){}var Vr=null,Zr=null;function zr(e,t){switch(e){case"button":case"input":case"select":case"textarea":return!!t.autoFocus}return!1}function Br(e,t){return"textarea"===e||"option"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var qr="function"===typeof setTimeout?setTimeout:void 0,Gr="function"===typeof clearTimeout?clearTimeout:void 0;function Kr(e){1===e.nodeType?e.textContent="":9===e.nodeType&&(null!=(e=e.body)&&(e.textContent=""))}function Wr(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break}return e}function Hr(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var Qr=0;var Yr=Math.random().toString(36).slice(2),$r="__reactFiber$"+Yr,Xr="__reactProps$"+Yr,Jr="__reactContainer$"+Yr,ei="__reactEvents$"+Yr;function ti(e){var t=e[$r];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Jr]||n[$r]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=Hr(e);null!==e;){if(n=e[$r])return n;e=Hr(e)}return t}n=(e=n).parentNode}return null}function ni(e){return!(e=e[$r]||e[Jr])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function ri(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(o(33))}function ii(e){return e[Xr]||null}function ai(e){var t=e[ei];return void 0===t&&(t=e[ei]=new Set),t}var oi=[],ui=-1;function si(e){return{current:e}}function ci(e){0>ui||(e.current=oi[ui],oi[ui]=null,ui--)}function li(e,t){ui++,oi[ui]=e.current,e.current=t}var fi={},hi=si(fi),di=si(!1),pi=fi;function vi(e,t){var n=e.type.contextTypes;if(!n)return fi;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,a={};for(i in n)a[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function mi(e){return null!==(e=e.childContextTypes)&&void 0!==e}function yi(){ci(di),ci(hi)}function gi(e,t,n){if(hi.current!==fi)throw Error(o(168));li(hi,t),li(di,n)}function ki(e,t,n){var r=e.stateNode;if(e=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var a in r=r.getChildContext())if(!(a in e))throw Error(o(108,W(t)||"Unknown",a));return i({},n,r)}function bi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||fi,pi=hi.current,li(hi,e),li(di,di.current),!0}function wi(e,t,n){var r=e.stateNode;if(!r)throw Error(o(169));n?(e=ki(e,t,pi),r.__reactInternalMemoizedMergedChildContext=e,ci(di),ci(hi),li(hi,e)):ci(di),li(di,n)}var xi=null,_i=null,Ii=a.unstable_runWithPriority,Si=a.unstable_scheduleCallback,Ei=a.unstable_cancelCallback,Ti=a.unstable_shouldYield,Ci=a.unstable_requestPaint,Ai=a.unstable_now,Ni=a.unstable_getCurrentPriorityLevel,Ri=a.unstable_ImmediatePriority,Pi=a.unstable_UserBlockingPriority,Oi=a.unstable_NormalPriority,Di=a.unstable_LowPriority,Li=a.unstable_IdlePriority,Mi={},Fi=void 0!==Ci?Ci:function(){},ji=null,Ui=null,Vi=!1,Zi=Ai(),zi=1e4>Zi?Ai:function(){return Ai()-Zi};function Bi(){switch(Ni()){case Ri:return 99;case Pi:return 98;case Oi:return 97;case Di:return 96;case Li:return 95;default:throw Error(o(332))}}function qi(e){switch(e){case 99:return Ri;case 98:return Pi;case 97:return Oi;case 96:return Di;case 95:return Li;default:throw Error(o(332))}}function Gi(e,t){return e=qi(e),Ii(e,t)}function Ki(e,t,n){return e=qi(e),Si(e,t,n)}function Wi(){if(null!==Ui){var e=Ui;Ui=null,Ei(e)}Hi()}function Hi(){if(!Vi&&null!==ji){Vi=!0;var e=0;try{var t=ji;Gi(99,(function(){for(;e<t.length;e++){var n=t[e];do{n=n(!0)}while(null!==n)}})),ji=null}catch(n){throw null!==ji&&(ji=ji.slice(e+1)),Si(Ri,Wi),n}finally{Vi=!1}}}var Qi=w.ReactCurrentBatchConfig;function Yi(e,t){if(e&&e.defaultProps){for(var n in t=i({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var $i=si(null),Xi=null,Ji=null,ea=null;function ta(){ea=Ji=Xi=null}function na(e){var t=$i.current;ci($i),e.type._context._currentValue=t}function ra(e,t){for(;null!==e;){var n=e.alternate;if((e.childLanes&t)===t){if(null===n||(n.childLanes&t)===t)break;n.childLanes|=t}else e.childLanes|=t,null!==n&&(n.childLanes|=t);e=e.return}}function ia(e,t){Xi=e,ea=Ji=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(Mo=!0),e.firstContext=null)}function aa(e,t){if(ea!==e&&!1!==t&&0!==t)if("number"===typeof t&&1073741823!==t||(ea=e,t=1073741823),t={context:e,observedBits:t,next:null},null===Ji){if(null===Xi)throw Error(o(308));Ji=t,Xi.dependencies={lanes:0,firstContext:t,responders:null}}else Ji=Ji.next=t;return e._currentValue}var oa=!1;function ua(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null},effects:null}}function sa(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function ca(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function la(e,t){if(null!==(e=e.updateQueue)){var n=(e=e.shared).pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}}function fa(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,a=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===a?i=a=o:a=a.next=o,n=n.next}while(null!==n);null===a?i=a=t:a=a.next=t}else i=a=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function ha(e,t,n,r){var a=e.updateQueue;oa=!1;var o=a.firstBaseUpdate,u=a.lastBaseUpdate,s=a.shared.pending;if(null!==s){a.shared.pending=null;var c=s,l=c.next;c.next=null,null===u?o=l:u.next=l,u=c;var f=e.alternate;if(null!==f){var h=(f=f.updateQueue).lastBaseUpdate;h!==u&&(null===h?f.firstBaseUpdate=l:h.next=l,f.lastBaseUpdate=c)}}if(null!==o){for(h=a.baseState,u=0,f=l=c=null;;){s=o.lane;var d=o.eventTime;if((r&s)===s){null!==f&&(f=f.next={eventTime:d,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var p=e,v=o;switch(s=t,d=n,v.tag){case 1:if("function"===typeof(p=v.payload)){h=p.call(d,h,s);break e}h=p;break e;case 3:p.flags=-4097&p.flags|64;case 0:if(null===(s="function"===typeof(p=v.payload)?p.call(d,h,s):p)||void 0===s)break e;h=i({},h,s);break e;case 2:oa=!0}}null!==o.callback&&(e.flags|=32,null===(s=a.effects)?a.effects=[o]:s.push(o))}else d={eventTime:d,lane:s,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===f?(l=f=d,c=h):f=f.next=d,u|=s;if(null===(o=o.next)){if(null===(s=a.shared.pending))break;o=s.next,s.next=null,a.lastBaseUpdate=s,a.shared.pending=null}}null===f&&(c=h),a.baseState=c,a.firstBaseUpdate=l,a.lastBaseUpdate=f,Zu|=u,e.lanes=u,e.memoizedState=h}}function da(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(o(191,i));i.call(r)}}}var pa=(new r.Component).refs;function va(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:i({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var ma={isMounted:function(e){return!!(e=e._reactInternals)&&Qe(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=hs(),i=ds(e),a=ca(r,i);a.payload=t,void 0!==n&&null!==n&&(a.callback=n),la(e,a),ps(e,i,r)},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=hs(),i=ds(e),a=ca(r,i);a.tag=1,a.payload=t,void 0!==n&&null!==n&&(a.callback=n),la(e,a),ps(e,i,r)},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=hs(),r=ds(e),i=ca(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),la(e,i),ps(e,r,n)}};function ya(e,t,n,r,i,a,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,a,o):!t.prototype||!t.prototype.isPureReactComponent||(!fr(n,r)||!fr(i,a))}function ga(e,t,n){var r=!1,i=fi,a=t.contextType;return"object"===typeof a&&null!==a?a=aa(a):(i=mi(t)?pi:hi.current,a=(r=null!==(r=t.contextTypes)&&void 0!==r)?vi(e,i):fi),t=new t(n,a),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=ma,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),t}function ka(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&ma.enqueueReplaceState(t,t.state,null)}function ba(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=pa,ua(e);var a=t.contextType;"object"===typeof a&&null!==a?i.context=aa(a):(a=mi(t)?pi:hi.current,i.context=vi(e,a)),ha(e,n,i,r),i.state=e.memoizedState,"function"===typeof(a=t.getDerivedStateFromProps)&&(va(e,t,a,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&ma.enqueueReplaceState(i,i.state,null),ha(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4)}var wa=Array.isArray;function xa(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(o(309));var r=n.stateNode}if(!r)throw Error(o(147,e));var i=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===i?t.ref:(t=function(e){var t=r.refs;t===pa&&(t=r.refs={}),null===e?delete t[i]:t[i]=e},t._stringRef=i,t)}if("string"!==typeof e)throw Error(o(284));if(!n._owner)throw Error(o(290,e))}return e}function _a(e,t){if("textarea"!==e.type)throw Error(o(31,"[object Object]"===Object.prototype.toString.call(t)?"object with keys {"+Object.keys(t).join(", ")+"}":t))}function Ia(e){function t(t,n){if(e){var r=t.lastEffect;null!==r?(r.nextEffect=n,t.lastEffect=n):t.firstEffect=t.lastEffect=n,n.nextEffect=null,n.flags=8}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Ks(e,t)).index=0,e.sibling=null,e}function a(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags=2,n):r:(t.flags=2,n):n}function u(t){return e&&null===t.alternate&&(t.flags=2),t}function s(e,t,n,r){return null===t||6!==t.tag?((t=Ys(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){return null!==t&&t.elementType===n.type?((r=i(t,n.props)).ref=xa(e,t,n),r.return=e,r):((r=Ws(n.type,n.key,n.props,null,e.mode,r)).ref=xa(e,t,n),r.return=e,r)}function l(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=$s(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function f(e,t,n,r,a){return null===t||7!==t.tag?((t=Hs(n,e.mode,r,a)).return=e,t):((t=i(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t||"number"===typeof t)return(t=Ys(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case x:return(n=Ws(t.type,t.key,t.props,null,e.mode,n)).ref=xa(e,null,t),n.return=e,n;case _:return(t=$s(t,e.mode,n)).return=e,t}if(wa(t)||z(t))return(t=Hs(t,e.mode,n,null)).return=e,t;_a(e,t)}return null}function d(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n||"number"===typeof n)return null!==i?null:s(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case x:return n.key===i?n.type===I?f(e,t,n.props.children,r,i):c(e,t,n,r):null;case _:return n.key===i?l(e,t,n,r):null}if(wa(n)||z(n))return null!==i?null:f(e,t,n,r,null);_a(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r||"number"===typeof r)return s(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case x:return e=e.get(null===r.key?n:r.key)||null,r.type===I?f(t,e,r.props.children,i,r.key):c(t,e,r,i);case _:return l(t,e=e.get(null===r.key?n:r.key)||null,r,i)}if(wa(r)||z(r))return f(t,e=e.get(n)||null,r,i,null);_a(t,r)}return null}function v(i,o,u,s){for(var c=null,l=null,f=o,v=o=0,m=null;null!==f&&v<u.length;v++){f.index>v?(m=f,f=null):m=f.sibling;var y=d(i,f,u[v],s);if(null===y){null===f&&(f=m);break}e&&f&&null===y.alternate&&t(i,f),o=a(y,o,v),null===l?c=y:l.sibling=y,l=y,f=m}if(v===u.length)return n(i,f),c;if(null===f){for(;v<u.length;v++)null!==(f=h(i,u[v],s))&&(o=a(f,o,v),null===l?c=f:l.sibling=f,l=f);return c}for(f=r(i,f);v<u.length;v++)null!==(m=p(f,i,v,u[v],s))&&(e&&null!==m.alternate&&f.delete(null===m.key?v:m.key),o=a(m,o,v),null===l?c=m:l.sibling=m,l=m);return e&&f.forEach((function(e){return t(i,e)})),c}function m(i,u,s,c){var l=z(s);if("function"!==typeof l)throw Error(o(150));if(null==(s=l.call(s)))throw Error(o(151));for(var f=l=null,v=u,m=u=0,y=null,g=s.next();null!==v&&!g.done;m++,g=s.next()){v.index>m?(y=v,v=null):y=v.sibling;var k=d(i,v,g.value,c);if(null===k){null===v&&(v=y);break}e&&v&&null===k.alternate&&t(i,v),u=a(k,u,m),null===f?l=k:f.sibling=k,f=k,v=y}if(g.done)return n(i,v),l;if(null===v){for(;!g.done;m++,g=s.next())null!==(g=h(i,g.value,c))&&(u=a(g,u,m),null===f?l=g:f.sibling=g,f=g);return l}for(v=r(i,v);!g.done;m++,g=s.next())null!==(g=p(v,i,m,g.value,c))&&(e&&null!==g.alternate&&v.delete(null===g.key?m:g.key),u=a(g,u,m),null===f?l=g:f.sibling=g,f=g);return e&&v.forEach((function(e){return t(i,e)})),l}return function(e,r,a,s){var c="object"===typeof a&&null!==a&&a.type===I&&null===a.key;c&&(a=a.props.children);var l="object"===typeof a&&null!==a;if(l)switch(a.$$typeof){case x:e:{for(l=a.key,c=r;null!==c;){if(c.key===l){if(7===c.tag){if(a.type===I){n(e,c.sibling),(r=i(c,a.props.children)).return=e,e=r;break e}}else if(c.elementType===a.type){n(e,c.sibling),(r=i(c,a.props)).ref=xa(e,c,a),r.return=e,e=r;break e}n(e,c);break}t(e,c),c=c.sibling}a.type===I?((r=Hs(a.props.children,e.mode,s,a.key)).return=e,e=r):((s=Ws(a.type,a.key,a.props,null,e.mode,s)).ref=xa(e,r,a),s.return=e,e=s)}return u(e);case _:e:{for(c=a.key;null!==r;){if(r.key===c){if(4===r.tag&&r.stateNode.containerInfo===a.containerInfo&&r.stateNode.implementation===a.implementation){n(e,r.sibling),(r=i(r,a.children||[])).return=e,e=r;break e}n(e,r);break}t(e,r),r=r.sibling}(r=$s(a,e.mode,s)).return=e,e=r}return u(e)}if("string"===typeof a||"number"===typeof a)return a=""+a,null!==r&&6===r.tag?(n(e,r.sibling),(r=i(r,a)).return=e,e=r):(n(e,r),(r=Ys(a,e.mode,s)).return=e,e=r),u(e);if(wa(a))return v(e,r,a,s);if(z(a))return m(e,r,a,s);if(l&&_a(e,a),"undefined"===typeof a&&!c)switch(e.tag){case 1:case 22:case 0:case 11:case 15:throw Error(o(152,W(e.type)||"Component"))}return n(e,r)}}var Sa=Ia(!0),Ea=Ia(!1),Ta={},Ca=si(Ta),Aa=si(Ta),Na=si(Ta);function Ra(e){if(e===Ta)throw Error(o(174));return e}function Pa(e,t){switch(li(Na,t),li(Aa,e),li(Ca,Ta),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:de(null,"");break;default:t=de(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}ci(Ca),li(Ca,t)}function Oa(){ci(Ca),ci(Aa),ci(Na)}function Da(e){Ra(Na.current);var t=Ra(Ca.current),n=de(t,e.type);t!==n&&(li(Aa,e),li(Ca,n))}function La(e){Aa.current===e&&(ci(Ca),ci(Aa))}var Ma=si(0);function Fa(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(64&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ja=null,Ua=null,Va=!1;function Za(e,t){var n=qs(5,null,null,0);n.elementType="DELETED",n.type="DELETED",n.stateNode=t,n.return=e,n.flags=8,null!==e.lastEffect?(e.lastEffect.nextEffect=n,e.lastEffect=n):e.firstEffect=e.lastEffect=n}function za(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,!0);default:return!1}}function Ba(e){if(Va){var t=Ua;if(t){var n=t;if(!za(e,t)){if(!(t=Wr(n.nextSibling))||!za(e,t))return e.flags=-1025&e.flags|2,Va=!1,void(ja=e);Za(ja,n)}ja=e,Ua=Wr(t.firstChild)}else e.flags=-1025&e.flags|2,Va=!1,ja=e}}function qa(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;ja=e}function Ga(e){if(e!==ja)return!1;if(!Va)return qa(e),Va=!0,!1;var t=e.type;if(5!==e.tag||"head"!==t&&"body"!==t&&!Br(t,e.memoizedProps))for(t=Ua;t;)Za(e,t),t=Wr(t.nextSibling);if(qa(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(o(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){Ua=Wr(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}Ua=null}}else Ua=ja?Wr(e.stateNode.nextSibling):null;return!0}function Ka(){Ua=ja=null,Va=!1}var Wa=[];function Ha(){for(var e=0;e<Wa.length;e++)Wa[e]._workInProgressVersionPrimary=null;Wa.length=0}var Qa=w.ReactCurrentDispatcher,Ya=w.ReactCurrentBatchConfig,$a=0,Xa=null,Ja=null,eo=null,to=!1,no=!1;function ro(){throw Error(o(321))}function io(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!cr(e[n],t[n]))return!1;return!0}function ao(e,t,n,r,i,a){if($a=a,Xa=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Qa.current=null===e||null===e.memoizedState?Po:Oo,e=n(r,i),no){a=0;do{if(no=!1,!(25>a))throw Error(o(301));a+=1,eo=Ja=null,t.updateQueue=null,Qa.current=Do,e=n(r,i)}while(no)}if(Qa.current=Ro,t=null!==Ja&&null!==Ja.next,$a=0,eo=Ja=Xa=null,to=!1,t)throw Error(o(300));return e}function oo(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===eo?Xa.memoizedState=eo=e:eo=eo.next=e,eo}function uo(){if(null===Ja){var e=Xa.alternate;e=null!==e?e.memoizedState:null}else e=Ja.next;var t=null===eo?Xa.memoizedState:eo.next;if(null!==t)eo=t,Ja=e;else{if(null===e)throw Error(o(310));e={memoizedState:(Ja=e).memoizedState,baseState:Ja.baseState,baseQueue:Ja.baseQueue,queue:Ja.queue,next:null},null===eo?Xa.memoizedState=eo=e:eo=eo.next=e}return eo}function so(e,t){return"function"===typeof t?t(e):t}function co(e){var t=uo(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=Ja,i=r.baseQueue,a=n.pending;if(null!==a){if(null!==i){var u=i.next;i.next=a.next,a.next=u}r.baseQueue=i=a,n.pending=null}if(null!==i){i=i.next,r=r.baseState;var s=u=a=null,c=i;do{var l=c.lane;if(($a&l)===l)null!==s&&(s=s.next={lane:0,action:c.action,eagerReducer:c.eagerReducer,eagerState:c.eagerState,next:null}),r=c.eagerReducer===e?c.eagerState:e(r,c.action);else{var f={lane:l,action:c.action,eagerReducer:c.eagerReducer,eagerState:c.eagerState,next:null};null===s?(u=s=f,a=r):s=s.next=f,Xa.lanes|=l,Zu|=l}c=c.next}while(null!==c&&c!==i);null===s?a=r:s.next=u,cr(r,t.memoizedState)||(Mo=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=s,n.lastRenderedState=r}return[t.memoizedState,n.dispatch]}function lo(e){var t=uo(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,a=t.memoizedState;if(null!==i){n.pending=null;var u=i=i.next;do{a=e(a,u.action),u=u.next}while(u!==i);cr(a,t.memoizedState)||(Mo=!0),t.memoizedState=a,null===t.baseQueue&&(t.baseState=a),n.lastRenderedState=a}return[a,r]}function fo(e,t,n){var r=t._getVersion;r=r(t._source);var i=t._workInProgressVersionPrimary;if(null!==i?e=i===r:(e=e.mutableReadLanes,(e=($a&e)===e)&&(t._workInProgressVersionPrimary=r,Wa.push(t))),e)return n(t._source);throw Wa.push(t),Error(o(350))}function ho(e,t,n,r){var i=Ou;if(null===i)throw Error(o(349));var a=t._getVersion,u=a(t._source),s=Qa.current,c=s.useState((function(){return fo(i,t,n)})),l=c[1],f=c[0];c=eo;var h=e.memoizedState,d=h.refs,p=d.getSnapshot,v=h.source;h=h.subscribe;var m=Xa;return e.memoizedState={refs:d,source:t,subscribe:r},s.useEffect((function(){d.getSnapshot=n,d.setSnapshot=l;var e=a(t._source);if(!cr(u,e)){e=n(t._source),cr(f,e)||(l(e),e=ds(m),i.mutableReadLanes|=e&i.pendingLanes),e=i.mutableReadLanes,i.entangledLanes|=e;for(var r=i.entanglements,o=e;0<o;){var s=31-Bt(o),c=1<<s;r[s]|=e,o&=~c}}}),[n,t,r]),s.useEffect((function(){return r(t._source,(function(){var e=d.getSnapshot,n=d.setSnapshot;try{n(e(t._source));var r=ds(m);i.mutableReadLanes|=r&i.pendingLanes}catch(a){n((function(){throw a}))}}))}),[t,r]),cr(p,n)&&cr(v,t)&&cr(h,r)||((e={pending:null,dispatch:null,lastRenderedReducer:so,lastRenderedState:f}).dispatch=l=No.bind(null,Xa,e),c.queue=e,c.baseQueue=null,f=fo(i,t,n),c.memoizedState=c.baseState=f),f}function po(e,t,n){return ho(uo(),e,t,n)}function vo(e){var t=oo();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e=(e=t.queue={pending:null,dispatch:null,lastRenderedReducer:so,lastRenderedState:e}).dispatch=No.bind(null,Xa,e),[t.memoizedState,e]}function mo(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=Xa.updateQueue)?(t={lastEffect:null},Xa.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function yo(e){return e={current:e},oo().memoizedState=e}function go(){return uo().memoizedState}function ko(e,t,n,r){var i=oo();Xa.flags|=e,i.memoizedState=mo(1|t,n,void 0,void 0===r?null:r)}function bo(e,t,n,r){var i=uo();r=void 0===r?null:r;var a=void 0;if(null!==Ja){var o=Ja.memoizedState;if(a=o.destroy,null!==r&&io(r,o.deps))return void mo(t,n,a,r)}Xa.flags|=e,i.memoizedState=mo(1|t,n,a,r)}function wo(e,t){return ko(516,4,e,t)}function xo(e,t){return bo(516,4,e,t)}function _o(e,t){return bo(4,2,e,t)}function Io(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function So(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,bo(4,2,Io.bind(null,t,e),n)}function Eo(){}function To(e,t){var n=uo();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&io(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Co(e,t){var n=uo();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&io(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Ao(e,t){var n=Bi();Gi(98>n?98:n,(function(){e(!0)})),Gi(97<n?97:n,(function(){var n=Ya.transition;Ya.transition=1;try{e(!1),t()}finally{Ya.transition=n}}))}function No(e,t,n){var r=hs(),i=ds(e),a={lane:i,action:n,eagerReducer:null,eagerState:null,next:null},o=t.pending;if(null===o?a.next=a:(a.next=o.next,o.next=a),t.pending=a,o=e.alternate,e===Xa||null!==o&&o===Xa)no=to=!0;else{if(0===e.lanes&&(null===o||0===o.lanes)&&null!==(o=t.lastRenderedReducer))try{var u=t.lastRenderedState,s=o(u,n);if(a.eagerReducer=o,a.eagerState=s,cr(s,u))return}catch(c){}ps(e,i,r)}}var Ro={readContext:aa,useCallback:ro,useContext:ro,useEffect:ro,useImperativeHandle:ro,useLayoutEffect:ro,useMemo:ro,useReducer:ro,useRef:ro,useState:ro,useDebugValue:ro,useDeferredValue:ro,useTransition:ro,useMutableSource:ro,useOpaqueIdentifier:ro,unstable_isNewReconciler:!1},Po={readContext:aa,useCallback:function(e,t){return oo().memoizedState=[e,void 0===t?null:t],e},useContext:aa,useEffect:wo,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,ko(4,2,Io.bind(null,t,e),n)},useLayoutEffect:function(e,t){return ko(4,2,e,t)},useMemo:function(e,t){var n=oo();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=oo();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e=(e=r.queue={pending:null,dispatch:null,lastRenderedReducer:e,lastRenderedState:t}).dispatch=No.bind(null,Xa,e),[r.memoizedState,e]},useRef:yo,useState:vo,useDebugValue:Eo,useDeferredValue:function(e){var t=vo(e),n=t[0],r=t[1];return wo((function(){var t=Ya.transition;Ya.transition=1;try{r(e)}finally{Ya.transition=t}}),[e]),n},useTransition:function(){var e=vo(!1),t=e[0];return yo(e=Ao.bind(null,e[1])),[e,t]},useMutableSource:function(e,t,n){var r=oo();return r.memoizedState={refs:{getSnapshot:t,setSnapshot:null},source:e,subscribe:n},ho(r,e,t,n)},useOpaqueIdentifier:function(){if(Va){var e=!1,t=function(e){return{$$typeof:L,toString:e,valueOf:e}}((function(){throw e||(e=!0,n("r:"+(Qr++).toString(36))),Error(o(355))})),n=vo(t)[1];return 0===(2&Xa.mode)&&(Xa.flags|=516,mo(5,(function(){n("r:"+(Qr++).toString(36))}),void 0,null)),t}return vo(t="r:"+(Qr++).toString(36)),t},unstable_isNewReconciler:!1},Oo={readContext:aa,useCallback:To,useContext:aa,useEffect:xo,useImperativeHandle:So,useLayoutEffect:_o,useMemo:Co,useReducer:co,useRef:go,useState:function(){return co(so)},useDebugValue:Eo,useDeferredValue:function(e){var t=co(so),n=t[0],r=t[1];return xo((function(){var t=Ya.transition;Ya.transition=1;try{r(e)}finally{Ya.transition=t}}),[e]),n},useTransition:function(){var e=co(so)[0];return[go().current,e]},useMutableSource:po,useOpaqueIdentifier:function(){return co(so)[0]},unstable_isNewReconciler:!1},Do={readContext:aa,useCallback:To,useContext:aa,useEffect:xo,useImperativeHandle:So,useLayoutEffect:_o,useMemo:Co,useReducer:lo,useRef:go,useState:function(){return lo(so)},useDebugValue:Eo,useDeferredValue:function(e){var t=lo(so),n=t[0],r=t[1];return xo((function(){var t=Ya.transition;Ya.transition=1;try{r(e)}finally{Ya.transition=t}}),[e]),n},useTransition:function(){var e=lo(so)[0];return[go().current,e]},useMutableSource:po,useOpaqueIdentifier:function(){return lo(so)[0]},unstable_isNewReconciler:!1},Lo=w.ReactCurrentOwner,Mo=!1;function Fo(e,t,n,r){t.child=null===e?Ea(t,null,n,r):Sa(t,e.child,n,r)}function jo(e,t,n,r,i){n=n.render;var a=t.ref;return ia(t,i),r=ao(e,t,n,r,a,i),null===e||Mo?(t.flags|=1,Fo(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~i,au(e,t,i))}function Uo(e,t,n,r,i,a){if(null===e){var o=n.type;return"function"!==typeof o||Gs(o)||void 0!==o.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Ws(n.type,null,r,t,t.mode,a)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=o,Vo(e,t,o,r,i,a))}return o=e.child,0===(i&a)&&(i=o.memoizedProps,(n=null!==(n=n.compare)?n:fr)(i,r)&&e.ref===t.ref)?au(e,t,a):(t.flags|=1,(e=Ks(o,r)).ref=t.ref,e.return=t,t.child=e)}function Vo(e,t,n,r,i,a){if(null!==e&&fr(e.memoizedProps,r)&&e.ref===t.ref){if(Mo=!1,0===(a&i))return t.lanes=e.lanes,au(e,t,a);0!==(16384&e.flags)&&(Mo=!0)}return Bo(e,t,n,r,a)}function Zo(e,t,n){var r=t.pendingProps,i=r.children,a=null!==e?e.memoizedState:null;if("hidden"===r.mode||"unstable-defer-without-hiding"===r.mode)if(0===(4&t.mode))t.memoizedState={baseLanes:0},xs(t,n);else{if(0===(1073741824&n))return e=null!==a?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e},xs(t,e),null;t.memoizedState={baseLanes:0},xs(t,null!==a?a.baseLanes:n)}else null!==a?(r=a.baseLanes|n,t.memoizedState=null):r=n,xs(t,r);return Fo(e,t,i,n),t.child}function zo(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=128)}function Bo(e,t,n,r,i){var a=mi(n)?pi:hi.current;return a=vi(t,a),ia(t,i),n=ao(e,t,n,r,a,i),null===e||Mo?(t.flags|=1,Fo(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~i,au(e,t,i))}function qo(e,t,n,r,i){if(mi(n)){var a=!0;bi(t)}else a=!1;if(ia(t,i),null===t.stateNode)null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),ga(t,n,r),ba(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,u=t.memoizedProps;o.props=u;var s=o.context,c=n.contextType;"object"===typeof c&&null!==c?c=aa(c):c=vi(t,c=mi(n)?pi:hi.current);var l=n.getDerivedStateFromProps,f="function"===typeof l||"function"===typeof o.getSnapshotBeforeUpdate;f||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(u!==r||s!==c)&&ka(t,o,r,c),oa=!1;var h=t.memoizedState;o.state=h,ha(t,r,o,i),s=t.memoizedState,u!==r||h!==s||di.current||oa?("function"===typeof l&&(va(t,n,l,r),s=t.memoizedState),(u=oa||ya(t,n,u,r,h,s,c))?(f||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4)):("function"===typeof o.componentDidMount&&(t.flags|=4),t.memoizedProps=r,t.memoizedState=s),o.props=r,o.state=s,o.context=c,r=u):("function"===typeof o.componentDidMount&&(t.flags|=4),r=!1)}else{o=t.stateNode,sa(e,t),u=t.memoizedProps,c=t.type===t.elementType?u:Yi(t.type,u),o.props=c,f=t.pendingProps,h=o.context,"object"===typeof(s=n.contextType)&&null!==s?s=aa(s):s=vi(t,s=mi(n)?pi:hi.current);var d=n.getDerivedStateFromProps;(l="function"===typeof d||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(u!==f||h!==s)&&ka(t,o,r,s),oa=!1,h=t.memoizedState,o.state=h,ha(t,r,o,i);var p=t.memoizedState;u!==f||h!==p||di.current||oa?("function"===typeof d&&(va(t,n,d,r),p=t.memoizedState),(c=oa||ya(t,n,c,r,h,p,s))?(l||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,p,s),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,p,s)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=256)):("function"!==typeof o.componentDidUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=256),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=s,r=c):("function"!==typeof o.componentDidUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=256),r=!1)}return Go(e,t,n,r,a,i)}function Go(e,t,n,r,i,a){zo(e,t);var o=0!==(64&t.flags);if(!r&&!o)return i&&wi(t,n,!1),au(e,t,a);r=t.stateNode,Lo.current=t;var u=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=Sa(t,e.child,null,a),t.child=Sa(t,null,u,a)):Fo(e,t,u,a),t.memoizedState=r.state,i&&wi(t,n,!0),t.child}function Ko(e){var t=e.stateNode;t.pendingContext?gi(0,t.pendingContext,t.pendingContext!==t.context):t.context&&gi(0,t.context,!1),Pa(e,t.containerInfo)}var Wo,Ho,Qo,Yo,$o={dehydrated:null,retryLane:0};function Xo(e,t,n){var r,i=t.pendingProps,a=Ma.current,o=!1;return(r=0!==(64&t.flags))||(r=(null===e||null!==e.memoizedState)&&0!==(2&a)),r?(o=!0,t.flags&=-65):null!==e&&null===e.memoizedState||void 0===i.fallback||!0===i.unstable_avoidThisFallback||(a|=1),li(Ma,1&a),null===e?(void 0!==i.fallback&&Ba(t),e=i.children,a=i.fallback,o?(e=Jo(t,e,a,n),t.child.memoizedState={baseLanes:n},t.memoizedState=$o,e):"number"===typeof i.unstable_expectedLoadTime?(e=Jo(t,e,a,n),t.child.memoizedState={baseLanes:n},t.memoizedState=$o,t.lanes=33554432,e):((n=Qs({mode:"visible",children:e},t.mode,n,null)).return=t,t.child=n)):(e.memoizedState,o?(i=tu(e,t,i.children,i.fallback,n),o=t.child,a=e.child.memoizedState,o.memoizedState=null===a?{baseLanes:n}:{baseLanes:a.baseLanes|n},o.childLanes=e.childLanes&~n,t.memoizedState=$o,i):(n=eu(e,t,i.children,n),t.memoizedState=null,n))}function Jo(e,t,n,r){var i=e.mode,a=e.child;return t={mode:"hidden",children:t},0===(2&i)&&null!==a?(a.childLanes=0,a.pendingProps=t):a=Qs(t,i,0,null),n=Hs(n,i,r,null),a.return=e,n.return=e,a.sibling=n,e.child=a,n}function eu(e,t,n,r){var i=e.child;return e=i.sibling,n=Ks(i,{mode:"visible",children:n}),0===(2&t.mode)&&(n.lanes=r),n.return=t,n.sibling=null,null!==e&&(e.nextEffect=null,e.flags=8,t.firstEffect=t.lastEffect=e),t.child=n}function tu(e,t,n,r,i){var a=t.mode,o=e.child;e=o.sibling;var u={mode:"hidden",children:n};return 0===(2&a)&&t.child!==o?((n=t.child).childLanes=0,n.pendingProps=u,null!==(o=n.lastEffect)?(t.firstEffect=n.firstEffect,t.lastEffect=o,o.nextEffect=null):t.firstEffect=t.lastEffect=null):n=Ks(o,u),null!==e?r=Ks(e,r):(r=Hs(r,a,i,null)).flags|=2,r.return=t,n.return=t,n.sibling=r,t.child=n,r}function nu(e,t){e.lanes|=t;var n=e.alternate;null!==n&&(n.lanes|=t),ra(e.return,t)}function ru(e,t,n,r,i,a){var o=e.memoizedState;null===o?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i,lastEffect:a}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i,o.lastEffect=a)}function iu(e,t,n){var r=t.pendingProps,i=r.revealOrder,a=r.tail;if(Fo(e,t,r.children,n),0!==(2&(r=Ma.current)))r=1&r|2,t.flags|=64;else{if(null!==e&&0!==(64&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&nu(e,n);else if(19===e.tag)nu(e,n);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(li(Ma,r),0===(2&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===Fa(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),ru(t,!1,i,n,a,t.lastEffect);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===Fa(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}ru(t,!0,n,null,a,t.lastEffect);break;case"together":ru(t,!1,null,null,void 0,t.lastEffect);break;default:t.memoizedState=null}return t.child}function au(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Zu|=t.lanes,0!==(n&t.childLanes)){if(null!==e&&t.child!==e.child)throw Error(o(153));if(null!==t.child){for(n=Ks(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Ks(e,e.pendingProps)).return=t;n.sibling=null}return t.child}return null}function ou(e,t){if(!Va)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function uu(e,t,n){var r=t.pendingProps;switch(t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:case 17:return mi(t.type)&&yi(),null;case 3:return Oa(),ci(di),ci(hi),Ha(),(r=t.stateNode).pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(Ga(t)?t.flags|=4:r.hydrate||(t.flags|=256)),Ho(t),null;case 5:La(t);var a=Ra(Na.current);if(n=t.type,null!==e&&null!=t.stateNode)Qo(e,t,n,r,a),e.ref!==t.ref&&(t.flags|=128);else{if(!r){if(null===t.stateNode)throw Error(o(166));return null}if(e=Ra(Ca.current),Ga(t)){r=t.stateNode,n=t.type;var u=t.memoizedProps;switch(r[$r]=t,r[Xr]=u,n){case"dialog":Ar("cancel",r),Ar("close",r);break;case"iframe":case"object":case"embed":Ar("load",r);break;case"video":case"audio":for(e=0;e<Sr.length;e++)Ar(Sr[e],r);break;case"source":Ar("error",r);break;case"img":case"image":case"link":Ar("error",r),Ar("load",r);break;case"details":Ar("toggle",r);break;case"input":ee(r,u),Ar("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!u.multiple},Ar("invalid",r);break;case"textarea":se(r,u),Ar("invalid",r)}for(var c in _e(n,u),e=null,u)u.hasOwnProperty(c)&&(a=u[c],"children"===c?"string"===typeof a?r.textContent!==a&&(e=["children",a]):"number"===typeof a&&r.textContent!==""+a&&(e=["children",""+a]):s.hasOwnProperty(c)&&null!=a&&"onScroll"===c&&Ar("scroll",r));switch(n){case"input":Y(r),re(r,u,!0);break;case"textarea":Y(r),le(r);break;case"select":case"option":break;default:"function"===typeof u.onClick&&(r.onclick=Ur)}r=e,t.updateQueue=r,null!==r&&(t.flags|=4)}else{switch(c=9===a.nodeType?a:a.ownerDocument,e===fe.html&&(e=he(n)),e===fe.html?"script"===n?((e=c.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=c.createElement(n,{is:r.is}):(e=c.createElement(n),"select"===n&&(c=e,r.multiple?c.multiple=!0:r.size&&(c.size=r.size))):e=c.createElementNS(e,n),e[$r]=t,e[Xr]=r,Wo(e,t,!1,!1),t.stateNode=e,c=Ie(n,r),n){case"dialog":Ar("cancel",e),Ar("close",e),a=r;break;case"iframe":case"object":case"embed":Ar("load",e),a=r;break;case"video":case"audio":for(a=0;a<Sr.length;a++)Ar(Sr[a],e);a=r;break;case"source":Ar("error",e),a=r;break;case"img":case"image":case"link":Ar("error",e),Ar("load",e),a=r;break;case"details":Ar("toggle",e),a=r;break;case"input":ee(e,r),a=J(e,r),Ar("invalid",e);break;case"option":a=ae(e,r);break;case"select":e._wrapperState={wasMultiple:!!r.multiple},a=i({},r,{value:void 0}),Ar("invalid",e);break;case"textarea":se(e,r),a=ue(e,r),Ar("invalid",e);break;default:a=r}_e(n,a);var l=a;for(u in l)if(l.hasOwnProperty(u)){var f=l[u];"style"===u?we(e,f):"dangerouslySetInnerHTML"===u?null!=(f=f?f.__html:void 0)&&me(e,f):"children"===u?"string"===typeof f?("textarea"!==n||""!==f)&&ye(e,f):"number"===typeof f&&ye(e,""+f):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(s.hasOwnProperty(u)?null!=f&&"onScroll"===u&&Ar("scroll",e):null!=f&&b(e,u,f,c))}switch(n){case"input":Y(e),re(e,r,!1);break;case"textarea":Y(e),le(e);break;case"option":null!=r.value&&e.setAttribute("value",""+H(r.value));break;case"select":e.multiple=!!r.multiple,null!=(u=r.value)?oe(e,!!r.multiple,u,!1):null!=r.defaultValue&&oe(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof a.onClick&&(e.onclick=Ur)}zr(n,r)&&(t.flags|=4)}null!==t.ref&&(t.flags|=128)}return null;case 6:if(e&&null!=t.stateNode)Yo(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(o(166));n=Ra(Na.current),Ra(Ca.current),Ga(t)?(r=t.stateNode,n=t.memoizedProps,r[$r]=t,r.nodeValue!==n&&(t.flags|=4)):((r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[$r]=t,t.stateNode=r)}return null;case 13:return ci(Ma),r=t.memoizedState,0!==(64&t.flags)?(t.lanes=n,t):(r=null!==r,n=!1,null===e?void 0!==t.memoizedProps.fallback&&Ga(t):n=null!==e.memoizedState,r&&!n&&0!==(2&t.mode)&&(null===e&&!0!==t.memoizedProps.unstable_avoidThisFallback||0!==(1&Ma.current)?0===ju&&(ju=3):(0!==ju&&3!==ju||(ju=4),null===Ou||0===(134217727&Zu)&&0===(134217727&zu)||gs(Ou,Lu))),(r||n)&&(t.flags|=4),null);case 4:return Oa(),Ho(t),null===e&&Rr(t.stateNode.containerInfo),null;case 10:return na(t),null;case 19:if(ci(Ma),null===(r=t.memoizedState))return null;if(u=0!==(64&t.flags),null===(c=r.rendering))if(u)ou(r,!1);else{if(0!==ju||null!==e&&0!==(64&e.flags))for(e=t.child;null!==e;){if(null!==(c=Fa(e))){for(t.flags|=64,ou(r,!1),null!==(u=c.updateQueue)&&(t.updateQueue=u,t.flags|=4),null===r.lastEffect&&(t.firstEffect=null),t.lastEffect=r.lastEffect,r=n,n=t.child;null!==n;)e=r,(u=n).flags&=2,u.nextEffect=null,u.firstEffect=null,u.lastEffect=null,null===(c=u.alternate)?(u.childLanes=0,u.lanes=e,u.child=null,u.memoizedProps=null,u.memoizedState=null,u.updateQueue=null,u.dependencies=null,u.stateNode=null):(u.childLanes=c.childLanes,u.lanes=c.lanes,u.child=c.child,u.memoizedProps=c.memoizedProps,u.memoizedState=c.memoizedState,u.updateQueue=c.updateQueue,u.type=c.type,e=c.dependencies,u.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return li(Ma,1&Ma.current|2),t.child}e=e.sibling}null!==r.tail&&zi()>Ku&&(t.flags|=64,u=!0,ou(r,!1),t.lanes=33554432)}else{if(!u)if(null!==(e=Fa(c))){if(t.flags|=64,u=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),ou(r,!0),null===r.tail&&"hidden"===r.tailMode&&!c.alternate&&!Va)return null!==(t=t.lastEffect=r.lastEffect)&&(t.nextEffect=null),null}else 2*zi()-r.renderingStartTime>Ku&&1073741824!==n&&(t.flags|=64,u=!0,ou(r,!1),t.lanes=33554432);r.isBackwards?(c.sibling=t.child,t.child=c):(null!==(n=r.last)?n.sibling=c:t.child=c,r.last=c)}return null!==r.tail?(n=r.tail,r.rendering=n,r.tail=n.sibling,r.lastEffect=t.lastEffect,r.renderingStartTime=zi(),n.sibling=null,t=Ma.current,li(Ma,u?1&t|2:1&t),n):null;case 23:case 24:return _s(),null!==e&&null!==e.memoizedState!==(null!==t.memoizedState)&&"unstable-defer-without-hiding"!==r.mode&&(t.flags|=4),null}throw Error(o(156,t.tag))}function su(e){switch(e.tag){case 1:mi(e.type)&&yi();var t=e.flags;return 4096&t?(e.flags=-4097&t|64,e):null;case 3:if(Oa(),ci(di),ci(hi),Ha(),0!==(64&(t=e.flags)))throw Error(o(285));return e.flags=-4097&t|64,e;case 5:return La(e),null;case 13:return ci(Ma),4096&(t=e.flags)?(e.flags=-4097&t|64,e):null;case 19:return ci(Ma),null;case 4:return Oa(),null;case 10:return na(e),null;case 23:case 24:return _s(),null;default:return null}}function cu(e,t){try{var n="",r=t;do{n+=K(r),r=r.return}while(r);var i=n}catch(a){i="\nError generating stack: "+a.message+"\n"+a.stack}return{value:e,source:t,stack:i}}function lu(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}Wo=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Ho=function(){},Qo=function(e,t,n,r){var a=e.memoizedProps;if(a!==r){e=t.stateNode,Ra(Ca.current);var o,u=null;switch(n){case"input":a=J(e,a),r=J(e,r),u=[];break;case"option":a=ae(e,a),r=ae(e,r),u=[];break;case"select":a=i({},a,{value:void 0}),r=i({},r,{value:void 0}),u=[];break;case"textarea":a=ue(e,a),r=ue(e,r),u=[];break;default:"function"!==typeof a.onClick&&"function"===typeof r.onClick&&(e.onclick=Ur)}for(f in _e(n,r),n=null,a)if(!r.hasOwnProperty(f)&&a.hasOwnProperty(f)&&null!=a[f])if("style"===f){var c=a[f];for(o in c)c.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else"dangerouslySetInnerHTML"!==f&&"children"!==f&&"suppressContentEditableWarning"!==f&&"suppressHydrationWarning"!==f&&"autoFocus"!==f&&(s.hasOwnProperty(f)?u||(u=[]):(u=u||[]).push(f,null));for(f in r){var l=r[f];if(c=null!=a?a[f]:void 0,r.hasOwnProperty(f)&&l!==c&&(null!=l||null!=c))if("style"===f)if(c){for(o in c)!c.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&c[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(u||(u=[]),u.push(f,n)),n=l;else"dangerouslySetInnerHTML"===f?(l=l?l.__html:void 0,c=c?c.__html:void 0,null!=l&&c!==l&&(u=u||[]).push(f,l)):"children"===f?"string"!==typeof l&&"number"!==typeof l||(u=u||[]).push(f,""+l):"suppressContentEditableWarning"!==f&&"suppressHydrationWarning"!==f&&(s.hasOwnProperty(f)?(null!=l&&"onScroll"===f&&Ar("scroll",e),u||c===l||(u=[])):"object"===typeof l&&null!==l&&l.$$typeof===L?l.toString():(u=u||[]).push(f,l))}n&&(u=u||[]).push("style",n);var f=u;(t.updateQueue=f)&&(t.flags|=4)}},Yo=function(e,t,n,r){n!==r&&(t.flags|=4)};var fu="function"===typeof WeakMap?WeakMap:Map;function hu(e,t,n){(n=ca(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Yu||(Yu=!0,$u=r),lu(0,t)},n}function du(e,t,n){(n=ca(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return lu(0,t),r(i)}}var a=e.stateNode;return null!==a&&"function"===typeof a.componentDidCatch&&(n.callback=function(){"function"!==typeof r&&(null===Xu?Xu=new Set([this]):Xu.add(this),lu(0,t));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}var pu="function"===typeof WeakSet?WeakSet:Set;function vu(e){var t=e.ref;if(null!==t)if("function"===typeof t)try{t(null)}catch(n){Vs(e,n)}else t.current=null}function mu(e,t){switch(t.tag){case 0:case 11:case 15:case 22:case 5:case 6:case 4:case 17:return;case 1:if(256&t.flags&&null!==e){var n=e.memoizedProps,r=e.memoizedState;t=(e=t.stateNode).getSnapshotBeforeUpdate(t.elementType===t.type?n:Yi(t.type,n),r),e.__reactInternalSnapshotBeforeUpdate=t}return;case 3:return void(256&t.flags&&Kr(t.stateNode.containerInfo))}throw Error(o(163))}function yu(e,t,n){switch(n.tag){case 0:case 11:case 15:case 22:if(null!==(t=null!==(t=n.updateQueue)?t.lastEffect:null)){e=t=t.next;do{if(3===(3&e.tag)){var r=e.create;e.destroy=r()}e=e.next}while(e!==t)}if(null!==(t=null!==(t=n.updateQueue)?t.lastEffect:null)){e=t=t.next;do{var i=e;r=i.next,0!==(4&(i=i.tag))&&0!==(1&i)&&(Fs(n,e),Ms(n,e)),e=r}while(e!==t)}return;case 1:return e=n.stateNode,4&n.flags&&(null===t?e.componentDidMount():(r=n.elementType===n.type?t.memoizedProps:Yi(n.type,t.memoizedProps),e.componentDidUpdate(r,t.memoizedState,e.__reactInternalSnapshotBeforeUpdate))),void(null!==(t=n.updateQueue)&&da(n,t,e));case 3:if(null!==(t=n.updateQueue)){if(e=null,null!==n.child)switch(n.child.tag){case 5:case 1:e=n.child.stateNode}da(n,t,e)}return;case 5:return e=n.stateNode,void(null===t&&4&n.flags&&zr(n.type,n.memoizedProps)&&e.focus());case 6:case 4:case 12:case 19:case 17:case 20:case 21:case 23:case 24:return;case 13:return void(null===n.memoizedState&&(n=n.alternate,null!==n&&(n=n.memoizedState,null!==n&&(n=n.dehydrated,null!==n&&wt(n)))))}throw Error(o(163))}function gu(e,t){for(var n=e;;){if(5===n.tag){var r=n.stateNode;if(t)"function"===typeof(r=r.style).setProperty?r.setProperty("display","none","important"):r.display="none";else{r=n.stateNode;var i=n.memoizedProps.style;i=void 0!==i&&null!==i&&i.hasOwnProperty("display")?i.display:null,r.style.display=be("display",i)}}else if(6===n.tag)n.stateNode.nodeValue=t?"":n.memoizedProps;else if((23!==n.tag&&24!==n.tag||null===n.memoizedState||n===e)&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===e)break;for(;null===n.sibling;){if(null===n.return||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}}function ku(e,t){if(_i&&"function"===typeof _i.onCommitFiberUnmount)try{_i.onCommitFiberUnmount(xi,t)}catch(a){}switch(t.tag){case 0:case 11:case 14:case 15:case 22:if(null!==(e=t.updateQueue)&&null!==(e=e.lastEffect)){var n=e=e.next;do{var r=n,i=r.destroy;if(r=r.tag,void 0!==i)if(0!==(4&r))Fs(t,n);else{r=t;try{i()}catch(a){Vs(r,a)}}n=n.next}while(n!==e)}break;case 1:if(vu(t),"function"===typeof(e=t.stateNode).componentWillUnmount)try{e.props=t.memoizedProps,e.state=t.memoizedState,e.componentWillUnmount()}catch(a){Vs(t,a)}break;case 5:vu(t);break;case 4:Su(e,t)}}function bu(e){e.alternate=null,e.child=null,e.dependencies=null,e.firstEffect=null,e.lastEffect=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.return=null,e.updateQueue=null}function wu(e){return 5===e.tag||3===e.tag||4===e.tag}function xu(e){e:{for(var t=e.return;null!==t;){if(wu(t))break e;t=t.return}throw Error(o(160))}var n=t;switch(t=n.stateNode,n.tag){case 5:var r=!1;break;case 3:case 4:t=t.containerInfo,r=!0;break;default:throw Error(o(161))}16&n.flags&&(ye(t,""),n.flags&=-17);e:t:for(n=e;;){for(;null===n.sibling;){if(null===n.return||wu(n.return)){n=null;break e}n=n.return}for(n.sibling.return=n.return,n=n.sibling;5!==n.tag&&6!==n.tag&&18!==n.tag;){if(2&n.flags)continue t;if(null===n.child||4===n.tag)continue t;n.child.return=n,n=n.child}if(!(2&n.flags)){n=n.stateNode;break e}}r?_u(e,n,t):Iu(e,n,t)}function _u(e,t,n){var r=e.tag,i=5===r||6===r;if(i)e=i?e.stateNode:e.stateNode.instance,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Ur));else if(4!==r&&null!==(e=e.child))for(_u(e,t,n),e=e.sibling;null!==e;)_u(e,t,n),e=e.sibling}function Iu(e,t,n){var r=e.tag,i=5===r||6===r;if(i)e=i?e.stateNode:e.stateNode.instance,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(Iu(e,t,n),e=e.sibling;null!==e;)Iu(e,t,n),e=e.sibling}function Su(e,t){for(var n,r,i=t,a=!1;;){if(!a){a=i.return;e:for(;;){if(null===a)throw Error(o(160));switch(n=a.stateNode,a.tag){case 5:r=!1;break e;case 3:case 4:n=n.containerInfo,r=!0;break e}a=a.return}a=!0}if(5===i.tag||6===i.tag){e:for(var u=e,s=i,c=s;;)if(ku(u,c),null!==c.child&&4!==c.tag)c.child.return=c,c=c.child;else{if(c===s)break e;for(;null===c.sibling;){if(null===c.return||c.return===s)break e;c=c.return}c.sibling.return=c.return,c=c.sibling}r?(u=n,s=i.stateNode,8===u.nodeType?u.parentNode.removeChild(s):u.removeChild(s)):n.removeChild(i.stateNode)}else if(4===i.tag){if(null!==i.child){n=i.stateNode.containerInfo,r=!0,i.child.return=i,i=i.child;continue}}else if(ku(e,i),null!==i.child){i.child.return=i,i=i.child;continue}if(i===t)break;for(;null===i.sibling;){if(null===i.return||i.return===t)return;4===(i=i.return).tag&&(a=!1)}i.sibling.return=i.return,i=i.sibling}}function Eu(e,t){switch(t.tag){case 0:case 11:case 14:case 15:case 22:var n=t.updateQueue;if(null!==(n=null!==n?n.lastEffect:null)){var r=n=n.next;do{3===(3&r.tag)&&(e=r.destroy,r.destroy=void 0,void 0!==e&&e()),r=r.next}while(r!==n)}return;case 1:case 12:case 17:return;case 5:if(null!=(n=t.stateNode)){r=t.memoizedProps;var i=null!==e?e.memoizedProps:r;e=t.type;var a=t.updateQueue;if(t.updateQueue=null,null!==a){for(n[Xr]=r,"input"===e&&"radio"===r.type&&null!=r.name&&te(n,r),Ie(e,i),t=Ie(e,r),i=0;i<a.length;i+=2){var u=a[i],s=a[i+1];"style"===u?we(n,s):"dangerouslySetInnerHTML"===u?me(n,s):"children"===u?ye(n,s):b(n,u,s,t)}switch(e){case"input":ne(n,r);break;case"textarea":ce(n,r);break;case"select":e=n._wrapperState.wasMultiple,n._wrapperState.wasMultiple=!!r.multiple,null!=(a=r.value)?oe(n,!!r.multiple,a,!1):e!==!!r.multiple&&(null!=r.defaultValue?oe(n,!!r.multiple,r.defaultValue,!0):oe(n,!!r.multiple,r.multiple?[]:"",!1))}}}return;case 6:if(null===t.stateNode)throw Error(o(162));return void(t.stateNode.nodeValue=t.memoizedProps);case 3:return void((n=t.stateNode).hydrate&&(n.hydrate=!1,wt(n.containerInfo)));case 13:return null!==t.memoizedState&&(Gu=zi(),gu(t.child,!0)),void Tu(t);case 19:return void Tu(t);case 23:case 24:return void gu(t,null!==t.memoizedState)}throw Error(o(163))}function Tu(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new pu),t.forEach((function(t){var r=zs.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function Cu(e,t){return null!==e&&(null===(e=e.memoizedState)||null!==e.dehydrated)&&(null!==(t=t.memoizedState)&&null===t.dehydrated)}var Au=Math.ceil,Nu=w.ReactCurrentDispatcher,Ru=w.ReactCurrentOwner,Pu=0,Ou=null,Du=null,Lu=0,Mu=0,Fu=si(0),ju=0,Uu=null,Vu=0,Zu=0,zu=0,Bu=0,qu=null,Gu=0,Ku=1/0;function Wu(){Ku=zi()+500}var Hu,Qu=null,Yu=!1,$u=null,Xu=null,Ju=!1,es=null,ts=90,ns=[],rs=[],is=null,as=0,os=null,us=-1,ss=0,cs=0,ls=null,fs=!1;function hs(){return 0!==(48&Pu)?zi():-1!==us?us:us=zi()}function ds(e){if(0===(2&(e=e.mode)))return 1;if(0===(4&e))return 99===Bi()?1:2;if(0===ss&&(ss=Vu),0!==Qi.transition){0!==cs&&(cs=null!==qu?qu.pendingLanes:0),e=ss;var t=4186112&~cs;return 0===(t&=-t)&&(0===(t=(e=4186112&~e)&-e)&&(t=8192)),t}return e=Bi(),0!==(4&Pu)&&98===e?e=Ut(12,ss):e=Ut(e=function(e){switch(e){case 99:return 15;case 98:return 10;case 97:case 96:return 8;case 95:return 2;default:return 0}}(e),ss),e}function ps(e,t,n){if(50<as)throw as=0,os=null,Error(o(185));if(null===(e=vs(e,t)))return null;zt(e,t,n),e===Ou&&(zu|=t,4===ju&&gs(e,Lu));var r=Bi();1===t?0!==(8&Pu)&&0===(48&Pu)?ks(e):(ms(e,n),0===Pu&&(Wu(),Wi())):(0===(4&Pu)||98!==r&&99!==r||(null===is?is=new Set([e]):is.add(e)),ms(e,n)),qu=e}function vs(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}function ms(e,t){for(var n=e.callbackNode,r=e.suspendedLanes,i=e.pingedLanes,a=e.expirationTimes,u=e.pendingLanes;0<u;){var s=31-Bt(u),c=1<<s,l=a[s];if(-1===l){if(0===(c&r)||0!==(c&i)){l=t,Mt(c);var f=Lt;a[s]=10<=f?l+250:6<=f?l+5e3:-1}}else l<=t&&(e.expiredLanes|=c);u&=~c}if(r=Ft(e,e===Ou?Lu:0),t=Lt,0===r)null!==n&&(n!==Mi&&Ei(n),e.callbackNode=null,e.callbackPriority=0);else{if(null!==n){if(e.callbackPriority===t)return;n!==Mi&&Ei(n)}15===t?(n=ks.bind(null,e),null===ji?(ji=[n],Ui=Si(Ri,Hi)):ji.push(n),n=Mi):14===t?n=Ki(99,ks.bind(null,e)):(n=function(e){switch(e){case 15:case 14:return 99;case 13:case 12:case 11:case 10:return 98;case 9:case 8:case 7:case 6:case 4:case 5:return 97;case 3:case 2:case 1:return 95;case 0:return 90;default:throw Error(o(358,e))}}(t),n=Ki(n,ys.bind(null,e))),e.callbackPriority=t,e.callbackNode=n}}function ys(e){if(us=-1,cs=ss=0,0!==(48&Pu))throw Error(o(327));var t=e.callbackNode;if(Ls()&&e.callbackNode!==t)return null;var n=Ft(e,e===Ou?Lu:0);if(0===n)return null;var r=n,i=Pu;Pu|=16;var a=Es();for(Ou===e&&Lu===r||(Wu(),Is(e,r));;)try{As();break}catch(s){Ss(e,s)}if(ta(),Nu.current=a,Pu=i,null!==Du?r=0:(Ou=null,Lu=0,r=ju),0!==(Vu&zu))Is(e,0);else if(0!==r){if(2===r&&(Pu|=64,e.hydrate&&(e.hydrate=!1,Kr(e.containerInfo)),0!==(n=jt(e))&&(r=Ts(e,n))),1===r)throw t=Uu,Is(e,0),gs(e,n),ms(e,zi()),t;switch(e.finishedWork=e.current.alternate,e.finishedLanes=n,r){case 0:case 1:throw Error(o(345));case 2:case 5:Ps(e);break;case 3:if(gs(e,n),(62914560&n)===n&&10<(r=Gu+500-zi())){if(0!==Ft(e,0))break;if(((i=e.suspendedLanes)&n)!==n){hs(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=qr(Ps.bind(null,e),r);break}Ps(e);break;case 4:if(gs(e,n),(4186112&n)===n)break;for(r=e.eventTimes,i=-1;0<n;){var u=31-Bt(n);a=1<<u,(u=r[u])>i&&(i=u),n&=~a}if(n=i,10<(n=(120>(n=zi()-n)?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*Au(n/1960))-n)){e.timeoutHandle=qr(Ps.bind(null,e),n);break}Ps(e);break;default:throw Error(o(329))}}return ms(e,zi()),e.callbackNode===t?ys.bind(null,e):null}function gs(e,t){for(t&=~Bu,t&=~zu,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Bt(t),r=1<<n;e[n]=-1,t&=~r}}function ks(e){if(0!==(48&Pu))throw Error(o(327));if(Ls(),e===Ou&&0!==(e.expiredLanes&Lu)){var t=Lu,n=Ts(e,t);0!==(Vu&zu)&&(n=Ts(e,t=Ft(e,t)))}else n=Ts(e,t=Ft(e,0));if(0!==e.tag&&2===n&&(Pu|=64,e.hydrate&&(e.hydrate=!1,Kr(e.containerInfo)),0!==(t=jt(e))&&(n=Ts(e,t))),1===n)throw n=Uu,Is(e,0),gs(e,t),ms(e,zi()),n;return e.finishedWork=e.current.alternate,e.finishedLanes=t,Ps(e),ms(e,zi()),null}function bs(e,t){var n=Pu;Pu|=1;try{return e(t)}finally{0===(Pu=n)&&(Wu(),Wi())}}function ws(e,t){var n=Pu;Pu&=-2,Pu|=8;try{return e(t)}finally{0===(Pu=n)&&(Wu(),Wi())}}function xs(e,t){li(Fu,Mu),Mu|=t,Vu|=t}function _s(){Mu=Fu.current,ci(Fu)}function Is(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,Gr(n)),null!==Du)for(n=Du.return;null!==n;){var r=n;switch(r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&yi();break;case 3:Oa(),ci(di),ci(hi),Ha();break;case 5:La(r);break;case 4:Oa();break;case 13:case 19:ci(Ma);break;case 10:na(r);break;case 23:case 24:_s()}n=n.return}Ou=e,Du=Ks(e.current,null),Lu=Mu=Vu=t,ju=0,Uu=null,Bu=zu=Zu=0}function Ss(e,t){for(;;){var n=Du;try{if(ta(),Qa.current=Ro,to){for(var r=Xa.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}to=!1}if($a=0,eo=Ja=Xa=null,no=!1,Ru.current=null,null===n||null===n.return){ju=1,Uu=t,Du=null;break}e:{var a=e,o=n.return,u=n,s=t;if(t=Lu,u.flags|=2048,u.firstEffect=u.lastEffect=null,null!==s&&"object"===typeof s&&"function"===typeof s.then){var c=s;if(0===(2&u.mode)){var l=u.alternate;l?(u.updateQueue=l.updateQueue,u.memoizedState=l.memoizedState,u.lanes=l.lanes):(u.updateQueue=null,u.memoizedState=null)}var f=0!==(1&Ma.current),h=o;do{var d;if(d=13===h.tag){var p=h.memoizedState;if(null!==p)d=null!==p.dehydrated;else{var v=h.memoizedProps;d=void 0!==v.fallback&&(!0!==v.unstable_avoidThisFallback||!f)}}if(d){var m=h.updateQueue;if(null===m){var y=new Set;y.add(c),h.updateQueue=y}else m.add(c);if(0===(2&h.mode)){if(h.flags|=64,u.flags|=16384,u.flags&=-2981,1===u.tag)if(null===u.alternate)u.tag=17;else{var g=ca(-1,1);g.tag=2,la(u,g)}u.lanes|=1;break e}s=void 0,u=t;var k=a.pingCache;if(null===k?(k=a.pingCache=new fu,s=new Set,k.set(c,s)):void 0===(s=k.get(c))&&(s=new Set,k.set(c,s)),!s.has(u)){s.add(u);var b=Zs.bind(null,a,c,u);c.then(b,b)}h.flags|=4096,h.lanes=t;break e}h=h.return}while(null!==h);s=Error((W(u.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display.")}5!==ju&&(ju=2),s=cu(s,u),h=o;do{switch(h.tag){case 3:a=s,h.flags|=4096,t&=-t,h.lanes|=t,fa(h,hu(0,a,t));break e;case 1:a=s;var w=h.type,x=h.stateNode;if(0===(64&h.flags)&&("function"===typeof w.getDerivedStateFromError||null!==x&&"function"===typeof x.componentDidCatch&&(null===Xu||!Xu.has(x)))){h.flags|=4096,t&=-t,h.lanes|=t,fa(h,du(h,a,t));break e}}h=h.return}while(null!==h)}Rs(n)}catch(_){t=_,Du===n&&null!==n&&(Du=n=n.return);continue}break}}function Es(){var e=Nu.current;return Nu.current=Ro,null===e?Ro:e}function Ts(e,t){var n=Pu;Pu|=16;var r=Es();for(Ou===e&&Lu===t||Is(e,t);;)try{Cs();break}catch(i){Ss(e,i)}if(ta(),Pu=n,Nu.current=r,null!==Du)throw Error(o(261));return Ou=null,Lu=0,ju}function Cs(){for(;null!==Du;)Ns(Du)}function As(){for(;null!==Du&&!Ti();)Ns(Du)}function Ns(e){var t=Hu(e.alternate,e,Mu);e.memoizedProps=e.pendingProps,null===t?Rs(e):Du=t,Ru.current=null}function Rs(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(2048&t.flags)){if(null!==(n=uu(n,t,Mu)))return void(Du=n);if(24!==(n=t).tag&&23!==n.tag||null===n.memoizedState||0!==(1073741824&Mu)||0===(4&n.mode)){for(var r=0,i=n.child;null!==i;)r|=i.lanes|i.childLanes,i=i.sibling;n.childLanes=r}null!==e&&0===(2048&e.flags)&&(null===e.firstEffect&&(e.firstEffect=t.firstEffect),null!==t.lastEffect&&(null!==e.lastEffect&&(e.lastEffect.nextEffect=t.firstEffect),e.lastEffect=t.lastEffect),1<t.flags&&(null!==e.lastEffect?e.lastEffect.nextEffect=t:e.firstEffect=t,e.lastEffect=t))}else{if(null!==(n=su(t)))return n.flags&=2047,void(Du=n);null!==e&&(e.firstEffect=e.lastEffect=null,e.flags|=2048)}if(null!==(t=t.sibling))return void(Du=t);Du=t=e}while(null!==t);0===ju&&(ju=5)}function Ps(e){var t=Bi();return Gi(99,Os.bind(null,e,t)),null}function Os(e,t){do{Ls()}while(null!==es);if(0!==(48&Pu))throw Error(o(327));var n=e.finishedWork;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(o(177));e.callbackNode=null;var r=n.lanes|n.childLanes,i=r,a=e.pendingLanes&~i;e.pendingLanes=i,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=i,e.mutableReadLanes&=i,e.entangledLanes&=i,i=e.entanglements;for(var u=e.eventTimes,s=e.expirationTimes;0<a;){var c=31-Bt(a),l=1<<c;i[c]=0,u[c]=-1,s[c]=-1,a&=~l}if(null!==is&&0===(24&r)&&is.has(e)&&is.delete(e),e===Ou&&(Du=Ou=null,Lu=0),1<n.flags?null!==n.lastEffect?(n.lastEffect.nextEffect=n,r=n.firstEffect):r=n:r=n.firstEffect,null!==r){if(i=Pu,Pu|=32,Ru.current=null,Vr=Ht,mr(u=vr())){if("selectionStart"in u)s={start:u.selectionStart,end:u.selectionEnd};else e:if(s=(s=u.ownerDocument)&&s.defaultView||window,(l=s.getSelection&&s.getSelection())&&0!==l.rangeCount){s=l.anchorNode,a=l.anchorOffset,c=l.focusNode,l=l.focusOffset;try{s.nodeType,c.nodeType}catch(E){s=null;break e}var f=0,h=-1,d=-1,p=0,v=0,m=u,y=null;t:for(;;){for(var g;m!==s||0!==a&&3!==m.nodeType||(h=f+a),m!==c||0!==l&&3!==m.nodeType||(d=f+l),3===m.nodeType&&(f+=m.nodeValue.length),null!==(g=m.firstChild);)y=m,m=g;for(;;){if(m===u)break t;if(y===s&&++p===a&&(h=f),y===c&&++v===l&&(d=f),null!==(g=m.nextSibling))break;y=(m=y).parentNode}m=g}s=-1===h||-1===d?null:{start:h,end:d}}else s=null;s=s||{start:0,end:0}}else s=null;Zr={focusedElem:u,selectionRange:s},Ht=!1,ls=null,fs=!1,Qu=r;do{try{Ds()}catch(E){if(null===Qu)throw Error(o(330));Vs(Qu,E),Qu=Qu.nextEffect}}while(null!==Qu);ls=null,Qu=r;do{try{for(u=e;null!==Qu;){var k=Qu.flags;if(16&k&&ye(Qu.stateNode,""),128&k){var b=Qu.alternate;if(null!==b){var w=b.ref;null!==w&&("function"===typeof w?w(null):w.current=null)}}switch(1038&k){case 2:xu(Qu),Qu.flags&=-3;break;case 6:xu(Qu),Qu.flags&=-3,Eu(Qu.alternate,Qu);break;case 1024:Qu.flags&=-1025;break;case 1028:Qu.flags&=-1025,Eu(Qu.alternate,Qu);break;case 4:Eu(Qu.alternate,Qu);break;case 8:Su(u,s=Qu);var x=s.alternate;bu(s),null!==x&&bu(x)}Qu=Qu.nextEffect}}catch(E){if(null===Qu)throw Error(o(330));Vs(Qu,E),Qu=Qu.nextEffect}}while(null!==Qu);if(w=Zr,b=vr(),k=w.focusedElem,u=w.selectionRange,b!==k&&k&&k.ownerDocument&&pr(k.ownerDocument.documentElement,k)){null!==u&&mr(k)&&(b=u.start,void 0===(w=u.end)&&(w=b),"selectionStart"in k?(k.selectionStart=b,k.selectionEnd=Math.min(w,k.value.length)):(w=(b=k.ownerDocument||document)&&b.defaultView||window).getSelection&&(w=w.getSelection(),s=k.textContent.length,x=Math.min(u.start,s),u=void 0===u.end?x:Math.min(u.end,s),!w.extend&&x>u&&(s=u,u=x,x=s),s=dr(k,x),a=dr(k,u),s&&a&&(1!==w.rangeCount||w.anchorNode!==s.node||w.anchorOffset!==s.offset||w.focusNode!==a.node||w.focusOffset!==a.offset)&&((b=b.createRange()).setStart(s.node,s.offset),w.removeAllRanges(),x>u?(w.addRange(b),w.extend(a.node,a.offset)):(b.setEnd(a.node,a.offset),w.addRange(b))))),b=[];for(w=k;w=w.parentNode;)1===w.nodeType&&b.push({element:w,left:w.scrollLeft,top:w.scrollTop});for("function"===typeof k.focus&&k.focus(),k=0;k<b.length;k++)(w=b[k]).element.scrollLeft=w.left,w.element.scrollTop=w.top}Ht=!!Vr,Zr=Vr=null,e.current=n,Qu=r;do{try{for(k=e;null!==Qu;){var _=Qu.flags;if(36&_&&yu(k,Qu.alternate,Qu),128&_){b=void 0;var I=Qu.ref;if(null!==I){var S=Qu.stateNode;Qu.tag,b=S,"function"===typeof I?I(b):I.current=b}}Qu=Qu.nextEffect}}catch(E){if(null===Qu)throw Error(o(330));Vs(Qu,E),Qu=Qu.nextEffect}}while(null!==Qu);Qu=null,Fi(),Pu=i}else e.current=n;if(Ju)Ju=!1,es=e,ts=t;else for(Qu=r;null!==Qu;)t=Qu.nextEffect,Qu.nextEffect=null,8&Qu.flags&&((_=Qu).sibling=null,_.stateNode=null),Qu=t;if(0===(r=e.pendingLanes)&&(Xu=null),1===r?e===os?as++:(as=0,os=e):as=0,n=n.stateNode,_i&&"function"===typeof _i.onCommitFiberRoot)try{_i.onCommitFiberRoot(xi,n,void 0,64===(64&n.current.flags))}catch(E){}if(ms(e,zi()),Yu)throw Yu=!1,e=$u,$u=null,e;return 0!==(8&Pu)||Wi(),null}function Ds(){for(;null!==Qu;){var e=Qu.alternate;fs||null===ls||(0!==(8&Qu.flags)?Je(Qu,ls)&&(fs=!0):13===Qu.tag&&Cu(e,Qu)&&Je(Qu,ls)&&(fs=!0));var t=Qu.flags;0!==(256&t)&&mu(e,Qu),0===(512&t)||Ju||(Ju=!0,Ki(97,(function(){return Ls(),null}))),Qu=Qu.nextEffect}}function Ls(){if(90!==ts){var e=97<ts?97:ts;return ts=90,Gi(e,js)}return!1}function Ms(e,t){ns.push(t,e),Ju||(Ju=!0,Ki(97,(function(){return Ls(),null})))}function Fs(e,t){rs.push(t,e),Ju||(Ju=!0,Ki(97,(function(){return Ls(),null})))}function js(){if(null===es)return!1;var e=es;if(es=null,0!==(48&Pu))throw Error(o(331));var t=Pu;Pu|=32;var n=rs;rs=[];for(var r=0;r<n.length;r+=2){var i=n[r],a=n[r+1],u=i.destroy;if(i.destroy=void 0,"function"===typeof u)try{u()}catch(c){if(null===a)throw Error(o(330));Vs(a,c)}}for(n=ns,ns=[],r=0;r<n.length;r+=2){i=n[r],a=n[r+1];try{var s=i.create;i.destroy=s()}catch(c){if(null===a)throw Error(o(330));Vs(a,c)}}for(s=e.current.firstEffect;null!==s;)e=s.nextEffect,s.nextEffect=null,8&s.flags&&(s.sibling=null,s.stateNode=null),s=e;return Pu=t,Wi(),!0}function Us(e,t,n){la(e,t=hu(0,t=cu(n,t),1)),t=hs(),null!==(e=vs(e,1))&&(zt(e,1,t),ms(e,t))}function Vs(e,t){if(3===e.tag)Us(e,e,t);else for(var n=e.return;null!==n;){if(3===n.tag){Us(n,e,t);break}if(1===n.tag){var r=n.stateNode;if("function"===typeof n.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Xu||!Xu.has(r))){var i=du(n,e=cu(t,e),1);if(la(n,i),i=hs(),null!==(n=vs(n,1)))zt(n,1,i),ms(n,i);else if("function"===typeof r.componentDidCatch&&(null===Xu||!Xu.has(r)))try{r.componentDidCatch(t,e)}catch(a){}break}}n=n.return}}function Zs(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=hs(),e.pingedLanes|=e.suspendedLanes&n,Ou===e&&(Lu&n)===n&&(4===ju||3===ju&&(62914560&Lu)===Lu&&500>zi()-Gu?Is(e,0):Bu|=n),ms(e,t)}function zs(e,t){var n=e.stateNode;null!==n&&n.delete(t),0===(t=0)&&(0===(2&(t=e.mode))?t=1:0===(4&t)?t=99===Bi()?1:2:(0===ss&&(ss=Vu),0===(t=Vt(62914560&~ss))&&(t=4194304))),n=hs(),null!==(e=vs(e,t))&&(zt(e,t,n),ms(e,n))}function Bs(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.flags=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childLanes=this.lanes=0,this.alternate=null}function qs(e,t,n,r){return new Bs(e,t,n,r)}function Gs(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Ks(e,t){var n=e.alternate;return null===n?((n=qs(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.nextEffect=null,n.firstEffect=null,n.lastEffect=null),n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Ws(e,t,n,r,i,a){var u=2;if(r=e,"function"===typeof e)Gs(e)&&(u=1);else if("string"===typeof e)u=5;else e:switch(e){case I:return Hs(n.children,i,a,t);case M:u=8,i|=16;break;case S:u=8,i|=1;break;case E:return(e=qs(12,n,t,8|i)).elementType=E,e.type=E,e.lanes=a,e;case N:return(e=qs(13,n,t,i)).type=N,e.elementType=N,e.lanes=a,e;case R:return(e=qs(19,n,t,i)).elementType=R,e.lanes=a,e;case F:return Qs(n,i,a,t);case j:return(e=qs(24,n,t,i)).elementType=j,e.lanes=a,e;default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case T:u=10;break e;case C:u=9;break e;case A:u=11;break e;case P:u=14;break e;case O:u=16,r=null;break e;case D:u=22;break e}throw Error(o(130,null==e?e:typeof e,""))}return(t=qs(u,n,t,i)).elementType=e,t.type=r,t.lanes=a,t}function Hs(e,t,n,r){return(e=qs(7,e,r,t)).lanes=n,e}function Qs(e,t,n,r){return(e=qs(23,e,r,t)).elementType=F,e.lanes=n,e}function Ys(e,t,n){return(e=qs(6,e,null,t)).lanes=n,e}function $s(e,t,n){return(t=qs(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Xs(e,t,n){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=n,this.callbackNode=null,this.callbackPriority=0,this.eventTimes=Zt(0),this.expirationTimes=Zt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Zt(0),this.mutableSourceEagerHydrationData=null}function Js(e,t,n,r){var i=t.current,a=hs(),u=ds(i);e:if(n){t:{if(Qe(n=n._reactInternals)!==n||1!==n.tag)throw Error(o(170));var s=n;do{switch(s.tag){case 3:s=s.stateNode.context;break t;case 1:if(mi(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break t}}s=s.return}while(null!==s);throw Error(o(171))}if(1===n.tag){var c=n.type;if(mi(c)){n=ki(n,c,s);break e}}n=s}else n=fi;return null===t.context?t.context=n:t.pendingContext=n,(t=ca(a,u)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),la(i,t),ps(i,u,a),u}function ec(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function tc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function nc(e,t){tc(e,t),(e=e.alternate)&&tc(e,t)}function rc(e,t,n){var r=null!=n&&null!=n.hydrationOptions&&n.hydrationOptions.mutableSources||null;if(n=new Xs(e,t,null!=n&&!0===n.hydrate),t=qs(3,null,null,2===t?7:1===t?3:0),n.current=t,t.stateNode=n,ua(t),e[Jr]=n.current,Rr(8===e.nodeType?e.parentNode:e),r)for(e=0;e<r.length;e++){var i=(t=r[e])._getVersion;i=i(t._source),null==n.mutableSourceEagerHydrationData?n.mutableSourceEagerHydrationData=[t,i]:n.mutableSourceEagerHydrationData.push(t,i)}this._internalRoot=n}function ic(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function ac(e,t,n,r,i){var a=n._reactRootContainer;if(a){var o=a._internalRoot;if("function"===typeof i){var u=i;i=function(){var e=ec(o);u.call(e)}}Js(t,o,e,i)}else{if(a=n._reactRootContainer=function(e,t){if(t||(t=!(!(t=e?9===e.nodeType?e.documentElement:e.firstChild:null)||1!==t.nodeType||!t.hasAttribute("data-reactroot"))),!t)for(var n;n=e.lastChild;)e.removeChild(n);return new rc(e,0,t?{hydrate:!0}:void 0)}(n,r),o=a._internalRoot,"function"===typeof i){var s=i;i=function(){var e=ec(o);s.call(e)}}ws((function(){Js(t,o,e,i)}))}return ec(o)}function oc(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!ic(t))throw Error(o(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:_,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)}Hu=function(e,t,n){var r=t.lanes;if(null!==e)if(e.memoizedProps!==t.pendingProps||di.current)Mo=!0;else{if(0===(n&r)){switch(Mo=!1,t.tag){case 3:Ko(t),Ka();break;case 5:Da(t);break;case 1:mi(t.type)&&bi(t);break;case 4:Pa(t,t.stateNode.containerInfo);break;case 10:r=t.memoizedProps.value;var i=t.type._context;li($i,i._currentValue),i._currentValue=r;break;case 13:if(null!==t.memoizedState)return 0!==(n&t.child.childLanes)?Xo(e,t,n):(li(Ma,1&Ma.current),null!==(t=au(e,t,n))?t.sibling:null);li(Ma,1&Ma.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(64&e.flags)){if(r)return iu(e,t,n);t.flags|=64}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),li(Ma,Ma.current),r)break;return null;case 23:case 24:return t.lanes=0,Zo(e,t,n)}return au(e,t,n)}Mo=0!==(16384&e.flags)}else Mo=!1;switch(t.lanes=0,t.tag){case 2:if(r=t.type,null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,i=vi(t,hi.current),ia(t,n),i=ao(null,t,r,e,i,n),t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof){if(t.tag=1,t.memoizedState=null,t.updateQueue=null,mi(r)){var a=!0;bi(t)}else a=!1;t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,ua(t);var u=r.getDerivedStateFromProps;"function"===typeof u&&va(t,r,u,e),i.updater=ma,t.stateNode=i,i._reactInternals=t,ba(t,r,e,n),t=Go(null,t,r,!0,a,n)}else t.tag=0,Fo(null,t,i,n),t=t.child;return t;case 16:i=t.elementType;e:{switch(null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,i=(a=i._init)(i._payload),t.type=i,a=t.tag=function(e){if("function"===typeof e)return Gs(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===A)return 11;if(e===P)return 14}return 2}(i),e=Yi(i,e),a){case 0:t=Bo(null,t,i,e,n);break e;case 1:t=qo(null,t,i,e,n);break e;case 11:t=jo(null,t,i,e,n);break e;case 14:t=Uo(null,t,i,Yi(i.type,e),r,n);break e}throw Error(o(306,i,""))}return t;case 0:return r=t.type,i=t.pendingProps,Bo(e,t,r,i=t.elementType===r?i:Yi(r,i),n);case 1:return r=t.type,i=t.pendingProps,qo(e,t,r,i=t.elementType===r?i:Yi(r,i),n);case 3:if(Ko(t),r=t.updateQueue,null===e||null===r)throw Error(o(282));if(r=t.pendingProps,i=null!==(i=t.memoizedState)?i.element:null,sa(e,t),ha(t,r,null,n),(r=t.memoizedState.element)===i)Ka(),t=au(e,t,n);else{if((a=(i=t.stateNode).hydrate)&&(Ua=Wr(t.stateNode.containerInfo.firstChild),ja=t,a=Va=!0),a){if(null!=(e=i.mutableSourceEagerHydrationData))for(i=0;i<e.length;i+=2)(a=e[i])._workInProgressVersionPrimary=e[i+1],Wa.push(a);for(n=Ea(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|1024,n=n.sibling}else Fo(e,t,r,n),Ka();t=t.child}return t;case 5:return Da(t),null===e&&Ba(t),r=t.type,i=t.pendingProps,a=null!==e?e.memoizedProps:null,u=i.children,Br(r,i)?u=null:null!==a&&Br(r,a)&&(t.flags|=16),zo(e,t),Fo(e,t,u,n),t.child;case 6:return null===e&&Ba(t),null;case 13:return Xo(e,t,n);case 4:return Pa(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Sa(t,null,r,n):Fo(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,jo(e,t,r,i=t.elementType===r?i:Yi(r,i),n);case 7:return Fo(e,t,t.pendingProps,n),t.child;case 8:case 12:return Fo(e,t,t.pendingProps.children,n),t.child;case 10:e:{r=t.type._context,i=t.pendingProps,u=t.memoizedProps,a=i.value;var s=t.type._context;if(li($i,s._currentValue),s._currentValue=a,null!==u)if(s=u.value,0===(a=cr(s,a)?0:0|("function"===typeof r._calculateChangedBits?r._calculateChangedBits(s,a):1073741823))){if(u.children===i.children&&!di.current){t=au(e,t,n);break e}}else for(null!==(s=t.child)&&(s.return=t);null!==s;){var c=s.dependencies;if(null!==c){u=s.child;for(var l=c.firstContext;null!==l;){if(l.context===r&&0!==(l.observedBits&a)){1===s.tag&&((l=ca(-1,n&-n)).tag=2,la(s,l)),s.lanes|=n,null!==(l=s.alternate)&&(l.lanes|=n),ra(s.return,n),c.lanes|=n;break}l=l.next}}else u=10===s.tag&&s.type===t.type?null:s.child;if(null!==u)u.return=s;else for(u=s;null!==u;){if(u===t){u=null;break}if(null!==(s=u.sibling)){s.return=u.return,u=s;break}u=u.return}s=u}Fo(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=(a=t.pendingProps).children,ia(t,n),r=r(i=aa(i,a.unstable_observedBits)),t.flags|=1,Fo(e,t,r,n),t.child;case 14:return a=Yi(i=t.type,t.pendingProps),Uo(e,t,i,a=Yi(i.type,a),r,n);case 15:return Vo(e,t,t.type,t.pendingProps,r,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Yi(r,i),null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),t.tag=1,mi(r)?(e=!0,bi(t)):e=!1,ia(t,n),ga(t,r,i),ba(t,r,i,n),Go(null,t,r,!0,e,n);case 19:return iu(e,t,n);case 23:case 24:return Zo(e,t,n)}throw Error(o(156,t.tag))},rc.prototype.render=function(e){Js(e,this._internalRoot,null,null)},rc.prototype.unmount=function(){var e=this._internalRoot,t=e.containerInfo;Js(null,e,null,(function(){t[Jr]=null}))},et=function(e){13===e.tag&&(ps(e,4,hs()),nc(e,4))},tt=function(e){13===e.tag&&(ps(e,67108864,hs()),nc(e,67108864))},nt=function(e){if(13===e.tag){var t=hs(),n=ds(e);ps(e,n,t),nc(e,n)}},rt=function(e,t){return t()},Ee=function(e,t,n){switch(t){case"input":if(ne(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=ii(r);if(!i)throw Error(o(90));$(r),ne(r,i)}}}break;case"textarea":ce(e,n);break;case"select":null!=(t=n.value)&&oe(e,!!n.multiple,t,!1)}},Pe=bs,Oe=function(e,t,n,r,i){var a=Pu;Pu|=4;try{return Gi(98,e.bind(null,t,n,r,i))}finally{0===(Pu=a)&&(Wu(),Wi())}},De=function(){0===(49&Pu)&&(function(){if(null!==is){var e=is;is=null,e.forEach((function(e){e.expiredLanes|=24&e.pendingLanes,ms(e,zi())}))}Wi()}(),Ls())},Le=function(e,t){var n=Pu;Pu|=2;try{return e(t)}finally{0===(Pu=n)&&(Wu(),Wi())}};var uc={Events:[ni,ri,ii,Ne,Re,Ls,{current:!1}]},sc={findFiberByHostInstance:ti,bundleType:0,version:"17.0.2",rendererPackageName:"react-dom"},cc={bundleType:sc.bundleType,version:sc.version,rendererPackageName:sc.rendererPackageName,rendererConfig:sc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:w.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Xe(e))?null:e.stateNode},findFiberByHostInstance:sc.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var lc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!lc.isDisabled&&lc.supportsFiber)try{xi=lc.inject(cc),_i=lc}catch(ve){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=uc,t.createPortal=oc,t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(o(188));throw Error(o(268,Object.keys(e)))}return e=null===(e=Xe(t))?null:e.stateNode},t.flushSync=function(e,t){var n=Pu;if(0!==(48&n))return e(t);Pu|=1;try{if(e)return Gi(99,e.bind(null,t))}finally{Pu=n,Wi()}},t.hydrate=function(e,t,n){if(!ic(t))throw Error(o(200));return ac(null,e,t,!0,n)},t.render=function(e,t,n){if(!ic(t))throw Error(o(200));return ac(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!ic(e))throw Error(o(40));return!!e._reactRootContainer&&(ws((function(){ac(null,null,e,!1,(function(){e._reactRootContainer=null,e[Jr]=null}))})),!0)},t.unstable_batchedUpdates=bs,t.unstable_createPortal=function(e,t){return oc(e,t,2<arguments.length&&void 0!==arguments[2]?arguments[2]:null)},t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!ic(n))throw Error(o(200));if(null==e||void 0===e._reactInternals)throw Error(o(38));return ac(e,t,n,!1,r)},t.version="17.0.2"},164:function(e,t,n){"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(463)},374:function(e,t,n){"use strict";n(725);var r=n(791),i=60103;if(t.Fragment=60107,"function"===typeof Symbol&&Symbol.for){var a=Symbol.for;i=a("react.element"),t.Fragment=a("react.fragment")}var o=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,u=Object.prototype.hasOwnProperty,s={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,a={},c=null,l=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(l=t.ref),t)u.call(t,r)&&!s.hasOwnProperty(r)&&(a[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===a[r]&&(a[r]=t[r]);return{$$typeof:i,type:e,key:c,ref:l,props:a,_owner:o.current}}t.jsx=c,t.jsxs=c},117:function(e,t,n){"use strict";var r=n(725),i=60103,a=60106;t.Fragment=60107,t.StrictMode=60108,t.Profiler=60114;var o=60109,u=60110,s=60112;t.Suspense=60113;var c=60115,l=60116;if("function"===typeof Symbol&&Symbol.for){var f=Symbol.for;i=f("react.element"),a=f("react.portal"),t.Fragment=f("react.fragment"),t.StrictMode=f("react.strict_mode"),t.Profiler=f("react.profiler"),o=f("react.provider"),u=f("react.context"),s=f("react.forward_ref"),t.Suspense=f("react.suspense"),c=f("react.memo"),l=f("react.lazy")}var h="function"===typeof Symbol&&Symbol.iterator;function d(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v={};function m(e,t,n){this.props=e,this.context=t,this.refs=v,this.updater=n||p}function y(){}function g(e,t,n){this.props=e,this.context=t,this.refs=v,this.updater=n||p}m.prototype.isReactComponent={},m.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error(d(85));this.updater.enqueueSetState(this,e,t,"setState")},m.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},y.prototype=m.prototype;var k=g.prototype=new y;k.constructor=g,r(k,m.prototype),k.isPureReactComponent=!0;var b={current:null},w=Object.prototype.hasOwnProperty,x={key:!0,ref:!0,__self:!0,__source:!0};function _(e,t,n){var r,a={},o=null,u=null;if(null!=t)for(r in void 0!==t.ref&&(u=t.ref),void 0!==t.key&&(o=""+t.key),t)w.call(t,r)&&!x.hasOwnProperty(r)&&(a[r]=t[r]);var s=arguments.length-2;if(1===s)a.children=n;else if(1<s){for(var c=Array(s),l=0;l<s;l++)c[l]=arguments[l+2];a.children=c}if(e&&e.defaultProps)for(r in s=e.defaultProps)void 0===a[r]&&(a[r]=s[r]);return{$$typeof:i,type:e,key:o,ref:u,props:a,_owner:b.current}}function I(e){return"object"===typeof e&&null!==e&&e.$$typeof===i}var S=/\/+/g;function E(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function T(e,t,n,r,o){var u=typeof e;"undefined"!==u&&"boolean"!==u||(e=null);var s=!1;if(null===e)s=!0;else switch(u){case"string":case"number":s=!0;break;case"object":switch(e.$$typeof){case i:case a:s=!0}}if(s)return o=o(s=e),e=""===r?"."+E(s,0):r,Array.isArray(o)?(n="",null!=e&&(n=e.replace(S,"$&/")+"/"),T(o,t,n,"",(function(e){return e}))):null!=o&&(I(o)&&(o=function(e,t){return{$$typeof:i,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,n+(!o.key||s&&s.key===o.key?"":(""+o.key).replace(S,"$&/")+"/")+e)),t.push(o)),1;if(s=0,r=""===r?".":r+":",Array.isArray(e))for(var c=0;c<e.length;c++){var l=r+E(u=e[c],c);s+=T(u,t,n,l,o)}else if(l=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=h&&e[h]||e["@@iterator"])?e:null}(e),"function"===typeof l)for(e=l.call(e),c=0;!(u=e.next()).done;)s+=T(u=u.value,t,n,l=r+E(u,c++),o);else if("object"===u)throw t=""+e,Error(d(31,"[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t));return s}function C(e,t,n){if(null==e)return e;var r=[],i=0;return T(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function A(e){if(-1===e._status){var t=e._result;t=t(),e._status=0,e._result=t,t.then((function(t){0===e._status&&(t=t.default,e._status=1,e._result=t)}),(function(t){0===e._status&&(e._status=2,e._result=t)}))}if(1===e._status)return e._result;throw e._result}var N={current:null};function R(){var e=N.current;if(null===e)throw Error(d(321));return e}var P={ReactCurrentDispatcher:N,ReactCurrentBatchConfig:{transition:0},ReactCurrentOwner:b,IsSomeRendererActing:{current:!1},assign:r};t.Children={map:C,forEach:function(e,t,n){C(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return C(e,(function(){t++})),t},toArray:function(e){return C(e,(function(e){return e}))||[]},only:function(e){if(!I(e))throw Error(d(143));return e}},t.Component=m,t.PureComponent=g,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=P,t.cloneElement=function(e,t,n){if(null===e||void 0===e)throw Error(d(267,e));var a=r({},e.props),o=e.key,u=e.ref,s=e._owner;if(null!=t){if(void 0!==t.ref&&(u=t.ref,s=b.current),void 0!==t.key&&(o=""+t.key),e.type&&e.type.defaultProps)var c=e.type.defaultProps;for(l in t)w.call(t,l)&&!x.hasOwnProperty(l)&&(a[l]=void 0===t[l]&&void 0!==c?c[l]:t[l])}var l=arguments.length-2;if(1===l)a.children=n;else if(1<l){c=Array(l);for(var f=0;f<l;f++)c[f]=arguments[f+2];a.children=c}return{$$typeof:i,type:e.type,key:o,ref:u,props:a,_owner:s}},t.createContext=function(e,t){return void 0===t&&(t=null),(e={$$typeof:u,_calculateChangedBits:t,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:o,_context:e},e.Consumer=e},t.createElement=_,t.createFactory=function(e){var t=_.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:s,render:e}},t.isValidElement=I,t.lazy=function(e){return{$$typeof:l,_payload:{_status:-1,_result:e},_init:A}},t.memo=function(e,t){return{$$typeof:c,type:e,compare:void 0===t?null:t}},t.useCallback=function(e,t){return R().useCallback(e,t)},t.useContext=function(e,t){return R().useContext(e,t)},t.useDebugValue=function(){},t.useEffect=function(e,t){return R().useEffect(e,t)},t.useImperativeHandle=function(e,t,n){return R().useImperativeHandle(e,t,n)},t.useLayoutEffect=function(e,t){return R().useLayoutEffect(e,t)},t.useMemo=function(e,t){return R().useMemo(e,t)},t.useReducer=function(e,t,n){return R().useReducer(e,t,n)},t.useRef=function(e){return R().useRef(e)},t.useState=function(e){return R().useState(e)},t.version="17.0.2"},791:function(e,t,n){"use strict";e.exports=n(117)},184:function(e,t,n){"use strict";e.exports=n(374)},813:function(e,t){"use strict";var n,r,i,a;if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var u=Date,s=u.now();t.unstable_now=function(){return u.now()-s}}if("undefined"===typeof window||"function"!==typeof MessageChannel){var c=null,l=null,f=function e(){if(null!==c)try{var n=t.unstable_now();c(!0,n),c=null}catch(r){throw setTimeout(e,0),r}};n=function(e){null!==c?setTimeout(n,0,e):(c=e,setTimeout(f,0))},r=function(e,t){l=setTimeout(e,t)},i=function(){clearTimeout(l)},t.unstable_shouldYield=function(){return!1},a=t.unstable_forceFrameRate=function(){}}else{var h=window.setTimeout,d=window.clearTimeout;if("undefined"!==typeof console){var p=window.cancelAnimationFrame;"function"!==typeof window.requestAnimationFrame&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills"),"function"!==typeof p&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills")}var v=!1,m=null,y=-1,g=5,k=0;t.unstable_shouldYield=function(){return t.unstable_now()>=k},a=function(){},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):g=0<e?Math.floor(1e3/e):5};var b=new MessageChannel,w=b.port2;b.port1.onmessage=function(){if(null!==m){var e=t.unstable_now();k=e+g;try{m(!0,e)?w.postMessage(null):(v=!1,m=null)}catch(n){throw w.postMessage(null),n}}else v=!1},n=function(e){m=e,v||(v=!0,w.postMessage(null))},r=function(e,n){y=h((function(){e(t.unstable_now())}),n)},i=function(){d(y),y=-1}}function x(e,t){var n=e.length;e.push(t);e:for(;;){var r=n-1>>>1,i=e[r];if(!(void 0!==i&&0<S(i,t)))break e;e[r]=t,e[n]=i,n=r}}function _(e){return void 0===(e=e[0])?null:e}function I(e){var t=e[0];if(void 0!==t){var n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length;r<i;){var a=2*(r+1)-1,o=e[a],u=a+1,s=e[u];if(void 0!==o&&0>S(o,n))void 0!==s&&0>S(s,o)?(e[r]=s,e[u]=n,r=u):(e[r]=o,e[a]=n,r=a);else{if(!(void 0!==s&&0>S(s,n)))break e;e[r]=s,e[u]=n,r=u}}}return t}return null}function S(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}var E=[],T=[],C=1,A=null,N=3,R=!1,P=!1,O=!1;function D(e){for(var t=_(T);null!==t;){if(null===t.callback)I(T);else{if(!(t.startTime<=e))break;I(T),t.sortIndex=t.expirationTime,x(E,t)}t=_(T)}}function L(e){if(O=!1,D(e),!P)if(null!==_(E))P=!0,n(M);else{var t=_(T);null!==t&&r(L,t.startTime-e)}}function M(e,n){P=!1,O&&(O=!1,i()),R=!0;var a=N;try{for(D(n),A=_(E);null!==A&&(!(A.expirationTime>n)||e&&!t.unstable_shouldYield());){var o=A.callback;if("function"===typeof o){A.callback=null,N=A.priorityLevel;var u=o(A.expirationTime<=n);n=t.unstable_now(),"function"===typeof u?A.callback=u:A===_(E)&&I(E),D(n)}else I(E);A=_(E)}if(null!==A)var s=!0;else{var c=_(T);null!==c&&r(L,c.startTime-n),s=!1}return s}finally{A=null,N=a,R=!1}}var F=a;t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){P||R||(P=!0,n(M))},t.unstable_getCurrentPriorityLevel=function(){return N},t.unstable_getFirstCallbackNode=function(){return _(E)},t.unstable_next=function(e){switch(N){case 1:case 2:case 3:var t=3;break;default:t=N}var n=N;N=t;try{return e()}finally{N=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=F,t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=N;N=e;try{return t()}finally{N=n}},t.unstable_scheduleCallback=function(e,a,o){var u=t.unstable_now();switch("object"===typeof o&&null!==o?o="number"===typeof(o=o.delay)&&0<o?u+o:u:o=u,e){case 1:var s=-1;break;case 2:s=250;break;case 5:s=1073741823;break;case 4:s=1e4;break;default:s=5e3}return e={id:C++,callback:a,priorityLevel:e,startTime:o,expirationTime:s=o+s,sortIndex:-1},o>u?(e.sortIndex=o,x(T,e),null===_(E)&&e===_(T)&&(O?i():O=!0,r(L,o-u))):(e.sortIndex=s,x(E,e),P||R||(P=!0,n(M))),e},t.unstable_wrapCallback=function(e){var t=N;return function(){var n=N;N=t;try{return e.apply(this,arguments)}finally{N=n}}}},296:function(e,t,n){"use strict";e.exports=n(813)},836:function(e){e.exports=function(e){return e&&e.__esModule?e:{default:e}},e.exports.__esModule=!0,e.exports.default=e.exports},263:function(e,t,n){var r=n(698).default;function i(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(i=function(e){return e?n:t})(e)}e.exports=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!==typeof e)return{default:e};var n=i(t);if(n&&n.has(e))return n.get(e);var a={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var s=o?Object.getOwnPropertyDescriptor(e,u):null;s&&(s.get||s.set)?Object.defineProperty(a,u,s):a[u]=e[u]}return a.default=e,n&&n.set(e,a),a},e.exports.__esModule=!0,e.exports.default=e.exports},698:function(e){function t(n){return e.exports=t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,t(n)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},907:function(e,t,n){"use strict";function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}n.d(t,{Z:function(){return r}})},878:function(e,t,n){"use strict";function r(e){if(Array.isArray(e))return e}n.d(t,{Z:function(){return r}})},326:function(e,t,n){"use strict";function r(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}n.d(t,{Z:function(){return r}})},144:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(142);function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,(0,r.Z)(i.key),i)}}function a(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}},942:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(142);function i(e,t,n){return(t=(0,r.Z)(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}},199:function(e,t,n){"use strict";function r(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}n.d(t,{Z:function(){return r}})},267:function(e,t,n){"use strict";function r(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}n.d(t,{Z:function(){return r}})},611:function(e,t,n){"use strict";function r(e,t){return r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},r(e,t)}n.d(t,{Z:function(){return r}})},439:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var r=n(878);var i=n(181),a=n(267);function o(e,t){return(0,r.Z)(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a,o,u=[],s=!0,c=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=a.call(n)).done)&&(u.push(r.value),u.length!==t);s=!0);}catch(l){c=!0,i=l}finally{try{if(!s&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw i}}return u}}(e,t)||(0,i.Z)(e,t)||(0,a.Z)()}},433:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var r=n(907);var i=n(199),a=n(181);function o(e){return function(e){if(Array.isArray(e))return(0,r.Z)(e)}(e)||(0,i.Z)(e)||(0,a.Z)(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},142:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(2);function i(e){var t=function(e,t){if("object"!==(0,r.Z)(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!==(0,r.Z)(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===(0,r.Z)(t)?t:String(t)}},2:function(e,t,n){"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}n.d(t,{Z:function(){return r}})},181:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(907);function i(e,t){if(e){if("string"===typeof e)return(0,r.Z)(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?(0,r.Z)(e,t):void 0}}}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var a=t[r]={exports:{}};return e[r](a,a.exports,n),a.exports}n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},function(){"use strict";var e={};n.r(e),n.d(e,{FirebaseError:function(){return yt},SDK_VERSION:function(){return Cn},_DEFAULT_ENTRY_NAME:function(){return vn},_addComponent:function(){return kn},_addOrOverwriteComponent:function(){return bn},_apps:function(){return yn},_clearComponents:function(){return In},_components:function(){return gn},_getProvider:function(){return xn},_registerComponent:function(){return wn},_removeServiceInstance:function(){return _n},deleteApp:function(){return Pn},getApp:function(){return Nn},getApps:function(){return Rn},initializeApp:function(){return An},onLog:function(){return Ln},registerVersion:function(){return Dn},setLogLevel:function(){return Mn}});var t=n(791),r=n(164);var i=n(439),a=n(880),o=n(86),u=n(433);function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var c=n(144),l=n(611);function f(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&(0,l.Z)(e,t)}function h(e){return h=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},h(e)}function d(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var p=n(2),v=n(326);function m(e){var t=d();return function(){var n,r=h(e);if(t){var i=h(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===(0,p.Z)(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return(0,v.Z)(e)}(this,n)}}function y(e,t,n){return y=d()?Reflect.construct.bind():function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&(0,l.Z)(i,n.prototype),i},y.apply(null,arguments)}function g(e){var t="function"===typeof Map?new Map:void 0;return g=function(e){if(null===e||!function(e){return-1!==Function.toString.call(e).indexOf("[native code]")}(e))return e;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return y(e,arguments,h(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),(0,l.Z)(n,e)},g(e)}var k,b=n(878),w=n(199),x=n(181),_=n(267);function I(e){return(0,b.Z)(e)||(0,w.Z)(e)||(0,x.Z)(e)||(0,_.Z)()}function S(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=(0,x.Z)(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){u=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(u)throw a}}}}function E(){return E=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},E.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(k||(k={}));var T,C="popstate";function A(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function N(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(n){}}}function R(e,t){return{usr:e.state,key:e.key,idx:t}}function P(e,t,n,r){return void 0===n&&(n=null),E({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?D(t):t,{state:n,key:t&&t.key||r||Math.random().toString(36).substr(2,8)})}function O(e){var t=e.pathname,n=void 0===t?"/":t,r=e.search,i=void 0===r?"":r,a=e.hash,o=void 0===a?"":a;return i&&"?"!==i&&(n+="?"===i.charAt(0)?i:"?"+i),o&&"#"!==o&&(n+="#"===o.charAt(0)?o:"#"+o),n}function D(e){var t={};if(e){var n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));var r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function L(e,t,n,r){void 0===r&&(r={});var i=r,a=i.window,o=void 0===a?document.defaultView:a,u=i.v5Compat,s=void 0!==u&&u,c=o.history,l=k.Pop,f=null,h=d();function d(){return(c.state||{idx:null}).idx}function p(){l=k.Pop;var e=d(),t=null==e?null:e-h;h=e,f&&f({action:l,location:m.location,delta:t})}function v(e){var t="null"!==o.location.origin?o.location.origin:o.location.href,n="string"===typeof e?e:O(e);return A(t,"No window.location.(origin|href) available to create URL for href: "+n),new URL(n,t)}null==h&&(h=0,c.replaceState(E({},c.state,{idx:h}),""));var m={get action(){return l},get location(){return e(o,c)},listen:function(e){if(f)throw new Error("A history only accepts one active listener");return o.addEventListener(C,p),f=e,function(){o.removeEventListener(C,p),f=null}},createHref:function(e){return t(o,e)},createURL:v,encodeLocation:function(e){var t=v(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,t){l=k.Push;var r=P(m.location,e,t);n&&n(r,e);var i=R(r,h=d()+1),a=m.createHref(r);try{c.pushState(i,"",a)}catch(u){o.location.assign(a)}s&&f&&f({action:l,location:m.location,delta:1})},replace:function(e,t){l=k.Replace;var r=P(m.location,e,t);n&&n(r,e);var i=R(r,h=d()),a=m.createHref(r);c.replaceState(i,"",a),s&&f&&f({action:l,location:m.location,delta:0})},go:function(e){return c.go(e)}};return m}!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(T||(T={}));new Set(["lazy","caseSensitive","path","id","index","children"]);function M(e,t,n){void 0===n&&(n="/");var r=Y(("string"===typeof t?D(t):t).pathname||"/",n);if(null==r)return null;var i=F(e);!function(e){e.sort((function(e,t){return e.score!==t.score?t.score-e.score:function(e,t){var n=e.length===t.length&&e.slice(0,-1).every((function(e,n){return e===t[n]}));return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((function(e){return e.childrenIndex})),t.routesMeta.map((function(e){return e.childrenIndex})))}))}(i);for(var a=null,o=0;null==a&&o<i.length;++o)a=W(i[o],Q(r));return a}function F(e,t,n,r){void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r="");var i=function(e,i,a){var o={relativePath:void 0===a?e.path||"":a,caseSensitive:!0===e.caseSensitive,childrenIndex:i,route:e};o.relativePath.startsWith("/")&&(A(o.relativePath.startsWith(r),'Absolute route path "'+o.relativePath+'" nested under path "'+r+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),o.relativePath=o.relativePath.slice(r.length));var u=ee([r,o.relativePath]),s=n.concat(o);e.children&&e.children.length>0&&(A(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+u+'".'),F(e.children,t,s,u)),(null!=e.path||e.index)&&t.push({path:u,score:K(u,e.index),routesMeta:s})};return e.forEach((function(e,t){var n;if(""!==e.path&&null!=(n=e.path)&&n.includes("?")){var r,a=S(j(e.path));try{for(a.s();!(r=a.n()).done;){var o=r.value;i(e,t,o)}}catch(u){a.e(u)}finally{a.f()}}else i(e,t)})),t}function j(e){var t=e.split("/");if(0===t.length)return[];var n=I(t),r=n[0],i=n.slice(1),a=r.endsWith("?"),o=r.replace(/\?$/,"");if(0===i.length)return a?[o,""]:[o];var s=j(i.join("/")),c=[];return c.push.apply(c,(0,u.Z)(s.map((function(e){return""===e?o:[o,e].join("/")})))),a&&c.push.apply(c,(0,u.Z)(s)),c.map((function(t){return e.startsWith("/")&&""===t?"/":t}))}var U=/^:\w+$/,V=3,Z=2,z=1,B=10,q=-2,G=function(e){return"*"===e};function K(e,t){var n=e.split("/"),r=n.length;return n.some(G)&&(r+=q),t&&(r+=Z),n.filter((function(e){return!G(e)})).reduce((function(e,t){return e+(U.test(t)?V:""===t?z:B)}),r)}function W(e,t){for(var n=e.routesMeta,r={},i="/",a=[],o=0;o<n.length;++o){var u=n[o],s=o===n.length-1,c="/"===i?t:t.slice(i.length)||"/",l=H({path:u.relativePath,caseSensitive:u.caseSensitive,end:s},c);if(!l)return null;Object.assign(r,l.params);var f=u.route;a.push({params:r,pathname:ee([i,l.pathname]),pathnameBase:te(ee([i,l.pathnameBase])),route:f}),"/"!==l.pathnameBase&&(i=ee([i,l.pathnameBase]))}return a}function H(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});var n=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);N("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');var r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/\/:(\w+)/g,(function(e,t){return r.push(t),"/([^\\/]+)"}));e.endsWith("*")?(r.push("*"),i+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":""!==e&&"/"!==e&&(i+="(?:(?=\\/|$))");var a=new RegExp(i,t?void 0:"i");return[a,r]}(e.path,e.caseSensitive,e.end),r=(0,i.Z)(n,2),a=r[0],o=r[1],u=t.match(a);if(!u)return null;var s=u[0],c=s.replace(/(.)\/+$/,"$1"),l=u.slice(1);return{params:o.reduce((function(e,t,n){if("*"===t){var r=l[n]||"";c=s.slice(0,s.length-r.length).replace(/(.)\/+$/,"$1")}return e[t]=function(e,t){try{return decodeURIComponent(e)}catch(n){return N(!1,'The value for the URL param "'+t+'" will not be decoded because the string "'+e+'" is a malformed URL segment. This is probably due to a bad percent encoding ('+n+")."),e}}(l[n]||"",t),e}),{}),pathname:s,pathnameBase:c,pattern:e}}function Q(e){try{return decodeURI(e)}catch(t){return N(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+t+")."),e}}function Y(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;var n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}function $(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the `to."+n+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function X(e){return e.filter((function(e,t){return 0===t||e.route.path&&e.route.path.length>0}))}function J(e,t,n,r){var i;void 0===r&&(r=!1),"string"===typeof e?i=D(e):(A(!(i=E({},e)).pathname||!i.pathname.includes("?"),$("?","pathname","search",i)),A(!i.pathname||!i.pathname.includes("#"),$("#","pathname","hash",i)),A(!i.search||!i.search.includes("#"),$("#","search","hash",i)));var a,o=""===e||""===i.pathname,u=o?"/":i.pathname;if(r||null==u)a=n;else{var s=t.length-1;if(u.startsWith("..")){for(var c=u.split("/");".."===c[0];)c.shift(),s-=1;i.pathname=c.join("/")}a=s>=0?t[s]:"/"}var l=function(e,t){void 0===t&&(t="/");var n="string"===typeof e?D(e):e,r=n.pathname,i=n.search,a=void 0===i?"":i,o=n.hash,u=void 0===o?"":o,s=r?r.startsWith("/")?r:function(e,t){var n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach((function(e){".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)})),n.length>1?n.join("/"):"/"}(r,t):t;return{pathname:s,search:ne(a),hash:re(u)}}(i,a),f=u&&"/"!==u&&u.endsWith("/"),h=(o||"."===u)&&n.endsWith("/");return l.pathname.endsWith("/")||!f&&!h||(l.pathname+="/"),l}var ee=function(e){return e.join("/").replace(/\/\/+/g,"/")},te=function(e){return e.replace(/\/+$/,"").replace(/^\/*/,"/")},ne=function(e){return e&&"?"!==e?e.startsWith("?")?e:"?"+e:""},re=function(e){return e&&"#"!==e?e.startsWith("#")?e:"#"+e:""},ie=function(e){f(n,e);var t=m(n);function n(){return s(this,n),t.apply(this,arguments)}return(0,c.Z)(n)}(g(Error));function ae(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}var oe=["post","put","patch","delete"],ue=(new Set(oe),["get"].concat(oe));new Set(ue),new Set([301,302,303,307,308]),new Set([307,308]),"undefined"!==typeof window&&"undefined"!==typeof window.document&&window.document.createElement;Symbol("deferred");function se(){return se=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},se.apply(this,arguments)}var ce=t.createContext(null);var le=t.createContext(null);var fe=t.createContext(null);var he=t.createContext(null);var de=t.createContext(null);var pe=t.createContext({outlet:null,matches:[],isDataRoute:!1});var ve=t.createContext(null);function me(){return null!=t.useContext(de)}function ye(){return me()||A(!1),t.useContext(de).location}function ge(e){t.useContext(he).static||t.useLayoutEffect(e)}function ke(){return t.useContext(pe).isDataRoute?function(){var e=Ae(_e.UseNavigateStable).router,n=Re(Ie.UseNavigateStable),r=t.useRef(!1);ge((function(){r.current=!0}));var i=t.useCallback((function(t,i){void 0===i&&(i={}),r.current&&("number"===typeof t?e.navigate(t):e.navigate(t,se({fromRouteId:n},i)))}),[e,n]);return i}():function(){me()||A(!1);var e=t.useContext(ce),n=t.useContext(he),r=n.basename,i=n.navigator,a=t.useContext(pe).matches,o=ye().pathname,u=JSON.stringify(X(a).map((function(e){return e.pathnameBase}))),s=t.useRef(!1);ge((function(){s.current=!0}));var c=t.useCallback((function(t,n){if(void 0===n&&(n={}),s.current)if("number"!==typeof t){var a=J(t,JSON.parse(u),o,"path"===n.relative);null==e&&"/"!==r&&(a.pathname="/"===a.pathname?r:ee([r,a.pathname])),(n.replace?i.replace:i.push)(a,n.state,n)}else i.go(t)}),[r,i,u,o,e]);return c}()}function be(e,n){var r=(void 0===n?{}:n).relative,i=t.useContext(pe).matches,a=ye().pathname,o=JSON.stringify(X(i).map((function(e){return e.pathnameBase})));return t.useMemo((function(){return J(e,JSON.parse(o),a,"path"===r)}),[e,o,a,r])}function we(e,n,r){me()||A(!1);var i,a=t.useContext(he).navigator,o=t.useContext(pe).matches,u=o[o.length-1],s=u?u.params:{},c=(u&&u.pathname,u?u.pathnameBase:"/"),l=(u&&u.route,ye());if(n){var f,h="string"===typeof n?D(n):n;"/"===c||(null==(f=h.pathname)?void 0:f.startsWith(c))||A(!1),i=h}else i=l;var d=i.pathname||"/",p=M(e,{pathname:"/"===c?d:d.slice(c.length)||"/"});var v=Ce(p&&p.map((function(e){return Object.assign({},e,{params:Object.assign({},s,e.params),pathname:ee([c,a.encodeLocation?a.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?c:ee([c,a.encodeLocation?a.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])})})),o,r);return n&&v?t.createElement(de.Provider,{value:{location:se({pathname:"/",search:"",hash:"",state:null,key:"default"},i),navigationType:k.Pop}},v):v}function xe(){var e=function(){var e,n=t.useContext(ve),r=Ne(Ie.UseRouteError),i=Re(Ie.UseRouteError);if(n)return n;return null==(e=r.errors)?void 0:e[i]}(),n=ae(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,i="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:i};return t.createElement(t.Fragment,null,t.createElement("h2",null,"Unexpected Application Error!"),t.createElement("h3",{style:{fontStyle:"italic"}},n),r?t.createElement("pre",{style:a},r):null,null)}var _e,Ie,Se=t.createElement(xe,null),Ee=function(e){f(r,e);var n=m(r);function r(e){var t;return s(this,r),(t=n.call(this,e)).state={location:e.location,revalidation:e.revalidation,error:e.error},t}return(0,c.Z)(r,[{key:"componentDidCatch",value:function(e,t){console.error("React Router caught the following error during render",e,t)}},{key:"render",value:function(){return this.state.error?t.createElement(pe.Provider,{value:this.props.routeContext},t.createElement(ve.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}],[{key:"getDerivedStateFromError",value:function(e){return{error:e}}},{key:"getDerivedStateFromProps",value:function(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error||t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}}]),r}(t.Component);function Te(e){var n=e.routeContext,r=e.match,i=e.children,a=t.useContext(ce);return a&&a.static&&a.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=r.route.id),t.createElement(pe.Provider,{value:n},i)}function Ce(e,n,r){var i;if(void 0===n&&(n=[]),void 0===r&&(r=null),null==e){var a;if(null==(a=r)||!a.errors)return null;e=r.matches}var o=e,u=null==(i=r)?void 0:i.errors;if(null!=u){var s=o.findIndex((function(e){return e.route.id&&(null==u?void 0:u[e.route.id])}));s>=0||A(!1),o=o.slice(0,Math.min(o.length,s+1))}return o.reduceRight((function(e,i,a){var s=i.route.id?null==u?void 0:u[i.route.id]:null,c=null;r&&(c=i.route.errorElement||Se);var l=n.concat(o.slice(0,a+1)),f=function(){var n;return n=s?c:i.route.Component?t.createElement(i.route.Component,null):i.route.element?i.route.element:e,t.createElement(Te,{match:i,routeContext:{outlet:e,matches:l,isDataRoute:null!=r},children:n})};return r&&(i.route.ErrorBoundary||i.route.errorElement||0===a)?t.createElement(Ee,{location:r.location,revalidation:r.revalidation,component:c,error:s,children:f(),routeContext:{outlet:null,matches:l,isDataRoute:!0}}):f()}),null)}function Ae(e){var n=t.useContext(ce);return n||A(!1),n}function Ne(e){var n=t.useContext(le);return n||A(!1),n}function Re(e){var n=function(e){var n=t.useContext(pe);return n||A(!1),n}(),r=n.matches[n.matches.length-1];return r.route.id||A(!1),r.route.id}!function(e){e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate"}(_e||(_e={})),function(e){e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId"}(Ie||(Ie={}));var Pe;function Oe(e){A(!1)}function De(e){var n=e.basename,r=void 0===n?"/":n,i=e.children,a=void 0===i?null:i,o=e.location,u=e.navigationType,s=void 0===u?k.Pop:u,c=e.navigator,l=e.static,f=void 0!==l&&l;me()&&A(!1);var h=r.replace(/^\/*/,"/"),d=t.useMemo((function(){return{basename:h,navigator:c,static:f}}),[h,c,f]);"string"===typeof o&&(o=D(o));var p=o,v=p.pathname,m=void 0===v?"/":v,y=p.search,g=void 0===y?"":y,b=p.hash,w=void 0===b?"":b,x=p.state,_=void 0===x?null:x,I=p.key,S=void 0===I?"default":I,E=t.useMemo((function(){var e=Y(m,h);return null==e?null:{location:{pathname:e,search:g,hash:w,state:_,key:S},navigationType:s}}),[h,m,g,w,_,S,s]);return null==E?null:t.createElement(he.Provider,{value:d},t.createElement(de.Provider,{children:a,value:E}))}function Le(e){var t=e.children,n=e.location;return we(Fe(t),n)}!function(e){e[e.pending=0]="pending",e[e.success=1]="success",e[e.error=2]="error"}(Pe||(Pe={}));var Me=new Promise((function(){}));t.Component;function Fe(e,n){void 0===n&&(n=[]);var r=[];return t.Children.forEach(e,(function(e,i){if(t.isValidElement(e)){var a=[].concat((0,u.Z)(n),[i]);if(e.type!==t.Fragment){e.type!==Oe&&A(!1),e.props.index&&e.props.children&&A(!1);var o={id:e.props.id||a.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(o.children=Fe(e.props.children,a)),r.push(o)}else r.push.apply(r,Fe(e.props.children,a))}})),r}function je(){return je=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},je.apply(this,arguments)}function Ue(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}var Ve=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset"];function Ze(e){var n,r=e.basename,a=e.children,o=e.window,u=t.useRef();null==u.current&&(u.current=(void 0===(n={window:o,v5Compat:!0})&&(n={}),L((function(e,t){var n=e.location;return P("",{pathname:n.pathname,search:n.search,hash:n.hash},t.state&&t.state.usr||null,t.state&&t.state.key||"default")}),(function(e,t){return"string"===typeof t?t:O(t)}),null,n)));var s=u.current,c=t.useState({action:s.action,location:s.location}),l=(0,i.Z)(c,2),f=l[0],h=l[1];return t.useLayoutEffect((function(){return s.listen(h)}),[s]),t.createElement(De,{basename:r,children:a,location:f.location,navigationType:f.action,navigator:s})}var ze="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement,Be=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,qe=t.forwardRef((function(e,n){var r,i=e.onClick,a=e.relative,o=e.reloadDocument,u=e.replace,s=e.state,c=e.target,l=e.to,f=e.preventScrollReset,h=Ue(e,Ve),d=t.useContext(he).basename,p=!1;if("string"===typeof l&&Be.test(l)&&(r=l,ze))try{var v=new URL(window.location.href),m=l.startsWith("//")?new URL(v.protocol+l):new URL(l),y=Y(m.pathname,d);m.origin===v.origin&&null!=y?l=y+m.search+m.hash:p=!0}catch(b){}var g=function(e,n){var r=(void 0===n?{}:n).relative;me()||A(!1);var i=t.useContext(he),a=i.basename,o=i.navigator,u=be(e,{relative:r}),s=u.hash,c=u.pathname,l=u.search,f=c;return"/"!==a&&(f="/"===c?a:ee([a,c])),o.createHref({pathname:f,search:l,hash:s})}(l,{relative:a}),k=function(e,n){var r=void 0===n?{}:n,i=r.target,a=r.replace,o=r.state,u=r.preventScrollReset,s=r.relative,c=ke(),l=ye(),f=be(e,{relative:s});return t.useCallback((function(t){if(function(e,t){return 0===e.button&&(!t||"_self"===t)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)}(t,i)){t.preventDefault();var n=void 0!==a?a:O(l)===O(f);c(e,{replace:n,state:o,preventScrollReset:u,relative:s})}}),[l,c,f,a,o,i,e,u,s])}(l,{replace:u,state:s,target:c,preventScrollReset:f,relative:a});return t.createElement("a",je({},h,{href:r||g,onClick:p||o?i:function(e){i&&i(e),e.defaultPrevented||k(e)},ref:n,target:c}))}));var Ge,Ke;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmitImpl="useSubmitImpl",e.UseFetcher="useFetcher"})(Ge||(Ge={})),function(e){e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(Ke||(Ke={}));var We=n(184),He=(0,t.createContext)(),Qe=function(e){var n=e.reducer,r=e.initialState,i=e.children;return(0,We.jsx)(He.Provider,{value:(0,t.useReducer)(n,r),children:i})},Ye=function(){return(0,t.useContext)(He)};function $e(){$e=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",o=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(A){s=function(e,t,n){return e[t]=n}}function c(e,t,n,i){var a=t&&t.prototype instanceof h?t:h,o=Object.create(a.prototype),u=new E(i||[]);return r(o,"_invoke",{value:x(e,n,u)}),o}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(A){return{type:"throw",arg:A}}}e.wrap=c;var f={};function h(){}function d(){}function v(){}var m={};s(m,a,(function(){return this}));var y=Object.getPrototypeOf,g=y&&y(y(T([])));g&&g!==t&&n.call(g,a)&&(m=g);var k=v.prototype=h.prototype=Object.create(m);function b(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function i(r,a,o,u){var s=l(e[r],e,a);if("throw"!==s.type){var c=s.arg,f=c.value;return f&&"object"==(0,p.Z)(f)&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){i("next",e,o,u)}),(function(e){i("throw",e,o,u)})):t.resolve(f).then((function(e){c.value=e,o(c)}),(function(e){return i("throw",e,o,u)}))}u(s.arg)}var a;r(this,"_invoke",{value:function(e,n){function r(){return new t((function(t,r){i(e,n,t,r)}))}return a=a?a.then(r,r):r()}})}function x(e,t,n){var r="suspendedStart";return function(i,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw a;return C()}for(n.method=i,n.arg=a;;){var o=n.delegate;if(o){var u=_(o,n);if(u){if(u===f)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var s=l(e,t,n);if("normal"===s.type){if(r=n.done?"completed":"suspendedYield",s.arg===f)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r="completed",n.method="throw",n.arg=s.arg)}}}function _(e,t){var n=t.method,r=e.iterator[n];if(void 0===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,_(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),f;var i=l(r,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,f;var a=i.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function I(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function E(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(I,this),this.reset(!0)}function T(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,i=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:C}}function C(){return{value:void 0,done:!0}}return d.prototype=v,r(k,"constructor",{value:v,configurable:!0}),r(v,"constructor",{value:d,configurable:!0}),d.displayName=s(v,u,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===d||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,s(e,u,"GeneratorFunction")),e.prototype=Object.create(k),e},e.awrap=function(e){return{__await:e}},b(w.prototype),s(w.prototype,o,(function(){return this})),e.AsyncIterator=w,e.async=function(t,n,r,i,a){void 0===a&&(a=Promise);var o=new w(c(t,n,r,i),a);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},b(k),s(k,u,"Generator"),s(k,a,(function(){return this})),s(k,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=T,E.prototype={constructor:E,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return o.type="throw",o.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],o=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),s=n.call(a,"finallyLoc");if(u&&s){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,f):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),S(n),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;S(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:T(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),f}},e}function Xe(e,t,n,r,i,a,o){try{var u=e[a](o),s=u.value}catch(c){return void n(c)}u.done?t(s):Promise.resolve(s).then(r,i)}function Je(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){Xe(a,r,i,o,u,"next",e)}function u(e){Xe(a,r,i,o,u,"throw",e)}o(void 0)}))}}var et=n(942),tt=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},nt={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray:function(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<e.length;i+=3){var a=e[i],o=i+1<e.length,u=o?e[i+1]:0,s=i+2<e.length,c=s?e[i+2]:0,l=a>>2,f=(3&a)<<4|u>>4,h=(15&u)<<2|c>>6,d=63&c;s||(d=64,o||(h=64)),r.push(n[l],n[f],n[h],n[d])}return r.join("")},encodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(tt(e),t)},decodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){for(var t=[],n=0,r=0;n<e.length;){var i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){var a=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&a)}else if(i>239&&i<365){var o=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(o>>10)),t[r++]=String.fromCharCode(56320+(1023&o))}else{var u=e[n++],s=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&u)<<6|63&s)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray:function(e,t){this.init_();for(var n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<e.length;){var a=n[e.charAt(i++)],o=i<e.length?n[e.charAt(i)]:0,u=++i<e.length?n[e.charAt(i)]:64,s=++i<e.length?n[e.charAt(i)]:64;if(++i,null==a||null==o||null==u||null==s)throw new rt;var c=a<<2|o>>4;if(r.push(c),64!==u){var l=o<<4&240|u>>2;if(r.push(l),64!==s){var f=u<<6&192|s;r.push(f)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},rt=function(e){f(n,e);var t=m(n);function n(){var e;return s(this,n),(e=t.apply(this,arguments)).name="DecodeBase64StringError",e}return(0,c.Z)(n)}(g(Error)),it=function(e){return function(e){var t=tt(e);return nt.encodeByteArray(t,!0)}(e).replace(/\./g,"")},at=function(e){try{return nt.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function ot(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(var n in t)t.hasOwnProperty(n)&&"__proto__"!==n&&(e[n]=ot(e[n],t[n]));return e}var ut=function(){return function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__},st=function(){try{return ut()||function(){if("undefined"!==typeof process){var e={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0}}()||function(){if("undefined"!==typeof document){var e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(n){return}var t=e&&at(e[1]);return t&&JSON.parse(t)}}()}catch(e){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(e))}},ct=function(){var e;return null===(e=st())||void 0===e?void 0:e.config},lt=function(){function e(){var t=this;s(this,e),this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return(0,c.Z)(e,[{key:"wrapCallback",value:function(e){var t=this;return function(n,r){n?t.reject(n):t.resolve(r),"function"===typeof e&&(t.promise.catch((function(){})),1===e.length?e(n):e(n,r))}}}]),e}();function ft(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function ht(){var e,t=null===(e=st())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(r){return!1}}function dt(){var e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}function pt(){return"object"===typeof navigator&&"ReactNative"===navigator.product}function vt(){var e=ft();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function mt(){try{return"object"===typeof indexedDB}catch(e){return!1}}var yt=function(e){f(n,e);var t=m(n);function n(e,r,i){var a;return s(this,n),(a=t.call(this,r)).code=e,a.customData=i,a.name="FirebaseError",Object.setPrototypeOf((0,v.Z)(a),n.prototype),Error.captureStackTrace&&Error.captureStackTrace((0,v.Z)(a),gt.prototype.create),a}return(0,c.Z)(n)}(g(Error)),gt=function(){function e(t,n,r){s(this,e),this.service=t,this.serviceName=n,this.errors=r}return(0,c.Z)(e,[{key:"create",value:function(e){var t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?function(e,t){return e.replace(kt,(function(e,n){var r=t[n];return null!=r?String(r):"<".concat(n,"?>")}))}(r,t):"Error",a="".concat(this.serviceName,": ").concat(i," (").concat(n,").");return new yt(n,a,t)}}]),e}();var kt=/\{\$([^}]+)}/g;function bt(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function wt(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function xt(e,t){if(e===t)return!0;for(var n=Object.keys(e),r=Object.keys(t),i=0,a=n;i<a.length;i++){var o=a[i];if(!r.includes(o))return!1;var u=e[o],s=t[o];if(_t(u)&&_t(s)){if(!xt(u,s))return!1}else if(u!==s)return!1}for(var c=0,l=r;c<l.length;c++){var f=l[c];if(!n.includes(f))return!1}return!0}function _t(e){return null!==e&&"object"===typeof e}function It(e){for(var t=[],n=function(){var e=(0,i.Z)(a[r],2),n=e[0],o=e[1];Array.isArray(o)?o.forEach((function(e){t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(o))},r=0,a=Object.entries(e);r<a.length;r++)n();return t.length?"&"+t.join("&"):""}function St(e){var t={};return e.replace(/^\?/,"").split("&").forEach((function(e){if(e){var n=e.split("="),r=(0,i.Z)(n,2),a=r[0],o=r[1];t[decodeURIComponent(a)]=decodeURIComponent(o)}})),t}function Et(e){var t=e.indexOf("?");if(!t)return"";var n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}function Tt(e,t){var n=new Ct(e,t);return n.subscribe.bind(n)}var Ct=function(){function e(t,n){var r=this;s(this,e),this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then((function(){t(r)})).catch((function(e){r.error(e)}))}return(0,c.Z)(e,[{key:"next",value:function(e){this.forEachObserver((function(t){t.next(e)}))}},{key:"error",value:function(e){this.forEachObserver((function(t){t.error(e)})),this.close(e)}},{key:"complete",value:function(){this.forEachObserver((function(e){e.complete()})),this.close()}},{key:"subscribe",value:function(e,t,n){var r,i=this;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=S(t);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i in e&&"function"===typeof e[i])return!0}}catch(a){r.e(a)}finally{r.f()}return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n}).next&&(r.next=At),void 0===r.error&&(r.error=At),void 0===r.complete&&(r.complete=At);var a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(e){}})),this.observers.push(r),a}},{key:"unsubscribeOne",value:function(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}},{key:"forEachObserver",value:function(e){if(!this.finalized)for(var t=0;t<this.observers.length;t++)this.sendOne(t,e)}},{key:"sendOne",value:function(e,t){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[e])try{t(n.observers[e])}catch(r){"undefined"!==typeof console&&console.error&&console.error(r)}}))}},{key:"close",value:function(e){var t=this;this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((function(){t.observers=void 0,t.onNoObservers=void 0})))}}]),e}();function At(){}function Nt(e){return e&&e._delegate?e._delegate:e}var Rt=function(){function e(t,n,r){s(this,e),this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return(0,c.Z)(e,[{key:"setInstantiationMode",value:function(e){return this.instantiationMode=e,this}},{key:"setMultipleInstances",value:function(e){return this.multipleInstances=e,this}},{key:"setServiceProps",value:function(e){return this.serviceProps=e,this}},{key:"setInstanceCreatedCallback",value:function(e){return this.onInstanceCreated=e,this}}]),e}(),Pt="[DEFAULT]",Ot=function(){function e(t,n){s(this,e),this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return(0,c.Z)(e,[{key:"get",value:function(e){var t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){var n=new lt;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:t});r&&n.resolve(r)}catch(i){}}return this.instancesDeferred.get(t).promise}},{key:"getImmediate",value:function(e){var t,n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}}},{key:"getComponent",value:function(){return this.component}},{key:"setComponent",value:function(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:Pt})}catch(c){}var t,n=S(this.instancesDeferred.entries());try{for(n.s();!(t=n.n()).done;){var r=(0,i.Z)(t.value,2),a=r[0],o=r[1],u=this.normalizeInstanceIdentifier(a);try{var s=this.getOrInitializeService({instanceIdentifier:u});o.resolve(s)}catch(c){}}}catch(l){n.e(l)}finally{n.f()}}}},{key:"clearInstance",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Pt;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}},{key:"delete",value:function(){var e=Je($e().mark((function e(){var t;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Array.from(this.instances.values()),e.next=3,Promise.all([].concat((0,u.Z)(t.filter((function(e){return"INTERNAL"in e})).map((function(e){return e.INTERNAL.delete()}))),(0,u.Z)(t.filter((function(e){return"_delete"in e})).map((function(e){return e._delete()})))));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"isComponentSet",value:function(){return null!=this.component}},{key:"isInitialized",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Pt;return this.instances.has(e)}},{key:"getOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Pt;return this.instancesOptions.get(e)||{}}},{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.options,n=void 0===t?{}:t,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error("".concat(this.name,"(").concat(r,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));var a,o=this.getOrInitializeService({instanceIdentifier:r,options:n}),u=S(this.instancesDeferred.entries());try{for(u.s();!(a=u.n()).done;){var s=(0,i.Z)(a.value,2),c=s[0],l=s[1];r===this.normalizeInstanceIdentifier(c)&&l.resolve(o)}}catch(f){u.e(f)}finally{u.f()}return o}},{key:"onInit",value:function(e,t){var n,r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);var a=this.instances.get(r);return a&&e(a,r),function(){i.delete(e)}}},{key:"invokeOnInitCallbacks",value:function(e,t){var n=this.onInitCallbacks.get(t);if(n){var r,i=S(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;try{a(e,t)}catch(dS){}}}catch(o){i.e(o)}finally{i.f()}}}},{key:"getOrInitializeService",value:function(e){var t,n=e.instanceIdentifier,r=e.options,i=void 0===r?{}:r,a=this.instances.get(n);if(!a&&this.component&&(a=this.component.instanceFactory(this.container,{instanceIdentifier:(t=n,t===Pt?void 0:t),options:i}),this.instances.set(n,a),this.instancesOptions.set(n,i),this.invokeOnInitCallbacks(a,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,a)}catch(dS){}return a||null}},{key:"normalizeInstanceIdentifier",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Pt;return this.component?this.component.multipleInstances?e:Pt:e}},{key:"shouldAutoInitialize",value:function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}]),e}();var Dt,Lt,Mt=function(){function e(t){s(this,e),this.name=t,this.providers=new Map}return(0,c.Z)(e,[{key:"addComponent",value:function(e){var t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}},{key:"addOrOverwriteComponent",value:function(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}},{key:"getProvider",value:function(e){if(this.providers.has(e))return this.providers.get(e);var t=new Ot(e,this);return this.providers.set(e,t),t}},{key:"getProviders",value:function(){return Array.from(this.providers.values())}}]),e}(),Ft=[];!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(Lt||(Lt={}));var jt={debug:Lt.DEBUG,verbose:Lt.VERBOSE,info:Lt.INFO,warn:Lt.WARN,error:Lt.ERROR,silent:Lt.SILENT},Ut=Lt.INFO,Vt=(Dt={},(0,et.Z)(Dt,Lt.DEBUG,"log"),(0,et.Z)(Dt,Lt.VERBOSE,"log"),(0,et.Z)(Dt,Lt.INFO,"info"),(0,et.Z)(Dt,Lt.WARN,"warn"),(0,et.Z)(Dt,Lt.ERROR,"error"),Dt),Zt=function(e,t){if(!(t<e.logLevel)){var n=(new Date).toISOString(),r=Vt[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i,a=arguments.length,o=new Array(a>2?a-2:0),u=2;u<a;u++)o[u-2]=arguments[u];(i=console)[r].apply(i,["[".concat(n,"]  ").concat(e.name,":")].concat(o))}},zt=function(){function e(t){s(this,e),this.name=t,this._logLevel=Ut,this._logHandler=Zt,this._userLogHandler=null,Ft.push(this)}return(0,c.Z)(e,[{key:"logLevel",get:function(){return this._logLevel},set:function(e){if(!(e in Lt))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}},{key:"setLogLevel",value:function(e){this._logLevel="string"===typeof e?jt[e]:e}},{key:"logHandler",get:function(){return this._logHandler},set:function(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}},{key:"userLogHandler",get:function(){return this._userLogHandler},set:function(e){this._userLogHandler=e}},{key:"debug",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Lt.DEBUG].concat(t)),this._logHandler.apply(this,[this,Lt.DEBUG].concat(t))}},{key:"log",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Lt.VERBOSE].concat(t)),this._logHandler.apply(this,[this,Lt.VERBOSE].concat(t))}},{key:"info",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Lt.INFO].concat(t)),this._logHandler.apply(this,[this,Lt.INFO].concat(t))}},{key:"warn",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Lt.WARN].concat(t)),this._logHandler.apply(this,[this,Lt.WARN].concat(t))}},{key:"error",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Lt.ERROR].concat(t)),this._logHandler.apply(this,[this,Lt.ERROR].concat(t))}}]),e}();function Bt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function qt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Bt(Object(n),!0).forEach((function(t){(0,et.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Bt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Gt,Kt,Wt=function(e,t){return t.some((function(t){return e instanceof t}))};var Ht=new WeakMap,Qt=new WeakMap,Yt=new WeakMap,$t=new WeakMap,Xt=new WeakMap;var Jt={get:function(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return Qt.get(e);if("objectStoreNames"===t)return e.objectStoreNames||Yt.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return nn(e[t])},set:function(e,t,n){return e[t]=n,!0},has:function(e,t){return e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e}};function en(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(Kt||(Kt=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(rn(this),n),nn(Ht.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return nn(e.apply(rn(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];var a=e.call.apply(e,[rn(this),t].concat(r));return Yt.set(a,t.sort?t.sort():[t]),nn(a)}}function tn(e){return"function"===typeof e?en(e):(e instanceof IDBTransaction&&function(e){if(!Qt.has(e)){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("complete",i),e.removeEventListener("error",a),e.removeEventListener("abort",a)},i=function(){t(),r()},a=function(){n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",a),e.addEventListener("abort",a)}));Qt.set(e,t)}}(e),Wt(e,Gt||(Gt=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(e,Jt):e)}function nn(e){if(e instanceof IDBRequest)return function(e){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("success",i),e.removeEventListener("error",a)},i=function(){t(nn(e.result)),r()},a=function(){n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",a)}));return t.then((function(t){t instanceof IDBCursor&&Ht.set(t,e)})).catch((function(){})),Xt.set(t,e),t}(e);if($t.has(e))return $t.get(e);var t=tn(e);return t!==e&&($t.set(e,t),Xt.set(t,e)),t}var rn=function(e){return Xt.get(e)};var an,on,un=["get","getKey","getAll","getAllKeys","count"],sn=["put","add","delete","clear"],cn=new Map;function ln(e,t){if(e instanceof IDBDatabase&&!(t in e)&&"string"===typeof t){if(cn.get(t))return cn.get(t);var n=t.replace(/FromIndex$/,""),r=t!==n,i=sn.includes(n);if(n in(r?IDBIndex:IDBObjectStore).prototype&&(i||un.includes(n))){var a=function(){var e=Je($e().mark((function e(t){var a,o,u,s,c,l,f=arguments;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(o=this.transaction(t,i?"readwrite":"readonly"),u=o.store,s=f.length,c=new Array(s>1?s-1:0),l=1;l<s;l++)c[l-1]=f[l];return r&&(u=u.index(c.shift())),e.next=6,Promise.all([(a=u)[n].apply(a,c),i&&o.done]);case 6:return e.abrupt("return",e.sent[0]);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}();return cn.set(t,a),a}}}Jt=function(e){return qt(qt({},e),{},{get:function(t,n,r){return ln(t,n)||e.get(t,n,r)},has:function(t,n){return!!ln(t,n)||e.has(t,n)}})}(Jt);var fn=function(){function e(t){s(this,e),this.container=t}return(0,c.Z)(e,[{key:"getPlatformInfoString",value:function(){return this.container.getProviders().map((function(e){if(function(e){var t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){var t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null})).filter((function(e){return e})).join(" ")}}]),e}();var hn="@firebase/app",dn="0.9.11",pn=new zt("@firebase/app"),vn="[DEFAULT]",mn=(an={},(0,et.Z)(an,hn,"fire-core"),(0,et.Z)(an,"@firebase/app-compat","fire-core-compat"),(0,et.Z)(an,"@firebase/analytics","fire-analytics"),(0,et.Z)(an,"@firebase/analytics-compat","fire-analytics-compat"),(0,et.Z)(an,"@firebase/app-check","fire-app-check"),(0,et.Z)(an,"@firebase/app-check-compat","fire-app-check-compat"),(0,et.Z)(an,"@firebase/auth","fire-auth"),(0,et.Z)(an,"@firebase/auth-compat","fire-auth-compat"),(0,et.Z)(an,"@firebase/database","fire-rtdb"),(0,et.Z)(an,"@firebase/database-compat","fire-rtdb-compat"),(0,et.Z)(an,"@firebase/functions","fire-fn"),(0,et.Z)(an,"@firebase/functions-compat","fire-fn-compat"),(0,et.Z)(an,"@firebase/installations","fire-iid"),(0,et.Z)(an,"@firebase/installations-compat","fire-iid-compat"),(0,et.Z)(an,"@firebase/messaging","fire-fcm"),(0,et.Z)(an,"@firebase/messaging-compat","fire-fcm-compat"),(0,et.Z)(an,"@firebase/performance","fire-perf"),(0,et.Z)(an,"@firebase/performance-compat","fire-perf-compat"),(0,et.Z)(an,"@firebase/remote-config","fire-rc"),(0,et.Z)(an,"@firebase/remote-config-compat","fire-rc-compat"),(0,et.Z)(an,"@firebase/storage","fire-gcs"),(0,et.Z)(an,"@firebase/storage-compat","fire-gcs-compat"),(0,et.Z)(an,"@firebase/firestore","fire-fst"),(0,et.Z)(an,"@firebase/firestore-compat","fire-fst-compat"),(0,et.Z)(an,"fire-js","fire-js"),(0,et.Z)(an,"firebase","fire-js-all"),an),yn=new Map,gn=new Map;function kn(e,t){try{e.container.addComponent(t)}catch(n){pn.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),n)}}function bn(e,t){e.container.addOrOverwriteComponent(t)}function wn(e){var t=e.name;if(gn.has(t))return pn.debug("There were multiple attempts to register component ".concat(t,".")),!1;gn.set(t,e);var n,r=S(yn.values());try{for(r.s();!(n=r.n()).done;){kn(n.value,e)}}catch(i){r.e(i)}finally{r.f()}return!0}function xn(e,t){var n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function _n(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:vn;xn(e,t).clearInstance(n)}function In(){gn.clear()}var Sn=(on={},(0,et.Z)(on,"no-app","No Firebase App '{$appName}' has been created - call initializeApp() first"),(0,et.Z)(on,"bad-app-name","Illegal App name: '{$appName}"),(0,et.Z)(on,"duplicate-app","Firebase App named '{$appName}' already exists with different options or config"),(0,et.Z)(on,"app-deleted","Firebase App named '{$appName}' already deleted"),(0,et.Z)(on,"no-options","Need to provide options, when not being deployed to hosting via source."),(0,et.Z)(on,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),(0,et.Z)(on,"invalid-log-argument","First argument to `onLog` must be null or a function."),(0,et.Z)(on,"idb-open","Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}."),(0,et.Z)(on,"idb-get","Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}."),(0,et.Z)(on,"idb-set","Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}."),(0,et.Z)(on,"idb-delete","Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."),on),En=new gt("app","Firebase",Sn),Tn=function(){function e(t,n,r){var i=this;s(this,e),this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Rt("app",(function(){return i}),"PUBLIC"))}return(0,c.Z)(e,[{key:"automaticDataCollectionEnabled",get:function(){return this.checkDestroyed(),this._automaticDataCollectionEnabled},set:function(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this.checkDestroyed(),this._name}},{key:"options",get:function(){return this.checkDestroyed(),this._options}},{key:"config",get:function(){return this.checkDestroyed(),this._config}},{key:"container",get:function(){return this._container}},{key:"isDeleted",get:function(){return this._isDeleted},set:function(e){this._isDeleted=e}},{key:"checkDestroyed",value:function(){if(this.isDeleted)throw En.create("app-deleted",{appName:this._name})}}]),e}(),Cn="9.22.1";function An(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;"object"!==typeof t&&(t={name:t});var r=Object.assign({name:vn,automaticDataCollectionEnabled:!1},t),i=r.name;if("string"!==typeof i||!i)throw En.create("bad-app-name",{appName:String(i)});if(n||(n=ct()),!n)throw En.create("no-options");var a=yn.get(i);if(a){if(xt(n,a.options)&&xt(r,a.config))return a;throw En.create("duplicate-app",{appName:i})}var o,u=new Mt(i),s=S(gn.values());try{for(s.s();!(o=s.n()).done;){var c=o.value;u.addComponent(c)}}catch(f){s.e(f)}finally{s.f()}var l=new Tn(n,r,u);return yn.set(i,l),l}function Nn(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:vn,t=yn.get(e);if(!t&&e===vn&&ct())return An();if(!t)throw En.create("no-app",{appName:e});return t}function Rn(){return Array.from(yn.values())}function Pn(e){return On.apply(this,arguments)}function On(){return On=Je($e().mark((function e(t){var n;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.name,!yn.has(n)){e.next=6;break}return yn.delete(n),e.next=5,Promise.all(t.container.getProviders().map((function(e){return e.delete()})));case 5:t.isDeleted=!0;case 6:case"end":return e.stop()}}),e)}))),On.apply(this,arguments)}function Dn(e,t,n){var r,i=null!==(r=mn[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));var a=i.match(/\s|\//),o=t.match(/\s|\//);if(a||o){var u=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return a&&u.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),a&&o&&u.push("and"),o&&u.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void pn.warn(u.join(" "))}wn(new Rt("".concat(i,"-version"),(function(){return{library:i,version:t}}),"VERSION"))}function Ln(e,t){if(null!==e&&"function"!==typeof e)throw En.create("invalid-log-argument");!function(e,t){var n,r=S(Ft);try{var i=function(){var r=n.value,i=null;t&&t.level&&(i=jt[t.level]),r.userLogHandler=null===e?null:function(t,n){for(var r=arguments.length,a=new Array(r>2?r-2:0),o=2;o<r;o++)a[o-2]=arguments[o];var u=a.map((function(e){if(null==e)return null;if("string"===typeof e)return e;if("number"===typeof e||"boolean"===typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(t){return null}})).filter((function(e){return e})).join(" ");n>=(null!==i&&void 0!==i?i:t.logLevel)&&e({level:Lt[n].toLowerCase(),message:u,args:a,type:t.name})}};for(r.s();!(n=r.n()).done;)i()}catch(a){r.e(a)}finally{r.f()}}(e,t)}function Mn(e){var t;t=e,Ft.forEach((function(e){e.setLogLevel(t)}))}var Fn="firebase-heartbeat-database",jn=1,Un="firebase-heartbeat-store",Vn=null;function Zn(){return Vn||(Vn=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.blocked,i=n.upgrade,a=n.blocking,o=n.terminated,u=indexedDB.open(e,t),s=nn(u);return i&&u.addEventListener("upgradeneeded",(function(e){i(nn(u.result),e.oldVersion,e.newVersion,nn(u.transaction),e)})),r&&u.addEventListener("blocked",(function(e){return r(e.oldVersion,e.newVersion,e)})),s.then((function(e){o&&e.addEventListener("close",(function(){return o()})),a&&e.addEventListener("versionchange",(function(e){return a(e.oldVersion,e.newVersion,e)}))})).catch((function(){})),s}(Fn,jn,{upgrade:function(e,t){if(0===t)e.createObjectStore(Un)}}).catch((function(e){throw En.create("idb-open",{originalErrorMessage:e.message})}))),Vn}function zn(e){return Bn.apply(this,arguments)}function Bn(){return Bn=Je($e().mark((function e(t){var n,r,i;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Zn();case 3:return n=e.sent,e.next=6,n.transaction(Un).objectStore(Un).get(Kn(t));case 6:return r=e.sent,e.abrupt("return",r);case 10:e.prev=10,e.t0=e.catch(0),e.t0 instanceof yt?pn.warn(e.t0.message):(i=En.create("idb-get",{originalErrorMessage:null===e.t0||void 0===e.t0?void 0:e.t0.message}),pn.warn(i.message));case 13:case"end":return e.stop()}}),e,null,[[0,10]])}))),Bn.apply(this,arguments)}function qn(e,t){return Gn.apply(this,arguments)}function Gn(){return Gn=Je($e().mark((function e(t,n){var r,i,a,o;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Zn();case 3:return r=e.sent,i=r.transaction(Un,"readwrite"),a=i.objectStore(Un),e.next=8,a.put(n,Kn(t));case 8:return e.next=10,i.done;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),e.t0 instanceof yt?pn.warn(e.t0.message):(o=En.create("idb-set",{originalErrorMessage:null===e.t0||void 0===e.t0?void 0:e.t0.message}),pn.warn(o.message));case 15:case"end":return e.stop()}}),e,null,[[0,12]])}))),Gn.apply(this,arguments)}function Kn(e){return"".concat(e.name,"!").concat(e.options.appId)}var Wn=function(){function e(t){var n=this;s(this,e),this.container=t,this._heartbeatsCache=null;var r=this.container.getProvider("app").getImmediate();this._storage=new $n(r),this._heartbeatsCachePromise=this._storage.read().then((function(e){return n._heartbeatsCache=e,e}))}return(0,c.Z)(e,[{key:"triggerHeartbeat",value:function(){var e=Je($e().mark((function e(){var t,n,r;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.container.getProvider("platform-logger").getImmediate(),n=t.getPlatformInfoString(),r=Hn(),null!==this._heartbeatsCache){e.next=7;break}return e.next=6,this._heartbeatsCachePromise;case 6:this._heartbeatsCache=e.sent;case 7:if(this._heartbeatsCache.lastSentHeartbeatDate!==r&&!this._heartbeatsCache.heartbeats.some((function(e){return e.date===r}))){e.next=11;break}return e.abrupt("return");case 11:this._heartbeatsCache.heartbeats.push({date:r,agent:n});case 12:return this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((function(e){var t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),e.abrupt("return",this._storage.overwrite(this._heartbeatsCache));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getHeartbeatsHeader",value:function(){var e=Je($e().mark((function e(){var t,n,r,i,a;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==this._heartbeatsCache){e.next=3;break}return e.next=3,this._heartbeatsCachePromise;case 3:if(null!==this._heartbeatsCache&&0!==this._heartbeatsCache.heartbeats.length){e.next=5;break}return e.abrupt("return","");case 5:if(t=Hn(),n=Qn(this._heartbeatsCache.heartbeats),r=n.heartbeatsToSend,i=n.unsentEntries,a=it(JSON.stringify({version:2,heartbeats:r})),this._heartbeatsCache.lastSentHeartbeatDate=t,!(i.length>0)){e.next=15;break}return this._heartbeatsCache.heartbeats=i,e.next=13,this._storage.overwrite(this._heartbeatsCache);case 13:e.next=17;break;case 15:this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache);case 17:return e.abrupt("return",a);case 18:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function Hn(){return(new Date).toISOString().substring(0,10)}function Qn(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024,r=[],i=e.slice(),a=S(e);try{var o=function(){var e=t.value,a=r.find((function(t){return t.agent===e.agent}));if(a){if(a.dates.push(e.date),Xn(r)>n)return a.dates.pop(),"break"}else if(r.push({agent:e.agent,dates:[e.date]}),Xn(r)>n)return r.pop(),"break";i=i.slice(1)};for(a.s();!(t=a.n()).done;){if("break"===o())break}}catch(u){a.e(u)}finally{a.f()}return{heartbeatsToSend:r,unsentEntries:i}}var Yn,$n=function(){function e(t){s(this,e),this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}return(0,c.Z)(e,[{key:"runIndexedDBEnvironmentCheck",value:function(){var e=Je($e().mark((function e(){return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(mt()){e.next=4;break}return e.abrupt("return",!1);case 4:return e.abrupt("return",new Promise((function(e,t){try{var n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=function(){i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=function(){n=!1},i.onerror=function(){var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(a){t(a)}})).then((function(){return!0})).catch((function(){return!1})));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"read",value:function(){var e=Je($e().mark((function e(){var t;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return",{heartbeats:[]});case 7:return e.next=9,zn(this.app);case 9:return t=e.sent,e.abrupt("return",t||{heartbeats:[]});case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"overwrite",value:function(){var e=Je($e().mark((function e(t){var n,r;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",qn(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:t.heartbeats}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"add",value:function(){var e=Je($e().mark((function e(t){var n,r;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",qn(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:[].concat((0,u.Z)(r.heartbeats),(0,u.Z)(t.heartbeats))}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();function Xn(e){return it(JSON.stringify({version:2,heartbeats:e})).length}Yn="",wn(new Rt("platform-logger",(function(e){return new fn(e)}),"PRIVATE")),wn(new Rt("heartbeat",(function(e){return new Wn(e)}),"PRIVATE")),Dn(hn,dn,Yn),Dn(hn,dn,"esm2017"),Dn("fire-js","");var Jn;Dn("firebase","9.22.1","app");var er=function(){function e(t,n){var r=this;s(this,e),this._delegate=t,this.firebase=n,kn(t,new Rt("app-compat",(function(){return r}),"PUBLIC")),this.container=t.container}return(0,c.Z)(e,[{key:"automaticDataCollectionEnabled",get:function(){return this._delegate.automaticDataCollectionEnabled},set:function(e){this._delegate.automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this._delegate.name}},{key:"options",get:function(){return this._delegate.options}},{key:"delete",value:function(){var e=this;return new Promise((function(t){e._delegate.checkDestroyed(),t()})).then((function(){return e.firebase.INTERNAL.removeApp(e.name),Pn(e._delegate)}))}},{key:"_getService",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:vn;this._delegate.checkDestroyed();var r=this._delegate.container.getProvider(e);return r.isInitialized()||"EXPLICIT"!==(null===(t=r.getComponent())||void 0===t?void 0:t.instantiationMode)||r.initialize(),r.getImmediate({identifier:n})}},{key:"_removeServiceInstance",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:vn;this._delegate.container.getProvider(e).clearInstance(t)}},{key:"_addComponent",value:function(e){kn(this._delegate,e)}},{key:"_addOrOverwriteComponent",value:function(e){bn(this._delegate,e)}},{key:"toJSON",value:function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}]),e}(),tr=(Jn={},(0,et.Z)(Jn,"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),(0,et.Z)(Jn,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),Jn),nr=new gt("app-compat","Firebase",tr);var rr=function t(){var n=function(t){var n={},r={__esModule:!0,initializeApp:function(e){var i=An(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{});if(bt(n,i.name))return n[i.name];var a=new t(i,r);return n[i.name]=a,a},app:i,registerVersion:Dn,setLogLevel:Mn,onLog:Ln,apps:null,SDK_VERSION:Cn,INTERNAL:{registerComponent:function(e){var n=e.name,a=n.replace("-compat","");if(wn(e)&&"PUBLIC"===e.type){var o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i();if("function"!==typeof e[a])throw nr.create("invalid-app-argument",{appName:n});return e[a]()};void 0!==e.serviceProps&&ot(o,e.serviceProps),r[a]=o,t.prototype[a]=function(){for(var t=this._getService.bind(this,n),r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return t.apply(this,e.multipleInstances?i:[])}}return"PUBLIC"===e.type?r[a]:null},removeApp:function(e){delete n[e]},useAsService:function(e,t){return"serverAuth"===t?null:t},modularAPIs:e}};function i(e){if(!bt(n,e=e||vn))throw nr.create("no-app",{appName:e});return n[e]}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(n).map((function(e){return n[e]}))}}),i.App=t,r}(er);return n.INTERNAL=Object.assign(Object.assign({},n.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(e){ot(n,e)},createSubscribe:Tt,ErrorFactory:gt,deepExtend:ot}),n}(),ir=new zt("@firebase/app-compat");if("object"===typeof self&&self.self===self&&void 0!==self.firebase){ir.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var ar=self.firebase.SDK_VERSION;ar&&ar.indexOf("LITE")>=0&&ir.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var or=rr;!function(e){Dn("@firebase/app-compat","0.2.11",e)}();function ur(){return ur="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=h(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},ur.apply(this,arguments)}or.registerVersion("firebase","9.22.1","app-compat");function sr(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}Object.create;Object.create;var cr,lr={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},fr="EMAIL_SIGNIN",hr="PASSWORD_RESET",dr="RECOVER_EMAIL",pr="REVERT_SECOND_FACTOR_ADDITION",vr="VERIFY_AND_CHANGE_EMAIL",mr="VERIFY_EMAIL";function yr(){return(0,et.Z)({},"dependent-sdk-initialized-before-auth","Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.")}var gr=function(){var e;return e={},(0,et.Z)(e,"admin-restricted-operation","This operation is restricted to administrators only."),(0,et.Z)(e,"argument-error",""),(0,et.Z)(e,"app-not-authorized","This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console."),(0,et.Z)(e,"app-not-installed","The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device."),(0,et.Z)(e,"captcha-check-failed","The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains."),(0,et.Z)(e,"code-expired","The SMS code has expired. Please re-send the verification code to try again."),(0,et.Z)(e,"cordova-not-ready","Cordova framework is not ready."),(0,et.Z)(e,"cors-unsupported","This browser is not supported."),(0,et.Z)(e,"credential-already-in-use","This credential is already associated with a different user account."),(0,et.Z)(e,"custom-token-mismatch","The custom token corresponds to a different audience."),(0,et.Z)(e,"requires-recent-login","This operation is sensitive and requires recent authentication. Log in again before retrying this request."),(0,et.Z)(e,"dependent-sdk-initialized-before-auth","Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."),(0,et.Z)(e,"dynamic-link-not-activated","Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions."),(0,et.Z)(e,"email-change-needs-verification","Multi-factor users must always have a verified email."),(0,et.Z)(e,"email-already-in-use","The email address is already in use by another account."),(0,et.Z)(e,"emulator-config-failed",'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.'),(0,et.Z)(e,"expired-action-code","The action code has expired."),(0,et.Z)(e,"cancelled-popup-request","This operation has been cancelled due to another conflicting popup being opened."),(0,et.Z)(e,"internal-error","An internal AuthError has occurred."),(0,et.Z)(e,"invalid-app-credential","The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired."),(0,et.Z)(e,"invalid-app-id","The mobile app identifier is not registed for the current project."),(0,et.Z)(e,"invalid-user-token","This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key."),(0,et.Z)(e,"invalid-auth-event","An internal AuthError has occurred."),(0,et.Z)(e,"invalid-verification-code","The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user."),(0,et.Z)(e,"invalid-continue-uri","The continue URL provided in the request is invalid."),(0,et.Z)(e,"invalid-cordova-configuration","The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme."),(0,et.Z)(e,"invalid-custom-token","The custom token format is incorrect. Please check the documentation."),(0,et.Z)(e,"invalid-dynamic-link-domain","The provided dynamic link domain is not configured or authorized for the current project."),(0,et.Z)(e,"invalid-email","The email address is badly formatted."),(0,et.Z)(e,"invalid-emulator-scheme","Emulator URL must start with a valid scheme (http:// or https://)."),(0,et.Z)(e,"invalid-api-key","Your API key is invalid, please check you have copied it correctly."),(0,et.Z)(e,"invalid-cert-hash","The SHA-1 certificate hash provided is invalid."),(0,et.Z)(e,"invalid-credential","The supplied auth credential is malformed or has expired."),(0,et.Z)(e,"invalid-message-payload","The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console."),(0,et.Z)(e,"invalid-multi-factor-session","The request does not contain a valid proof of first factor successful sign-in."),(0,et.Z)(e,"invalid-oauth-provider","EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers."),(0,et.Z)(e,"invalid-oauth-client-id","The OAuth client ID provided is either invalid or does not match the specified API key."),(0,et.Z)(e,"unauthorized-domain","This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console."),(0,et.Z)(e,"invalid-action-code","The action code is invalid. This can happen if the code is malformed, expired, or has already been used."),(0,et.Z)(e,"wrong-password","The password is invalid or the user does not have a password."),(0,et.Z)(e,"invalid-persistence-type","The specified persistence type is invalid. It can only be local, session or none."),(0,et.Z)(e,"invalid-phone-number","The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code]."),(0,et.Z)(e,"invalid-provider-id","The specified provider ID is invalid."),(0,et.Z)(e,"invalid-recipient-email","The email corresponding to this action failed to send as the provided recipient email address is invalid."),(0,et.Z)(e,"invalid-sender","The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console."),(0,et.Z)(e,"invalid-verification-id","The verification ID used to create the phone auth credential is invalid."),(0,et.Z)(e,"invalid-tenant-id","The Auth instance's tenant ID is invalid."),(0,et.Z)(e,"login-blocked","Login blocked by user-provided method: {$originalMessage}"),(0,et.Z)(e,"missing-android-pkg-name","An Android Package Name must be provided if the Android App is required to be installed."),(0,et.Z)(e,"auth-domain-config-required","Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console."),(0,et.Z)(e,"missing-app-credential","The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided."),(0,et.Z)(e,"missing-verification-code","The phone auth credential was created with an empty SMS verification code."),(0,et.Z)(e,"missing-continue-uri","A continue URL must be provided in the request."),(0,et.Z)(e,"missing-iframe-start","An internal AuthError has occurred."),(0,et.Z)(e,"missing-ios-bundle-id","An iOS Bundle ID must be provided if an App Store ID is provided."),(0,et.Z)(e,"missing-or-invalid-nonce","The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload."),(0,et.Z)(e,"missing-password","A non-empty password must be provided"),(0,et.Z)(e,"missing-multi-factor-info","No second factor identifier is provided."),(0,et.Z)(e,"missing-multi-factor-session","The request is missing proof of first factor successful sign-in."),(0,et.Z)(e,"missing-phone-number","To send verification codes, provide a phone number for the recipient."),(0,et.Z)(e,"missing-verification-id","The phone auth credential was created with an empty verification ID."),(0,et.Z)(e,"app-deleted","This instance of FirebaseApp has been deleted."),(0,et.Z)(e,"multi-factor-info-not-found","The user does not have a second factor matching the identifier provided."),(0,et.Z)(e,"multi-factor-auth-required","Proof of ownership of a second factor is required to complete sign-in."),(0,et.Z)(e,"account-exists-with-different-credential","An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address."),(0,et.Z)(e,"network-request-failed","A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred."),(0,et.Z)(e,"no-auth-event","An internal AuthError has occurred."),(0,et.Z)(e,"no-such-provider","User was not linked to an account with the given provider."),(0,et.Z)(e,"null-user","A null user object was provided as the argument for an operation which requires a non-null user object."),(0,et.Z)(e,"operation-not-allowed","The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section."),(0,et.Z)(e,"operation-not-supported-in-this-environment",'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.'),(0,et.Z)(e,"popup-blocked","Unable to establish a connection with the popup. It may have been blocked by the browser."),(0,et.Z)(e,"popup-closed-by-user","The popup has been closed by the user before finalizing the operation."),(0,et.Z)(e,"provider-already-linked","User can only be linked to one identity for the given provider."),(0,et.Z)(e,"quota-exceeded","The project's quota for this operation has been exceeded."),(0,et.Z)(e,"redirect-cancelled-by-user","The redirect operation has been cancelled by the user before finalizing."),(0,et.Z)(e,"redirect-operation-pending","A redirect sign-in operation is already pending."),(0,et.Z)(e,"rejected-credential","The request contains malformed or mismatching credentials."),(0,et.Z)(e,"second-factor-already-in-use","The second factor is already enrolled on this account."),(0,et.Z)(e,"maximum-second-factor-count-exceeded","The maximum allowed number of second factors on a user has been exceeded."),(0,et.Z)(e,"tenant-id-mismatch","The provided tenant ID does not match the Auth instance's tenant ID"),(0,et.Z)(e,"timeout","The operation has timed out."),(0,et.Z)(e,"user-token-expired","The user's credential is no longer valid. The user must sign in again."),(0,et.Z)(e,"too-many-requests","We have blocked all requests from this device due to unusual activity. Try again later."),(0,et.Z)(e,"unauthorized-continue-uri","The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console."),(0,et.Z)(e,"unsupported-first-factor","Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor."),(0,et.Z)(e,"unsupported-persistence-type","The current environment does not support the specified persistence type."),(0,et.Z)(e,"unsupported-tenant-operation","This operation is not supported in a multi-tenant context."),(0,et.Z)(e,"unverified-email","The operation requires a verified email."),(0,et.Z)(e,"user-cancelled","The user did not grant your application the permissions it requested."),(0,et.Z)(e,"user-not-found","There is no user record corresponding to this identifier. The user may have been deleted."),(0,et.Z)(e,"user-disabled","The user account has been disabled by an administrator."),(0,et.Z)(e,"user-mismatch","The supplied credentials do not correspond to the previously signed in user."),(0,et.Z)(e,"user-signed-out",""),(0,et.Z)(e,"weak-password","The password must be 6 characters long or more."),(0,et.Z)(e,"web-storage-unsupported","This browser is not supported or 3rd party cookies and data may be disabled."),(0,et.Z)(e,"already-initialized","initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."),(0,et.Z)(e,"missing-recaptcha-token","The reCAPTCHA token is missing when sending request to the backend."),(0,et.Z)(e,"invalid-recaptcha-token","The reCAPTCHA token is invalid when sending request to the backend."),(0,et.Z)(e,"invalid-recaptcha-action","The reCAPTCHA action is invalid when sending request to the backend."),(0,et.Z)(e,"recaptcha-not-enabled","reCAPTCHA Enterprise integration is not enabled for this project."),(0,et.Z)(e,"missing-client-type","The reCAPTCHA client type is missing when sending request to the backend."),(0,et.Z)(e,"missing-recaptcha-version","The reCAPTCHA version is missing when sending request to the backend."),(0,et.Z)(e,"invalid-req-type","Invalid request parameters."),(0,et.Z)(e,"invalid-recaptcha-version","The reCAPTCHA version is invalid when sending request to the backend."),e},kr=yr,br=new gt("auth","Firebase",yr()),wr=new zt("@firebase/auth");function xr(e){if(wr.logLevel<=Lt.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];wr.warn.apply(wr,["Auth (".concat(Cn,"): ").concat(e)].concat(n))}}function _r(e){if(wr.logLevel<=Lt.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];wr.error.apply(wr,["Auth (".concat(Cn,"): ").concat(e)].concat(n))}}function Ir(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw Cr.apply(void 0,[e].concat(n))}function Sr(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Cr.apply(void 0,[e].concat(n))}function Er(e,t,n){var r=Object.assign(Object.assign({},kr()),(0,et.Z)({},t,n));return new gt("auth","Firebase",r).create(t,{appName:e.name})}function Tr(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&Ir(e,"argument-error"),Er(e,"argument-error","Type of ".concat(t.constructor.name," does not match expected instance.")+"Did you pass a reference from a different Auth SDK?")}function Cr(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){var i,a=n[0],o=(0,u.Z)(n.slice(1));return o[0]&&(o[0].appName=e.name),(i=e._errorFactory).create.apply(i,[a].concat((0,u.Z)(o)))}return br.create.apply(br,[e].concat(n))}function Ar(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw Cr.apply(void 0,[t].concat(r))}}function Nr(e){var t="INTERNAL ASSERTION FAILED: "+e;throw _r(t),new Error(t)}function Rr(e,t){e||Nr(t)}function Pr(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function Or(){return"http:"===Dr()||"https:"===Dr()}function Dr(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}var Lr=function(){function e(t,n){s(this,e),this.shortDelay=t,this.longDelay=n,Rr(n>t,"Short delay should be less than long delay!"),this.isMobile="undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ft())||pt()}return(0,c.Z)(e,[{key:"get",value:function(){return"undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(Or()||dt()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}]),e}();function Mr(e,t){Rr(e.emulator,"Emulator should always be set here");var n=e.emulator.url;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}var Fr=function(){function e(){s(this,e)}return(0,c.Z)(e,null,[{key:"initialize",value:function(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}},{key:"fetch",value:function(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:void Nr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"headers",value:function(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:void Nr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"response",value:function(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:void Nr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}]),e}(),jr=(cr={},(0,et.Z)(cr,"CREDENTIAL_MISMATCH","custom-token-mismatch"),(0,et.Z)(cr,"MISSING_CUSTOM_TOKEN","internal-error"),(0,et.Z)(cr,"INVALID_IDENTIFIER","invalid-email"),(0,et.Z)(cr,"MISSING_CONTINUE_URI","internal-error"),(0,et.Z)(cr,"INVALID_PASSWORD","wrong-password"),(0,et.Z)(cr,"MISSING_PASSWORD","missing-password"),(0,et.Z)(cr,"EMAIL_EXISTS","email-already-in-use"),(0,et.Z)(cr,"PASSWORD_LOGIN_DISABLED","operation-not-allowed"),(0,et.Z)(cr,"INVALID_IDP_RESPONSE","invalid-credential"),(0,et.Z)(cr,"INVALID_PENDING_TOKEN","invalid-credential"),(0,et.Z)(cr,"FEDERATED_USER_ID_ALREADY_LINKED","credential-already-in-use"),(0,et.Z)(cr,"MISSING_REQ_TYPE","internal-error"),(0,et.Z)(cr,"EMAIL_NOT_FOUND","user-not-found"),(0,et.Z)(cr,"RESET_PASSWORD_EXCEED_LIMIT","too-many-requests"),(0,et.Z)(cr,"EXPIRED_OOB_CODE","expired-action-code"),(0,et.Z)(cr,"INVALID_OOB_CODE","invalid-action-code"),(0,et.Z)(cr,"MISSING_OOB_CODE","internal-error"),(0,et.Z)(cr,"CREDENTIAL_TOO_OLD_LOGIN_AGAIN","requires-recent-login"),(0,et.Z)(cr,"INVALID_ID_TOKEN","invalid-user-token"),(0,et.Z)(cr,"TOKEN_EXPIRED","user-token-expired"),(0,et.Z)(cr,"USER_NOT_FOUND","user-token-expired"),(0,et.Z)(cr,"TOO_MANY_ATTEMPTS_TRY_LATER","too-many-requests"),(0,et.Z)(cr,"INVALID_CODE","invalid-verification-code"),(0,et.Z)(cr,"INVALID_SESSION_INFO","invalid-verification-id"),(0,et.Z)(cr,"INVALID_TEMPORARY_PROOF","invalid-credential"),(0,et.Z)(cr,"MISSING_SESSION_INFO","missing-verification-id"),(0,et.Z)(cr,"SESSION_EXPIRED","code-expired"),(0,et.Z)(cr,"MISSING_ANDROID_PACKAGE_NAME","missing-android-pkg-name"),(0,et.Z)(cr,"UNAUTHORIZED_DOMAIN","unauthorized-continue-uri"),(0,et.Z)(cr,"INVALID_OAUTH_CLIENT_ID","invalid-oauth-client-id"),(0,et.Z)(cr,"ADMIN_ONLY_OPERATION","admin-restricted-operation"),(0,et.Z)(cr,"INVALID_MFA_PENDING_CREDENTIAL","invalid-multi-factor-session"),(0,et.Z)(cr,"MFA_ENROLLMENT_NOT_FOUND","multi-factor-info-not-found"),(0,et.Z)(cr,"MISSING_MFA_ENROLLMENT_ID","missing-multi-factor-info"),(0,et.Z)(cr,"MISSING_MFA_PENDING_CREDENTIAL","missing-multi-factor-session"),(0,et.Z)(cr,"SECOND_FACTOR_EXISTS","second-factor-already-in-use"),(0,et.Z)(cr,"SECOND_FACTOR_LIMIT_EXCEEDED","maximum-second-factor-count-exceeded"),(0,et.Z)(cr,"BLOCKING_FUNCTION_ERROR_RESPONSE","internal-error"),(0,et.Z)(cr,"RECAPTCHA_NOT_ENABLED","recaptcha-not-enabled"),(0,et.Z)(cr,"MISSING_RECAPTCHA_TOKEN","missing-recaptcha-token"),(0,et.Z)(cr,"INVALID_RECAPTCHA_TOKEN","invalid-recaptcha-token"),(0,et.Z)(cr,"INVALID_RECAPTCHA_ACTION","invalid-recaptcha-action"),(0,et.Z)(cr,"MISSING_CLIENT_TYPE","missing-client-type"),(0,et.Z)(cr,"MISSING_RECAPTCHA_VERSION","missing-recaptcha-version"),(0,et.Z)(cr,"INVALID_RECAPTCHA_VERSION","invalid-recaptcha-version"),(0,et.Z)(cr,"INVALID_REQ_TYPE","invalid-req-type"),cr),Ur=new Lr(3e4,6e4);function Vr(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}function Zr(e,t,n,r){return zr.apply(this,arguments)}function zr(){return zr=Je($e().mark((function e(t,n,r,i){var a,o=arguments;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=o.length>4&&void 0!==o[4]?o[4]:{},e.abrupt("return",Br(t,a,Je($e().mark((function e(){var a,o,u,s;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={},o={},i&&("GET"===n?o=i:a={body:JSON.stringify(i)}),u=It(Object.assign({key:t.config.apiKey},o)).slice(1),e.next=6,t._getAdditionalHeaders();case 6:return(s=e.sent)["Content-Type"]="application/json",t.languageCode&&(s["X-Firebase-Locale"]=t.languageCode),e.abrupt("return",Fr.fetch()(Wr(t,t.config.apiHost,r,u),Object.assign({method:n,headers:s,referrerPolicy:"no-referrer"},a)));case 10:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e)}))),zr.apply(this,arguments)}function Br(e,t,n){return qr.apply(this,arguments)}function qr(){return qr=Je($e().mark((function e(t,n,r){var a,o,u,s,c,l,f,h,d,p;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t._canInitEmulator=!1,a=Object.assign(Object.assign({},jr),n),e.prev=2,o=new Hr(t),e.next=6,Promise.race([r(),o.promise]);case 6:return u=e.sent,o.clearNetworkTimeout(),e.next=10,u.json();case 10:if(!("needConfirmation"in(s=e.sent))){e.next=13;break}throw Qr(t,"account-exists-with-different-credential",s);case 13:if(!u.ok||"errorMessage"in s){e.next=17;break}return e.abrupt("return",s);case 17:if(c=u.ok?s.errorMessage:s.error.message,l=c.split(" : "),f=(0,i.Z)(l,2),h=f[0],d=f[1],"FEDERATED_USER_ID_ALREADY_LINKED"!==h){e.next=23;break}throw Qr(t,"credential-already-in-use",s);case 23:if("EMAIL_EXISTS"!==h){e.next=27;break}throw Qr(t,"email-already-in-use",s);case 27:if("USER_DISABLED"!==h){e.next=29;break}throw Qr(t,"user-disabled",s);case 29:if(p=a[h]||h.toLowerCase().replace(/[_\s]+/g,"-"),!d){e.next=34;break}throw Er(t,p,d);case 34:Ir(t,p);case 35:e.next=42;break;case 37:if(e.prev=37,e.t0=e.catch(2),!(e.t0 instanceof yt)){e.next=41;break}throw e.t0;case 41:Ir(t,"network-request-failed",{message:String(e.t0)});case 42:case"end":return e.stop()}}),e,null,[[2,37]])}))),qr.apply(this,arguments)}function Gr(e,t,n,r){return Kr.apply(this,arguments)}function Kr(){return Kr=Je($e().mark((function e(t,n,r,i){var a,o,u=arguments;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=u.length>4&&void 0!==u[4]?u[4]:{},e.next=3,Zr(t,n,r,i,a);case 3:return"mfaPendingCredential"in(o=e.sent)&&Ir(t,"multi-factor-auth-required",{_serverResponse:o}),e.abrupt("return",o);case 6:case"end":return e.stop()}}),e)}))),Kr.apply(this,arguments)}function Wr(e,t,n,r){var i="".concat(t).concat(n,"?").concat(r);return e.config.emulator?Mr(e.config,i):"".concat(e.config.apiScheme,"://").concat(i)}var Hr=function(){function e(t){var n=this;s(this,e),this.auth=t,this.timer=null,this.promise=new Promise((function(e,t){n.timer=setTimeout((function(){return t(Sr(n.auth,"network-request-failed"))}),Ur.get())}))}return(0,c.Z)(e,[{key:"clearNetworkTimeout",value:function(){clearTimeout(this.timer)}}]),e}();function Qr(e,t,n){var r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);var i=Sr(e,t,r);return i.customData._tokenResponse=n,i}function Yr(e,t){return $r.apply(this,arguments)}function $r(){return $r=Je($e().mark((function e(t,n){return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Zr(t,"POST","/v1/accounts:delete",n));case 1:case"end":return e.stop()}}),e)}))),$r.apply(this,arguments)}function Xr(e,t){return Jr.apply(this,arguments)}function Jr(){return Jr=Je($e().mark((function e(t,n){return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Zr(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)}))),Jr.apply(this,arguments)}function ei(e,t){return ti.apply(this,arguments)}function ti(){return ti=Je($e().mark((function e(t,n){return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Zr(t,"POST","/v1/accounts:lookup",n));case 1:case"end":return e.stop()}}),e)}))),ti.apply(this,arguments)}function ni(e){if(e)try{var t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(n){}}function ri(){return ri=Je($e().mark((function e(t){var n,r,i,a,o,u,s=arguments;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=s.length>1&&void 0!==s[1]&&s[1],r=Nt(t),e.next=4,r.getIdToken(n);case 4:return i=e.sent,Ar((a=ai(i))&&a.exp&&a.auth_time&&a.iat,r.auth,"internal-error"),o="object"===typeof a.firebase?a.firebase:void 0,u=null===o||void 0===o?void 0:o.sign_in_provider,e.abrupt("return",{claims:a,token:i,authTime:ni(ii(a.auth_time)),issuedAtTime:ni(ii(a.iat)),expirationTime:ni(ii(a.exp)),signInProvider:u||null,signInSecondFactor:(null===o||void 0===o?void 0:o.sign_in_second_factor)||null});case 10:case"end":return e.stop()}}),e)}))),ri.apply(this,arguments)}function ii(e){return 1e3*Number(e)}function ai(e){var t=e.split("."),n=(0,i.Z)(t,3),r=n[0],a=n[1],o=n[2];if(void 0===r||void 0===a||void 0===o)return _r("JWT malformed, contained fewer than 3 sections"),null;try{var u=at(a);return u?JSON.parse(u):(_r("Failed to decode base64 JWT payload"),null)}catch(s){return _r("Caught error parsing JWT payload as JSON",null===s||void 0===s?void 0:s.toString()),null}}function oi(e,t){return ui.apply(this,arguments)}function ui(){return ui=Je($e().mark((function e(t,n){var r=arguments;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r.length>2&&void 0!==r[2]&&r[2])){e.next=3;break}return e.abrupt("return",n);case 3:return e.prev=3,e.next=6,n;case 6:return e.abrupt("return",e.sent);case 9:if(e.prev=9,e.t0=e.catch(3),!(e.t0 instanceof yt&&si(e.t0))){e.next=15;break}if(t.auth.currentUser!==t){e.next=15;break}return e.next=15,t.auth.signOut();case 15:throw e.t0;case 16:case"end":return e.stop()}}),e,null,[[3,9]])}))),ui.apply(this,arguments)}function si(e){var t=e.code;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}var ci=function(){function e(t){s(this,e),this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}return(0,c.Z)(e,[{key:"_start",value:function(){this.isRunning||(this.isRunning=!0,this.schedule())}},{key:"_stop",value:function(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}},{key:"getInterval",value:function(e){var t;if(e){var n=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),n}this.errorBackoff=3e4;var r=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,r)}},{key:"schedule",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isRunning){var n=this.getInterval(t);this.timerId=setTimeout(Je($e().mark((function t(){return $e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.iteration();case 2:case"end":return t.stop()}}),t)}))),n)}}},{key:"iteration",value:function(){var e=Je($e().mark((function e(){return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.user.getIdToken(!0);case 3:e.next=9;break;case 5:return e.prev=5,e.t0=e.catch(0),(null===e.t0||void 0===e.t0?void 0:e.t0.code)==="auth/".concat("network-request-failed")&&this.schedule(!0),e.abrupt("return");case 9:this.schedule();case 10:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(){return e.apply(this,arguments)}}()}]),e}(),li=function(){function e(t,n){s(this,e),this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}return(0,c.Z)(e,[{key:"_initializeTime",value:function(){this.lastSignInTime=ni(this.lastLoginAt),this.creationTime=ni(this.createdAt)}},{key:"_copy",value:function(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}},{key:"toJSON",value:function(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}]),e}();function fi(e){return hi.apply(this,arguments)}function hi(){return hi=Je($e().mark((function e(t){var n,r,i,a,o,u,s,c,l,f,h;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.auth,e.next=3,t.getIdToken();case 3:return i=e.sent,e.next=6,oi(t,ei(r,{idToken:i}));case 6:Ar(null===(a=e.sent)||void 0===a?void 0:a.users.length,r,"internal-error"),o=a.users[0],t._notifyReloadListener(o),u=(null===(n=o.providerUserInfo)||void 0===n?void 0:n.length)?o.providerUserInfo.map((function(e){var t=e.providerId,n=sr(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})):[],s=pi(t.providerData,u),c=t.isAnonymous,l=!(t.email&&o.passwordHash)&&!(null===s||void 0===s?void 0:s.length),f=!!c&&l,h={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:s,metadata:new li(o.createdAt,o.lastLoginAt),isAnonymous:f},Object.assign(t,h);case 17:case"end":return e.stop()}}),e)}))),hi.apply(this,arguments)}function di(){return(di=Je($e().mark((function e(t){var n;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Nt(t),e.next=3,fi(n);case 3:return e.next=5,n.auth._persistUserIfCurrent(n);case 5:n.auth._notifyListenersIfCurrent(n);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function pi(e,t){var n=e.filter((function(e){return!t.some((function(t){return t.providerId===e.providerId}))}));return[].concat((0,u.Z)(n),(0,u.Z)(t))}function vi(e,t){return mi.apply(this,arguments)}function mi(){return mi=Je($e().mark((function e(t,n){var r;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Br(t,{},Je($e().mark((function e(){var r,i,a,o,u,s;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=It({grant_type:"refresh_token",refresh_token:n}).slice(1),i=t.config,a=i.tokenApiHost,o=i.apiKey,u=Wr(t,a,"/v1/token","key=".concat(o)),e.next=5,t._getAdditionalHeaders();case 5:return(s=e.sent)["Content-Type"]="application/x-www-form-urlencoded",e.abrupt("return",Fr.fetch()(u,{method:"POST",headers:s,body:r}));case 8:case"end":return e.stop()}}),e)}))));case 2:return r=e.sent,e.abrupt("return",{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token});case 4:case"end":return e.stop()}}),e)}))),mi.apply(this,arguments)}var yi=function(){function e(){s(this,e),this.refreshToken=null,this.accessToken=null,this.expirationTime=null}return(0,c.Z)(e,[{key:"isExpired",get:function(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}},{key:"updateFromServerResponse",value:function(e){Ar(e.idToken,"internal-error"),Ar("undefined"!==typeof e.idToken,"internal-error"),Ar("undefined"!==typeof e.refreshToken,"internal-error");var t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):function(e){var t=ai(e);return Ar(t,"internal-error"),Ar("undefined"!==typeof t.exp,"internal-error"),Ar("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}},{key:"getToken",value:function(){var e=Je($e().mark((function e(t){var n,r=arguments;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r.length>1&&void 0!==r[1]&&r[1],Ar(!this.accessToken||this.refreshToken,t,"user-token-expired"),n||!this.accessToken||this.isExpired){e.next=4;break}return e.abrupt("return",this.accessToken);case 4:if(!this.refreshToken){e.next=8;break}return e.next=7,this.refresh(t,this.refreshToken);case 7:return e.abrupt("return",this.accessToken);case 8:return e.abrupt("return",null);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"clearRefreshToken",value:function(){this.refreshToken=null}},{key:"refresh",value:function(){var e=Je($e().mark((function e(t,n){var r,i,a,o;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,vi(t,n);case 2:r=e.sent,i=r.accessToken,a=r.refreshToken,o=r.expiresIn,this.updateTokensAndExpiration(i,a,Number(o));case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"updateTokensAndExpiration",value:function(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}},{key:"toJSON",value:function(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}},{key:"_assign",value:function(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}},{key:"_clone",value:function(){return Object.assign(new e,this.toJSON())}},{key:"_performRefresh",value:function(){return Nr("not implemented")}}],[{key:"fromJSON",value:function(t,n){var r=n.refreshToken,i=n.accessToken,a=n.expirationTime,o=new e;return r&&(Ar("string"===typeof r,"internal-error",{appName:t}),o.refreshToken=r),i&&(Ar("string"===typeof i,"internal-error",{appName:t}),o.accessToken=i),a&&(Ar("number"===typeof a,"internal-error",{appName:t}),o.expirationTime=a),o}}]),e}();function gi(e,t){Ar("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}var ki=function(){function e(t){s(this,e);var n=t.uid,r=t.auth,i=t.stsTokenManager,a=sr(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new ci(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?(0,u.Z)(a.providerData):[],this.metadata=new li(a.createdAt||void 0,a.lastLoginAt||void 0)}return(0,c.Z)(e,[{key:"getIdToken",value:function(){var e=Je($e().mark((function e(t){var n;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,oi(this,this.stsTokenManager.getToken(this.auth,t));case 2:if(Ar(n=e.sent,this.auth,"internal-error"),this.accessToken===n){e.next=9;break}return this.accessToken=n,e.next=8,this.auth._persistUserIfCurrent(this);case 8:this.auth._notifyListenersIfCurrent(this);case 9:return e.abrupt("return",n);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getIdTokenResult",value:function(e){return function(e){return ri.apply(this,arguments)}(this,e)}},{key:"reload",value:function(){return function(e){return di.apply(this,arguments)}(this)}},{key:"_assign",value:function(e){this!==e&&(Ar(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((function(e){return Object.assign({},e)})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}},{key:"_clone",value:function(t){var n=new e(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}},{key:"_onReload",value:function(e){Ar(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}},{key:"_notifyReloadListener",value:function(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}},{key:"_startProactiveRefresh",value:function(){this.proactiveRefresh._start()}},{key:"_stopProactiveRefresh",value:function(){this.proactiveRefresh._stop()}},{key:"_updateTokensIfNecessary",value:function(){var e=Je($e().mark((function e(t){var n,r,i=arguments;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>1&&void 0!==i[1]&&i[1],r=!1,t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),r=!0),!n){e.next=6;break}return e.next=6,fi(this);case 6:return e.next=8,this.auth._persistUserIfCurrent(this);case 8:r&&this.auth._notifyListenersIfCurrent(this);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=Je($e().mark((function e(){var t;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getIdToken();case 2:return t=e.sent,e.next=5,oi(this,Yr(this.auth,{idToken:t}));case 5:return this.stsTokenManager.clearRefreshToken(),e.abrupt("return",this.auth.signOut());case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"toJSON",value:function(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((function(e){return Object.assign({},e)})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}},{key:"refreshToken",get:function(){return this.stsTokenManager.refreshToken||""}}],[{key:"_fromJSON",value:function(t,n){var r,i,a,o,u,s,c,l,f=null!==(r=n.displayName)&&void 0!==r?r:void 0,h=null!==(i=n.email)&&void 0!==i?i:void 0,d=null!==(a=n.phoneNumber)&&void 0!==a?a:void 0,p=null!==(o=n.photoURL)&&void 0!==o?o:void 0,v=null!==(u=n.tenantId)&&void 0!==u?u:void 0,m=null!==(s=n._redirectEventId)&&void 0!==s?s:void 0,y=null!==(c=n.createdAt)&&void 0!==c?c:void 0,g=null!==(l=n.lastLoginAt)&&void 0!==l?l:void 0,k=n.uid,b=n.emailVerified,w=n.isAnonymous,x=n.providerData,_=n.stsTokenManager;Ar(k&&_,t,"internal-error");var I=yi.fromJSON(this.name,_);Ar("string"===typeof k,t,"internal-error"),gi(f,t.name),gi(h,t.name),Ar("boolean"===typeof b,t,"internal-error"),Ar("boolean"===typeof w,t,"internal-error"),gi(d,t.name),gi(p,t.name),gi(v,t.name),gi(m,t.name),gi(y,t.name),gi(g,t.name);var S=new e({uid:k,auth:t,email:h,emailVerified:b,displayName:f,isAnonymous:w,photoURL:p,phoneNumber:d,tenantId:v,stsTokenManager:I,createdAt:y,lastLoginAt:g});return x&&Array.isArray(x)&&(S.providerData=x.map((function(e){return Object.assign({},e)}))),m&&(S._redirectEventId=m),S}},{key:"_fromIdTokenResponse",value:function(){var t=Je($e().mark((function t(n,r){var i,a,o,u=arguments;return $e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=u.length>2&&void 0!==u[2]&&u[2],(a=new yi).updateFromServerResponse(r),o=new e({uid:r.localId,auth:n,stsTokenManager:a,isAnonymous:i}),t.next=6,fi(o);case 6:return t.abrupt("return",o);case 7:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}]),e}(),bi=new Map;function wi(e){Rr(e instanceof Function,"Expected a class definition");var t=bi.get(e);return t?(Rr(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,bi.set(e,t),t)}var xi=function(){function e(){s(this,e),this.type="NONE",this.storage={}}return(0,c.Z)(e,[{key:"_isAvailable",value:function(){var e=Je($e().mark((function e(){return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!0);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"_set",value:function(){var e=Je($e().mark((function e(t,n){return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.storage[t]=n;case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=Je($e().mark((function e(t){var n;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.storage[t],e.abrupt("return",void 0===n?null:n);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=Je($e().mark((function e(t){return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:delete this.storage[t];case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),e}();xi.type="NONE";var _i=xi;function Ii(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}var Si=function(){function e(t,n,r){s(this,e),this.persistence=t,this.auth=n,this.userKey=r;var i=this.auth,a=i.config,o=i.name;this.fullUserKey=Ii(this.userKey,a.apiKey,o),this.fullPersistenceKey=Ii("persistence",a.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}return(0,c.Z)(e,[{key:"setCurrentUser",value:function(e){return this.persistence._set(this.fullUserKey,e.toJSON())}},{key:"getCurrentUser",value:function(){var e=Je($e().mark((function e(){var t;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.persistence._get(this.fullUserKey);case 2:return t=e.sent,e.abrupt("return",t?ki._fromJSON(this.auth,t):null);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"removeCurrentUser",value:function(){return this.persistence._remove(this.fullUserKey)}},{key:"savePersistenceForRedirect",value:function(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}},{key:"setPersistence",value:function(){var e=Je($e().mark((function e(t){var n;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.persistence!==t){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.getCurrentUser();case 4:return n=e.sent,e.next=7,this.removeCurrentUser();case 7:if(this.persistence=t,!n){e.next=10;break}return e.abrupt("return",this.setCurrentUser(n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}}],[{key:"create",value:function(){var t=Je($e().mark((function t(n,r){var i,a,o,u,s,c,l,f,h,d,p,v=arguments;return $e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=v.length>2&&void 0!==v[2]?v[2]:"authUser",r.length){t.next=3;break}return t.abrupt("return",new e(wi(_i),n,i));case 3:return t.next=5,Promise.all(r.map(function(){var e=Je($e().mark((function e(t){return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._isAvailable();case 2:if(!e.sent){e.next=4;break}return e.abrupt("return",t);case 4:return e.abrupt("return",void 0);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 5:a=t.sent.filter((function(e){return e})),o=a[0]||wi(_i),u=Ii(i,n.config.apiKey,n.name),s=null,c=S(r),t.prev=10,c.s();case 12:if((l=c.n()).done){t.next=29;break}return f=l.value,t.prev=14,t.next=17,f._get(u);case 17:if(!(h=t.sent)){t.next=23;break}return d=ki._fromJSON(n,h),f!==o&&(s=d),o=f,t.abrupt("break",29);case 23:t.next=27;break;case 25:t.prev=25,t.t0=t.catch(14);case 27:t.next=12;break;case 29:t.next=34;break;case 31:t.prev=31,t.t1=t.catch(10),c.e(t.t1);case 34:return t.prev=34,c.f(),t.finish(34);case 37:if(p=a.filter((function(e){return e._shouldAllowMigration})),o._shouldAllowMigration&&p.length){t.next=40;break}return t.abrupt("return",new e(o,n,i));case 40:if(o=p[0],!s){t.next=44;break}return t.next=44,o._set(u,s.toJSON());case 44:return t.next=46,Promise.all(r.map(function(){var e=Je($e().mark((function e(t){return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t===o){e.next=8;break}return e.prev=1,e.next=4,t._remove(u);case 4:e.next=8;break;case 6:e.prev=6,e.t0=e.catch(1);case 8:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t){return e.apply(this,arguments)}}()));case 46:return t.abrupt("return",new e(o,n,i));case 47:case"end":return t.stop()}}),t,null,[[10,31,34,37],[14,25]])})));return function(e,n){return t.apply(this,arguments)}}()}]),e}();function Ei(e){var t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(Ni(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(Ti(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(Pi(t))return"Blackberry";if(Oi(t))return"Webos";if(Ci(t))return"Safari";if((t.includes("chrome/")||Ai(t))&&!t.includes("edge/"))return"Chrome";if(Ri(t))return"Android";var n=e.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);return 2===(null===n||void 0===n?void 0:n.length)?n[1]:"Other"}function Ti(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ft();return/firefox\//i.test(e)}function Ci(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:ft()).toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Ai(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ft();return/crios\//i.test(e)}function Ni(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ft();return/iemobile/i.test(e)}function Ri(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ft();return/android/i.test(e)}function Pi(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ft();return/blackberry/i.test(e)}function Oi(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ft();return/webos/i.test(e)}function Di(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ft();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function Li(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ft();return Di(e)||Ri(e)||Oi(e)||Pi(e)||/windows phone/i.test(e)||Ni(e)}function Mi(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=Ei(ft());break;case"Worker":t="".concat(Ei(ft()),"-").concat(e);break;default:t=e}var r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(Cn,"/").concat(r)}function Fi(e){return ji.apply(this,arguments)}function ji(){return ji=Je($e().mark((function e(t){return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Zr(t,"GET","/v1/recaptchaParams");case 2:if(e.t0=e.sent.recaptchaSiteKey,e.t0){e.next=5;break}e.t0="";case 5:return e.abrupt("return",e.t0);case 6:case"end":return e.stop()}}),e)}))),ji.apply(this,arguments)}function Ui(e,t){return Vi.apply(this,arguments)}function Vi(){return Vi=Je($e().mark((function e(t,n){return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Zr(t,"GET","/v2/recaptchaConfig",Vr(t,n)));case 1:case"end":return e.stop()}}),e)}))),Vi.apply(this,arguments)}function Zi(e){return void 0!==e&&void 0!==e.getResponse}function zi(e){return void 0!==e&&void 0!==e.enterprise}var Bi=(0,c.Z)((function e(t){if(s(this,e),this.siteKey="",this.emailPasswordEnabled=!1,void 0===t.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=t.recaptchaKey.split("/")[3],this.emailPasswordEnabled=t.recaptchaEnforcementState.some((function(e){return"EMAIL_PASSWORD_PROVIDER"===e.provider&&"OFF"!==e.enforcementState}))}));function qi(e){return new Promise((function(t,n){var r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=function(e){var t=Sr("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)}))}function Gi(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}var Ki=function(){function e(t){s(this,e),this.type="recaptcha-enterprise",this.auth=$i(t)}return(0,c.Z)(e,[{key:"verify",value:function(){var e=Je($e().mark((function e(){var t,n,r,i,a,o=this,u=arguments;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=function(e,n,r){var i=window.grecaptcha;zi(i)?i.enterprise.ready((function(){i.enterprise.execute(e,{action:t}).then((function(e){n(e)})).catch((function(){n("NO_RECAPTCHA")}))})):r(Error("No reCAPTCHA enterprise script loaded."))},i=function(){return i=Je($e().mark((function e(t){return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=5;break}if(null!=t.tenantId||null==t._agentRecaptchaConfig){e.next=3;break}return e.abrupt("return",t._agentRecaptchaConfig.siteKey);case 3:if(null==t.tenantId||void 0===t._tenantRecaptchaConfigs[t.tenantId]){e.next=5;break}return e.abrupt("return",t._tenantRecaptchaConfigs[t.tenantId].siteKey);case 5:return e.abrupt("return",new Promise(function(){var e=Je($e().mark((function e(n,r){return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Ui(t,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then((function(e){if(void 0!==e.recaptchaKey){var i=new Bi(e);return null==t.tenantId?t._agentRecaptchaConfig=i:t._tenantRecaptchaConfigs[t.tenantId]=i,n(i.siteKey)}r(new Error("recaptcha Enterprise site key undefined"))})).catch((function(e){r(e)}));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()));case 6:case"end":return e.stop()}}),e)}))),i.apply(this,arguments)},r=function(e){return i.apply(this,arguments)},t=u.length>0&&void 0!==u[0]?u[0]:"verify",n=u.length>1&&void 0!==u[1]&&u[1],e.abrupt("return",new Promise((function(e,t){r(o.auth).then((function(r){if(!n&&zi(window.grecaptcha))a(r,e,t);else{if("undefined"===typeof window)return void t(new Error("RecaptchaVerifier is only supported in browser"));qi("https://www.google.com/recaptcha/enterprise.js?render="+r).then((function(){a(r,e,t)})).catch((function(e){t(e)}))}})).catch((function(e){t(e)}))})));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}]),e}();function Wi(e,t,n){return Hi.apply(this,arguments)}function Hi(){return Hi=Je($e().mark((function e(t,n,r){var i,a,o,u,s=arguments;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=s.length>3&&void 0!==s[3]&&s[3],a=new Ki(t),e.prev=2,e.next=5,a.verify(r);case 5:o=e.sent,e.next=13;break;case 8:return e.prev=8,e.t0=e.catch(2),e.next=12,a.verify(r,!0);case 12:o=e.sent;case 13:return u=Object.assign({},n),i?Object.assign(u,{captchaResp:o}):Object.assign(u,{captchaResponse:o}),Object.assign(u,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(u,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),e.abrupt("return",u);case 18:case"end":return e.stop()}}),e,null,[[2,8]])}))),Hi.apply(this,arguments)}var Qi=function(){function e(t){s(this,e),this.auth=t,this.queue=[]}return(0,c.Z)(e,[{key:"pushCallback",value:function(e,t){var n=this,r=function(t){return new Promise((function(n,r){try{n(e(t))}catch(i){r(i)}}))};r.onAbort=t,this.queue.push(r);var i=this.queue.length-1;return function(){n.queue[i]=function(){return Promise.resolve()}}}},{key:"runMiddleware",value:function(){var e=Je($e().mark((function e(t){var n,r,i,a,o,u,s;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.auth.currentUser!==t){e.next=2;break}return e.abrupt("return");case 2:n=[],e.prev=3,r=S(this.queue),e.prev=5,r.s();case 7:if((i=r.n()).done){e.next=14;break}return a=i.value,e.next=11,a(t);case 11:a.onAbort&&n.push(a.onAbort);case 12:e.next=7;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(5),r.e(e.t0);case 19:return e.prev=19,r.f(),e.finish(19);case 22:e.next=30;break;case 24:e.prev=24,e.t1=e.catch(3),n.reverse(),o=S(n);try{for(o.s();!(u=o.n()).done;){s=u.value;try{s()}catch(c){}}}catch(l){o.e(l)}finally{o.f()}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===e.t1||void 0===e.t1?void 0:e.t1.message});case 30:case"end":return e.stop()}}),e,this,[[3,24],[5,16,19,22]])})));return function(t){return e.apply(this,arguments)}}()}]),e}(),Yi=function(){function e(t,n,r,i){s(this,e),this.app=t,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Xi(this),this.idTokenSubscription=new Xi(this),this.beforeStateQueue=new Qi(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=br,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=i.sdkClientVersion}return(0,c.Z)(e,[{key:"_initializeWithPersistence",value:function(e,t){var n=this;return t&&(this._popupRedirectResolver=wi(t)),this._initializationPromise=this.queue(Je($e().mark((function r(){var i,a;return $e().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!n._deleted){r.next=2;break}return r.abrupt("return");case 2:return r.next=4,Si.create(n,e);case 4:if(n.persistenceManager=r.sent,!n._deleted){r.next=7;break}return r.abrupt("return");case 7:if(!(null===(i=n._popupRedirectResolver)||void 0===i?void 0:i._shouldInitProactively)){r.next=15;break}return r.prev=8,r.next=11,n._popupRedirectResolver._initialize(n);case 11:r.next=15;break;case 13:r.prev=13,r.t0=r.catch(8);case 15:return r.next=17,n.initializeCurrentUser(t);case 17:if(n.lastNotifiedUid=(null===(a=n.currentUser)||void 0===a?void 0:a.uid)||null,!n._deleted){r.next=20;break}return r.abrupt("return");case 20:n._isInitialized=!0;case 21:case"end":return r.stop()}}),r,null,[[8,13]])})))),this._initializationPromise}},{key:"_onStorageEvent",value:function(){var e=Je($e().mark((function e(){var t;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._deleted){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.assertedPersistence.getCurrentUser();case 4:if(t=e.sent,this.currentUser||t){e.next=7;break}return e.abrupt("return");case 7:if(!this.currentUser||!t||this.currentUser.uid!==t.uid){e.next=12;break}return this._currentUser._assign(t),e.next=11,this.currentUser.getIdToken();case 11:return e.abrupt("return");case 12:return e.next=14,this._updateCurrentUser(t,!0);case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeCurrentUser",value:function(){var e=Je($e().mark((function e(t){var n,r,i,a,o,u,s;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.assertedPersistence.getCurrentUser();case 2:if(r=e.sent,i=r,a=!1,!t||!this.config.authDomain){e.next=14;break}return e.next=8,this.getOrInitRedirectPersistenceManager();case 8:return o=null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId,u=null===i||void 0===i?void 0:i._redirectEventId,e.next=12,this.tryRedirectSignIn(t);case 12:s=e.sent,o&&o!==u||!(null===s||void 0===s?void 0:s.user)||(i=s.user,a=!0);case 14:if(i){e.next=16;break}return e.abrupt("return",this.directlySetCurrentUser(null));case 16:if(i._redirectEventId){e.next=32;break}if(!a){e.next=27;break}return e.prev=18,e.next=21,this.beforeStateQueue.runMiddleware(i);case 21:e.next=27;break;case 23:e.prev=23,e.t0=e.catch(18),i=r,this._popupRedirectResolver._overrideRedirectResult(this,(function(){return Promise.reject(e.t0)}));case 27:if(!i){e.next=31;break}return e.abrupt("return",this.reloadAndSetCurrentUserOrClear(i));case 31:return e.abrupt("return",this.directlySetCurrentUser(null));case 32:return Ar(this._popupRedirectResolver,this,"argument-error"),e.next=35,this.getOrInitRedirectPersistenceManager();case 35:if(!this.redirectUser||this.redirectUser._redirectEventId!==i._redirectEventId){e.next=37;break}return e.abrupt("return",this.directlySetCurrentUser(i));case 37:return e.abrupt("return",this.reloadAndSetCurrentUserOrClear(i));case 38:case"end":return e.stop()}}),e,this,[[18,23]])})));return function(t){return e.apply(this,arguments)}}()},{key:"tryRedirectSignIn",value:function(){var e=Je($e().mark((function e(t){var n;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=null,e.prev=1,e.next=4,this._popupRedirectResolver._completeRedirectFn(this,t,!0);case 4:n=e.sent,e.next=11;break;case 7:return e.prev=7,e.t0=e.catch(1),e.next=11,this._setRedirectUser(null);case 11:return e.abrupt("return",n);case 12:case"end":return e.stop()}}),e,this,[[1,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"reloadAndSetCurrentUserOrClear",value:function(){var e=Je($e().mark((function e(t){return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fi(t);case 3:e.next=9;break;case 5:if(e.prev=5,e.t0=e.catch(0),(null===e.t0||void 0===e.t0?void 0:e.t0.code)==="auth/".concat("network-request-failed")){e.next=9;break}return e.abrupt("return",this.directlySetCurrentUser(null));case 9:return e.abrupt("return",this.directlySetCurrentUser(t));case 10:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(t){return e.apply(this,arguments)}}()},{key:"useDeviceLanguage",value:function(){this.languageCode=function(){if("undefined"===typeof navigator)return null;var e=navigator;return e.languages&&e.languages[0]||e.language||null}()}},{key:"_delete",value:function(){var e=Je($e().mark((function e(){return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this._deleted=!0;case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"updateCurrentUser",value:function(){var e=Je($e().mark((function e(t){var n;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=t?Nt(t):null)&&Ar(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),e.abrupt("return",this._updateCurrentUser(n&&n._clone(this)));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_updateCurrentUser",value:function(){var e=Je($e().mark((function e(t){var n,r=this,i=arguments;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>1&&void 0!==i[1]&&i[1],!this._deleted){e.next=3;break}return e.abrupt("return");case 3:if(t&&Ar(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),n){e.next=7;break}return e.next=7,this.beforeStateQueue.runMiddleware(t);case 7:return e.abrupt("return",this.queue(Je($e().mark((function e(){return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.directlySetCurrentUser(t);case 2:r.notifyAuthListeners();case 3:case"end":return e.stop()}}),e)})))));case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signOut",value:function(){var e=Je($e().mark((function e(){return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.beforeStateQueue.runMiddleware(null);case 2:if(!this.redirectPersistenceManager&&!this._popupRedirectResolver){e.next=5;break}return e.next=5,this._setRedirectUser(null);case 5:return e.abrupt("return",this._updateCurrentUser(null,!0));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setPersistence",value:function(e){var t=this;return this.queue(Je($e().mark((function n(){return $e().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.assertedPersistence.setPersistence(wi(e));case 2:case"end":return n.stop()}}),n)}))))}},{key:"initializeRecaptchaConfig",value:function(){var e=Je($e().mark((function e(){var t,n;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ui(this,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"});case 2:t=e.sent,n=new Bi(t),null==this.tenantId?this._agentRecaptchaConfig=n:this._tenantRecaptchaConfigs[this.tenantId]=n,n.emailPasswordEnabled&&new Ki(this).verify();case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_getRecaptchaConfig",value:function(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}},{key:"_getPersistence",value:function(){return this.assertedPersistence.persistence.type}},{key:"_updateErrorMap",value:function(e){this._errorFactory=new gt("auth","Firebase",e())}},{key:"onAuthStateChanged",value:function(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}},{key:"beforeAuthStateChanged",value:function(e,t){return this.beforeStateQueue.pushCallback(e,t)}},{key:"onIdTokenChanged",value:function(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}},{key:"toJSON",value:function(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}},{key:"_setRedirectUser",value:function(){var e=Je($e().mark((function e(t,n){var r;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getOrInitRedirectPersistenceManager(n);case 2:return r=e.sent,e.abrupt("return",null===t?r.removeCurrentUser():r.setCurrentUser(t));case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getOrInitRedirectPersistenceManager",value:function(){var e=Je($e().mark((function e(t){var n;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.redirectPersistenceManager){e.next=9;break}return Ar(n=t&&wi(t)||this._popupRedirectResolver,this,"argument-error"),e.next=5,Si.create(this,[wi(n._redirectPersistence)],"redirectUser");case 5:return this.redirectPersistenceManager=e.sent,e.next=8,this.redirectPersistenceManager.getCurrentUser();case 8:this.redirectUser=e.sent;case 9:return e.abrupt("return",this.redirectPersistenceManager);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_redirectUserForId",value:function(){var e=Je($e().mark((function e(t){var n,r;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._isInitialized){e.next=3;break}return e.next=3,this.queue(Je($e().mark((function e(){return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))));case 3:if((null===(n=this._currentUser)||void 0===n?void 0:n._redirectEventId)!==t){e.next=5;break}return e.abrupt("return",this._currentUser);case 5:if((null===(r=this.redirectUser)||void 0===r?void 0:r._redirectEventId)!==t){e.next=7;break}return e.abrupt("return",this.redirectUser);case 7:return e.abrupt("return",null);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_persistUserIfCurrent",value:function(){var e=Je($e().mark((function e(t){var n=this;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t!==this.currentUser){e.next=2;break}return e.abrupt("return",this.queue(Je($e().mark((function e(){return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",n.directlySetCurrentUser(t));case 1:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_notifyListenersIfCurrent",value:function(e){e===this.currentUser&&this.notifyAuthListeners()}},{key:"_key",value:function(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}},{key:"_startProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}},{key:"_stopProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}},{key:"_currentUser",get:function(){return this.currentUser}},{key:"notifyAuthListeners",value:function(){var e,t;if(this._isInitialized){this.idTokenSubscription.next(this.currentUser);var n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}}},{key:"registerStateListener",value:function(e,t,n,r){var i=this;if(this._deleted)return function(){};var a="function"===typeof t?t:t.next.bind(t),o=this._isInitialized?Promise.resolve():this._initializationPromise;return Ar(o,this,"internal-error"),o.then((function(){return a(i.currentUser)})),"function"===typeof t?e.addObserver(t,n,r):e.addObserver(t)}},{key:"directlySetCurrentUser",value:function(){var e=Je($e().mark((function e(t){return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,!t){e.next=8;break}return e.next=6,this.assertedPersistence.setCurrentUser(t);case 6:e.next=10;break;case 8:return e.next=10,this.assertedPersistence.removeCurrentUser();case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"queue",value:function(e){return this.operations=this.operations.then(e,e),this.operations}},{key:"assertedPersistence",get:function(){return Ar(this.persistenceManager,this,"internal-error"),this.persistenceManager}},{key:"_logFramework",value:function(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Mi(this.config.clientPlatform,this._getFrameworks()))}},{key:"_getFrameworks",value:function(){return this.frameworks}},{key:"_getAdditionalHeaders",value:function(){var e=Je($e().mark((function e(){var t,n,r,i;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=(0,et.Z)({},"X-Client-Version",this.clientVersion),this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId),e.next=4,null===(t=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getHeartbeatsHeader();case 4:return(r=e.sent)&&(n["X-Firebase-Client"]=r),e.next=8,this._getAppCheckToken();case 8:return(i=e.sent)&&(n["X-Firebase-AppCheck"]=i),e.abrupt("return",n);case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_getAppCheckToken",value:function(){var e=Je($e().mark((function e(){var t,n;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null===(t=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getToken();case 2:return(null===(n=e.sent)||void 0===n?void 0:n.error)&&xr("Error while retrieving App Check token: ".concat(n.error)),e.abrupt("return",null===n||void 0===n?void 0:n.token);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function $i(e){return Nt(e)}var Xi=function(){function e(t){var n=this;s(this,e),this.auth=t,this.observer=null,this.addObserver=Tt((function(e){return n.observer=e}))}return(0,c.Z)(e,[{key:"next",get:function(){return Ar(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}]),e}();function Ji(e,t,n){var r=$i(e);Ar(r._canInitEmulator,r,"emulator-config-failed"),Ar(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");var a=!!(null===n||void 0===n?void 0:n.disableWarnings),o=ea(t),u=function(e){var t=ea(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};var r=n[2].split("@").pop()||"",a=/^(\[[^\]]+\])(:|$)/.exec(r);if(a){var o=a[1];return{host:o,port:ta(r.substr(o.length+1))}}var u=r.split(":"),s=(0,i.Z)(u,2);return{host:s[0],port:ta(s[1])}}(t),s=u.host,c=u.port,l=null===c?"":":".concat(c);r.config.emulator={url:"".concat(o,"//").concat(s).concat(l,"/")},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:s,port:c,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:a})}),a||function(){function e(){var e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function ea(e){var t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function ta(e){if(!e)return null;var t=Number(e);return isNaN(t)?null:t}var na=function(){function e(t,n){s(this,e),this.providerId=t,this.signInMethod=n}return(0,c.Z)(e,[{key:"toJSON",value:function(){return Nr("not implemented")}},{key:"_getIdTokenResponse",value:function(e){return Nr("not implemented")}},{key:"_linkToIdToken",value:function(e,t){return Nr("not implemented")}},{key:"_getReauthenticationResolver",value:function(e){return Nr("not implemented")}}]),e}();function ra(e,t){return ia.apply(this,arguments)}function ia(){return ia=Je($e().mark((function e(t,n){return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Zr(t,"POST","/v1/accounts:resetPassword",Vr(t,n)));case 1:case"end":return e.stop()}}),e)}))),ia.apply(this,arguments)}function aa(e,t){return oa.apply(this,arguments)}function oa(){return oa=Je($e().mark((function e(t,n){return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Zr(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)}))),oa.apply(this,arguments)}function ua(e,t){return sa.apply(this,arguments)}function sa(){return sa=Je($e().mark((function e(t,n){return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Zr(t,"POST","/v1/accounts:update",Vr(t,n)));case 1:case"end":return e.stop()}}),e)}))),sa.apply(this,arguments)}function ca(e,t){return la.apply(this,arguments)}function la(){return la=Je($e().mark((function e(t,n){return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Gr(t,"POST","/v1/accounts:signInWithPassword",Vr(t,n)));case 1:case"end":return e.stop()}}),e)}))),la.apply(this,arguments)}function fa(e,t){return ha.apply(this,arguments)}function ha(){return ha=Je($e().mark((function e(t,n){return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Zr(t,"POST","/v1/accounts:sendOobCode",Vr(t,n)));case 1:case"end":return e.stop()}}),e)}))),ha.apply(this,arguments)}function da(e,t){return pa.apply(this,arguments)}function pa(){return pa=Je($e().mark((function e(t,n){return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fa(t,n));case 1:case"end":return e.stop()}}),e)}))),pa.apply(this,arguments)}function va(e,t){return ma.apply(this,arguments)}function ma(){return ma=Je($e().mark((function e(t,n){return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fa(t,n));case 1:case"end":return e.stop()}}),e)}))),ma.apply(this,arguments)}function ya(e,t){return ga.apply(this,arguments)}function ga(){return ga=Je($e().mark((function e(t,n){return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fa(t,n));case 1:case"end":return e.stop()}}),e)}))),ga.apply(this,arguments)}function ka(e,t){return ba.apply(this,arguments)}function ba(){return ba=Je($e().mark((function e(t,n){return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fa(t,n));case 1:case"end":return e.stop()}}),e)}))),ba.apply(this,arguments)}function wa(e,t){return xa.apply(this,arguments)}function xa(){return xa=Je($e().mark((function e(t,n){return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Gr(t,"POST","/v1/accounts:signInWithEmailLink",Vr(t,n)));case 1:case"end":return e.stop()}}),e)}))),xa.apply(this,arguments)}function _a(e,t){return Ia.apply(this,arguments)}function Ia(){return Ia=Je($e().mark((function e(t,n){return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Gr(t,"POST","/v1/accounts:signInWithEmailLink",Vr(t,n)));case 1:case"end":return e.stop()}}),e)}))),Ia.apply(this,arguments)}var Sa=function(e){f(n,e);var t=m(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return s(this,n),(a=t.call(this,"password",i))._email=e,a._password=r,a._tenantId=o,a}return(0,c.Z)(n,[{key:"toJSON",value:function(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}},{key:"_getIdTokenResponse",value:function(){var e=Je($e().mark((function e(t){var n,r,i;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?12:13;break;case 3:if(r={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},!(null===(n=t._getRecaptchaConfig())||void 0===n?void 0:n.emailPasswordEnabled)){e.next=11;break}return e.next=7,Wi(t,r,"signInWithPassword");case 7:return i=e.sent,e.abrupt("return",ca(t,i));case 11:return e.abrupt("return",ca(t,r).catch(function(){var e=Je($e().mark((function e(n){var i;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.code!=="auth/".concat("missing-recaptcha-token")){e.next=8;break}return console.log("Sign-in with email address and password is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow."),e.next=4,Wi(t,r,"signInWithPassword");case 4:return i=e.sent,e.abrupt("return",ca(t,i));case 8:return e.abrupt("return",Promise.reject(n));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 12:return e.abrupt("return",wa(t,{email:this._email,oobCode:this._password}));case 13:Ir(t,"internal-error");case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_linkToIdToken",value:function(){var e=Je($e().mark((function e(t,n){return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?4:5;break;case 3:return e.abrupt("return",aa(t,{idToken:n,returnSecureToken:!0,email:this._email,password:this._password}));case 4:return e.abrupt("return",_a(t,{idToken:n,email:this._email,oobCode:this._password}));case 5:Ir(t,"internal-error");case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_getReauthenticationResolver",value:function(e){return this._getIdTokenResponse(e)}}],[{key:"_fromEmailAndPassword",value:function(e,t){return new n(e,t,"password")}},{key:"_fromEmailAndCode",value:function(e,t){return new n(e,t,"emailLink",arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}},{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}}]),n}(na);function Ea(e,t){return Ta.apply(this,arguments)}function Ta(){return Ta=Je($e().mark((function e(t,n){return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Gr(t,"POST","/v1/accounts:signInWithIdp",Vr(t,n)));case 1:case"end":return e.stop()}}),e)}))),Ta.apply(this,arguments)}var Ca=function(e){f(n,e);var t=m(n);function n(){var e;return s(this,n),(e=t.apply(this,arguments)).pendingToken=null,e}return(0,c.Z)(n,[{key:"toJSON",value:function(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}},{key:"_getIdTokenResponse",value:function(e){return Ea(e,this.buildRequest())}},{key:"_linkToIdToken",value:function(e,t){var n=this.buildRequest();return n.idToken=t,Ea(e,n)}},{key:"_getReauthenticationResolver",value:function(e){var t=this.buildRequest();return t.autoCreate=!1,Ea(e,t)}},{key:"buildRequest",value:function(){var e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{var t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=It(t)}return e}}],[{key:"_fromParams",value:function(e){var t=new n(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Ir("argument-error"),t}},{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e,r=t.providerId,i=t.signInMethod,a=sr(t,["providerId","signInMethod"]);if(!r||!i)return null;var o=new n(r,i);return o.idToken=a.idToken||void 0,o.accessToken=a.accessToken||void 0,o.secret=a.secret,o.nonce=a.nonce,o.pendingToken=a.pendingToken||null,o}}]),n}(na);function Aa(e,t){return Na.apply(this,arguments)}function Na(){return Na=Je($e().mark((function e(t,n){return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Zr(t,"POST","/v1/accounts:sendVerificationCode",Vr(t,n)));case 1:case"end":return e.stop()}}),e)}))),Na.apply(this,arguments)}function Ra(){return Ra=Je($e().mark((function e(t,n){return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Gr(t,"POST","/v1/accounts:signInWithPhoneNumber",Vr(t,n)));case 1:case"end":return e.stop()}}),e)}))),Ra.apply(this,arguments)}function Pa(){return Pa=Je($e().mark((function e(t,n){var r;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Gr(t,"POST","/v1/accounts:signInWithPhoneNumber",Vr(t,n));case 2:if(!(r=e.sent).temporaryProof){e.next=5;break}throw Qr(t,"account-exists-with-different-credential",r);case 5:return e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)}))),Pa.apply(this,arguments)}var Oa=(0,et.Z)({},"USER_NOT_FOUND","user-not-found");function Da(){return Da=Je($e().mark((function e(t,n){var r;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Object.assign(Object.assign({},n),{operation:"REAUTH"}),e.abrupt("return",Gr(t,"POST","/v1/accounts:signInWithPhoneNumber",Vr(t,r),Oa));case 2:case"end":return e.stop()}}),e)}))),Da.apply(this,arguments)}var La=function(e){f(n,e);var t=m(n);function n(e){var r;return s(this,n),(r=t.call(this,"phone","phone")).params=e,r}return(0,c.Z)(n,[{key:"_getIdTokenResponse",value:function(e){return function(e,t){return Ra.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_linkToIdToken",value:function(e,t){return function(e,t){return Pa.apply(this,arguments)}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}},{key:"_getReauthenticationResolver",value:function(e){return function(e,t){return Da.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_makeVerificationRequest",value:function(){var e=this.params,t=e.temporaryProof,n=e.phoneNumber,r=e.verificationId,i=e.verificationCode;return t&&n?{temporaryProof:t,phoneNumber:n}:{sessionInfo:r,code:i}}},{key:"toJSON",value:function(){var e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}}],[{key:"_fromVerification",value:function(e,t){return new n({verificationId:e,verificationCode:t})}},{key:"_fromTokenResponse",value:function(e,t){return new n({phoneNumber:e,temporaryProof:t})}},{key:"fromJSON",value:function(e){"string"===typeof e&&(e=JSON.parse(e));var t=e,r=t.verificationId,i=t.verificationCode,a=t.phoneNumber,o=t.temporaryProof;return i||r||a||o?new n({verificationId:r,verificationCode:i,phoneNumber:a,temporaryProof:o}):null}}]),n}(na);var Ma=function(){function e(t){var n,r,i,a,o,u;s(this,e);var c=St(Et(t)),l=null!==(n=c.apiKey)&&void 0!==n?n:null,f=null!==(r=c.oobCode)&&void 0!==r?r:null,h=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(i=c.mode)&&void 0!==i?i:null);Ar(l&&f&&h,"argument-error"),this.apiKey=l,this.operation=h,this.code=f,this.continueUrl=null!==(a=c.continueUrl)&&void 0!==a?a:null,this.languageCode=null!==(o=c.languageCode)&&void 0!==o?o:null,this.tenantId=null!==(u=c.tenantId)&&void 0!==u?u:null}return(0,c.Z)(e,null,[{key:"parseLink",value:function(t){var n=function(e){var t=St(Et(e)).link,n=t?St(Et(t)).deep_link_id:null,r=St(Et(e)).deep_link_id;return(r?St(Et(r)).link:null)||r||n||t||e}(t);try{return new e(n)}catch(dS){return null}}}]),e}();var Fa=function(){function e(){s(this,e),this.providerId=e.PROVIDER_ID}return(0,c.Z)(e,null,[{key:"credential",value:function(e,t){return Sa._fromEmailAndPassword(e,t)}},{key:"credentialWithLink",value:function(e,t){var n=Ma.parseLink(t);return Ar(n,"argument-error"),Sa._fromEmailAndCode(e,n.code,n.tenantId)}}]),e}();Fa.PROVIDER_ID="password",Fa.EMAIL_PASSWORD_SIGN_IN_METHOD="password",Fa.EMAIL_LINK_SIGN_IN_METHOD="emailLink";var ja=function(){function e(t){s(this,e),this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}return(0,c.Z)(e,[{key:"setDefaultLanguage",value:function(e){this.defaultLanguageCode=e}},{key:"setCustomParameters",value:function(e){return this.customParameters=e,this}},{key:"getCustomParameters",value:function(){return this.customParameters}}]),e}(),Ua=function(e){f(n,e);var t=m(n);function n(){var e;return s(this,n),(e=t.apply(this,arguments)).scopes=[],e}return(0,c.Z)(n,[{key:"addScope",value:function(e){return this.scopes.includes(e)||this.scopes.push(e),this}},{key:"getScopes",value:function(){return(0,u.Z)(this.scopes)}}]),n}(ja),Va=function(e){f(n,e);var t=m(n);function n(){return s(this,n),t.apply(this,arguments)}return(0,c.Z)(n,[{key:"credential",value:function(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}},{key:"_credential",value:function(e){return Ar(e.idToken||e.accessToken,"argument-error"),Ca._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}}],[{key:"credentialFromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e;return Ar("providerId"in t&&"signInMethod"in t,"argument-error"),Ca._fromParams(t)}},{key:"credentialFromResult",value:function(e){return n.oauthCredentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.oauthCredentialFromTaggedObject(e.customData||{})}},{key:"oauthCredentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthIdToken,i=t.oauthAccessToken,a=t.oauthTokenSecret,o=t.pendingToken,u=t.nonce,s=t.providerId;if(!i&&!a&&!r&&!o)return null;if(!s)return null;try{return new n(s)._credential({idToken:r,accessToken:i,nonce:u,pendingToken:o})}catch(c){return null}}}]),n}(Ua),Za=function(e){f(n,e);var t=m(n);function n(){return s(this,n),t.call(this,"facebook.com")}return(0,c.Z)(n,null,[{key:"credential",value:function(e){return Ca._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch(dS){return null}}}]),n}(Ua);Za.FACEBOOK_SIGN_IN_METHOD="facebook.com",Za.PROVIDER_ID="facebook.com";var za=function(e){f(n,e);var t=m(n);function n(){var e;return s(this,n),(e=t.call(this,"google.com")).addScope("profile"),e}return(0,c.Z)(n,null,[{key:"credential",value:function(e,t){return Ca._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthIdToken,i=t.oauthAccessToken;if(!r&&!i)return null;try{return n.credential(r,i)}catch(dS){return null}}}]),n}(Ua);za.GOOGLE_SIGN_IN_METHOD="google.com",za.PROVIDER_ID="google.com";var Ba=function(e){f(n,e);var t=m(n);function n(){return s(this,n),t.call(this,"github.com")}return(0,c.Z)(n,null,[{key:"credential",value:function(e){return Ca._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GITHUB_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch(dS){return null}}}]),n}(Ua);Ba.GITHUB_SIGN_IN_METHOD="github.com",Ba.PROVIDER_ID="github.com";var qa=function(e){f(n,e);var t=m(n);function n(e,r){var i;return s(this,n),(i=t.call(this,e,e)).pendingToken=r,i}return(0,c.Z)(n,[{key:"_getIdTokenResponse",value:function(e){return Ea(e,this.buildRequest())}},{key:"_linkToIdToken",value:function(e,t){var n=this.buildRequest();return n.idToken=t,Ea(e,n)}},{key:"_getReauthenticationResolver",value:function(e){var t=this.buildRequest();return t.autoCreate=!1,Ea(e,t)}},{key:"toJSON",value:function(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}},{key:"buildRequest",value:function(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}],[{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e,r=t.providerId,i=t.signInMethod,a=t.pendingToken;return r&&i&&a&&r===i?new n(r,a):null}},{key:"_create",value:function(e,t){return new n(e,t)}}]),n}(na),Ga=function(e){f(n,e);var t=m(n);function n(e){return s(this,n),Ar(e.startsWith("saml."),"argument-error"),t.call(this,e)}return(0,c.Z)(n,null,[{key:"credentialFromResult",value:function(e){return n.samlCredentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.samlCredentialFromTaggedObject(e.customData||{})}},{key:"credentialFromJSON",value:function(e){var t=qa.fromJSON(e);return Ar(t,"argument-error"),t}},{key:"samlCredentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var n=t.pendingToken,r=t.providerId;if(!n||!r)return null;try{return qa._create(r,n)}catch(i){return null}}}]),n}(ja),Ka=function(e){f(n,e);var t=m(n);function n(){return s(this,n),t.call(this,"twitter.com")}return(0,c.Z)(n,null,[{key:"credential",value:function(e,t){return Ca._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthAccessToken,i=t.oauthTokenSecret;if(!r||!i)return null;try{return n.credential(r,i)}catch(dS){return null}}}]),n}(Ua);function Wa(e,t){return Ha.apply(this,arguments)}function Ha(){return Ha=Je($e().mark((function e(t,n){return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Gr(t,"POST","/v1/accounts:signUp",Vr(t,n)));case 1:case"end":return e.stop()}}),e)}))),Ha.apply(this,arguments)}Ka.TWITTER_SIGN_IN_METHOD="twitter.com",Ka.PROVIDER_ID="twitter.com";var Qa=function(){function e(t){s(this,e),this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}return(0,c.Z)(e,null,[{key:"_fromIdTokenResponse",value:function(){var t=Je($e().mark((function t(n,r,i){var a,o,u,s,c=arguments;return $e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=c.length>3&&void 0!==c[3]&&c[3],t.next=3,ki._fromIdTokenResponse(n,i,a);case 3:return o=t.sent,u=Ya(i),s=new e({user:o,providerId:u,_tokenResponse:i,operationType:r}),t.abrupt("return",s);case 7:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()},{key:"_forOperation",value:function(){var t=Je($e().mark((function t(n,r,i){var a;return $e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n._updateTokensIfNecessary(i,!0);case 2:return a=Ya(i),t.abrupt("return",new e({user:n,providerId:a,_tokenResponse:i,operationType:r}));case 4:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()}]),e}();function Ya(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}function $a(){return $a=Je($e().mark((function e(t){var n,r,i,a;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=$i(t),e.next=3,r._initializationPromise;case 3:if(!(null===(n=r.currentUser)||void 0===n?void 0:n.isAnonymous)){e.next=5;break}return e.abrupt("return",new Qa({user:r.currentUser,providerId:null,operationType:"signIn"}));case 5:return e.next=7,Wa(r,{returnSecureToken:!0});case 7:return i=e.sent,e.next=10,Qa._fromIdTokenResponse(r,"signIn",i,!0);case 10:return a=e.sent,e.next=13,r._updateCurrentUser(a.user);case 13:return e.abrupt("return",a);case 14:case"end":return e.stop()}}),e)}))),$a.apply(this,arguments)}var Xa=function(e){f(n,e);var t=m(n);function n(e,r,i,a){var o,u;return s(this,n),(o=t.call(this,r.code,r.message)).operationType=i,o.user=a,Object.setPrototypeOf((0,v.Z)(o),n.prototype),o.customData={appName:e.name,tenantId:null!==(u=e.tenantId)&&void 0!==u?u:void 0,_serverResponse:r.customData._serverResponse,operationType:i},o}return(0,c.Z)(n,null,[{key:"_fromErrorAndOperation",value:function(e,t,r,i){return new n(e,t,r,i)}}]),n}(yt);function Ja(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((function(n){if(n.code==="auth/".concat("multi-factor-auth-required"))throw Xa._fromErrorAndOperation(e,n,t,r);throw n}))}function eo(e){return new Set(e.map((function(e){return e.providerId})).filter((function(e){return!!e})))}function to(e,t){return no.apply(this,arguments)}function no(){return no=Je($e().mark((function e(t,n){var r,i,a,o;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Nt(t),e.next=3,ao(!0,r,n);case 3:return e.t0=Xr,e.t1=r.auth,e.next=7,r.getIdToken();case 7:return e.t2=e.sent,e.t3=[n],e.t4={idToken:e.t2,deleteProvider:e.t3},e.next=12,(0,e.t0)(e.t1,e.t4);case 12:return i=e.sent,a=i.providerUserInfo,o=eo(a||[]),r.providerData=r.providerData.filter((function(e){return o.has(e.providerId)})),o.has("phone")||(r.phoneNumber=null),e.next=19,r.auth._persistUserIfCurrent(r);case 19:return e.abrupt("return",r);case 20:case"end":return e.stop()}}),e)}))),no.apply(this,arguments)}function ro(e,t){return io.apply(this,arguments)}function io(){return io=Je($e().mark((function e(t,n){var r,i,a=arguments;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.length>2&&void 0!==a[2]&&a[2],e.t0=oi,e.t1=t,e.t2=n,e.t3=t.auth,e.next=7,t.getIdToken();case 7:return e.t4=e.sent,e.t5=e.t2._linkToIdToken.call(e.t2,e.t3,e.t4),e.t6=r,e.next=12,(0,e.t0)(e.t1,e.t5,e.t6);case 12:return i=e.sent,e.abrupt("return",Qa._forOperation(t,"link",i));case 14:case"end":return e.stop()}}),e)}))),io.apply(this,arguments)}function ao(e,t,n){return oo.apply(this,arguments)}function oo(){return(oo=Je($e().mark((function e(t,n,r){var i,a;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fi(n);case 2:i=eo(n.providerData),a=!1===t?"provider-already-linked":"no-such-provider",Ar(i.has(r)===t,n.auth,a);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function uo(e,t){return so.apply(this,arguments)}function so(){return so=Je($e().mark((function e(t,n){var r,i,a,o,u,s,c=arguments;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>2&&void 0!==c[2]&&c[2],i=t.auth,a="reauthenticate",e.prev=3,e.next=6,oi(t,Ja(i,a,n,t),r);case 6:return Ar((o=e.sent).idToken,i,"internal-error"),Ar(u=ai(o.idToken),i,"internal-error"),s=u.sub,Ar(t.uid===s,i,"user-mismatch"),e.abrupt("return",Qa._forOperation(t,a,o));case 15:throw e.prev=15,e.t0=e.catch(3),(null===e.t0||void 0===e.t0?void 0:e.t0.code)==="auth/".concat("user-not-found")&&Ir(i,"user-mismatch"),e.t0;case 19:case"end":return e.stop()}}),e,null,[[3,15]])}))),so.apply(this,arguments)}function co(e,t){return lo.apply(this,arguments)}function lo(){return lo=Je($e().mark((function e(t,n){var r,i,a,o,u=arguments;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>2&&void 0!==u[2]&&u[2],i="signIn",e.next=4,Ja(t,i,n);case 4:return a=e.sent,e.next=7,Qa._fromIdTokenResponse(t,i,a);case 7:if(o=e.sent,r){e.next=11;break}return e.next=11,t._updateCurrentUser(o.user);case 11:return e.abrupt("return",o);case 12:case"end":return e.stop()}}),e)}))),lo.apply(this,arguments)}function fo(e,t){return ho.apply(this,arguments)}function ho(){return ho=Je($e().mark((function e(t,n){return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",co($i(t),n));case 1:case"end":return e.stop()}}),e)}))),ho.apply(this,arguments)}function po(e,t){return vo.apply(this,arguments)}function vo(){return(vo=Je($e().mark((function e(t,n){var r;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Nt(t),e.next=3,ao(!1,r,n.providerId);case 3:return e.abrupt("return",ro(r,n));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function mo(e,t){return yo.apply(this,arguments)}function yo(){return(yo=Je($e().mark((function e(t,n){return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",uo(Nt(t),n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function go(e,t){return ko.apply(this,arguments)}function ko(){return ko=Je($e().mark((function e(t,n){return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Gr(t,"POST","/v1/accounts:signInWithCustomToken",Vr(t,n)));case 1:case"end":return e.stop()}}),e)}))),ko.apply(this,arguments)}function bo(){return bo=Je($e().mark((function e(t,n){var r,i,a;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=$i(t),e.next=3,go(r,{token:n,returnSecureToken:!0});case 3:return i=e.sent,e.next=6,Qa._fromIdTokenResponse(r,"signIn",i);case 6:return a=e.sent,e.next=9,r._updateCurrentUser(a.user);case 9:return e.abrupt("return",a);case 10:case"end":return e.stop()}}),e)}))),bo.apply(this,arguments)}var wo=function(){function e(t,n){s(this,e),this.factorId=t,this.uid=n.mfaEnrollmentId,this.enrollmentTime=new Date(n.enrolledAt).toUTCString(),this.displayName=n.displayName}return(0,c.Z)(e,null,[{key:"_fromServerResponse",value:function(e,t){return"phoneInfo"in t?xo._fromServerResponse(e,t):"totpInfo"in t?_o._fromServerResponse(e,t):Ir(e,"internal-error")}}]),e}(),xo=function(e){f(n,e);var t=m(n);function n(e){var r;return s(this,n),(r=t.call(this,"phone",e)).phoneNumber=e.phoneInfo,r}return(0,c.Z)(n,null,[{key:"_fromServerResponse",value:function(e,t){return new n(t)}}]),n}(wo),_o=function(e){f(n,e);var t=m(n);function n(e){return s(this,n),t.call(this,"totp",e)}return(0,c.Z)(n,null,[{key:"_fromServerResponse",value:function(e,t){return new n(t)}}]),n}(wo);function Io(e,t,n){var r;Ar((null===(r=n.url)||void 0===r?void 0:r.length)>0,e,"invalid-continue-uri"),Ar("undefined"===typeof n.dynamicLinkDomain||n.dynamicLinkDomain.length>0,e,"invalid-dynamic-link-domain"),t.continueUrl=n.url,t.dynamicLinkDomain=n.dynamicLinkDomain,t.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(Ar(n.iOS.bundleId.length>0,e,"missing-ios-bundle-id"),t.iOSBundleId=n.iOS.bundleId),n.android&&(Ar(n.android.packageName.length>0,e,"missing-android-pkg-name"),t.androidInstallApp=n.android.installApp,t.androidMinimumVersionCode=n.android.minimumVersion,t.androidPackageName=n.android.packageName)}function So(){return So=Je($e().mark((function e(t,n,r){var i,a,o,u;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=$i(t),o={requestType:"PASSWORD_RESET",email:n,clientType:"CLIENT_TYPE_WEB"},!(null===(i=a._getRecaptchaConfig())||void 0===i?void 0:i.emailPasswordEnabled)){e.next=11;break}return e.next=5,Wi(a,o,"getOobCode",!0);case 5:return u=e.sent,r&&Io(a,u,r),e.next=9,va(a,u);case 9:e.next=14;break;case 11:return r&&Io(a,o,r),e.next=14,va(a,o).catch(function(){var e=Je($e().mark((function e(t){var n;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.code!=="auth/".concat("missing-recaptcha-token")){e.next=10;break}return console.log("Password resets are protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the password reset flow."),e.next=4,Wi(a,o,"getOobCode",!0);case 4:return n=e.sent,r&&Io(a,n,r),e.next=8,va(a,n);case 8:e.next=11;break;case 10:return e.abrupt("return",Promise.reject(t));case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 14:case"end":return e.stop()}}),e)}))),So.apply(this,arguments)}function Eo(){return Eo=Je($e().mark((function e(t,n,r){return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ra(Nt(t),{oobCode:n,newPassword:r});case 2:case"end":return e.stop()}}),e)}))),Eo.apply(this,arguments)}function To(){return To=Je($e().mark((function e(t,n){return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ua(Nt(t),{oobCode:n});case 2:case"end":return e.stop()}}),e)}))),To.apply(this,arguments)}function Co(e,t){return Ao.apply(this,arguments)}function Ao(){return Ao=Je($e().mark((function e(t,n){var r,i,a,o;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Nt(t),e.next=3,ra(r,{oobCode:n});case 3:i=e.sent,Ar(a=i.requestType,r,"internal-error"),e.t0=a,e.next="EMAIL_SIGNIN"===e.t0?9:"VERIFY_AND_CHANGE_EMAIL"===e.t0?10:"REVERT_SECOND_FACTOR_ADDITION"===e.t0?12:13;break;case 9:return e.abrupt("break",14);case 10:return Ar(i.newEmail,r,"internal-error"),e.abrupt("break",14);case 12:Ar(i.mfaInfo,r,"internal-error");case 13:Ar(i.email,r,"internal-error");case 14:return o=null,i.mfaInfo&&(o=wo._fromServerResponse($i(r),i.mfaInfo)),e.abrupt("return",{data:{email:("VERIFY_AND_CHANGE_EMAIL"===i.requestType?i.newEmail:i.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===i.requestType?i.email:i.newEmail)||null,multiFactorInfo:o},operation:a});case 17:case"end":return e.stop()}}),e)}))),Ao.apply(this,arguments)}function No(){return No=Je($e().mark((function e(t,n){var r,i;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Co(Nt(t),n);case 2:return r=e.sent,i=r.data,e.abrupt("return",i.email);case 5:case"end":return e.stop()}}),e)}))),No.apply(this,arguments)}function Ro(e,t,n){return Po.apply(this,arguments)}function Po(){return Po=Je($e().mark((function e(t,n,r){var i,a,o,u,s,c,l;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=$i(t),o={returnSecureToken:!0,email:n,password:r,clientType:"CLIENT_TYPE_WEB"},!(null===(i=a._getRecaptchaConfig())||void 0===i?void 0:i.emailPasswordEnabled)){e.next=9;break}return e.next=5,Wi(a,o,"signUpPassword");case 5:s=e.sent,u=Wa(a,s),e.next=10;break;case 9:u=Wa(a,o).catch(function(){var e=Je($e().mark((function e(t){var n;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.code!=="auth/".concat("missing-recaptcha-token")){e.next=8;break}return console.log("Sign-up is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-up flow."),e.next=4,Wi(a,o,"signUpPassword");case 4:return n=e.sent,e.abrupt("return",Wa(a,n));case 8:return e.abrupt("return",Promise.reject(t));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 10:return e.next=12,u.catch((function(e){return Promise.reject(e)}));case 12:return c=e.sent,e.next=15,Qa._fromIdTokenResponse(a,"signIn",c);case 15:return l=e.sent,e.next=18,a._updateCurrentUser(l.user);case 18:return e.abrupt("return",l);case 19:case"end":return e.stop()}}),e)}))),Po.apply(this,arguments)}function Oo(){return Oo=Je($e().mark((function e(t,n,r){var i,a,o,u,s;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(u=function(e,t){Ar(t.handleCodeInApp,a,"argument-error"),t&&Io(a,e,t)},a=$i(t),o={requestType:"EMAIL_SIGNIN",email:n,clientType:"CLIENT_TYPE_WEB"},!(null===(i=a._getRecaptchaConfig())||void 0===i?void 0:i.emailPasswordEnabled)){e.next=12;break}return e.next=6,Wi(a,o,"getOobCode",!0);case 6:return s=e.sent,u(s,r),e.next=10,ya(a,s);case 10:e.next=15;break;case 12:return u(o,r),e.next=15,ya(a,o).catch(function(){var e=Je($e().mark((function e(t){var n;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.code!=="auth/".concat("missing-recaptcha-token")){e.next=10;break}return console.log("Email link sign-in is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow."),e.next=4,Wi(a,o,"getOobCode",!0);case 4:return n=e.sent,u(n,r),e.next=8,ya(a,n);case 8:e.next=11;break;case 10:return e.abrupt("return",Promise.reject(t));case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 15:case"end":return e.stop()}}),e)}))),Oo.apply(this,arguments)}function Do(){return Do=Je($e().mark((function e(t,n,r){var i,a;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Nt(t),Ar((a=Fa.credentialWithLink(n,r||Pr()))._tenantId===(i.tenantId||null),i,"tenant-id-mismatch"),e.abrupt("return",fo(i,a));case 4:case"end":return e.stop()}}),e)}))),Do.apply(this,arguments)}function Lo(e,t){return Mo.apply(this,arguments)}function Mo(){return Mo=Je($e().mark((function e(t,n){return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Zr(t,"POST","/v1/accounts:createAuthUri",Vr(t,n)));case 1:case"end":return e.stop()}}),e)}))),Mo.apply(this,arguments)}function Fo(){return Fo=Je($e().mark((function e(t,n){var r,i,a,o;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Or()?Pr():"http://localhost",i={identifier:n,continueUri:r},e.next=4,Lo(Nt(t),i);case 4:return a=e.sent,o=a.signinMethods,e.abrupt("return",o||[]);case 7:case"end":return e.stop()}}),e)}))),Fo.apply(this,arguments)}function jo(){return(jo=Je($e().mark((function e(t,n){var r,i,a,o;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Nt(t),e.next=3,t.getIdToken();case 3:return i=e.sent,a={requestType:"VERIFY_EMAIL",idToken:i},n&&Io(r.auth,a,n),e.next=8,da(r.auth,a);case 8:if(o=e.sent,o.email===t.email){e.next=13;break}return e.next=13,t.reload();case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Uo(){return(Uo=Je($e().mark((function e(t,n,r){var i,a,o,u;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Nt(t),e.next=3,t.getIdToken();case 3:return a=e.sent,o={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:a,newEmail:n},r&&Io(i.auth,o,r),e.next=8,ka(i.auth,o);case 8:if(u=e.sent,u.email===t.email){e.next=13;break}return e.next=13,t.reload();case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Vo(e,t){return Zo.apply(this,arguments)}function Zo(){return Zo=Je($e().mark((function e(t,n){return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Zr(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)}))),Zo.apply(this,arguments)}function zo(){return(zo=Je($e().mark((function e(t,n){var r,i,a,o,u,s,c;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.displayName,i=n.photoURL,void 0!==r||void 0!==i){e.next=3;break}return e.abrupt("return");case 3:return a=Nt(t),e.next=6,a.getIdToken();case 6:return o=e.sent,u={idToken:o,displayName:r,photoUrl:i,returnSecureToken:!0},e.next=10,oi(a,Vo(a.auth,u));case 10:return s=e.sent,a.displayName=s.displayName||null,a.photoURL=s.photoUrl||null,(c=a.providerData.find((function(e){return"password"===e.providerId})))&&(c.displayName=a.displayName,c.photoURL=a.photoURL),e.next=17,a._updateTokensIfNecessary(s);case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Bo(e,t,n){return qo.apply(this,arguments)}function qo(){return qo=Je($e().mark((function e(t,n,r){var i,a,o,u;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.auth,e.next=3,t.getIdToken();case 3:return a=e.sent,o={idToken:a,returnSecureToken:!0},n&&(o.email=n),r&&(o.password=r),e.next=9,oi(t,aa(i,o));case 9:return u=e.sent,e.next=12,t._updateTokensIfNecessary(u,!0);case 12:case"end":return e.stop()}}),e)}))),qo.apply(this,arguments)}var Go=(0,c.Z)((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};s(this,e),this.isNewUser=t,this.providerId=n,this.profile=r})),Ko=function(e){f(n,e);var t=m(n);function n(e,r,i,a){var o;return s(this,n),(o=t.call(this,e,r,i)).username=a,o}return(0,c.Z)(n)}(Go),Wo=function(e){f(n,e);var t=m(n);function n(e,r){return s(this,n),t.call(this,e,"facebook.com",r)}return(0,c.Z)(n)}(Go),Ho=function(e){f(n,e);var t=m(n);function n(e,r){return s(this,n),t.call(this,e,"github.com",r,"string"===typeof(null===r||void 0===r?void 0:r.login)?null===r||void 0===r?void 0:r.login:null)}return(0,c.Z)(n)}(Ko),Qo=function(e){f(n,e);var t=m(n);function n(e,r){return s(this,n),t.call(this,e,"google.com",r)}return(0,c.Z)(n)}(Go),Yo=function(e){f(n,e);var t=m(n);function n(e,r,i){return s(this,n),t.call(this,e,"twitter.com",r,i)}return(0,c.Z)(n)}(Ko);function $o(e){var t=e.user,n=e._tokenResponse;return t.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:function(e){var t,n;if(!e)return null;var r=e.providerId,i=e.rawUserInfo?JSON.parse(e.rawUserInfo):{},a=e.isNewUser||"identitytoolkit#SignupNewUserResponse"===e.kind;if(!r&&(null===e||void 0===e?void 0:e.idToken)){var o=null===(n=null===(t=ai(e.idToken))||void 0===t?void 0:t.firebase)||void 0===n?void 0:n.sign_in_provider;if(o)return new Go(a,"anonymous"!==o&&"custom"!==o?o:null)}if(!r)return null;switch(r){case"facebook.com":return new Wo(a,i);case"github.com":return new Ho(a,i);case"google.com":return new Qo(a,i);case"twitter.com":return new Yo(a,i,e.screenName||null);case"custom":case"anonymous":return new Go(a,null);default:return new Go(a,r,i)}}(n)}var Xo=function(){function e(t,n,r){s(this,e),this.type=t,this.credential=n,this.auth=r}return(0,c.Z)(e,[{key:"toJSON",value:function(){var e="enroll"===this.type?"idToken":"pendingCredential";return{multiFactorSession:(0,et.Z)({},e,this.credential)}}}],[{key:"_fromIdtoken",value:function(t,n){return new e("enroll",t,n)}},{key:"_fromMfaPendingCredential",value:function(t){return new e("signin",t)}},{key:"fromJSON",value:function(t){var n,r;if(null===t||void 0===t?void 0:t.multiFactorSession){if(null===(n=t.multiFactorSession)||void 0===n?void 0:n.pendingCredential)return e._fromMfaPendingCredential(t.multiFactorSession.pendingCredential);if(null===(r=t.multiFactorSession)||void 0===r?void 0:r.idToken)return e._fromIdtoken(t.multiFactorSession.idToken)}return null}}]),e}(),Jo=function(){function e(t,n,r){s(this,e),this.session=t,this.hints=n,this.signInResolver=r}return(0,c.Z)(e,[{key:"resolveSignIn",value:function(){var e=Je($e().mark((function e(t){var n;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t,e.abrupt("return",this.signInResolver(n));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}],[{key:"_fromError",value:function(t,n){var r=$i(t),i=n.customData._serverResponse,a=(i.mfaInfo||[]).map((function(e){return wo._fromServerResponse(r,e)}));Ar(i.mfaPendingCredential,r,"internal-error");var o=Xo._fromMfaPendingCredential(i.mfaPendingCredential);return new e(o,a,function(){var e=Je($e().mark((function e(t){var a,u,s;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._process(r,o);case 2:a=e.sent,delete i.mfaInfo,delete i.mfaPendingCredential,u=Object.assign(Object.assign({},i),{idToken:a.idToken,refreshToken:a.refreshToken}),e.t0=n.operationType,e.next="signIn"===e.t0?9:"reauthenticate"===e.t0?15:17;break;case 9:return e.next=11,Qa._fromIdTokenResponse(r,n.operationType,u);case 11:return s=e.sent,e.next=14,r._updateCurrentUser(s.user);case 14:return e.abrupt("return",s);case 15:return Ar(n.user,r,"internal-error"),e.abrupt("return",Qa._forOperation(n.user,n.operationType,u));case 17:Ir(r,"internal-error");case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}}]),e}();function eu(e,t){return Zr(e,"POST","/v2/accounts/mfaEnrollment:start",Vr(e,t))}function tu(e,t){return Zr(e,"POST","/v2/accounts/mfaEnrollment:start",Vr(e,t))}function nu(e,t){return Zr(e,"POST","/v2/accounts/mfaEnrollment:finalize",Vr(e,t))}function ru(e,t){return Zr(e,"POST","/v2/accounts/mfaEnrollment:withdraw",Vr(e,t))}var iu=function(){function e(t){var n=this;s(this,e),this.user=t,this.enrolledFactors=[],t._onReload((function(e){e.mfaInfo&&(n.enrolledFactors=e.mfaInfo.map((function(e){return wo._fromServerResponse(t.auth,e)})))}))}return(0,c.Z)(e,[{key:"getSession",value:function(){var e=Je($e().mark((function e(){return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=Xo,e.next=3,this.user.getIdToken();case 3:return e.t1=e.sent,e.t2=this.user.auth,e.abrupt("return",e.t0._fromIdtoken.call(e.t0,e.t1,e.t2));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"enroll",value:function(){var e=Je($e().mark((function e(t,n){var r,i,a;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t,e.next=3,this.getSession();case 3:return i=e.sent,e.next=6,oi(this.user,r._process(this.user.auth,i,n));case 6:return a=e.sent,e.next=9,this.user._updateTokensIfNecessary(a);case 9:return e.abrupt("return",this.user.reload());case 10:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"unenroll",value:function(){var e=Je($e().mark((function e(t){var n,r,i;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="string"===typeof t?t:t.uid,e.next=3,this.user.getIdToken();case 3:return r=e.sent,e.prev=4,e.next=7,oi(this.user,ru(this.user.auth,{idToken:r,mfaEnrollmentId:n}));case 7:return i=e.sent,this.enrolledFactors=this.enrolledFactors.filter((function(e){return e.uid!==n})),e.next=11,this.user._updateTokensIfNecessary(i);case 11:return e.next=13,this.user.reload();case 13:e.next=18;break;case 15:throw e.prev=15,e.t0=e.catch(4),e.t0;case 18:case"end":return e.stop()}}),e,this,[[4,15]])})));return function(t){return e.apply(this,arguments)}}()}],[{key:"_fromUser",value:function(t){return new e(t)}}]),e}(),au=new WeakMap;var ou="__sak",uu=function(){function e(t,n){s(this,e),this.storageRetriever=t,this.type=n}return(0,c.Z)(e,[{key:"_isAvailable",value:function(){try{return this.storage?(this.storage.setItem(ou,"1"),this.storage.removeItem(ou),Promise.resolve(!0)):Promise.resolve(!1)}catch(dS){return Promise.resolve(!1)}}},{key:"_set",value:function(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}},{key:"_get",value:function(e){var t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}},{key:"_remove",value:function(e){return this.storage.removeItem(e),Promise.resolve()}},{key:"storage",get:function(){return this.storageRetriever()}}]),e}();var su=function(e){f(n,e);var t=m(n);function n(){var e;return s(this,n),(e=t.call(this,(function(){return window.localStorage}),"LOCAL")).boundEventHandler=function(t,n){return e.onStorageEvent(t,n)},e.listeners={},e.localCache={},e.pollTimer=null,e.safariLocalStorageNotSynced=function(){var e=ft();return Ci(e)||Di(e)}()&&function(){try{return!(!window||window===window.top)}catch(e){return!1}}(),e.fallbackToPolling=Li(),e._shouldAllowMigration=!0,e}return(0,c.Z)(n,[{key:"forAllChangedKeys",value:function(e){for(var t=0,n=Object.keys(this.listeners);t<n.length;t++){var r=n[t],i=this.storage.getItem(r),a=this.localCache[r];i!==a&&e(r,a,i)}}},{key:"onStorageEvent",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e.key){var r=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){var i=this.storage.getItem(r);if(e.newValue!==i)null!==e.newValue?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!n)return}var a=function(){var e=t.storage.getItem(r);(n||t.localCache[r]!==e)&&t.notifyListeners(r,e)},o=this.storage.getItem(r);vt()&&10===document.documentMode&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,10):a()}else this.forAllChangedKeys((function(e,n,r){t.notifyListeners(e,r)}))}},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++){(0,i[r])(t?JSON.parse(t):t)}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval((function(){e.forAllChangedKeys((function(t,n,r){e.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:r}),!0)}))}),1e3)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"attachListener",value:function(){window.addEventListener("storage",this.boundEventHandler)}},{key:"detachListener",value:function(){window.removeEventListener("storage",this.boundEventHandler)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}},{key:"_set",value:function(){var e=Je($e().mark((function e(t,r){return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ur(h(n.prototype),"_set",this).call(this,t,r);case 2:this.localCache[t]=JSON.stringify(r);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=Je($e().mark((function e(t){var r;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ur(h(n.prototype),"_get",this).call(this,t);case 2:return r=e.sent,this.localCache[t]=JSON.stringify(r),e.abrupt("return",r);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=Je($e().mark((function e(t){return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ur(h(n.prototype),"_remove",this).call(this,t);case 2:delete this.localCache[t];case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(uu);su.type="LOCAL";var cu=su,lu=function(e){f(n,e);var t=m(n);function n(){return s(this,n),t.call(this,(function(){return window.sessionStorage}),"SESSION")}return(0,c.Z)(n,[{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),n}(uu);lu.type="SESSION";var fu=lu;function hu(e){return Promise.all(e.map(function(){var e=Je($e().mark((function e(t){var n;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t;case 3:return n=e.sent,e.abrupt("return",{fulfilled:!0,value:n});case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",{fulfilled:!1,reason:e.t0});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()))}var du=function(){function e(t){s(this,e),this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}return(0,c.Z)(e,[{key:"isListeningto",value:function(e){return this.eventTarget===e}},{key:"handleEvent",value:function(){var e=Je($e().mark((function e(t){var n,r,i,a,o,u,s,c;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=(n=t).data,i=r.eventId,a=r.eventType,o=r.data,null===(u=this.handlersMap[a])||void 0===u?void 0:u.size){e.next=5;break}return e.abrupt("return");case 5:return n.ports[0].postMessage({status:"ack",eventId:i,eventType:a}),s=Array.from(u).map(function(){var e=Je($e().mark((function e(t){return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t(n.origin,o));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=9,hu(s);case 9:c=e.sent,n.ports[0].postMessage({status:"done",eventId:i,eventType:a,response:c});case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_subscribe",value:function(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}},{key:"_unsubscribe",value:function(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}],[{key:"_getInstance",value:function(t){var n=this.receivers.find((function(e){return e.isListeningto(t)}));if(n)return n;var r=new e(t);return this.receivers.push(r),r}}]),e}();function pu(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="",r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}du.receivers=[];var vu=function(){function e(t){s(this,e),this.target=t,this.handlers=new Set}return(0,c.Z)(e,[{key:"removeMessageHandler",value:function(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}},{key:"_send",value:function(){var e=Je($e().mark((function e(t,n){var r,i,a,o,u=this,s=arguments;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=s.length>2&&void 0!==s[2]?s[2]:50,i="undefined"!==typeof MessageChannel?new MessageChannel:null){e.next=4;break}throw new Error("connection_unavailable");case 4:return e.abrupt("return",new Promise((function(e,s){var c=pu("",20);i.port1.start();var l=setTimeout((function(){s(new Error("unsupported_event"))}),r);o={messageChannel:i,onMessage:function(t){var n=t;if(n.data.eventId===c)switch(n.data.status){case"ack":clearTimeout(l),a=setTimeout((function(){s(new Error("timeout"))}),3e3);break;case"done":clearTimeout(a),e(n.data.response);break;default:clearTimeout(l),clearTimeout(a),s(new Error("invalid_response"))}}},u.handlers.add(o),i.port1.addEventListener("message",o.onMessage),u.target.postMessage({eventType:t,eventId:c,data:n},[i.port2])})).finally((function(){o&&u.removeMessageHandler(o)})));case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}();function mu(){return window}function yu(e){mu().location.href=e}function gu(){return"undefined"!==typeof mu().WorkerGlobalScope&&"function"===typeof mu().importScripts}function ku(){return bu.apply(this,arguments)}function bu(){return(bu=Je($e().mark((function e(){var t;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===navigator||void 0===navigator?void 0:navigator.serviceWorker){e.next=2;break}return e.abrupt("return",null);case 2:return e.prev=2,e.next=5,navigator.serviceWorker.ready;case 5:return t=e.sent,e.abrupt("return",t.active);case 9:return e.prev=9,e.t0=e.catch(2),e.abrupt("return",null);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})))).apply(this,arguments)}function wu(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}var xu="firebaseLocalStorageDb",_u="firebaseLocalStorage",Iu="fbase_key",Su=function(){function e(t){s(this,e),this.request=t}return(0,c.Z)(e,[{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.request.addEventListener("success",(function(){t(e.request.result)})),e.request.addEventListener("error",(function(){n(e.request.error)}))}))}}]),e}();function Eu(e,t){return e.transaction([_u],t?"readwrite":"readonly").objectStore(_u)}function Tu(){var e=indexedDB.deleteDatabase(xu);return new Su(e).toPromise()}function Cu(){var e=indexedDB.open(xu,1);return new Promise((function(t,n){e.addEventListener("error",(function(){n(e.error)})),e.addEventListener("upgradeneeded",(function(){var t=e.result;try{t.createObjectStore(_u,{keyPath:Iu})}catch(r){n(r)}})),e.addEventListener("success",Je($e().mark((function n(){var r;return $e().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if((r=e.result).objectStoreNames.contains(_u)){n.next=12;break}return r.close(),n.next=5,Tu();case 5:return n.t0=t,n.next=8,Cu();case 8:n.t1=n.sent,(0,n.t0)(n.t1),n.next=13;break;case 12:t(r);case 13:case"end":return n.stop()}}),n)}))))}))}function Au(e,t,n){return Nu.apply(this,arguments)}function Nu(){return Nu=Je($e().mark((function e(t,n,r){var i,a;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Eu(t,!0).put((i={},(0,et.Z)(i,Iu,n),(0,et.Z)(i,"value",r),i)),e.abrupt("return",new Su(a).toPromise());case 2:case"end":return e.stop()}}),e)}))),Nu.apply(this,arguments)}function Ru(e,t){return Pu.apply(this,arguments)}function Pu(){return Pu=Je($e().mark((function e(t,n){var r,i;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Eu(t,!1).get(n),e.next=3,new Su(r).toPromise();case 3:return i=e.sent,e.abrupt("return",void 0===i?null:i.value);case 5:case"end":return e.stop()}}),e)}))),Pu.apply(this,arguments)}function Ou(e,t){var n=Eu(e,!0).delete(t);return new Su(n).toPromise()}var Du=function(){function e(){s(this,e),this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((function(){}),(function(){}))}return(0,c.Z)(e,[{key:"_openDb",value:function(){var e=Je($e().mark((function e(){return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.db){e.next=2;break}return e.abrupt("return",this.db);case 2:return e.next=4,Cu();case 4:return this.db=e.sent,e.abrupt("return",this.db);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_withRetries",value:function(){var e=Je($e().mark((function e(t){var n,r;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=0;case 1:return e.prev=2,e.next=5,this._openDb();case 5:return r=e.sent,e.next=8,t(r);case 8:return e.abrupt("return",e.sent);case 11:if(e.prev=11,e.t0=e.catch(2),!(n++>3)){e.next=15;break}throw e.t0;case 15:this.db&&(this.db.close(),this.db=void 0);case 16:e.next=1;break;case 18:case"end":return e.stop()}}),e,this,[[2,11]])})));return function(t){return e.apply(this,arguments)}}()},{key:"initializeServiceWorkerMessaging",value:function(){var e=Je($e().mark((function e(){return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",gu()?this.initializeReceiver():this.initializeSender());case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeReceiver",value:function(){var e=Je($e().mark((function e(){var t=this;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.receiver=du._getInstance(gu()?self:null),this.receiver._subscribe("keyChanged",function(){var e=Je($e().mark((function e(n,r){var i;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._poll();case 2:return i=e.sent,e.abrupt("return",{keyProcessed:i.includes(r.key)});case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),this.receiver._subscribe("ping",function(){var e=Je($e().mark((function e(t,n){return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",["keyChanged"]);case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeSender",value:function(){var e=Je($e().mark((function e(){var t,n,r;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ku();case 2:if(this.activeServiceWorker=e.sent,this.activeServiceWorker){e.next=5;break}return e.abrupt("return");case 5:return this.sender=new vu(this.activeServiceWorker),e.next=8,this.sender._send("ping",{},800);case 8:if(r=e.sent){e.next=11;break}return e.abrupt("return");case 11:(null===(t=r[0])||void 0===t?void 0:t.fulfilled)&&(null===(n=r[0])||void 0===n?void 0:n.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0);case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"notifyServiceWorker",value:function(){var e=Je($e().mark((function e(t){return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.sender&&this.activeServiceWorker&&wu()===this.activeServiceWorker){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50);case 5:e.next=9;break;case 7:e.prev=7,e.t0=e.catch(2);case 9:case"end":return e.stop()}}),e,this,[[2,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_isAvailable",value:function(){var e=Je($e().mark((function e(){var t;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,indexedDB){e.next=3;break}return e.abrupt("return",!1);case 3:return e.next=5,Cu();case 5:return t=e.sent,e.next=8,Au(t,ou,"1");case 8:return e.next=10,Ou(t,ou);case 10:return e.abrupt("return",!0);case 13:e.prev=13,e.t0=e.catch(0);case 15:return e.abrupt("return",!1);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}()},{key:"_withPendingWrite",value:function(){var e=Je($e().mark((function e(t){return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.pendingWrites++,e.prev=1,e.next=4,t();case 4:return e.prev=4,this.pendingWrites--,e.finish(4);case 7:case"end":return e.stop()}}),e,this,[[1,,4,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_set",value:function(){var e=Je($e().mark((function e(t,n){var r=this;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._withPendingWrite(Je($e().mark((function e(){return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r._withRetries((function(e){return Au(e,t,n)}));case 2:return r.localCache[t]=n,e.abrupt("return",r.notifyServiceWorker(t));case 4:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=Je($e().mark((function e(t){var n;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._withRetries((function(e){return Ru(e,t)}));case 2:return n=e.sent,this.localCache[t]=n,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=Je($e().mark((function e(t){var n=this;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._withPendingWrite(Je($e().mark((function e(){return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n._withRetries((function(e){return Ou(e,t)}));case 2:return delete n.localCache[t],e.abrupt("return",n.notifyServiceWorker(t));case 4:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_poll",value:function(){var e=Je($e().mark((function e(){var t,n,r,i,a,o,u,s,c,l,f;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._withRetries((function(e){var t=Eu(e,!1).getAll();return new Su(t).toPromise()}));case 2:if(t=e.sent){e.next=5;break}return e.abrupt("return",[]);case 5:if(0===this.pendingWrites){e.next=7;break}return e.abrupt("return",[]);case 7:n=[],r=new Set,i=S(t);try{for(i.s();!(a=i.n()).done;)o=a.value,u=o.fbase_key,s=o.value,r.add(u),JSON.stringify(this.localCache[u])!==JSON.stringify(s)&&(this.notifyListeners(u,s),n.push(u))}catch(h){i.e(h)}finally{i.f()}for(c=0,l=Object.keys(this.localCache);c<l.length;c++)f=l[c],this.localCache[f]&&!r.has(f)&&(this.notifyListeners(f,null),n.push(f));return e.abrupt("return",n);case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++){(0,i[r])(t)}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval(Je($e().mark((function t(){return $e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e._poll());case 1:case"end":return t.stop()}}),t)}))),800)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}]),e}();Du.type="LOCAL";var Lu=Du;function Mu(e,t){return Zr(e,"POST","/v2/accounts/mfaSignIn:start",Vr(e,t))}function Fu(e,t){return Zr(e,"POST","/v2/accounts/mfaSignIn:finalize",Vr(e,t))}var ju=1e12,Uu=function(){function e(t){s(this,e),this.auth=t,this.counter=ju,this._widgets=new Map}return(0,c.Z)(e,[{key:"render",value:function(e,t){var n=this.counter;return this._widgets.set(n,new Vu(e,this.auth.name,t||{})),this.counter++,n}},{key:"reset",value:function(e){var t,n=e||ju;null===(t=this._widgets.get(n))||void 0===t||t.delete(),this._widgets.delete(n)}},{key:"getResponse",value:function(e){var t,n=e||ju;return(null===(t=this._widgets.get(n))||void 0===t?void 0:t.getResponse())||""}},{key:"execute",value:function(){var e=Je($e().mark((function e(t){var n,r;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t||ju,null===(n=this._widgets.get(r))||void 0===n||n.execute(),e.abrupt("return","");case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),Vu=function(){function e(t,n,r){var i=this;s(this,e),this.params=r,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=function(){i.execute()};var a="string"===typeof t?document.getElementById(t):t;Ar(a,"argument-error",{appName:n}),this.container=a,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}return(0,c.Z)(e,[{key:"getResponse",value:function(){return this.checkIfDeleted(),this.responseToken}},{key:"delete",value:function(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}},{key:"execute",value:function(){var e=this;this.checkIfDeleted(),this.timerId||(this.timerId=window.setTimeout((function(){e.responseToken=function(e){for(var t=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",r=0;r<e;r++)t.push(n.charAt(Math.floor(Math.random()*n.length)));return t.join("")}(50);var t=e.params,n=t.callback,r=t["expired-callback"];if(n)try{n(e.responseToken)}catch(i){}e.timerId=window.setTimeout((function(){if(e.timerId=null,e.responseToken=null,r)try{r()}catch(i){}e.isVisible&&e.execute()}),6e4)}),500))}},{key:"checkIfDeleted",value:function(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}]),e}();var Zu=Gi("rcb"),zu=new Lr(3e4,6e4),Bu=function(){function e(){var t;s(this,e),this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(null===(t=mu().grecaptcha)||void 0===t?void 0:t.render)}return(0,c.Z)(e,[{key:"load",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return Ar(function(e){return e.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(e)}(n),e,"argument-error"),this.shouldResolveImmediately(n)&&Zi(mu().grecaptcha)?Promise.resolve(mu().grecaptcha):new Promise((function(r,i){var a=mu().setTimeout((function(){i(Sr(e,"network-request-failed"))}),zu.get());mu()[Zu]=function(){mu().clearTimeout(a),delete mu()[Zu];var o=mu().grecaptcha;if(o&&Zi(o)){var u=o.render;o.render=function(e,n){var r=u(e,n);return t.counter++,r},t.hostLanguage=n,r(o)}else i(Sr(e,"internal-error"))},qi("".concat("https://www.google.com/recaptcha/api.js?","?").concat(It({onload:Zu,render:"explicit",hl:n}))).catch((function(){clearTimeout(a),i(Sr(e,"internal-error"))}))}))}},{key:"clearedOneInstance",value:function(){this.counter--}},{key:"shouldResolveImmediately",value:function(e){var t;return!!(null===(t=mu().grecaptcha)||void 0===t?void 0:t.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}]),e}();var qu=function(){function e(){s(this,e)}return(0,c.Z)(e,[{key:"load",value:function(){var e=Je($e().mark((function e(t){return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Uu(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"clearedOneInstance",value:function(){}}]),e}(),Gu="recaptcha",Ku={theme:"light",type:"image"},Wu=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Object.assign({},Ku),r=arguments.length>2?arguments[2]:void 0;s(this,e),this.parameters=n,this.type=Gu,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=$i(r),this.isInvisible="invisible"===this.parameters.size,Ar("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment");var i="string"===typeof t?document.getElementById(t):t;Ar(i,this.auth,"argument-error"),this.container=i,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new qu:new Bu,this.validateStartingState()}return(0,c.Z)(e,[{key:"verify",value:function(){var e=Je($e().mark((function e(){var t,n,r,i=this;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.assertNotDestroyed(),e.next=3,this.render();case 3:if(t=e.sent,n=this.getAssertedRecaptcha(),!(r=n.getResponse(t))){e.next=8;break}return e.abrupt("return",r);case 8:return e.abrupt("return",new Promise((function(e){i.tokenChangeListeners.add((function t(n){n&&(i.tokenChangeListeners.delete(t),e(n))})),i.isInvisible&&n.execute(t)})));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;try{this.assertNotDestroyed()}catch(t){return Promise.reject(t)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch((function(t){throw e.renderPromise=null,t}))),this.renderPromise}},{key:"_reset",value:function(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}},{key:"clear",value:function(){var e=this;this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach((function(t){e.container.removeChild(t)}))}},{key:"validateStartingState",value:function(){Ar(!this.parameters.sitekey,this.auth,"argument-error"),Ar(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),Ar("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment")}},{key:"makeTokenCallback",value:function(e){var t=this;return function(n){if(t.tokenChangeListeners.forEach((function(e){return e(n)})),"function"===typeof e)e(n);else if("string"===typeof e){var r=mu()[e];"function"===typeof r&&r(n)}}}},{key:"assertNotDestroyed",value:function(){Ar(!this.destroyed,this.auth,"internal-error")}},{key:"makeRenderPromise",value:function(){var e=Je($e().mark((function e(){var t,n;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.init();case 2:return this.widgetId||(t=this.container,this.isInvisible||(n=document.createElement("div"),t.appendChild(n),t=n),this.widgetId=this.getAssertedRecaptcha().render(t,this.parameters)),e.abrupt("return",this.widgetId);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"init",value:function(){var e=Je($e().mark((function e(){var t;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Ar(Or()&&!gu(),this.auth,"internal-error"),e.next=3,Hu();case 3:return e.next=5,this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);case 5:return this.recaptcha=e.sent,e.next=8,Fi(this.auth);case 8:Ar(t=e.sent,this.auth,"internal-error"),this.parameters.sitekey=t;case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getAssertedRecaptcha",value:function(){return Ar(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}]),e}();function Hu(){var e=null;return new Promise((function(t){"complete"!==document.readyState?(e=function(){return t()},window.addEventListener("load",e)):t()})).catch((function(t){throw e&&window.removeEventListener("load",e),t}))}var Qu=function(){function e(t,n){s(this,e),this.verificationId=t,this.onConfirmation=n}return(0,c.Z)(e,[{key:"confirm",value:function(e){var t=La._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}]),e}();function Yu(){return Yu=Je($e().mark((function e(t,n,r){var i,a;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=$i(t),e.next=3,es(i,n,Nt(r));case 3:return a=e.sent,e.abrupt("return",new Qu(a,(function(e){return fo(i,e)})));case 5:case"end":return e.stop()}}),e)}))),Yu.apply(this,arguments)}function $u(e,t,n){return Xu.apply(this,arguments)}function Xu(){return(Xu=Je($e().mark((function e(t,n,r){var i,a;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Nt(t),e.next=3,ao(!1,i,"phone");case 3:return e.next=5,es(i.auth,n,Nt(r));case 5:return a=e.sent,e.abrupt("return",new Qu(a,(function(e){return po(i,e)})));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ju(){return(Ju=Je($e().mark((function e(t,n,r){var i,a;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Nt(t),e.next=3,es(i.auth,n,Nt(r));case 3:return a=e.sent,e.abrupt("return",new Qu(a,(function(e){return mo(i,e)})));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function es(e,t,n){return ts.apply(this,arguments)}function ts(){return ts=Je($e().mark((function e(t,n,r){var i,a,o,u,s,c,l,f,h;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.verify();case 2:if(a=e.sent,e.prev=3,Ar("string"===typeof a,t,"argument-error"),Ar(r.type===Gu,t,"argument-error"),!("session"in(o="string"===typeof n?{phoneNumber:n}:n))){e.next=26;break}if(u=o.session,!("phoneNumber"in o)){e.next=17;break}return Ar("enroll"===u.type,t,"internal-error"),e.next=13,eu(t,{idToken:u.credential,phoneEnrollmentInfo:{phoneNumber:o.phoneNumber,recaptchaToken:a}});case 13:return s=e.sent,e.abrupt("return",s.phoneSessionInfo.sessionInfo);case 17:return Ar("signin"===u.type,t,"internal-error"),Ar(c=(null===(i=o.multiFactorHint)||void 0===i?void 0:i.uid)||o.multiFactorUid,t,"missing-multi-factor-info"),e.next=22,Mu(t,{mfaPendingCredential:u.credential,mfaEnrollmentId:c,phoneSignInInfo:{recaptchaToken:a}});case 22:return l=e.sent,e.abrupt("return",l.phoneResponseInfo.sessionInfo);case 24:e.next=31;break;case 26:return e.next=28,Aa(t,{phoneNumber:o.phoneNumber,recaptchaToken:a});case 28:return f=e.sent,h=f.sessionInfo,e.abrupt("return",h);case 31:return e.prev=31,r._reset(),e.finish(31);case 34:case"end":return e.stop()}}),e,null,[[3,,31,34]])}))),ts.apply(this,arguments)}function ns(){return(ns=Je($e().mark((function e(t,n){return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ro(Nt(t),n);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var rs=function(){function e(t){s(this,e),this.providerId=e.PROVIDER_ID,this.auth=$i(t)}return(0,c.Z)(e,[{key:"verifyPhoneNumber",value:function(e,t){return es(this.auth,e,Nt(t))}}],[{key:"credential",value:function(e,t){return La._fromVerification(e,t)}},{key:"credentialFromResult",value:function(t){var n=t;return e.credentialFromTaggedObject(n)}},{key:"credentialFromError",value:function(t){return e.credentialFromTaggedObject(t.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var n=t.phoneNumber,r=t.temporaryProof;return n&&r?La._fromTokenResponse(n,r):null}}]),e}();function is(e,t){return t?wi(t):(Ar(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}rs.PROVIDER_ID="phone",rs.PHONE_SIGN_IN_METHOD="phone";var as=function(e){f(n,e);var t=m(n);function n(e){var r;return s(this,n),(r=t.call(this,"custom","custom")).params=e,r}return(0,c.Z)(n,[{key:"_getIdTokenResponse",value:function(e){return Ea(e,this._buildIdpRequest())}},{key:"_linkToIdToken",value:function(e,t){return Ea(e,this._buildIdpRequest(t))}},{key:"_getReauthenticationResolver",value:function(e){return Ea(e,this._buildIdpRequest())}},{key:"_buildIdpRequest",value:function(e){var t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}]),n}(na);function os(e){return co(e.auth,new as(e),e.bypassAuthState)}function us(e){var t=e.auth,n=e.user;return Ar(n,t,"internal-error"),uo(n,new as(e),e.bypassAuthState)}function ss(e){return cs.apply(this,arguments)}function cs(){return cs=Je($e().mark((function e(t){var n,r;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.auth,Ar(r=t.user,n,"internal-error"),e.abrupt("return",ro(r,new as(t),t.bypassAuthState));case 3:case"end":return e.stop()}}),e)}))),cs.apply(this,arguments)}var ls=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];s(this,e),this.auth=t,this.resolver=r,this.user=i,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}return(0,c.Z)(e,[{key:"execute",value:function(){var e=this;return new Promise(function(){var t=Je($e().mark((function t(n,r){return $e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.pendingPromise={resolve:n,reject:r},t.prev=1,t.next=4,e.resolver._initialize(e.auth);case 4:return e.eventManager=t.sent,t.next=7,e.onExecution();case 7:e.eventManager.registerConsumer(e),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(1),e.reject(t.t0);case 13:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e,n){return t.apply(this,arguments)}}())}},{key:"onAuthEvent",value:function(){var e=Je($e().mark((function e(t){var n,r,i,a,o,u,s;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.urlResponse,r=t.sessionId,i=t.postBody,a=t.tenantId,o=t.error,u=t.type,!o){e.next=4;break}return this.reject(o),e.abrupt("return");case 4:return s={auth:this.auth,requestUri:n,sessionId:r,tenantId:a||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState},e.prev=5,e.t0=this,e.next=9,this.getIdpTask(u)(s);case 9:e.t1=e.sent,e.t0.resolve.call(e.t0,e.t1),e.next=16;break;case 13:e.prev=13,e.t2=e.catch(5),this.reject(e.t2);case 16:case"end":return e.stop()}}),e,this,[[5,13]])})));return function(t){return e.apply(this,arguments)}}()},{key:"onError",value:function(e){this.reject(e)}},{key:"getIdpTask",value:function(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return os;case"linkViaPopup":case"linkViaRedirect":return ss;case"reauthViaPopup":case"reauthViaRedirect":return us;default:Ir(this.auth,"internal-error")}}},{key:"resolve",value:function(e){Rr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}},{key:"reject",value:function(e){Rr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}},{key:"unregisterAndCleanUp",value:function(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}]),e}(),fs=new Lr(2e3,1e4);function hs(e,t,n){return ds.apply(this,arguments)}function ds(){return ds=Je($e().mark((function e(t,n,r){var i,a,o;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=$i(t),Tr(t,n,ja),a=is(i,r),o=new ys(i,"signInViaPopup",n,a),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)}))),ds.apply(this,arguments)}function ps(){return(ps=Je($e().mark((function e(t,n,r){var i,a,o;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Tr((i=Nt(t)).auth,n,ja),a=is(i.auth,r),o=new ys(i.auth,"reauthViaPopup",n,a,i),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function vs(e,t,n){return ms.apply(this,arguments)}function ms(){return(ms=Je($e().mark((function e(t,n,r){var i,a,o;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Tr((i=Nt(t)).auth,n,ja),a=is(i.auth,r),o=new ys(i.auth,"linkViaPopup",n,a,i),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ys=function(e){f(n,e);var t=m(n);function n(e,r,i,a,o){var u;return s(this,n),(u=t.call(this,e,r,a,o)).provider=i,u.authWindow=null,u.pollId=null,n.currentPopupAction&&n.currentPopupAction.cancel(),n.currentPopupAction=(0,v.Z)(u),u}return(0,c.Z)(n,[{key:"executeNotNull",value:function(){var e=Je($e().mark((function e(){var t;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.execute();case 2:return Ar(t=e.sent,this.auth,"internal-error"),e.abrupt("return",t);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onExecution",value:function(){var e=Je($e().mark((function e(){var t,n=this;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Rr(1===this.filter.length,"Popup operations only handle one event"),t=pu(),e.next=4,this.resolver._openPopup(this.auth,this.provider,this.filter[0],t);case 4:this.authWindow=e.sent,this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch((function(e){n.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(function(e){e||n.reject(Sr(n.auth,"web-storage-unsupported"))})),this.pollUserCancellation();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"eventId",get:function(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}},{key:"cancel",value:function(){this.reject(Sr(this.auth,"cancelled-popup-request"))}},{key:"cleanUp",value:function(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,n.currentPopupAction=null}},{key:"pollUserCancellation",value:function(){var e=this;!function t(){var n,r;(null===(r=null===(n=e.authWindow)||void 0===n?void 0:n.window)||void 0===r?void 0:r.closed)?e.pollId=window.setTimeout((function(){e.pollId=null,e.reject(Sr(e.auth,"popup-closed-by-user"))}),8e3):e.pollId=window.setTimeout(t,fs.get())}()}}]),n}(ls);ys.currentPopupAction=null;var gs="pendingRedirect",ks=new Map,bs=function(e){f(n,e);var t=m(n);function n(e,r){var i,a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return s(this,n),(i=t.call(this,e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,a)).eventId=null,i}return(0,c.Z)(n,[{key:"execute",value:function(){var e=Je($e().mark((function e(){var t,r;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=ks.get(this.auth._key())){e.next=21;break}return e.prev=2,e.next=5,ws(this.resolver,this.auth);case 5:if(!e.sent){e.next=12;break}return e.next=9,ur(h(n.prototype),"execute",this).call(this);case 9:e.t0=e.sent,e.next=13;break;case 12:e.t0=null;case 13:r=e.t0,t=function(){return Promise.resolve(r)},e.next=20;break;case 17:e.prev=17,e.t1=e.catch(2),t=function(){return Promise.reject(e.t1)};case 20:ks.set(this.auth._key(),t);case 21:return this.bypassAuthState||ks.set(this.auth._key(),(function(){return Promise.resolve(null)})),e.abrupt("return",t());case 23:case"end":return e.stop()}}),e,this,[[2,17]])})));return function(){return e.apply(this,arguments)}}()},{key:"onAuthEvent",value:function(){var e=Je($e().mark((function e(t){var r;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("signInViaRedirect"!==t.type){e.next=4;break}return e.abrupt("return",ur(h(n.prototype),"onAuthEvent",this).call(this,t));case 4:if("unknown"!==t.type){e.next=7;break}return this.resolve(null),e.abrupt("return");case 7:if(!t.eventId){e.next=17;break}return e.next=10,this.auth._redirectUserForId(t.eventId);case 10:if(!(r=e.sent)){e.next=16;break}return this.user=r,e.abrupt("return",ur(h(n.prototype),"onAuthEvent",this).call(this,t));case 16:this.resolve(null);case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onExecution",value:function(){var e=Je($e().mark((function e(){return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"cleanUp",value:function(){}}]),n}(ls);function ws(e,t){return xs.apply(this,arguments)}function xs(){return xs=Je($e().mark((function e(t,n){var r,i,a;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Ts(n),i=Es(t),e.next=4,i._isAvailable();case 4:if(e.sent){e.next=6;break}return e.abrupt("return",!1);case 6:return e.next=8,i._get(r);case 8:return e.t0=e.sent,a="true"===e.t0,e.next=12,i._remove(r);case 12:return e.abrupt("return",a);case 13:case"end":return e.stop()}}),e)}))),xs.apply(this,arguments)}function _s(e,t){return Is.apply(this,arguments)}function Is(){return Is=Je($e().mark((function e(t,n){return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Es(t)._set(Ts(n),"true"));case 1:case"end":return e.stop()}}),e)}))),Is.apply(this,arguments)}function Ss(e,t){ks.set(e._key(),t)}function Es(e){return wi(e._redirectPersistence)}function Ts(e){return Ii(gs,e.config.apiKey,e.name)}function Cs(e,t,n){return function(e,t,n){return As.apply(this,arguments)}(e,t,n)}function As(){return As=Je($e().mark((function e(t,n,r){var i,a;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=$i(t),Tr(t,n,ja),e.next=4,i._initializationPromise;case 4:return a=is(i,r),e.next=7,_s(a,i);case 7:return e.abrupt("return",a._openRedirect(i,n,"signInViaRedirect"));case 8:case"end":return e.stop()}}),e)}))),As.apply(this,arguments)}function Ns(e,t,n){return function(e,t,n){return Rs.apply(this,arguments)}(e,t,n)}function Rs(){return(Rs=Je($e().mark((function e(t,n,r){var i,a,o;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Tr((i=Nt(t)).auth,n,ja),e.next=4,i.auth._initializationPromise;case 4:return a=is(i.auth,r),e.next=7,_s(a,i.auth);case 7:return e.next=9,js(i);case 9:return o=e.sent,e.abrupt("return",a._openRedirect(i.auth,n,"reauthViaRedirect",o));case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ps(e,t,n){return function(e,t,n){return Os.apply(this,arguments)}(e,t,n)}function Os(){return(Os=Je($e().mark((function e(t,n,r){var i,a,o;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Tr((i=Nt(t)).auth,n,ja),e.next=4,i.auth._initializationPromise;case 4:return a=is(i.auth,r),e.next=7,ao(!1,i,n.providerId);case 7:return e.next=9,_s(a,i.auth);case 9:return e.next=11,js(i);case 11:return o=e.sent,e.abrupt("return",a._openRedirect(i.auth,n,"linkViaRedirect",o));case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ds(e,t){return Ls.apply(this,arguments)}function Ls(){return Ls=Je($e().mark((function e(t,n){return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$i(t)._initializationPromise;case 2:return e.abrupt("return",Ms(t,n,!1));case 3:case"end":return e.stop()}}),e)}))),Ls.apply(this,arguments)}function Ms(e,t){return Fs.apply(this,arguments)}function Fs(){return Fs=Je($e().mark((function e(t,n){var r,i,a,o,u,s=arguments;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.length>2&&void 0!==s[2]&&s[2],i=$i(t),a=is(i,n),o=new bs(i,a,r),e.next=6,o.execute();case 6:if(!(u=e.sent)||r){e.next=13;break}return delete u.user._redirectEventId,e.next=11,i._persistUserIfCurrent(u.user);case 11:return e.next=13,i._setRedirectUser(null,n);case 13:return e.abrupt("return",u);case 14:case"end":return e.stop()}}),e)}))),Fs.apply(this,arguments)}function js(e){return Us.apply(this,arguments)}function Us(){return(Us=Je($e().mark((function e(t){var n;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=pu("".concat(t.uid,":::")),t._redirectEventId=n,e.next=4,t.auth._setRedirectUser(t);case 4:return e.next=6,t.auth._persistUserIfCurrent(t);case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Vs=function(){function e(t){s(this,e),this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}return(0,c.Z)(e,[{key:"registerConsumer",value:function(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}},{key:"unregisterConsumer",value:function(e){this.consumers.delete(e)}},{key:"onEvent",value:function(e){var t=this;if(this.hasEventBeenHandled(e))return!1;var n=!1;return this.consumers.forEach((function(r){t.isEventForConsumer(e,r)&&(n=!0,t.sendToConsumer(e,r),t.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return zs(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}},{key:"sendToConsumer",value:function(e,t){var n;if(e.error&&!zs(e)){var r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(Sr(this.auth,r))}else t.onAuthEvent(e)}},{key:"isEventForConsumer",value:function(e,t){var n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}},{key:"hasEventBeenHandled",value:function(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Zs(e))}},{key:"saveEventToCache",value:function(e){this.cachedEventUids.add(Zs(e)),this.lastProcessedEventTime=Date.now()}}]),e}();function Zs(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((function(e){return e})).join("-")}function zs(e){var t=e.type,n=e.error;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}function Bs(e){return qs.apply(this,arguments)}function qs(){return qs=Je($e().mark((function e(t){var n,r=arguments;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:{},e.abrupt("return",Zr(t,"GET","/v1/projects",n));case 2:case"end":return e.stop()}}),e)}))),qs.apply(this,arguments)}var Gs=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Ks=/^https?/;function Ws(){return Ws=Je($e().mark((function e(t){var n,r,i,a,o;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.config.emulator){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,Bs(t);case 4:n=e.sent,r=n.authorizedDomains,i=S(r),e.prev=7,i.s();case 9:if((a=i.n()).done){e.next=20;break}if(o=a.value,e.prev=11,!Hs(o)){e.next=14;break}return e.abrupt("return");case 14:e.next=18;break;case 16:e.prev=16,e.t0=e.catch(11);case 18:e.next=9;break;case 20:e.next=25;break;case 22:e.prev=22,e.t1=e.catch(7),i.e(e.t1);case 25:return e.prev=25,i.f(),e.finish(25);case 28:Ir(t,"unauthorized-domain");case 29:case"end":return e.stop()}}),e,null,[[7,22,25,28],[11,16]])}))),Ws.apply(this,arguments)}function Hs(e){var t=Pr(),n=new URL(t),r=n.protocol,i=n.hostname;if(e.startsWith("chrome-extension://")){var a=new URL(e);return""===a.hostname&&""===i?"chrome-extension:"===r&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===r&&a.hostname===i}if(!Ks.test(r))return!1;if(Gs.test(e))return i===e;var o=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}var Qs=new Lr(3e4,6e4);function Ys(){var e=mu().___jsl;if(null===e||void 0===e?void 0:e.H)for(var t=0,n=Object.keys(e.H);t<n.length;t++){var r=n[t];if(e.H[r].r=e.H[r].r||[],e.H[r].L=e.H[r].L||[],e.H[r].r=(0,u.Z)(e.H[r].L),e.CP)for(var i=0;i<e.CP.length;i++)e.CP[i]=null}}var $s=null;function Xs(e){return $s=$s||function(e){return new Promise((function(t,n){var r,i,a;function o(){Ys(),gapi.load("gapi.iframes",{callback:function(){t(gapi.iframes.getContext())},ontimeout:function(){Ys(),n(Sr(e,"network-request-failed"))},timeout:Qs.get()})}if(null===(i=null===(r=mu().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(a=mu().gapi)||void 0===a?void 0:a.load)){var u=Gi("iframefcb");return mu()[u]=function(){gapi.load?o():n(Sr(e,"network-request-failed"))},qi("https://apis.google.com/js/api.js?onload=".concat(u)).catch((function(e){return n(e)}))}o()}})).catch((function(e){throw $s=null,e}))}(e),$s}var Js=new Lr(5e3,15e3),ec="__/auth/iframe",tc="emulator/auth/iframe",nc={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},rc=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function ic(e){var t=e.config;Ar(t.authDomain,e,"auth-domain-config-required");var n=t.emulator?Mr(t,tc):"https://".concat(e.config.authDomain,"/").concat(ec),r={apiKey:t.apiKey,appName:e.name,v:Cn},i=rc.get(e.config.apiHost);i&&(r.eid=i);var a=e._getFrameworks();return a.length&&(r.fw=a.join(",")),"".concat(n,"?").concat(It(r).slice(1))}function ac(e){return oc.apply(this,arguments)}function oc(){return oc=Je($e().mark((function e(t){var n,r;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Xs(t);case 2:return n=e.sent,Ar(r=mu().gapi,t,"internal-error"),e.abrupt("return",n.open({where:document.body,url:ic(t),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:nc,dontclear:!0},(function(e){return new Promise(function(){var n=Je($e().mark((function n(r,i){var a,o,u;return $e().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return u=function(){mu().clearTimeout(o),r(e)},n.next=3,e.restyle({setHideOnLeave:!1});case 3:a=Sr(t,"network-request-failed"),o=mu().setTimeout((function(){i(a)}),Js.get()),e.ping(u).then(u,(function(){i(a)}));case 6:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}())})));case 6:case"end":return e.stop()}}),e)}))),oc.apply(this,arguments)}var uc={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},sc=function(){function e(t){s(this,e),this.window=t,this.associatedEvent=null}return(0,c.Z)(e,[{key:"close",value:function(){if(this.window)try{this.window.close()}catch(e){}}}]),e}();function cc(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600,o=Math.max((window.screen.availHeight-a)/2,0).toString(),u=Math.max((window.screen.availWidth-r)/2,0).toString(),s="",c=Object.assign(Object.assign({},uc),{width:r.toString(),height:a.toString(),top:o,left:u}),l=ft().toLowerCase();n&&(s=Ai(l)?"_blank":n),Ti(l)&&(t=t||"http://localhost",c.scrollbars="yes");var f=Object.entries(c).reduce((function(e,t){var n=(0,i.Z)(t,2),r=n[0],a=n[1];return"".concat(e).concat(r,"=").concat(a,",")}),"");if(function(){var e;return Di(arguments.length>0&&void 0!==arguments[0]?arguments[0]:ft())&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}(l)&&"_self"!==s)return function(e,t){var n=document.createElement("a");n.href=e,n.target=t;var r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",s),new sc(null);var h=window.open(t||"",s,f);Ar(h,e,"popup-blocked");try{h.focus()}catch(d){}return new sc(h)}var lc="__/auth/handler",fc="emulator/auth/handler",hc=encodeURIComponent("fac");function dc(e,t,n,r,i,a){return pc.apply(this,arguments)}function pc(){return pc=Je($e().mark((function e(t,n,r,a,o,u){var s,c,l,f,h,d,p,v,m,y,g,k,b;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Ar(t.config.authDomain,t,"auth-domain-config-required"),Ar(t.config.apiKey,t,"invalid-api-key"),s={apiKey:t.config.apiKey,appName:t.name,authType:r,redirectUrl:a,v:Cn,eventId:o},n instanceof ja)for(n.setDefaultLanguage(t.languageCode),s.providerId=n.providerId||"",wt(n.getCustomParameters())||(s.customParameters=JSON.stringify(n.getCustomParameters())),c=0,l=Object.entries(u||{});c<l.length;c++)f=(0,i.Z)(l[c],2),h=f[0],d=f[1],s[h]=d;for(n instanceof Ua&&(p=n.getScopes().filter((function(e){return""!==e}))).length>0&&(s.scopes=p.join(",")),t.tenantId&&(s.tid=t.tenantId),v=s,m=0,y=Object.keys(v);m<y.length;m++)g=y[m],void 0===v[g]&&delete v[g];return e.next=10,t._getAppCheckToken();case 10:return k=e.sent,b=k?"#".concat(hc,"=").concat(encodeURIComponent(k)):"",e.abrupt("return","".concat(vc(t),"?").concat(It(v).slice(1)).concat(b));case 13:case"end":return e.stop()}}),e)}))),pc.apply(this,arguments)}function vc(e){var t=e.config;return t.emulator?Mr(t,fc):"https://".concat(t.authDomain,"/").concat(lc)}var mc="webStorageSupport",yc=function(){function e(){s(this,e),this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=fu,this._completeRedirectFn=Ms,this._overrideRedirectResult=Ss}return(0,c.Z)(e,[{key:"_openPopup",value:function(){var e=Je($e().mark((function e(t,n,r,i){var a,o;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Rr(null===(a=this.eventManagers[t._key()])||void 0===a?void 0:a.manager,"_initialize() not called before _openPopup()"),e.next=3,dc(t,n,r,Pr(),i);case 3:return o=e.sent,e.abrupt("return",cc(t,o,pu()));case 5:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_openRedirect",value:function(){var e=Je($e().mark((function e(t,n,r,i){return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._originValidation(t);case 2:return e.next=4,dc(t,n,r,Pr(),i);case 4:return yu(e.sent),e.abrupt("return",new Promise((function(){})));case 7:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_initialize",value:function(e){var t=this,n=e._key();if(this.eventManagers[n]){var r=this.eventManagers[n],i=r.manager,a=r.promise;return i?Promise.resolve(i):(Rr(a,"If manager is not set, promise should be"),a)}var o=this.initAndGetManager(e);return this.eventManagers[n]={promise:o},o.catch((function(){delete t.eventManagers[n]})),o}},{key:"initAndGetManager",value:function(){var e=Je($e().mark((function e(t){var n,r;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ac(t);case 2:return n=e.sent,r=new Vs(t),n.register("authEvent",(function(e){return Ar(null===e||void 0===e?void 0:e.authEvent,t,"invalid-auth-event"),{status:r.onEvent(e.authEvent)?"ACK":"ERROR"}}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:r},this.iframes[t._key()]=n,e.abrupt("return",r);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){this.iframes[e._key()].send(mc,{type:mc},(function(n){var r,i=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r[mc];void 0!==i&&t(!!i),Ir(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}},{key:"_originValidation",value:function(e){var t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return Ws.apply(this,arguments)}(e)),this.originValidationPromises[t]}},{key:"_shouldInitProactively",get:function(){return Li()||Ci()||Di()}}]),e}(),gc=yc,kc=function(){function e(t){s(this,e),this.factorId=t}return(0,c.Z)(e,[{key:"_process",value:function(e,t,n){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,n);case"signin":return this._finalizeSignIn(e,t.credential);default:return Nr("unexpected MultiFactorSessionType")}}}]),e}(),bc=function(e){f(n,e);var t=m(n);function n(e){var r;return s(this,n),(r=t.call(this,"phone")).credential=e,r}return(0,c.Z)(n,[{key:"_finalizeEnroll",value:function(e,t,n){return function(e,t){return Zr(e,"POST","/v2/accounts/mfaEnrollment:finalize",Vr(e,t))}(e,{idToken:t,displayName:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}},{key:"_finalizeSignIn",value:function(e,t){return function(e,t){return Zr(e,"POST","/v2/accounts/mfaSignIn:finalize",Vr(e,t))}(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}],[{key:"_fromCredential",value:function(e){return new n(e)}}]),n}(kc),wc=function(){function e(){s(this,e)}return(0,c.Z)(e,null,[{key:"assertion",value:function(e){return bc._fromCredential(e)}}]),e}();wc.FACTOR_ID="phone";var xc=function(){function e(){s(this,e)}return(0,c.Z)(e,null,[{key:"assertionForEnrollment",value:function(e,t){return _c._fromSecret(e,t)}},{key:"assertionForSignIn",value:function(e,t){return _c._fromEnrollmentId(e,t)}},{key:"generateSecret",value:function(){var e=Je($e().mark((function e(t){var n,r;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Ar("undefined"!==typeof(n=t).auth,"internal-error"),e.next=4,tu(n.auth,{idToken:n.credential,totpEnrollmentInfo:{}});case 4:return r=e.sent,e.abrupt("return",Ic._fromStartTotpMfaEnrollmentResponse(r,n.auth));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),e}();xc.FACTOR_ID="totp";var _c=function(e){f(n,e);var t=m(n);function n(e,r,i){var a;return s(this,n),(a=t.call(this,"totp")).otp=e,a.enrollmentId=r,a.secret=i,a}return(0,c.Z)(n,[{key:"_finalizeEnroll",value:function(){var e=Je($e().mark((function e(t,n,r){return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Ar("undefined"!==typeof this.secret,t,"argument-error"),e.abrupt("return",nu(t,{idToken:n,displayName:r,totpVerificationInfo:this.secret._makeTotpVerificationInfo(this.otp)}));case 2:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"_finalizeSignIn",value:function(){var e=Je($e().mark((function e(t,n){var r;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Ar(void 0!==this.enrollmentId&&void 0!==this.otp,t,"argument-error"),r={verificationCode:this.otp},e.abrupt("return",Fu(t,{mfaPendingCredential:n,mfaEnrollmentId:this.enrollmentId,totpVerificationInfo:r}));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()}],[{key:"_fromSecret",value:function(e,t){return new n(t,void 0,e)}},{key:"_fromEnrollmentId",value:function(e,t){return new n(t,e)}}]),n}(kc),Ic=function(){function e(t,n,r,i,a,o,u){s(this,e),this.sessionInfo=o,this.auth=u,this.secretKey=t,this.hashingAlgorithm=n,this.codeLength=r,this.codeIntervalSeconds=i,this.enrollmentCompletionDeadline=a}return(0,c.Z)(e,[{key:"_makeTotpVerificationInfo",value:function(e){return{sessionInfo:this.sessionInfo,verificationCode:e}}},{key:"generateQrCodeUrl",value:function(e,t){var n,r=!1;return(Sc(e)||Sc(t))&&(r=!0),r&&(Sc(e)&&(e=(null===(n=this.auth.currentUser)||void 0===n?void 0:n.email)||"unknownuser"),Sc(t)&&(t=this.auth.name)),"otpauth://totp/".concat(t,":").concat(e,"?secret=").concat(this.secretKey,"&issuer=").concat(t,"&algorithm=").concat(this.hashingAlgorithm,"&digits=").concat(this.codeLength)}}],[{key:"_fromStartTotpMfaEnrollmentResponse",value:function(t,n){return new e(t.totpSessionInfo.sharedSecretKey,t.totpSessionInfo.hashingAlgorithm,t.totpSessionInfo.verificationCodeLength,t.totpSessionInfo.periodSec,new Date(t.totpSessionInfo.finalizeEnrollmentTime).toUTCString(),t.totpSessionInfo.sessionInfo,n)}}]),e}();function Sc(e){return"undefined"===typeof e||0===(null===e||void 0===e?void 0:e.length)}var Ec="@firebase/auth",Tc="0.23.2",Cc=function(){function e(t){s(this,e),this.auth=t,this.internalListeners=new Map}return(0,c.Z)(e,[{key:"getUid",value:function(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}},{key:"getToken",value:function(){var e=Je($e().mark((function e(t){var n;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.assertAuthConfigured(),e.next=3,this.auth._initializationPromise;case 3:if(this.auth.currentUser){e.next=5;break}return e.abrupt("return",null);case 5:return e.next=7,this.auth.currentUser.getIdToken(t);case 7:return n=e.sent,e.abrupt("return",{accessToken:n});case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"addAuthTokenListener",value:function(e){if(this.assertAuthConfigured(),!this.internalListeners.has(e)){var t=this.auth.onIdTokenChanged((function(t){e((null===t||void 0===t?void 0:t.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}}},{key:"removeAuthTokenListener",value:function(e){this.assertAuthConfigured();var t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}},{key:"assertAuthConfigured",value:function(){Ar(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}},{key:"updateProactiveRefresh",value:function(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}]),e}();var Ac;!function(e){var t;null===(t=st())||void 0===t||t["_".concat(e)]}("authIdTokenMaxAge");function Nc(){return window}Ac="Browser",wn(new Rt("auth",(function(e,t){var n=t.options,r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),o=r.options,u=o.apiKey,s=o.authDomain;Ar(u&&!u.includes(":"),"invalid-api-key",{appName:r.name});var c={apiKey:u,authDomain:s,clientPlatform:Ac,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Mi(Ac)},l=new Yi(r,i,a,c);return function(e,t){var n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(wi);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(l,n),l}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((function(e,t,n){e.getProvider("auth-internal").initialize()}))),wn(new Rt("auth-internal",(function(e){return function(e){return new Cc(e)}($i(e.getProvider("auth").getImmediate()))}),"PRIVATE").setInstantiationMode("EXPLICIT")),Dn(Ec,Tc,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(Ac)),Dn(Ec,Tc,"esm2017");var Rc=2e3;function Pc(e,t,n){return Oc.apply(this,arguments)}function Oc(){return Oc=Je($e().mark((function e(t,n,r){var i,a,o,u,s;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Nc(),o=a.BuildInfo,Rr(n.sessionId,"AuthEvent did not contain a session ID"),e.next=4,Uc(n.sessionId);case 4:return u=e.sent,s={},Di()?s.ibi=o.packageName:Ri()?s.apn=o.packageName:Ir(t,"operation-not-supported-in-this-environment"),o.displayName&&(s.appDisplayName=o.displayName),s.sessionId=u,e.abrupt("return",dc(t,r,n.type,void 0,null!==(i=n.eventId)&&void 0!==i?i:void 0,s));case 10:case"end":return e.stop()}}),e)}))),Oc.apply(this,arguments)}function Dc(){return Dc=Je($e().mark((function e(t){var n,r,i;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Nc(),r=n.BuildInfo,i={},Di()?i.iosBundleId=r.packageName:Ri()?i.androidPackageName=r.packageName:Ir(t,"operation-not-supported-in-this-environment"),e.next=5,Bs(t,i);case 5:case"end":return e.stop()}}),e)}))),Dc.apply(this,arguments)}function Lc(e){var t=Nc().cordova;return new Promise((function(n){t.plugins.browsertab.isAvailable((function(r){var i=null;r?t.plugins.browsertab.openUrl(e):i=t.InAppBrowser.open(e,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ft();return/(iPad|iPhone|iPod).*OS 7_\d/i.test(e)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(e)}()?"_blank":"_system","location=yes"),n(i)}))}))}function Mc(e,t,n){return Fc.apply(this,arguments)}function Fc(){return Fc=Je($e().mark((function e(t,n,r){var i,a,o;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Nc(),a=i.cordova,o=function(){},e.prev=2,e.next=5,new Promise((function(e,i){var u=null;function s(){var t;e();var n=null===(t=a.plugins.browsertab)||void 0===t?void 0:t.close;"function"===typeof n&&n(),"function"===typeof(null===r||void 0===r?void 0:r.close)&&r.close()}function c(){u||(u=window.setTimeout((function(){i(Sr(t,"redirect-cancelled-by-user"))}),Rc))}function l(){"visible"===(null===document||void 0===document?void 0:document.visibilityState)&&c()}n.addPassiveListener(s),document.addEventListener("resume",c,!1),Ri()&&document.addEventListener("visibilitychange",l,!1),o=function(){n.removePassiveListener(s),document.removeEventListener("resume",c,!1),document.removeEventListener("visibilitychange",l,!1),u&&window.clearTimeout(u)}}));case 5:return e.prev=5,o(),e.finish(5);case 8:case"end":return e.stop()}}),e,null,[[2,,5,8]])}))),Fc.apply(this,arguments)}function jc(e){var t,n,r,i,a,o,u,s,c,l,f=Nc();Ar("function"===typeof(null===(t=null===f||void 0===f?void 0:f.universalLinks)||void 0===t?void 0:t.subscribe),e,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),Ar("undefined"!==typeof(null===(n=null===f||void 0===f?void 0:f.BuildInfo)||void 0===n?void 0:n.packageName),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),Ar("function"===typeof(null===(a=null===(i=null===(r=null===f||void 0===f?void 0:f.cordova)||void 0===r?void 0:r.plugins)||void 0===i?void 0:i.browsertab)||void 0===a?void 0:a.openUrl),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Ar("function"===typeof(null===(s=null===(u=null===(o=null===f||void 0===f?void 0:f.cordova)||void 0===o?void 0:o.plugins)||void 0===u?void 0:u.browsertab)||void 0===s?void 0:s.isAvailable),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Ar("function"===typeof(null===(l=null===(c=null===f||void 0===f?void 0:f.cordova)||void 0===c?void 0:c.InAppBrowser)||void 0===l?void 0:l.open),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}function Uc(e){return Vc.apply(this,arguments)}function Vc(){return(Vc=Je($e().mark((function e(t){var n,r,i;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Zc(t),e.next=3,crypto.subtle.digest("SHA-256",n);case 3:return r=e.sent,i=Array.from(new Uint8Array(r)),e.abrupt("return",i.map((function(e){return e.toString(16).padStart(2,"0")})).join(""));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Zc(e){if(Rr(/[0-9a-zA-Z]+/.test(e),"Can only convert alpha-numeric strings"),"undefined"!==typeof TextEncoder)return(new TextEncoder).encode(e);for(var t=new ArrayBuffer(e.length),n=new Uint8Array(t),r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n}var zc=20,Bc=function(e){f(n,e);var t=m(n);function n(){var e;return s(this,n),(e=t.apply(this,arguments)).passiveListeners=new Set,e.initPromise=new Promise((function(t){e.resolveInialized=t})),e}return(0,c.Z)(n,[{key:"addPassiveListener",value:function(e){this.passiveListeners.add(e)}},{key:"removePassiveListener",value:function(e){this.passiveListeners.delete(e)}},{key:"resetRedirect",value:function(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}},{key:"onEvent",value:function(e){return this.resolveInialized(),this.passiveListeners.forEach((function(t){return t(e)})),ur(h(n.prototype),"onEvent",this).call(this,e)}},{key:"initialized",value:function(){var e=Je($e().mark((function e(){return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.initPromise;case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(Vs);function qc(e,t){return{type:t,eventId:arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,urlResponse:null,sessionId:Qc(),postBody:null,tenantId:e.tenantId,error:Sr(e,"no-auth-event")}}function Gc(e,t){return Yc()._set($c(e),t)}function Kc(e){return Wc.apply(this,arguments)}function Wc(){return Wc=Je($e().mark((function e(t){var n;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Yc()._get($c(t));case 2:if(!(n=e.sent)){e.next=6;break}return e.next=6,Yc()._remove($c(t));case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)}))),Wc.apply(this,arguments)}function Hc(e,t){var n,r,i=function(e){var t=Xc(e),n=t.link?decodeURIComponent(t.link):void 0,r=Xc(n).link,i=t.deep_link_id?decodeURIComponent(t.deep_link_id):void 0;return Xc(i).link||i||r||n||e}(t);if(i.includes("/__/auth/callback")){var a=Xc(i),o=a.firebaseError?function(e){try{return JSON.parse(e)}catch(t){return null}}(decodeURIComponent(a.firebaseError)):null,u=null===(r=null===(n=null===o||void 0===o?void 0:o.code)||void 0===n?void 0:n.split("auth/"))||void 0===r?void 0:r[1],s=u?Sr(u):null;return s?{type:e.type,eventId:e.eventId,tenantId:e.tenantId,error:s,urlResponse:null,sessionId:null,postBody:null}:{type:e.type,eventId:e.eventId,tenantId:e.tenantId,sessionId:e.sessionId,urlResponse:i,postBody:null}}return null}function Qc(){for(var e=[],t="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",n=0;n<zc;n++){var r=Math.floor(62*Math.random());e.push(t.charAt(r))}return e.join("")}function Yc(){return wi(cu)}function $c(e){return Ii("authEvent",e.config.apiKey,e.name)}function Xc(e){if(!(null===e||void 0===e?void 0:e.includes("?")))return{};var t=I(e.split("?"));t[0];return St(t.slice(1).join("?"))}var Jc=function(){function e(){s(this,e),this._redirectPersistence=fu,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Ms,this._overrideRedirectResult=Ss}return(0,c.Z)(e,[{key:"_initialize",value:function(){var e=Je($e().mark((function e(t){var n,r;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t._key(),(r=this.eventManagers.get(n))||(r=new Bc(t),this.eventManagers.set(n,r),this.attachCallbackListeners(t,r)),e.abrupt("return",r);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_openPopup",value:function(e){Ir(e,"operation-not-supported-in-this-environment")}},{key:"_openRedirect",value:function(){var e=Je($e().mark((function e(t,n,r,i){var a,o,u,s;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return jc(t),e.next=3,this._initialize(t);case 3:return a=e.sent,e.next=6,a.initialized();case 6:return a.resetRedirect(),ks.clear(),e.next=10,this._originValidation(t);case 10:return o=qc(t,r,i),e.next=13,Gc(t,o);case 13:return e.next=15,Pc(t,o,n);case 15:return u=e.sent,e.next=18,Lc(u);case 18:return s=e.sent,e.abrupt("return",Mc(t,a,s));case 20:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){throw new Error("Method not implemented.")}},{key:"_originValidation",value:function(e){var t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return Dc.apply(this,arguments)}(e)),this.originValidationPromises[t]}},{key:"attachCallbackListeners",value:function(e,t){var n=Nc(),r=n.universalLinks,i=n.handleOpenURL,a=n.BuildInfo,o=setTimeout(Je($e().mark((function n(){return $e().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Kc(e);case 2:t.onEvent(tl());case 3:case"end":return n.stop()}}),n)}))),500),u=function(){var n=Je($e().mark((function n(r){var i,a;return $e().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return clearTimeout(o),n.next=3,Kc(e);case 3:i=n.sent,a=null,i&&(null===r||void 0===r?void 0:r.url)&&(a=Hc(i,r.url)),t.onEvent(a||tl());case 7:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}();"undefined"!==typeof r&&"function"===typeof r.subscribe&&r.subscribe(null,u);var s=i,c="".concat(a.packageName.toLowerCase(),"://");Nc().handleOpenURL=function(){var e=Je($e().mark((function e(t){return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.toLowerCase().startsWith(c)&&u({url:t}),"function"===typeof s)try{s(t)}catch(n){console.error(n)}case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}]),e}(),el=Jc;function tl(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Sr("no-auth-event")}}var nl=1e3;function rl(){var e;return(null===(e=null===self||void 0===self?void 0:self.location)||void 0===e?void 0:e.protocol)||null}function il(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ft();return!("file:"!==rl()&&"ionic:"!==rl()&&"capacitor:"!==rl()||!e.toLowerCase().match(/iphone|ipad|ipod|android/))}function al(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ft();return vt()&&11===(null===document||void 0===document?void 0:document.documentMode)||function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ft();return/Edge\/\d+/.test(e)}(e)}function ol(){try{var e=self.localStorage,t=pu();if(e)return e.setItem(t,"1"),e.removeItem(t),!al()||mt()}catch(n){return ul()&&mt()}return!1}function ul(){return"undefined"!==typeof n.g&&"WorkerGlobalScope"in n.g&&"importScripts"in n.g}function sl(){return("http:"===rl()||"https:"===rl()||dt()||il())&&!(pt()||ht())&&ol()&&!ul()}function cl(){return il()&&"undefined"!==typeof document}function ll(){return fl.apply(this,arguments)}function fl(){return(fl=Je($e().mark((function e(){return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(cl()){e.next=2;break}return e.abrupt("return",!1);case 2:return e.abrupt("return",new Promise((function(e){var t=setTimeout((function(){e(!1)}),nl);document.addEventListener("deviceready",(function(){clearTimeout(t),e(!0)}))})));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var hl={LOCAL:"local",NONE:"none",SESSION:"session"},dl=Ar,pl="persistence";function vl(e,t){dl(Object.values(hl).includes(t),e,"invalid-persistence-type"),pt()?dl(t!==hl.SESSION,e,"unsupported-persistence-type"):ht()?dl(t===hl.NONE,e,"unsupported-persistence-type"):ul()?dl(t===hl.NONE||t===hl.LOCAL&&mt(),e,"unsupported-persistence-type"):dl(t===hl.NONE||ol(),e,"unsupported-persistence-type")}function ml(e){return yl.apply(this,arguments)}function yl(){return yl=Je($e().mark((function e(t){var n,r;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._initializationPromise;case 2:n=gl(),r=Ii(pl,t.config.apiKey,t.name),n&&n.setItem(r,t._getPersistence());case 5:case"end":return e.stop()}}),e)}))),yl.apply(this,arguments)}function gl(){var e;try{return(null===(e="undefined"!==typeof window?window:null)||void 0===e?void 0:e.sessionStorage)||null}catch(t){return null}}var kl=Ar,bl=function(){function e(){s(this,e),this.browserResolver=wi(gc),this.cordovaResolver=wi(el),this.underlyingResolver=null,this._redirectPersistence=fu,this._completeRedirectFn=Ms,this._overrideRedirectResult=Ss}return(0,c.Z)(e,[{key:"_initialize",value:function(){var e=Je($e().mark((function e(t){return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._initialize(t));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_openPopup",value:function(){var e=Je($e().mark((function e(t,n,r,i){return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._openPopup(t,n,r,i));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_openRedirect",value:function(){var e=Je($e().mark((function e(t,n,r,i){return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._openRedirect(t,n,r,i));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,t)}},{key:"_originValidation",value:function(e){return this.assertedUnderlyingResolver._originValidation(e)}},{key:"_shouldInitProactively",get:function(){return cl()||this.browserResolver._shouldInitProactively}},{key:"assertedUnderlyingResolver",get:function(){return kl(this.underlyingResolver,"internal-error"),this.underlyingResolver}},{key:"selectUnderlyingResolver",value:function(){var e=Je($e().mark((function e(){var t;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.underlyingResolver){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,ll();case 4:t=e.sent,this.underlyingResolver=t?this.cordovaResolver:this.browserResolver;case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function wl(e){return e.unwrap()}function xl(e,t){var n,r=null===(n=t.customData)||void 0===n?void 0:n._tokenResponse;if("auth/multi-factor-auth-required"===(null===t||void 0===t?void 0:t.code))t.resolver=new Tl(e,function(e,t){var n,r=Nt(e),i=t;return Ar(t.customData.operationType,r,"argument-error"),Ar(null===(n=i.customData._serverResponse)||void 0===n?void 0:n.mfaPendingCredential,r,"argument-error"),Jo._fromError(r,i)}(e,t));else if(r){var i=_l(t),a=t;i&&(a.credential=i,a.tenantId=r.tenantId||void 0,a.email=r.email||void 0,a.phoneNumber=r.phoneNumber||void 0)}}function _l(e){var t=(e instanceof yt?e.customData:e)._tokenResponse;if(!t)return null;if(!(e instanceof yt)&&"temporaryProof"in t&&"phoneNumber"in t)return rs.credentialFromResult(e);var n,r=t.providerId;if(!r||r===lr.PASSWORD)return null;switch(r){case lr.GOOGLE:n=za;break;case lr.FACEBOOK:n=Za;break;case lr.GITHUB:n=Ba;break;case lr.TWITTER:n=Ka;break;default:var i=t.oauthIdToken,a=t.oauthAccessToken,o=t.oauthTokenSecret,u=t.pendingToken,s=t.nonce;return a||o||i||u?u?r.startsWith("saml.")?qa._create(r,u):Ca._fromParams({providerId:r,signInMethod:r,pendingToken:u,idToken:i,accessToken:a}):new Va(r).credential({idToken:i,accessToken:a,rawNonce:s}):null}return e instanceof yt?n.credentialFromError(e):n.credentialFromResult(e)}function Il(e,t){return t.catch((function(t){throw t instanceof yt&&xl(e,t),t})).then((function(e){var t,n=e.operationType,r=e.user;return{operationType:n,credential:(t=e,_l(t)),additionalUserInfo:$o(e),user:Cl.getOrCreate(r)}}))}function Sl(e,t){return El.apply(this,arguments)}function El(){return El=Je($e().mark((function e(t,n){var r;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n;case 2:return r=e.sent,e.abrupt("return",{verificationId:r.verificationId,confirm:function(e){return Il(t,r.confirm(e))}});case 4:case"end":return e.stop()}}),e)}))),El.apply(this,arguments)}var Tl=function(){function e(t,n){s(this,e),this.resolver=n,this.auth=t.wrapped()}return(0,c.Z)(e,[{key:"session",get:function(){return this.resolver.session}},{key:"hints",get:function(){return this.resolver.hints}},{key:"resolveSignIn",value:function(e){return Il(wl(this.auth),this.resolver.resolveSignIn(e))}}]),e}(),Cl=function(){function e(t){s(this,e),this._delegate=t,this.multiFactor=function(e){var t=Nt(e);return au.has(t)||au.set(t,iu._fromUser(t)),au.get(t)}(t)}return(0,c.Z)(e,[{key:"delete",value:function(){return this._delegate.delete()}},{key:"reload",value:function(){return this._delegate.reload()}},{key:"toJSON",value:function(){return this._delegate.toJSON()}},{key:"getIdTokenResult",value:function(e){return this._delegate.getIdTokenResult(e)}},{key:"getIdToken",value:function(e){return this._delegate.getIdToken(e)}},{key:"linkAndRetrieveDataWithCredential",value:function(e){return this.linkWithCredential(e)}},{key:"linkWithCredential",value:function(){var e=Je($e().mark((function e(t){return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Il(this.auth,po(this._delegate,t)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"linkWithPhoneNumber",value:function(){var e=Je($e().mark((function e(t,n){return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Sl(this.auth,$u(this._delegate,t,n)));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"linkWithPopup",value:function(){var e=Je($e().mark((function e(t){return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Il(this.auth,vs(this._delegate,t,bl)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"linkWithRedirect",value:function(){var e=Je($e().mark((function e(t){return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ml($i(this.auth));case 2:return e.abrupt("return",Ps(this._delegate,t,bl));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"reauthenticateAndRetrieveDataWithCredential",value:function(e){return this.reauthenticateWithCredential(e)}},{key:"reauthenticateWithCredential",value:function(){var e=Je($e().mark((function e(t){return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Il(this.auth,mo(this._delegate,t)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"reauthenticateWithPhoneNumber",value:function(e,t){return Sl(this.auth,function(e,t,n){return Ju.apply(this,arguments)}(this._delegate,e,t))}},{key:"reauthenticateWithPopup",value:function(e){return Il(this.auth,function(e,t,n){return ps.apply(this,arguments)}(this._delegate,e,bl))}},{key:"reauthenticateWithRedirect",value:function(){var e=Je($e().mark((function e(t){return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ml($i(this.auth));case 2:return e.abrupt("return",Ns(this._delegate,t,bl));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"sendEmailVerification",value:function(e){return function(e,t){return jo.apply(this,arguments)}(this._delegate,e)}},{key:"unlink",value:function(){var e=Je($e().mark((function e(t){return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,to(this._delegate,t);case 2:return e.abrupt("return",this);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateEmail",value:function(e){return function(e,t){return Bo(Nt(e),t,null)}(this._delegate,e)}},{key:"updatePassword",value:function(e){return function(e,t){return Bo(Nt(e),null,t)}(this._delegate,e)}},{key:"updatePhoneNumber",value:function(e){return function(e,t){return ns.apply(this,arguments)}(this._delegate,e)}},{key:"updateProfile",value:function(e){return function(e,t){return zo.apply(this,arguments)}(this._delegate,e)}},{key:"verifyBeforeUpdateEmail",value:function(e,t){return function(e,t,n){return Uo.apply(this,arguments)}(this._delegate,e,t)}},{key:"emailVerified",get:function(){return this._delegate.emailVerified}},{key:"isAnonymous",get:function(){return this._delegate.isAnonymous}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"phoneNumber",get:function(){return this._delegate.phoneNumber}},{key:"providerData",get:function(){return this._delegate.providerData}},{key:"refreshToken",get:function(){return this._delegate.refreshToken}},{key:"tenantId",get:function(){return this._delegate.tenantId}},{key:"displayName",get:function(){return this._delegate.displayName}},{key:"email",get:function(){return this._delegate.email}},{key:"photoURL",get:function(){return this._delegate.photoURL}},{key:"providerId",get:function(){return this._delegate.providerId}},{key:"uid",get:function(){return this._delegate.uid}},{key:"auth",get:function(){return this._delegate.auth}}],[{key:"getOrCreate",value:function(t){return e.USER_MAP.has(t)||e.USER_MAP.set(t,new e(t)),e.USER_MAP.get(t)}}]),e}();Cl.USER_MAP=new WeakMap;var Al=Ar,Nl=function(){function e(t,n){if(s(this,e),this.app=t,n.isInitialized())return this._delegate=n.getImmediate(),void this.linkUnderlyingAuth();var r=t.options.apiKey;Al(r,"invalid-api-key",{appName:t.name}),Al(r,"invalid-api-key",{appName:t.name});var i="undefined"!==typeof window?bl:void 0;this._delegate=n.initialize({options:{persistence:Pl(r,t.name),popupRedirectResolver:i}}),this._delegate._updateErrorMap(gr),this.linkUnderlyingAuth()}return(0,c.Z)(e,[{key:"emulatorConfig",get:function(){return this._delegate.emulatorConfig}},{key:"currentUser",get:function(){return this._delegate.currentUser?Cl.getOrCreate(this._delegate.currentUser):null}},{key:"languageCode",get:function(){return this._delegate.languageCode},set:function(e){this._delegate.languageCode=e}},{key:"settings",get:function(){return this._delegate.settings}},{key:"tenantId",get:function(){return this._delegate.tenantId},set:function(e){this._delegate.tenantId=e}},{key:"useDeviceLanguage",value:function(){this._delegate.useDeviceLanguage()}},{key:"signOut",value:function(){return this._delegate.signOut()}},{key:"useEmulator",value:function(e,t){Ji(this._delegate,e,t)}},{key:"applyActionCode",value:function(e){return function(e,t){return To.apply(this,arguments)}(this._delegate,e)}},{key:"checkActionCode",value:function(e){return Co(this._delegate,e)}},{key:"confirmPasswordReset",value:function(e,t){return function(e,t,n){return Eo.apply(this,arguments)}(this._delegate,e,t)}},{key:"createUserWithEmailAndPassword",value:function(){var e=Je($e().mark((function e(t,n){return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Il(this._delegate,Ro(this._delegate,t,n)));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"fetchProvidersForEmail",value:function(e){return this.fetchSignInMethodsForEmail(e)}},{key:"fetchSignInMethodsForEmail",value:function(e){return function(e,t){return Fo.apply(this,arguments)}(this._delegate,e)}},{key:"isSignInWithEmailLink",value:function(e){return function(e,t){var n=Ma.parseLink(t);return"EMAIL_SIGNIN"===(null===n||void 0===n?void 0:n.operation)}(this._delegate,e)}},{key:"getRedirectResult",value:function(){var e=Je($e().mark((function e(){var t;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Al(sl(),this._delegate,"operation-not-supported-in-this-environment"),e.next=3,Ds(this._delegate,bl);case 3:if(t=e.sent){e.next=6;break}return e.abrupt("return",{credential:null,user:null});case 6:return e.abrupt("return",Il(this._delegate,Promise.resolve(t)));case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"addFrameworkForLogging",value:function(e){!function(e,t){$i(e)._logFramework(t)}(this._delegate,e)}},{key:"onAuthStateChanged",value:function(e,t,n){var r=Rl(e,t,n),i=r.next,a=r.error,o=r.complete;return this._delegate.onAuthStateChanged(i,a,o)}},{key:"onIdTokenChanged",value:function(e,t,n){var r=Rl(e,t,n),i=r.next,a=r.error,o=r.complete;return this._delegate.onIdTokenChanged(i,a,o)}},{key:"sendSignInLinkToEmail",value:function(e,t){return function(e,t,n){return Oo.apply(this,arguments)}(this._delegate,e,t)}},{key:"sendPasswordResetEmail",value:function(e,t){return function(e,t,n){return So.apply(this,arguments)}(this._delegate,e,t||void 0)}},{key:"setPersistence",value:function(){var e=Je($e().mark((function e(t){var n,r;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:vl(this._delegate,t),e.t0=t,e.next=e.t0===hl.SESSION?4:e.t0===hl.LOCAL?6:e.t0===hl.NONE?11:13;break;case 4:return n=fu,e.abrupt("break",14);case 6:return e.next=8,wi(Lu)._isAvailable();case 8:return r=e.sent,n=r?Lu:cu,e.abrupt("break",14);case 11:return n=_i,e.abrupt("break",14);case 13:return e.abrupt("return",Ir("argument-error",{appName:this._delegate.name}));case 14:return e.abrupt("return",this._delegate.setPersistence(n));case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signInAndRetrieveDataWithCredential",value:function(e){return this.signInWithCredential(e)}},{key:"signInAnonymously",value:function(){return Il(this._delegate,function(e){return $a.apply(this,arguments)}(this._delegate))}},{key:"signInWithCredential",value:function(e){return Il(this._delegate,fo(this._delegate,e))}},{key:"signInWithCustomToken",value:function(e){return Il(this._delegate,function(e,t){return bo.apply(this,arguments)}(this._delegate,e))}},{key:"signInWithEmailAndPassword",value:function(e,t){return Il(this._delegate,function(e,t,n){return fo(Nt(e),Fa.credential(t,n))}(this._delegate,e,t))}},{key:"signInWithEmailLink",value:function(e,t){return Il(this._delegate,function(e,t,n){return Do.apply(this,arguments)}(this._delegate,e,t))}},{key:"signInWithPhoneNumber",value:function(e,t){return Sl(this._delegate,function(e,t,n){return Yu.apply(this,arguments)}(this._delegate,e,t))}},{key:"signInWithPopup",value:function(){var e=Je($e().mark((function e(t){return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Al(sl(),this._delegate,"operation-not-supported-in-this-environment"),e.abrupt("return",Il(this._delegate,hs(this._delegate,t,bl)));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signInWithRedirect",value:function(){var e=Je($e().mark((function e(t){return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Al(sl(),this._delegate,"operation-not-supported-in-this-environment"),e.next=3,ml(this._delegate);case 3:return e.abrupt("return",Cs(this._delegate,t,bl));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateCurrentUser",value:function(e){return this._delegate.updateCurrentUser(e)}},{key:"verifyPasswordResetCode",value:function(e){return function(e,t){return No.apply(this,arguments)}(this._delegate,e)}},{key:"unwrap",value:function(){return this._delegate}},{key:"_delete",value:function(){return this._delegate._delete()}},{key:"linkUnderlyingAuth",value:function(){var e=this;this._delegate.wrapped=function(){return e}}}]),e}();function Rl(e,t,n){var r=e;"function"!==typeof e&&(r=e.next,t=e.error,n=e.complete);var i=r;return{next:function(e){return i(e&&Cl.getOrCreate(e))},error:t,complete:n}}function Pl(e,t){var n=function(e,t){var n=gl();if(!n)return[];var r=Ii(pl,e,t);switch(n.getItem(r)){case hl.NONE:return[_i];case hl.LOCAL:return[Lu,fu];case hl.SESSION:return[fu];default:return[]}}(e,t);if("undefined"===typeof self||n.includes(Lu)||n.push(Lu),"undefined"!==typeof window)for(var r=0,i=[cu,fu];r<i.length;r++){var a=i[r];n.includes(a)||n.push(a)}return n.includes(_i)||n.push(_i),n}Nl.Persistence=hl;var Ol=function(){function e(){s(this,e),this.providerId="phone",this._delegate=new rs(wl(or.auth()))}return(0,c.Z)(e,[{key:"verifyPhoneNumber",value:function(e,t){return this._delegate.verifyPhoneNumber(e,t)}},{key:"unwrap",value:function(){return this._delegate}}],[{key:"credential",value:function(e,t){return rs.credential(e,t)}}]),e}();Ol.PHONE_SIGN_IN_METHOD=rs.PHONE_SIGN_IN_METHOD,Ol.PROVIDER_ID=rs.PROVIDER_ID;var Dl,Ll=Ar,Ml=function(){function e(t,n){var r,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:or.app();s(this,e),Ll(null===(r=i.options)||void 0===r?void 0:r.apiKey,"invalid-api-key",{appName:i.name}),this._delegate=new Wu(t,n,i.auth()),this.type=this._delegate.type}return(0,c.Z)(e,[{key:"clear",value:function(){this._delegate.clear()}},{key:"render",value:function(){return this._delegate.render()}},{key:"verify",value:function(){return this._delegate.verify()}}]),e}();(Dl=or).INTERNAL.registerComponent(new Rt("auth-compat",(function(e){var t=e.getProvider("app-compat").getImmediate(),n=e.getProvider("auth");return new Nl(t,n)}),"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:fr,PASSWORD_RESET:hr,RECOVER_EMAIL:dr,REVERT_SECOND_FACTOR_ADDITION:pr,VERIFY_AND_CHANGE_EMAIL:vr,VERIFY_EMAIL:mr}},EmailAuthProvider:Fa,FacebookAuthProvider:Za,GithubAuthProvider:Ba,GoogleAuthProvider:za,OAuthProvider:Va,SAMLAuthProvider:Ga,PhoneAuthProvider:Ol,PhoneMultiFactorGenerator:wc,RecaptchaVerifier:Ml,TwitterAuthProvider:Ka,Auth:Nl,AuthCredential:na,Error:yt}).setInstantiationMode("LAZY").setMultipleInstances(!1)),Dl.registerVersion("@firebase/auth-compat","0.4.2");var Fl,jl="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},Ul={},Vl=Vl||{},Zl=jl||self;function zl(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function Bl(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var ql="closure_uid_"+(1e9*Math.random()>>>0),Gl=0;function Kl(e,t,n){return e.call.apply(e.bind,arguments)}function Wl(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function Hl(e,t,n){return(Hl=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Kl:Wl).apply(null,arguments)}function Ql(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function Yl(e,t){function n(){}n.prototype=t.prototype,e.$=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.ac=function(e,n,r){for(var i=Array(arguments.length-2),a=2;a<arguments.length;a++)i[a-2]=arguments[a];return t.prototype[n].apply(e,i)}}function $l(){this.s=this.s,this.o=this.o}$l.prototype.s=!1,$l.prototype.sa=function(){var e;!this.s&&(this.s=!0,this.N(),0)&&(e=this,Object.prototype.hasOwnProperty.call(e,ql)&&e[ql]||(e[ql]=++Gl))},$l.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var Xl=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"===typeof e)return"string"!==typeof t||1!=t.length?-1:e.indexOf(t,0);for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1};function Jl(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}function ef(e,t){for(var n=1;n<arguments.length;n++){var r=arguments[n];if(zl(r)){var i=e.length||0,a=r.length||0;e.length=i+a;for(var o=0;o<a;o++)e[i+o]=r[o]}else e.push(r)}}function tf(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}tf.prototype.h=function(){this.defaultPrevented=!0};var nf=function(){if(!Zl.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{Zl.addEventListener("test",(function(){}),t),Zl.removeEventListener("test",(function(){}),t)}catch(n){}return e}();function rf(e){return/^[\s\xa0]*$/.test(e)}function af(){var e=Zl.navigator;return e&&(e=e.userAgent)?e:""}function of(e){return-1!=af().indexOf(e)}function uf(e){return uf[" "](e),e}uf[" "]=function(){};var sf,cf,lf=of("Opera"),ff=of("Trident")||of("MSIE"),hf=of("Edge"),df=hf||ff,pf=of("Gecko")&&!(-1!=af().toLowerCase().indexOf("webkit")&&!of("Edge"))&&!(of("Trident")||of("MSIE"))&&!of("Edge"),vf=-1!=af().toLowerCase().indexOf("webkit")&&!of("Edge");function mf(){var e=Zl.document;return e?e.documentMode:void 0}e:{var yf="",gf=function(){var e=af();return pf?/rv:([^\);]+)(\)|;)/.exec(e):hf?/Edge\/([\d\.]+)/.exec(e):ff?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):vf?/WebKit\/(\S+)/.exec(e):lf?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(gf&&(yf=gf?gf[1]:""),ff){var kf=mf();if(null!=kf&&kf>parseFloat(yf)){sf=String(kf);break e}}sf=yf}if(Zl.document&&ff){var bf=mf();cf=bf||(parseInt(sf,10)||void 0)}else cf=void 0;var wf=cf;function xf(e,t){if(tf.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(pf){e:{try{uf(t.nodeName);var i=!0;break e}catch(a){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:_f[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&xf.$.h.call(this)}}Yl(xf,tf);var _f={2:"touch",3:"pen",4:"mouse"};xf.prototype.h=function(){xf.$.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var If="closure_listenable_"+(1e6*Math.random()|0),Sf=0;function Ef(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.la=i,this.key=++Sf,this.fa=this.ia=!1}function Tf(e){e.fa=!0,e.listener=null,e.proxy=null,e.src=null,e.la=null}function Cf(e,t,n){for(var r in e)t.call(n,e[r],r,e)}function Af(e){var t={};for(var n in e)t[n]=e[n];return t}var Nf="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Rf(e,t){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])e[n]=r[n];for(var a=0;a<Nf.length;a++)n=Nf[a],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function Pf(e){this.src=e,this.g={},this.h=0}function Of(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],a=Xl(i,t);(r=0<=a)&&Array.prototype.splice.call(i,a,1),r&&(Tf(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function Df(e,t,n,r){for(var i=0;i<e.length;++i){var a=e[i];if(!a.fa&&a.listener==t&&a.capture==!!n&&a.la==r)return i}return-1}Pf.prototype.add=function(e,t,n,r,i){var a=e.toString();(e=this.g[a])||(e=this.g[a]=[],this.h++);var o=Df(e,t,r,i);return-1<o?(t=e[o],n||(t.ia=!1)):((t=new Ef(t,this.src,a,!!r,i)).ia=n,e.push(t)),t};var Lf="closure_lm_"+(1e6*Math.random()|0),Mf={};function Ff(e,t,n,r,i){if(r&&r.once)return Uf(e,t,n,r,i);if(Array.isArray(t)){for(var a=0;a<t.length;a++)Ff(e,t[a],n,r,i);return null}return n=Kf(n),e&&e[If]?e.O(t,n,Bl(r)?!!r.capture:!!r,i):jf(e,t,n,!1,r,i)}function jf(e,t,n,r,i,a){if(!t)throw Error("Invalid event type");var o=Bl(i)?!!i.capture:!!i,u=qf(e);if(u||(e[Lf]=u=new Pf(e)),(n=u.add(t,n,r,o,a)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}var t=Bf;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)nf||(i=o),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(zf(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function Uf(e,t,n,r,i){if(Array.isArray(t)){for(var a=0;a<t.length;a++)Uf(e,t[a],n,r,i);return null}return n=Kf(n),e&&e[If]?e.P(t,n,Bl(r)?!!r.capture:!!r,i):jf(e,t,n,!0,r,i)}function Vf(e,t,n,r,i){if(Array.isArray(t))for(var a=0;a<t.length;a++)Vf(e,t[a],n,r,i);else r=Bl(r)?!!r.capture:!!r,n=Kf(n),e&&e[If]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=Df(a=e.g[t],n,r,i))&&(Tf(a[n]),Array.prototype.splice.call(a,n,1),0==a.length&&(delete e.g[t],e.h--)))):e&&(e=qf(e))&&(t=e.g[t.toString()],e=-1,t&&(e=Df(t,n,r,i)),(n=-1<e?t[e]:null)&&Zf(n))}function Zf(e){if("number"!==typeof e&&e&&!e.fa){var t=e.src;if(t&&t[If])Of(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(zf(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=qf(t))?(Of(n,e),0==n.h&&(n.src=null,t[Lf]=null)):Tf(e)}}}function zf(e){return e in Mf?Mf[e]:Mf[e]="on"+e}function Bf(e,t){if(e.fa)e=!0;else{t=new xf(t,this);var n=e.listener,r=e.la||e.src;e.ia&&Zf(e),e=n.call(r,t)}return e}function qf(e){return(e=e[Lf])instanceof Pf?e:null}var Gf="__closure_events_fn_"+(1e9*Math.random()>>>0);function Kf(e){return"function"===typeof e?e:(e[Gf]||(e[Gf]=function(t){return e.handleEvent(t)}),e[Gf])}function Wf(){$l.call(this),this.i=new Pf(this),this.S=this,this.J=null}function Hf(e,t){var n,r=e.J;if(r)for(n=[];r;r=r.J)n.push(r);if(e=e.S,r=t.type||t,"string"===typeof t)t=new tf(t,e);else if(t instanceof tf)t.target=t.target||e;else{var i=t;Rf(t=new tf(r,e),i)}if(i=!0,n)for(var a=n.length-1;0<=a;a--){var o=t.g=n[a];i=Qf(o,r,!0,t)&&i}if(i=Qf(o=t.g=e,r,!0,t)&&i,i=Qf(o,r,!1,t)&&i,n)for(a=0;a<n.length;a++)i=Qf(o=t.g=n[a],r,!1,t)&&i}function Qf(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,a=0;a<t.length;++a){var o=t[a];if(o&&!o.fa&&o.capture==n){var u=o.listener,s=o.la||o.src;o.ia&&Of(e.i,o),i=!1!==u.call(s,r)&&i}}return i&&!r.defaultPrevented}Yl(Wf,$l),Wf.prototype[If]=!0,Wf.prototype.removeEventListener=function(e,t,n,r){Vf(this,e,t,n,r)},Wf.prototype.N=function(){if(Wf.$.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)Tf(n[r]);delete t.g[e],t.h--}}this.J=null},Wf.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},Wf.prototype.P=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var Yf=Zl.JSON.stringify,$f=function(){function e(t,n){s(this,e),this.i=t,this.j=n,this.h=0,this.g=null}return(0,c.Z)(e,[{key:"get",value:function(){var e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}]),e}();function Xf(){var e=oh,t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var Jf=function(){function e(){s(this,e),this.h=this.g=null}return(0,c.Z)(e,[{key:"add",value:function(e,t){var n=eh.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}}]),e}(),eh=new $f((function(){return new th}),(function(e){return e.reset()})),th=function(){function e(){s(this,e),this.next=this.g=this.h=null}return(0,c.Z)(e,[{key:"set",value:function(e,t){this.h=e,this.g=t,this.next=null}},{key:"reset",value:function(){this.next=this.g=this.h=null}}]),e}();function nh(e){var t=1;e=e.split(":");for(var n=[];0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function rh(e){Zl.setTimeout((function(){throw e}),0)}var ih,ah=!1,oh=new Jf,uh=function(){var e=Zl.Promise.resolve(void 0);ih=function(){e.then(sh)}},sh=function(){for(var e;e=Xf();){try{e.h.call(e.g)}catch(n){rh(n)}var t=eh;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}ah=!1};function ch(e,t){Wf.call(this),this.h=e||1,this.g=t||Zl,this.j=Hl(this.qb,this),this.l=Date.now()}function lh(e){e.ga=!1,e.T&&(e.g.clearTimeout(e.T),e.T=null)}function fh(e,t,n){if("function"===typeof e)n&&(e=Hl(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=Hl(e.handleEvent,e)}return 2147483647<Number(t)?-1:Zl.setTimeout(e,t||0)}function hh(e){e.g=fh((function(){e.g=null,e.i&&(e.i=!1,hh(e))}),e.j);var t=e.h;e.h=null,e.m.apply(null,t)}Yl(ch,Wf),(Fl=ch.prototype).ga=!1,Fl.T=null,Fl.qb=function(){if(this.ga){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-e):(this.T&&(this.g.clearTimeout(this.T),this.T=null),Hf(this,"tick"),this.ga&&(lh(this),this.start()))}},Fl.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Fl.N=function(){ch.$.N.call(this),lh(this),delete this.g};var dh=function(e){f(n,e);var t=m(n);function n(e,r){var i;return s(this,n),(i=t.call(this)).m=e,i.j=r,i.h=null,i.i=!1,i.g=null,i}return(0,c.Z)(n,[{key:"l",value:function(e){this.h=arguments,this.g?this.i=!0:hh(this)}},{key:"N",value:function(){ur(h(n.prototype),"N",this).call(this),this.g&&(Zl.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}]),n}($l);function ph(e){$l.call(this),this.h=e,this.g={}}Yl(ph,$l);var vh=[];function mh(e,t,n,r){Array.isArray(n)||(n&&(vh[0]=n.toString()),n=vh);for(var i=0;i<n.length;i++){var a=Ff(t,n[i],r||e.handleEvent,!1,e.h||e);if(!a)break;e.g[a.key]=a}}function yh(e){Cf(e.g,(function(e,t){this.g.hasOwnProperty(t)&&Zf(e)}),e),e.g={}}function gh(){this.g=!0}function kh(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var o=1;o<i.length;o++)i[o]=""}}}return Yf(n)}catch(u){return t}}(e,n)+(r?" "+r:"")}))}ph.prototype.N=function(){ph.$.N.call(this),yh(this)},ph.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},gh.prototype.Ea=function(){this.g=!1},gh.prototype.info=function(){};var bh={},wh=null;function xh(){return wh=wh||new Wf}function _h(e){tf.call(this,bh.Ta,e)}function Ih(e){var t=xh();Hf(t,new _h(t))}function Sh(e,t){tf.call(this,bh.STAT_EVENT,e),this.stat=t}function Eh(e){var t=xh();Hf(t,new Sh(t,e))}function Th(e,t){tf.call(this,bh.Ua,e),this.size=t}function Ch(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return Zl.setTimeout((function(){e()}),t)}bh.Ta="serverreachability",Yl(_h,tf),bh.STAT_EVENT="statevent",Yl(Sh,tf),bh.Ua="timingevent",Yl(Th,tf);var Ah={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},Nh={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function Rh(){}function Ph(e){return e.h||(e.h=e.i())}function Oh(){}Rh.prototype.h=null;var Dh,Lh={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function Mh(){tf.call(this,"d")}function Fh(){tf.call(this,"c")}function jh(){}function Uh(e,t,n,r){this.l=e,this.j=t,this.m=n,this.W=r||1,this.U=new ph(this),this.P=Zh,e=df?125:void 0,this.V=new ch(e),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new Vh}function Vh(){this.i=null,this.g="",this.h=!1}Yl(Mh,tf),Yl(Fh,tf),Yl(jh,Rh),jh.prototype.g=function(){return new XMLHttpRequest},jh.prototype.i=function(){return{}},Dh=new jh;var Zh=45e3,zh={},Bh={};function qh(e,t,n){e.L=1,e.v=cd(id(t)),e.s=n,e.S=!0,Gh(e,null)}function Gh(e,t){e.G=Date.now(),Qh(e),e.A=id(e.v);var n=e.A,r=e.W;Array.isArray(r)||(r=[String(r)]),xd(n.i,"t",r),e.C=0,n=e.l.J,e.h=new Vh,e.g=_p(e.l,n?t:null,!e.s),0<e.O&&(e.M=new dh(Hl(e.Pa,e,e.g),e.O)),mh(e.U,e.g,"readystatechange",e.nb),t=e.I?Af(e.I):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ha(e.A,e.u,e.s,t)):(e.u="GET",e.g.ha(e.A,e.u,null,t)),Ih(),function(e,t,n,r,i,a){e.info((function(){if(e.g)if(a)for(var o="",u=a.split("&"),s=0;s<u.length;s++){var c=u[s].split("=");if(1<c.length){var l=c[0];c=c[1];var f=l.split("_");o=2<=f.length&&"type"==f[1]?o+(l+"=")+c+"&":o+(l+"=redacted&")}}else o=null;else o=a;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o}))}(e.j,e.u,e.A,e.m,e.W,e.s)}function Kh(e){return!!e.g&&("GET"==e.u&&2!=e.L&&e.l.Ha)}function Wh(e,t,n){for(var r,i=!0;!e.J&&e.C<n.length;){if((r=Hh(e,n))==Bh){4==t&&(e.o=4,Eh(14),i=!1),kh(e.j,e.m,null,"[Incomplete Response]");break}if(r==zh){e.o=4,Eh(15),kh(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}kh(e.j,e.m,r,null),ed(e,r)}Kh(e)&&r!=Bh&&r!=zh&&(e.h.g="",e.C=0),4!=t||0!=n.length||e.h.h||(e.o=1,Eh(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.ba&&(e.ba=!0,(t=e.l).g==e&&t.ca&&!t.M&&(t.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),vp(t),t.M=!0,Eh(11))):(kh(e.j,e.m,n,"[Invalid Chunked Response]"),Jh(e),Xh(e))}function Hh(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?Bh:(n=Number(t.substring(n,r)),isNaN(n)?zh:(r+=1)+n>t.length?Bh:(t=t.slice(r,r+n),e.C=r+n,t))}function Qh(e){e.Y=Date.now()+e.P,Yh(e,e.P)}function Yh(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=Ch(Hl(e.lb,e),t)}function $h(e){e.B&&(Zl.clearTimeout(e.B),e.B=null)}function Xh(e){0==e.l.H||e.J||gp(e.l,e)}function Jh(e){$h(e);var t=e.M;t&&"function"==typeof t.sa&&t.sa(),e.M=null,lh(e.V),yh(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.sa())}function ed(e,t){try{var n=e.l;if(0!=n.H&&(n.g==e||Ad(n.i,e)))if(!e.K&&Ad(n.i,e)&&3==n.H){try{var r=n.Ja.g.parse(t)}catch(a){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.G+3e3<e.G))break e;yp(n),up(n)}pp(n),Eh(18)}}else n.Fa=i[1],0<n.Fa-n.V&&37500>i[2]&&n.G&&0==n.A&&!n.v&&(n.v=Ch(Hl(n.ib,n),6e3));if(1>=Cd(n.i)&&n.oa){try{n.oa()}catch(a){}n.oa=void 0}}else bp(n,11)}else if((e.K||n.g==e)&&yp(n),!rf(t))for(i=n.Ja.g.parse(t),t=0;t<i.length;t++){var a=i[t];if(n.V=a[0],a=a[1],2==n.H)if("c"==a[0]){n.K=a[1],n.pa=a[2];var o=a[3];null!=o&&(n.ra=o,n.l.info("VER="+n.ra));var u=a[4];null!=u&&(n.Ga=u,n.l.info("SVER="+n.Ga));var s=a[5];null!=s&&"number"===typeof s&&0<s&&(r=1.5*s,n.L=r,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;var c=e.g;if(c){var l=c.g?c.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var f=r.i;f.g||-1==l.indexOf("spdy")&&-1==l.indexOf("quic")&&-1==l.indexOf("h2")||(f.j=f.l,f.g=new Set,f.h&&(Nd(f,f.h),f.h=null))}if(r.F){var h=c.g?c.g.getResponseHeader("X-HTTP-Session-Id"):null;h&&(r.Da=h,sd(r.I,r.F,h))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-e.G,n.l.info("Handshake RTT: "+n.S+"ms"));var d=e;if((r=n).wa=xp(r,r.J?r.pa:null,r.Y),d.K){Rd(r.i,d);var p=d,v=r.L;v&&p.setTimeout(v),p.B&&($h(p),Qh(p)),r.g=d}else dp(r);0<n.j.length&&cp(n)}else"stop"!=a[0]&&"close"!=a[0]||bp(n,7);else 3==n.H&&("stop"==a[0]||"close"==a[0]?"stop"==a[0]?bp(n,7):op(n):"noop"!=a[0]&&n.h&&n.h.Aa(a),n.A=0)}Ih()}catch(a){}}function td(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(zl(e)||"string"===typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.ta&&"function"==typeof e.ta)return e.ta();if(!e.Z||"function"!=typeof e.Z){if("undefined"!==typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!==typeof Set&&e instanceof Set)){if(zl(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}for(var r in t=[],n=0,e)t[n++]=r;return t}}}(e),r=function(e){if(e.Z&&"function"==typeof e.Z)return e.Z();if("undefined"!==typeof Map&&e instanceof Map||"undefined"!==typeof Set&&e instanceof Set)return Array.from(e.values());if("string"===typeof e)return e.split("");if(zl(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length,a=0;a<i;a++)t.call(void 0,r[a],n&&n[a],e)}(Fl=Uh.prototype).setTimeout=function(e){this.P=e},Fl.nb=function(e){e=e.target;var t=this.M;t&&3==ep(e)?t.l():this.Pa(e)},Fl.Pa=function(e){try{if(e==this.g)e:{var t=ep(this.g),n=this.g.Ia();this.g.da();if(!(3>t)&&(3!=t||df||this.g&&(this.h.h||this.g.ja()||tp(this.g)))){this.J||4!=t||7==n||Ih(),$h(this);var r=this.g.da();this.ca=r;t:if(Kh(this)){var i=tp(this.g);e="";var a=i.length,o=4==ep(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){Jh(this),Xh(this);var u="";break t}this.h.i=new Zl.TextDecoder}for(n=0;n<a;n++)this.h.h=!0,e+=this.h.i.decode(i[n],{stream:o&&n==a-1});i.splice(0,a),this.h.g+=e,this.C=0,u=this.h.g}else u=this.g.ja();if(this.i=200==r,function(e,t,n,r,i,a,o){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+a+" "+o}))}(this.j,this.u,this.A,this.m,this.W,t,r),this.i){if(this.aa&&!this.K){t:{if(this.g){var s,c=this.g;if((s=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!rf(s)){var l=s;break t}}l=null}if(!(r=l)){this.i=!1,this.o=3,Eh(12),Jh(this),Xh(this);break e}kh(this.j,this.m,r,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,ed(this,r)}this.S?(Wh(this,t,u),df&&this.i&&3==t&&(mh(this.U,this.V,"tick",this.mb),this.V.start())):(kh(this.j,this.m,u,null),ed(this,u)),4==t&&Jh(this),this.i&&!this.J&&(4==t?gp(this.l,this):(this.i=!1,Qh(this)))}else(function(e){var t={};e=(e.g&&2<=ep(e)&&e.g.getAllResponseHeaders()||"").split("\r\n");for(var n=0;n<e.length;n++)if(!rf(e[n])){var r=nh(e[n]),i=r[0];if("string"===typeof(r=r[1])){r=r.trim();var a=t[i]||[];t[i]=a,a.push(r)}}!function(e,t){for(var n in e)t.call(void 0,e[n],n,e)}(t,(function(e){return e.join(", ")}))})(this.g),400==r&&0<u.indexOf("Unknown SID")?(this.o=3,Eh(12)):(this.o=0,Eh(13)),Jh(this),Xh(this)}}}catch(t){}},Fl.mb=function(){if(this.g){var e=ep(this.g),t=this.g.ja();this.C<t.length&&($h(this),Wh(this,e,t),this.i&&4!=e&&Qh(this))}},Fl.cancel=function(){this.J=!0,Jh(this)},Fl.lb=function(){this.B=null;var e=Date.now();0<=e-this.Y?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.j,this.A),2!=this.L&&(Ih(),Eh(17)),Jh(this),this.o=2,Xh(this)):Yh(this,this.Y-e)};var nd=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function rd(e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,e instanceof rd){this.h=e.h,ad(this,e.j),this.s=e.s,this.g=e.g,od(this,e.m),this.l=e.l;var t=e.i,n=new gd;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),ud(this,n),this.o=e.o}else e&&(t=String(e).match(nd))?(this.h=!1,ad(this,t[1]||"",!0),this.s=ld(t[2]||""),this.g=ld(t[3]||"",!0),od(this,t[4]),this.l=ld(t[5]||"",!0),ud(this,t[6]||"",!0),this.o=ld(t[7]||"")):(this.h=!1,this.i=new gd(null,this.h))}function id(e){return new rd(e)}function ad(e,t,n){e.j=n?ld(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function od(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function ud(e,t,n){t instanceof gd?(e.i=t,function(e,t){t&&!e.j&&(kd(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(bd(this,t),xd(this,n,e))}),e)),e.j=t}(e.i,e.h)):(n||(t=fd(t,md)),e.i=new gd(t,e.h))}function sd(e,t,n){e.i.set(t,n)}function cd(e){return sd(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function ld(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function fd(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,hd),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function hd(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}rd.prototype.toString=function(){var e=[],t=this.j;t&&e.push(fd(t,dd,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(fd(t,dd,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(fd(n,"/"==n.charAt(0)?vd:pd,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.o)&&e.push("#",fd(n,yd)),e.join("")};var dd=/[#\/\?@]/g,pd=/[#\?:]/g,vd=/[#\?]/g,md=/[#\?@]/g,yd=/#/g;function gd(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function kd(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var a=e[n].substring(0,r);i=e[n].substring(r+1)}else a=e[n];t(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function bd(e,t){kd(e),t=_d(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function wd(e,t){return kd(e),t=_d(e,t),e.g.has(t)}function xd(e,t,n){bd(e,t),0<n.length&&(e.i=null,e.g.set(_d(e,t),Jl(n)),e.h+=n.length)}function _d(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(Fl=gd.prototype).add=function(e,t){kd(this),this.i=null,e=_d(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},Fl.forEach=function(e,t){kd(this),this.g.forEach((function(n,r){n.forEach((function(n){e.call(t,n,r,this)}),this)}),this)},Fl.ta=function(){kd(this);for(var e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[],r=0;r<t.length;r++)for(var i=e[r],a=0;a<i.length;a++)n.push(t[r]);return n},Fl.Z=function(e){kd(this);var t=[];if("string"===typeof e)wd(this,e)&&(t=t.concat(this.g.get(_d(this,e))));else{e=Array.from(this.g.values());for(var n=0;n<e.length;n++)t=t.concat(e[n])}return t},Fl.set=function(e,t){return kd(this),this.i=null,wd(this,e=_d(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},Fl.get=function(e,t){return e&&0<(e=this.Z(e)).length?String(e[0]):t},Fl.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var e=[],t=Array.from(this.g.keys()),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r)),a=this.Z(r);for(r=0;r<a.length;r++){var o=i;""!==a[r]&&(o+="="+encodeURIComponent(String(a[r]))),e.push(o)}}return this.i=e.join("&")};var Id=(0,c.Z)((function e(t,n){s(this,e),this.g=t,this.map=n}));function Sd(e){this.l=e||Ed,Zl.PerformanceNavigationTiming?e=0<(e=Zl.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(Zl.g&&Zl.g.Ka&&Zl.g.Ka()&&Zl.g.Ka().ec),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var Ed=10;function Td(e){return!!e.h||!!e.g&&e.g.size>=e.j}function Cd(e){return e.h?1:e.g?e.g.size:0}function Ad(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function Nd(e,t){e.g?e.g.add(t):e.h=t}function Rd(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function Pd(e){if(null!=e.h)return e.i.concat(e.h.F);if(null!=e.g&&0!==e.g.size){var t,n=e.i,r=S(e.g.values());try{for(r.s();!(t=r.n()).done;){var i=t.value;n=n.concat(i.F)}}catch(a){r.e(a)}finally{r.f()}return n}return Jl(e.i)}Sd.prototype.cancel=function(){if(this.i=Pd(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){var e,t=S(this.g.values());try{for(t.s();!(e=t.n()).done;){e.value.cancel()}}catch(n){t.e(n)}finally{t.f()}this.g.clear()}};var Od,Dd=function(){function e(){s(this,e)}return(0,c.Z)(e,[{key:"stringify",value:function(e){return Zl.JSON.stringify(e,void 0)}},{key:"parse",value:function(e){return Zl.JSON.parse(e,void 0)}}]),e}();function Ld(){this.g=new Dd}function Md(e,t,n){var r=n||"";try{td(e,(function(e,n){var i=e;Bl(e)&&(i=Yf(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function Fd(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(a){}}function jd(e){this.l=e.fc||null,this.j=e.ob||!1}function Ud(e,t){Wf.call(this),this.F=e,this.u=t,this.m=void 0,this.readyState=Vd,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Yl(jd,Rh),jd.prototype.g=function(){return new Ud(this.l,this.j)},jd.prototype.i=(Od={},function(){return Od}),Yl(Ud,Wf);var Vd=0;function Zd(e){e.j.read().then(e.Xa.bind(e)).catch(e.ka.bind(e))}function zd(e){e.readyState=4,e.l=null,e.j=null,e.A=null,Bd(e)}function Bd(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(Fl=Ud.prototype).open=function(e,t){if(this.readyState!=Vd)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,Bd(this)},Fl.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.F||Zl).fetch(new Request(this.B,t)).then(this.$a.bind(this),this.ka.bind(this))},Fl.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch((function(){})),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,zd(this)),this.readyState=Vd},Fl.$a=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,Bd(this)),this.g&&(this.readyState=3,Bd(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if("undefined"!==typeof Zl.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Zd(this)}else e.text().then(this.Za.bind(this),this.ka.bind(this))},Fl.Xa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?zd(this):Bd(this),3==this.readyState&&Zd(this)}},Fl.Za=function(e){this.g&&(this.response=this.responseText=e,zd(this))},Fl.Ya=function(e){this.g&&(this.response=e,zd(this))},Fl.ka=function(){this.g&&zd(this)},Fl.setRequestHeader=function(e,t){this.v.append(e,t)},Fl.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},Fl.getAllResponseHeaders=function(){if(!this.h)return"";for(var e=[],t=this.h.entries(),n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(Ud.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var qd=Zl.JSON.parse;function Gd(e){Wf.call(this),this.headers=new Map,this.u=e||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=Kd,this.L=this.M=!1}Yl(Gd,Wf);var Kd="",Wd=/^https?$/i,Hd=["POST","PUT"];function Qd(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,Yd(e),Xd(e)}function Yd(e){e.F||(e.F=!0,Hf(e,"complete"),Hf(e,"error"))}function $d(e){if(e.h&&"undefined"!=typeof Vl&&(!e.C[1]||4!=ep(e)||2!=e.da()))if(e.v&&4==ep(e))fh(e.La,0,e);else if(Hf(e,"readystatechange"),4==ep(e)){e.h=!1;try{var t,n=e.da();e:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break e;default:r=!1}if(!(t=r)){var i;if(i=0===n){var a=String(e.I).match(nd)[1]||null;!a&&Zl.self&&Zl.self.location&&(a=Zl.self.location.protocol.slice(0,-1)),i=!Wd.test(a?a.toLowerCase():"")}t=i}if(t)Hf(e,"complete"),Hf(e,"success");else{e.m=6;try{var o=2<ep(e)?e.g.statusText:""}catch(u){o=""}e.j=o+" ["+e.da()+"]",Yd(e)}}finally{Xd(e)}}}function Xd(e,t){if(e.g){Jd(e);var n=e.g,r=e.C[0]?function(){}:null;e.g=null,e.C=null,t||Hf(e,"ready");try{n.onreadystatechange=r}catch(i){}}}function Jd(e){e.g&&e.L&&(e.g.ontimeout=null),e.A&&(Zl.clearTimeout(e.A),e.A=null)}function ep(e){return e.g?e.g.readyState:0}function tp(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.K){case Kd:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(ov){return null}}function np(e){var t="";return Cf(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}function rp(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=np(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):sd(e,t,n))}function ip(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function ap(e){this.Ga=0,this.j=[],this.l=new gh,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=ip("failFast",!1,e),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=ip("baseRetryDelayMs",5e3,e),this.hb=ip("retryDelaySeedMs",1e4,e),this.eb=ip("forwardChannelMaxRetries",2,e),this.xa=ip("forwardChannelRequestTimeoutMs",2e4,e),this.va=e&&e.xmlHttpFactory||void 0,this.Ha=e&&e.dc||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.i=new Sd(e&&e.concurrentRequestLimit),this.Ja=new Ld,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=e&&e.bc||!1,e&&e.Ea&&this.l.Ea(),e&&e.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&e&&e.detectBufferingProxy||!1,this.qa=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.qa=e.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function op(e){if(sp(e),3==e.H){var t=e.W++,n=id(e.I);if(sd(n,"SID",e.K),sd(n,"RID",t),sd(n,"TYPE","terminate"),fp(e,n),(t=new Uh(e,e.l,t)).L=2,t.v=cd(id(n)),n=!1,Zl.navigator&&Zl.navigator.sendBeacon)try{n=Zl.navigator.sendBeacon(t.v.toString(),"")}catch(r){}!n&&Zl.Image&&((new Image).src=t.v,n=!0),n||(t.g=_p(t.l,null),t.g.ha(t.v)),t.G=Date.now(),Qh(t)}wp(e)}function up(e){e.g&&(vp(e),e.g.cancel(),e.g=null)}function sp(e){up(e),e.u&&(Zl.clearTimeout(e.u),e.u=null),yp(e),e.i.cancel(),e.m&&("number"===typeof e.m&&Zl.clearTimeout(e.m),e.m=null)}function cp(e){if(!Td(e.i)&&!e.m){e.m=!0;var t=e.Na;ih||uh(),ah||(ih(),ah=!0),oh.add(t,e),e.C=0}}function lp(e,t){var n;n=t?t.m:e.W++;var r=id(e.I);sd(r,"SID",e.K),sd(r,"RID",n),sd(r,"AID",e.V),fp(e,r),e.o&&e.s&&rp(r,e.o,e.s),n=new Uh(e,e.l,n,e.C+1),null===e.o&&(n.I=e.s),t&&(e.j=t.F.concat(e.j)),t=hp(e,n,1e3),n.setTimeout(Math.round(.5*e.xa)+Math.round(.5*e.xa*Math.random())),Nd(e.i,n),qh(n,r,t)}function fp(e,t){e.na&&Cf(e.na,(function(e,n){sd(t,n,e)})),e.h&&td({},(function(e,n){sd(t,n,e)}))}function hp(e,t,n){n=Math.min(e.j.length,n);var r=e.h?Hl(e.h.Va,e.h,e):null;e:for(var i=e.j,a=-1;;){var o=["count="+n];-1==a?0<n?(a=i[0].g,o.push("ofs="+a)):a=0:o.push("ofs="+a);for(var u=!0,s=0;s<n;s++){var c=i[s].g,l=i[s].map;if(0>(c-=a))a=Math.max(0,i[s].g-100),u=!1;else try{Md(l,o,"req"+c+"_")}catch(yv){r&&r(l)}}if(u){r=o.join("&");break e}}return e=e.j.splice(0,n),t.F=e,r}function dp(e){if(!e.g&&!e.u){e.ba=1;var t=e.Ma;ih||uh(),ah||(ih(),ah=!0),oh.add(t,e),e.A=0}}function pp(e){return!(e.g||e.u||3<=e.A)&&(e.ba++,e.u=Ch(Hl(e.Ma,e),kp(e,e.A)),e.A++,!0)}function vp(e){null!=e.B&&(Zl.clearTimeout(e.B),e.B=null)}function mp(e){e.g=new Uh(e,e.l,"rpc",e.ba),null===e.o&&(e.g.I=e.s),e.g.O=0;var t=id(e.wa);sd(t,"RID","rpc"),sd(t,"SID",e.K),sd(t,"AID",e.V),sd(t,"CI",e.G?"0":"1"),!e.G&&e.qa&&sd(t,"TO",e.qa),sd(t,"TYPE","xmlhttp"),fp(e,t),e.o&&e.s&&rp(t,e.o,e.s),e.L&&e.g.setTimeout(e.L);var n=e.g;e=e.pa,n.L=1,n.v=cd(id(t)),n.s=null,n.S=!0,Gh(n,e)}function yp(e){null!=e.v&&(Zl.clearTimeout(e.v),e.v=null)}function gp(e,t){var n=null;if(e.g==t){yp(e),vp(e),e.g=null;var r=2}else{if(!Ad(e.i,t))return;n=t.F,Rd(e.i,t),r=1}if(0!=e.H)if(t.i)if(1==r){n=t.s?t.s.length:0,t=Date.now()-t.G;var i=e.C;Hf(r=xh(),new Th(r,n)),cp(e)}else dp(e);else if(3==(i=t.o)||0==i&&0<t.ca||!(1==r&&function(e,t){return!(Cd(e.i)>=e.i.j-(e.m?1:0))&&(e.m?(e.j=t.F.concat(e.j),!0):!(1==e.H||2==e.H||e.C>=(e.cb?0:e.eb))&&(e.m=Ch(Hl(e.Na,e,t),kp(e,e.C)),e.C++,!0))}(e,t)||2==r&&pp(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),i){case 1:bp(e,5);break;case 4:bp(e,10);break;case 3:bp(e,6);break;default:bp(e,2)}}function kp(e,t){var n=e.ab+Math.floor(Math.random()*e.hb);return e.isActive()||(n*=2),n*t}function bp(e,t){if(e.l.info("Error code "+t),2==t){var n=null;e.h&&(n=null);var r=Hl(e.pb,e);n||(n=new rd("//www.google.com/images/cleardot.gif"),Zl.location&&"http"==Zl.location.protocol||ad(n,"https"),cd(n)),function(e,t){var n=new gh;if(Zl.Image){var r=new Image;r.onload=Ql(Fd,n,r,"TestLoadImage: loaded",!0,t),r.onerror=Ql(Fd,n,r,"TestLoadImage: error",!1,t),r.onabort=Ql(Fd,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=Ql(Fd,n,r,"TestLoadImage: timeout",!1,t),Zl.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(n.toString(),r)}else Eh(2);e.H=0,e.h&&e.h.za(t),wp(e),sp(e)}function wp(e){if(e.H=0,e.ma=[],e.h){var t=Pd(e.i);0==t.length&&0==e.j.length||(ef(e.ma,t),ef(e.ma,e.j),e.i.i.length=0,Jl(e.j),e.j.length=0),e.h.ya()}}function xp(e,t,n){var r=n instanceof rd?id(n):new rd(n);if(""!=r.g)t&&(r.g=t+"."+r.g),od(r,r.m);else{var i=Zl.location;r=i.protocol,t=t?t+"."+i.hostname:i.hostname,i=+i.port;var a=new rd(null);r&&ad(a,r),t&&(a.g=t),i&&od(a,i),n&&(a.l=n),r=a}return n=e.F,t=e.Da,n&&t&&sd(r,n,t),sd(r,"VER",e.ra),fp(e,r),r}function _p(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return(t=n&&e.Ha&&!e.va?new Gd(new jd({ob:!0})):new Gd(e.va)).Oa(e.J),t}function Ip(){}function Sp(){if(ff&&!(10<=Number(wf)))throw Error("Environmental error: no available transport.")}function Ep(e,t){Wf.call(this),this.g=new ap(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.Ca&&(e?e["X-WebChannel-Client-Profile"]=t.Ca:e={"X-WebChannel-Client-Profile":t.Ca}),this.g.U=e,(e=t&&t.cc)&&!rf(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!rf(t)&&(this.g.F=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new Ap(this)}function Tp(e){Mh.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(var n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function Cp(){Fh.call(this),this.status=1}function Ap(e){this.g=e}function Np(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function Rp(e,t,n){n||(n=0);var r=Array(16);if("string"===typeof t)for(var i=0;16>i;++i)r[i]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],i=e.g[2];var a=e.g[3],o=t+(a^n&(i^a))+r[0]+3614090360&4294967295;o=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=n+(o<<7&4294967295|o>>>25))+((o=a+(i^t&(n^i))+r[1]+3905402710&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^a&(t^n))+r[2]+606105819&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(a^t))+r[3]+3250441966&4294967295)<<22&4294967295|o>>>10))+((o=t+(a^n&(i^a))+r[4]+4118548399&4294967295)<<7&4294967295|o>>>25))+((o=a+(i^t&(n^i))+r[5]+1200080426&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^a&(t^n))+r[6]+2821735955&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(a^t))+r[7]+4249261313&4294967295)<<22&4294967295|o>>>10))+((o=t+(a^n&(i^a))+r[8]+1770035416&4294967295)<<7&4294967295|o>>>25))+((o=a+(i^t&(n^i))+r[9]+2336552879&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^a&(t^n))+r[10]+4294925233&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(a^t))+r[11]+2304563134&4294967295)<<22&4294967295|o>>>10))+((o=t+(a^n&(i^a))+r[12]+1804603682&4294967295)<<7&4294967295|o>>>25))+((o=a+(i^t&(n^i))+r[13]+4254626195&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^a&(t^n))+r[14]+2792965006&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(a^t))+r[15]+1236535329&4294967295)<<22&4294967295|o>>>10))+((o=t+(i^a&(n^i))+r[1]+4129170786&4294967295)<<5&4294967295|o>>>27))+((o=a+(n^i&(t^n))+r[6]+3225465664&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(a^t))+r[11]+643717713&4294967295)<<14&4294967295|o>>>18))+((o=n+(a^t&(i^a))+r[0]+3921069994&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^a&(n^i))+r[5]+3593408605&4294967295)<<5&4294967295|o>>>27))+((o=a+(n^i&(t^n))+r[10]+38016083&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(a^t))+r[15]+3634488961&4294967295)<<14&4294967295|o>>>18))+((o=n+(a^t&(i^a))+r[4]+3889429448&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^a&(n^i))+r[9]+568446438&4294967295)<<5&4294967295|o>>>27))+((o=a+(n^i&(t^n))+r[14]+3275163606&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(a^t))+r[3]+4107603335&4294967295)<<14&4294967295|o>>>18))+((o=n+(a^t&(i^a))+r[8]+1163531501&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^a&(n^i))+r[13]+2850285829&4294967295)<<5&4294967295|o>>>27))+((o=a+(n^i&(t^n))+r[2]+4243563512&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(a^t))+r[7]+1735328473&4294967295)<<14&4294967295|o>>>18))+((o=n+(a^t&(i^a))+r[12]+2368359562&4294967295)<<20&4294967295|o>>>12))+((o=t+(n^i^a)+r[5]+4294588738&4294967295)<<4&4294967295|o>>>28))+((o=a+(t^n^i)+r[8]+2272392833&4294967295)<<11&4294967295|o>>>21))+((o=i+(a^t^n)+r[11]+1839030562&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^a^t)+r[14]+4259657740&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^a)+r[1]+2763975236&4294967295)<<4&4294967295|o>>>28))+((o=a+(t^n^i)+r[4]+1272893353&4294967295)<<11&4294967295|o>>>21))+((o=i+(a^t^n)+r[7]+4139469664&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^a^t)+r[10]+3200236656&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^a)+r[13]+681279174&4294967295)<<4&4294967295|o>>>28))+((o=a+(t^n^i)+r[0]+3936430074&4294967295)<<11&4294967295|o>>>21))+((o=i+(a^t^n)+r[3]+3572445317&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^a^t)+r[6]+76029189&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^a)+r[9]+3654602809&4294967295)<<4&4294967295|o>>>28))+((o=a+(t^n^i)+r[12]+3873151461&4294967295)<<11&4294967295|o>>>21))+((o=i+(a^t^n)+r[15]+530742520&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^a^t)+r[2]+3299628645&4294967295)<<23&4294967295|o>>>9))+((o=t+(i^(n|~a))+r[0]+4096336452&4294967295)<<6&4294967295|o>>>26))+((o=a+(n^(t|~i))+r[7]+1126891415&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(a|~n))+r[14]+2878612391&4294967295)<<15&4294967295|o>>>17))+((o=n+(a^(i|~t))+r[5]+4237533241&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(n|~a))+r[12]+1700485571&4294967295)<<6&4294967295|o>>>26))+((o=a+(n^(t|~i))+r[3]+2399980690&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(a|~n))+r[10]+4293915773&4294967295)<<15&4294967295|o>>>17))+((o=n+(a^(i|~t))+r[1]+2240044497&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(n|~a))+r[8]+1873313359&4294967295)<<6&4294967295|o>>>26))+((o=a+(n^(t|~i))+r[15]+4264355552&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(a|~n))+r[6]+2734768916&4294967295)<<15&4294967295|o>>>17))+((o=n+(a^(i|~t))+r[13]+1309151649&4294967295)<<21&4294967295|o>>>11))+((a=(t=n+((o=t+(i^(n|~a))+r[4]+4149444226&4294967295)<<6&4294967295|o>>>26))+((o=a+(n^(t|~i))+r[11]+3174756917&4294967295)<<10&4294967295|o>>>22))^((i=a+((o=i+(t^(a|~n))+r[2]+718787259&4294967295)<<15&4294967295|o>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,e.g[2]=e.g[2]+i&4294967295,e.g[3]=e.g[3]+a&4294967295}function Pp(e,t){this.h=t;for(var n=[],r=!0,i=e.length-1;0<=i;i--){var a=0|e[i];r&&a==t||(n[i]=a,r=!1)}this.g=n}(Fl=Gd.prototype).Oa=function(e){this.M=e},Fl.ha=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+e);t=t?t.toUpperCase():"GET",this.I=e,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():Dh.g(),this.C=this.u?Ph(this.u):Ph(Dh),this.g.onreadystatechange=Hl(this.La,this);try{this.G=!0,this.g.open(t,String(e),!0),this.G=!1}catch(s){return void Qd(this,s)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var a in r)n.set(a,r[a]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));var o,u=S(r.keys());try{for(u.s();!(o=u.n()).done;){var s=o.value;n.set(s,r.get(s))}}catch(p){u.e(p)}finally{u.f()}}r=Array.from(n.keys()).find((function(e){return"content-type"==e.toLowerCase()})),a=Zl.FormData&&e instanceof Zl.FormData,!(0<=Xl(Hd,t))||r||a||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");var c,l=S(n);try{for(l.s();!(c=l.n()).done;){var f=(0,i.Z)(c.value,2),h=f[0],d=f[1];this.g.setRequestHeader(h,d)}}catch(p){l.e(p)}finally{l.f()}this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{Jd(this),0<this.B&&((this.L=function(e){return ff&&"number"===typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Hl(this.ua,this)):this.A=fh(this.ua,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(s){Qd(this,s)}},Fl.ua=function(){"undefined"!=typeof Vl&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Hf(this,"timeout"),this.abort(8))},Fl.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,Hf(this,"complete"),Hf(this,"abort"),Xd(this))},Fl.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Xd(this,!0)),Gd.$.N.call(this)},Fl.La=function(){this.s||(this.G||this.v||this.l?$d(this):this.kb())},Fl.kb=function(){$d(this)},Fl.isActive=function(){return!!this.g},Fl.da=function(){try{return 2<ep(this)?this.g.status:-1}catch(Od){return-1}},Fl.ja=function(){try{return this.g?this.g.responseText:""}catch(Od){return""}},Fl.Wa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),qd(t)}},Fl.Ia=function(){return this.m},Fl.Sa=function(){return"string"===typeof this.j?this.j:String(this.j)},(Fl=ap.prototype).ra=8,Fl.H=1,Fl.Na=function(e){if(this.m)if(this.m=null,1==this.H){if(!e){this.W=Math.floor(1e5*Math.random()),e=this.W++;var t=new Uh(this,this.l,e),n=this.s;if(this.U&&(n?Rf(n=Af(n),this.U):n=this.U),null!==this.o||this.O||(t.I=n,n=null),this.P)e:{for(var r=0,i=0;i<this.j.length;i++){var a=this.j[i];if(void 0===(a="__data__"in a.map&&"string"===typeof(a=a.map.__data__)?a.length:void 0))break;if(4096<(r+=a)){r=i;break e}if(4096===r||i===this.j.length-1){r=i+1;break e}}r=1e3}else r=1e3;r=hp(this,t,r),sd(i=id(this.I),"RID",e),sd(i,"CVER",22),this.F&&sd(i,"X-HTTP-Session-Id",this.F),fp(this,i),n&&(this.O?r="headers="+encodeURIComponent(String(np(n)))+"&"+r:this.o&&rp(i,this.o,n)),Nd(this.i,t),this.bb&&sd(i,"TYPE","init"),this.P?(sd(i,"$req",r),sd(i,"SID","null"),t.aa=!0,qh(t,i,null)):qh(t,i,r),this.H=2}}else 3==this.H&&(e?lp(this,e):0==this.j.length||Td(this.i)||lp(this))},Fl.Ma=function(){if(this.u=null,mp(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var e=2*this.S;this.l.info("BP detection timer enabled: "+e),this.B=Ch(Hl(this.jb,this),e)}},Fl.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,Eh(10),up(this),mp(this))},Fl.ib=function(){null!=this.v&&(this.v=null,up(this),pp(this),Eh(19))},Fl.pb=function(e){e?(this.l.info("Successfully pinged google.com"),Eh(2)):(this.l.info("Failed to ping google.com"),Eh(1))},Fl.isActive=function(){return!!this.h&&this.h.isActive(this)},(Fl=Ip.prototype).Ba=function(){},Fl.Aa=function(){},Fl.za=function(){},Fl.ya=function(){},Fl.isActive=function(){return!0},Fl.Va=function(){},Sp.prototype.g=function(e,t){return new Ep(e,t)},Yl(Ep,Wf),Ep.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var e=this.g,t=this.l,n=this.h||void 0;Eh(0),e.Y=t,e.na=n||{},e.G=e.aa,e.I=xp(e,null,e.Y),cp(e)},Ep.prototype.close=function(){op(this.g)},Ep.prototype.u=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.v&&((n={}).__data__=Yf(e),e=n);t.j.push(new Id(t.fb++,e)),3==t.H&&cp(t)},Ep.prototype.N=function(){this.g.h=null,delete this.j,op(this.g),delete this.g,Ep.$.N.call(this)},Yl(Tp,Mh),Yl(Cp,Fh),Yl(Ap,Ip),Ap.prototype.Ba=function(){Hf(this.g,"a")},Ap.prototype.Aa=function(e){Hf(this.g,new Tp(e))},Ap.prototype.za=function(e){Hf(this.g,new Cp)},Ap.prototype.ya=function(){Hf(this.g,"b")},Yl(Np,(function(){this.blockSize=-1})),Np.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},Np.prototype.j=function(e,t){void 0===t&&(t=e.length);for(var n=t-this.blockSize,r=this.m,i=this.h,a=0;a<t;){if(0==i)for(;a<=n;)Rp(this,e,a),a+=this.blockSize;if("string"===typeof e){for(;a<t;)if(r[i++]=e.charCodeAt(a++),i==this.blockSize){Rp(this,r),i=0;break}}else for(;a<t;)if(r[i++]=e[a++],i==this.blockSize){Rp(this,r),i=0;break}}this.h=i,this.i+=t},Np.prototype.l=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.i;for(t=e.length-8;t<e.length;++t)e[t]=255&n,n/=256;for(this.j(e),e=Array(16),t=n=0;4>t;++t)for(var r=0;32>r;r+=8)e[n++]=this.g[t]>>>r&255;return e};var Op={};function Dp(e){return-128<=e&&128>e?function(e,t){var n=Op;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,(function(e){return new Pp([0|e],0>e?-1:0)})):new Pp([0|e],0>e?-1:0)}function Lp(e){if(isNaN(e)||!isFinite(e))return Fp;if(0>e)return zp(Lp(-e));for(var t=[],n=1,r=0;e>=n;r++)t[r]=e/n|0,n*=Mp;return new Pp(t,0)}var Mp=4294967296,Fp=Dp(0),jp=Dp(1),Up=Dp(16777216);function Vp(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function Zp(e){return-1==e.h}function zp(e){for(var t=e.g.length,n=[],r=0;r<t;r++)n[r]=~e.g[r];return new Pp(n,~e.h).add(jp)}function Bp(e,t){return e.add(zp(t))}function qp(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function Gp(e,t){this.g=e,this.h=t}function Kp(e,t){if(Vp(t))throw Error("division by zero");if(Vp(e))return new Gp(Fp,Fp);if(Zp(e))return t=Kp(zp(e),t),new Gp(zp(t.g),zp(t.h));if(Zp(t))return t=Kp(e,zp(t)),new Gp(zp(t.g),t.h);if(30<e.g.length){if(Zp(e)||Zp(t))throw Error("slowDivide_ only works with positive integers.");for(var n=jp,r=t;0>=r.X(e);)n=Wp(n),r=Wp(r);var i=Hp(n,1),a=Hp(r,1);for(r=Hp(r,2),n=Hp(n,2);!Vp(r);){var o=a.add(r);0>=o.X(e)&&(i=i.add(n),a=o),r=Hp(r,1),n=Hp(n,1)}return t=Bp(e,i.R(t)),new Gp(i,t)}for(i=Fp;0<=e.X(t);){for(n=Math.max(1,Math.floor(e.ea()/t.ea())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),o=(a=Lp(n)).R(t);Zp(o)||0<o.X(e);)o=(a=Lp(n-=r)).R(t);Vp(a)&&(a=jp),i=i.add(a),e=Bp(e,o)}return new Gp(i,e)}function Wp(e){for(var t=e.g.length+1,n=[],r=0;r<t;r++)n[r]=e.D(r)<<1|e.D(r-1)>>>31;return new Pp(n,e.h)}function Hp(e,t){var n=t>>5;t%=32;for(var r=e.g.length-n,i=[],a=0;a<r;a++)i[a]=0<t?e.D(a+n)>>>t|e.D(a+n+1)<<32-t:e.D(a+n);return new Pp(i,e.h)}(Fl=Pp.prototype).ea=function(){if(Zp(this))return-zp(this).ea();for(var e=0,t=1,n=0;n<this.g.length;n++){var r=this.D(n);e+=(0<=r?r:Mp+r)*t,t*=Mp}return e},Fl.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(Vp(this))return"0";if(Zp(this))return"-"+zp(this).toString(e);for(var t=Lp(Math.pow(e,6)),n=this,r="";;){var i=Kp(n,t).g,a=((0<(n=Bp(n,i.R(t))).g.length?n.g[0]:n.h)>>>0).toString(e);if(Vp(n=i))return a+r;for(;6>a.length;)a="0"+a;r=a+r}},Fl.D=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},Fl.X=function(e){return Zp(e=Bp(this,e))?-1:Vp(e)?0:1},Fl.abs=function(){return Zp(this)?zp(this):this},Fl.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0,i=0;i<=t;i++){var a=r+(65535&this.D(i))+(65535&e.D(i)),o=(a>>>16)+(this.D(i)>>>16)+(e.D(i)>>>16);r=o>>>16,a&=65535,o&=65535,n[i]=o<<16|a}return new Pp(n,-2147483648&n[n.length-1]?-1:0)},Fl.R=function(e){if(Vp(this)||Vp(e))return Fp;if(Zp(this))return Zp(e)?zp(this).R(zp(e)):zp(zp(this).R(e));if(Zp(e))return zp(this.R(zp(e)));if(0>this.X(Up)&&0>e.X(Up))return Lp(this.ea()*e.ea());for(var t=this.g.length+e.g.length,n=[],r=0;r<2*t;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<e.g.length;i++){var a=this.D(r)>>>16,o=65535&this.D(r),u=e.D(i)>>>16,s=65535&e.D(i);n[2*r+2*i]+=o*s,qp(n,2*r+2*i),n[2*r+2*i+1]+=a*s,qp(n,2*r+2*i+1),n[2*r+2*i+1]+=o*u,qp(n,2*r+2*i+1),n[2*r+2*i+2]+=a*u,qp(n,2*r+2*i+2)}for(r=0;r<t;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=t;r<2*t;r++)n[r]=0;return new Pp(n,0)},Fl.gb=function(e){return Kp(this,e).h},Fl.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)&e.D(r);return new Pp(n,this.h&e.h)},Fl.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)|e.D(r);return new Pp(n,this.h|e.h)},Fl.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)^e.D(r);return new Pp(n,this.h^e.h)},Sp.prototype.createWebChannel=Sp.prototype.g,Ep.prototype.send=Ep.prototype.u,Ep.prototype.open=Ep.prototype.m,Ep.prototype.close=Ep.prototype.close,Ah.NO_ERROR=0,Ah.TIMEOUT=8,Ah.HTTP_ERROR=6,Nh.COMPLETE="complete",Oh.EventType=Lh,Lh.OPEN="a",Lh.CLOSE="b",Lh.ERROR="c",Lh.MESSAGE="d",Wf.prototype.listen=Wf.prototype.O,Gd.prototype.listenOnce=Gd.prototype.P,Gd.prototype.getLastError=Gd.prototype.Sa,Gd.prototype.getLastErrorCode=Gd.prototype.Ia,Gd.prototype.getStatus=Gd.prototype.da,Gd.prototype.getResponseJson=Gd.prototype.Wa,Gd.prototype.getResponseText=Gd.prototype.ja,Gd.prototype.send=Gd.prototype.ha,Gd.prototype.setWithCredentials=Gd.prototype.Oa,Np.prototype.digest=Np.prototype.l,Np.prototype.reset=Np.prototype.reset,Np.prototype.update=Np.prototype.j,Pp.prototype.add=Pp.prototype.add,Pp.prototype.multiply=Pp.prototype.R,Pp.prototype.modulo=Pp.prototype.gb,Pp.prototype.compare=Pp.prototype.X,Pp.prototype.toNumber=Pp.prototype.ea,Pp.prototype.toString=Pp.prototype.toString,Pp.prototype.getBits=Pp.prototype.D,Pp.fromNumber=Lp,Pp.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return zp(e(t.substring(1),n));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var r=Lp(Math.pow(n,8)),i=Fp,a=0;a<t.length;a+=8){var o=Math.min(8,t.length-a),u=parseInt(t.substring(a,a+o),n);8>o?(o=Lp(Math.pow(n,o)),i=i.R(o).add(Lp(u))):i=(i=i.R(r)).add(Lp(u))}return i};var Qp=Ul.createWebChannelTransport=function(){return new Sp},Yp=Ul.getStatEventTarget=function(){return xh()},$p=Ul.ErrorCode=Ah,Xp=Ul.EventType=Nh,Jp=Ul.Event=bh,ev=Ul.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},tv=Ul.FetchXmlHttpFactory=jd,nv=Ul.WebChannel=Oh,rv=Ul.XhrIo=Gd,iv=Ul.Md5=Np,av=Ul.Integer=Pp,ov="@firebase/firestore",uv=function(){function e(t){s(this,e),this.uid=t}return(0,c.Z)(e,[{key:"isAuthenticated",value:function(){return null!=this.uid}},{key:"toKey",value:function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}},{key:"isEqual",value:function(e){return e.uid===this.uid}}]),e}();uv.UNAUTHENTICATED=new uv(null),uv.GOOGLE_CREDENTIALS=new uv("google-credentials-uid"),uv.FIRST_PARTY=new uv("first-party-uid"),uv.MOCK_USER=new uv("mock-user");var sv="9.22.1",cv=new zt("@firebase/firestore");function lv(){return cv.logLevel}function fv(e){if(cv.logLevel<=Lt.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(pv);cv.debug.apply(cv,["Firestore (".concat(sv,"): ").concat(e)].concat((0,u.Z)(i)))}}function hv(e){if(cv.logLevel<=Lt.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(pv);cv.error.apply(cv,["Firestore (".concat(sv,"): ").concat(e)].concat((0,u.Z)(i)))}}function dv(e){if(cv.logLevel<=Lt.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(pv);cv.warn.apply(cv,["Firestore (".concat(sv,"): ").concat(e)].concat((0,u.Z)(i)))}}function pv(e){if("string"==typeof e)return e;try{return t=e,JSON.stringify(t)}catch(t){return e}var t}function vv(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state",t="FIRESTORE (".concat(sv,") INTERNAL ASSERTION FAILED: ")+e;throw hv(t),new Error(t)}function mv(e,t){e||vv()}function yv(e,t){return e}var gv={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},kv=function(e){f(n,e);var t=m(n);function n(e,r){var i;return s(this,n),(i=t.call(this,e,r)).code=e,i.message=r,i.toString=function(){return"".concat(i.name,": [code=").concat(i.code,"]: ").concat(i.message)},i}return(0,c.Z)(n)}(yt),bv=(0,c.Z)((function e(){var t=this;s(this,e),this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))})),wv=(0,c.Z)((function e(t,n){s(this,e),this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(t))})),xv=function(){function e(){s(this,e)}return(0,c.Z)(e,[{key:"getToken",value:function(){return Promise.resolve(null)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(uv.UNAUTHENTICATED)}))}},{key:"shutdown",value:function(){}}]),e}(),_v=function(){function e(t){s(this,e),this.token=t,this.changeListener=null}return(0,c.Z)(e,[{key:"getToken",value:function(){return Promise.resolve(this.token)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){var n=this;this.changeListener=t,e.enqueueRetryable((function(){return t(n.token.user)}))}},{key:"shutdown",value:function(){this.changeListener=null}}]),e}(),Iv=function(){function e(t){s(this,e),this.t=t,this.currentUser=uv.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}return(0,c.Z)(e,[{key:"start",value:function(e,t){var n=this,r=this.i,i=function(e){return n.i!==r?(r=n.i,t(e)):Promise.resolve()},a=new bv;this.o=function(){n.i++,n.currentUser=n.u(),a.resolve(),a=new bv,e.enqueueRetryable((function(){return i(n.currentUser)}))};var o=function(){var t=a;e.enqueueRetryable(Je($e().mark((function e(){return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.promise;case 2:return e.next=4,i(n.currentUser);case 4:case"end":return e.stop()}}),e)}))))},u=function(e){fv("FirebaseAuthCredentialsProvider","Auth detected"),n.auth=e,n.auth.addAuthTokenListener(n.o),o()};this.t.onInit((function(e){return u(e)})),setTimeout((function(){if(!n.auth){var e=n.t.getImmediate({optional:!0});e?u(e):(fv("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new bv)}}),0),o()}},{key:"getToken",value:function(){var e=this,t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return e.i!==t?(fv("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),e.getToken()):n?(mv("string"==typeof n.accessToken),new wv(n.accessToken,e.currentUser)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.auth&&this.auth.removeAuthTokenListener(this.o)}},{key:"u",value:function(){var e=this.auth&&this.auth.getUid();return mv(null===e||"string"==typeof e),new uv(e)}}]),e}(),Sv=function(){function e(t,n,r){s(this,e),this.h=t,this.l=n,this.m=r,this.type="FirstParty",this.user=uv.FIRST_PARTY,this.g=new Map}return(0,c.Z)(e,[{key:"p",value:function(){return this.m?this.m():null}},{key:"headers",get:function(){this.g.set("X-Goog-AuthUser",this.h);var e=this.p();return e&&this.g.set("Authorization",e),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}}]),e}(),Ev=function(){function e(t,n,r){s(this,e),this.h=t,this.l=n,this.m=r}return(0,c.Z)(e,[{key:"getToken",value:function(){return Promise.resolve(new Sv(this.h,this.l,this.m))}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(uv.FIRST_PARTY)}))}},{key:"shutdown",value:function(){}},{key:"invalidateToken",value:function(){}}]),e}(),Tv=(0,c.Z)((function e(t){s(this,e),this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)})),Cv=function(){function e(t){s(this,e),this.I=t,this.forceRefresh=!1,this.appCheck=null,this.T=null}return(0,c.Z)(e,[{key:"start",value:function(e,t){var n=this,r=function(e){null!=e.error&&fv("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));var r=e.token!==n.T;return n.T=e.token,fv("FirebaseAppCheckTokenProvider","Received ".concat(r?"new":"existing"," token.")),r?t(e.token):Promise.resolve()};this.o=function(t){e.enqueueRetryable((function(){return r(t)}))};var i=function(e){fv("FirebaseAppCheckTokenProvider","AppCheck detected"),n.appCheck=e,n.appCheck.addTokenListener(n.o)};this.I.onInit((function(e){return i(e)})),setTimeout((function(){if(!n.appCheck){var e=n.I.getImmediate({optional:!0});e?i(e):fv("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}},{key:"getToken",value:function(){var e=this,t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((function(t){return t?(mv("string"==typeof t.token),e.T=t.token,new Tv(t.token)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}]),e}();function Av(e){var t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(var r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}var Nv=function(){function e(){s(this,e)}return(0,c.Z)(e,null,[{key:"A",value:function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(256/62),n="";n.length<20;)for(var r=Av(40),i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%62));return n}}]),e}();function Rv(e,t){return e<t?-1:e>t?1:0}function Pv(e,t,n){return e.length===t.length&&e.every((function(e,r){return n(e,t[r])}))}function Ov(e){return e+"\0"}var Dv=function(){function e(t,n){if(s(this,e),this.seconds=t,this.nanoseconds=n,n<0)throw new kv(gv.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new kv(gv.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<-62135596800)throw new kv(gv.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new kv(gv.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return(0,c.Z)(e,[{key:"toDate",value:function(){return new Date(this.toMillis())}},{key:"toMillis",value:function(){return 1e3*this.seconds+this.nanoseconds/1e6}},{key:"_compareTo",value:function(e){return this.seconds===e.seconds?Rv(this.nanoseconds,e.nanoseconds):Rv(this.seconds,e.seconds)}},{key:"isEqual",value:function(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}},{key:"toString",value:function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}},{key:"toJSON",value:function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}},{key:"valueOf",value:function(){var e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}],[{key:"now",value:function(){return e.fromMillis(Date.now())}},{key:"fromDate",value:function(t){return e.fromMillis(t.getTime())}},{key:"fromMillis",value:function(t){var n=Math.floor(t/1e3);return new e(n,Math.floor(1e6*(t-1e3*n)))}}]),e}(),Lv=function(){function e(t){s(this,e),this.timestamp=t}return(0,c.Z)(e,[{key:"compareTo",value:function(e){return this.timestamp._compareTo(e.timestamp)}},{key:"isEqual",value:function(e){return this.timestamp.isEqual(e.timestamp)}},{key:"toMicroseconds",value:function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}},{key:"toString",value:function(){return"SnapshotVersion("+this.timestamp.toString()+")"}},{key:"toTimestamp",value:function(){return this.timestamp}}],[{key:"fromTimestamp",value:function(t){return new e(t)}},{key:"min",value:function(){return new e(new Dv(0,0))}},{key:"max",value:function(){return new e(new Dv(253402300799,999999999))}}]),e}(),Mv=function(){function e(t,n,r){s(this,e),void 0===n?n=0:n>t.length&&vv(),void 0===r?r=t.length-n:r>t.length-n&&vv(),this.segments=t,this.offset=n,this.len=r}return(0,c.Z)(e,[{key:"length",get:function(){return this.len}},{key:"isEqual",value:function(t){return 0===e.comparator(this,t)}},{key:"child",value:function(t){var n=this.segments.slice(this.offset,this.limit());return t instanceof e?t.forEach((function(e){n.push(e)})):n.push(t),this.construct(n)}},{key:"limit",value:function(){return this.offset+this.length}},{key:"popFirst",value:function(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}},{key:"popLast",value:function(){return this.construct(this.segments,this.offset,this.length-1)}},{key:"firstSegment",value:function(){return this.segments[this.offset]}},{key:"lastSegment",value:function(){return this.get(this.length-1)}},{key:"get",value:function(e){return this.segments[this.offset+e]}},{key:"isEmpty",value:function(){return 0===this.length}},{key:"isPrefixOf",value:function(e){if(e.length<this.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"isImmediateParentOf",value:function(e){if(this.length+1!==e.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"forEach",value:function(e){for(var t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}},{key:"toArray",value:function(){return this.segments.slice(this.offset,this.limit())}}],[{key:"comparator",value:function(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++){var i=e.get(r),a=t.get(r);if(i<a)return-1;if(i>a)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}]),e}(),Fv=function(e){f(n,e);var t=m(n);function n(){return s(this,n),t.apply(this,arguments)}return(0,c.Z)(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().join("/")}},{key:"toString",value:function(){return this.canonicalString()}}],[{key:"fromString",value:function(){for(var e=[],t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];for(var a=0,o=r;a<o.length;a++){var s=o[a];if(s.indexOf("//")>=0)throw new kv(gv.INVALID_ARGUMENT,"Invalid segment (".concat(s,"). Paths must not contain // in them."));e.push.apply(e,(0,u.Z)(s.split("/").filter((function(e){return e.length>0}))))}return new n(e)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(Mv),jv=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Uv=function(e){f(n,e);var t=m(n);function n(){return s(this,n),t.apply(this,arguments)}return(0,c.Z)(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().map((function(e){return e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e})).join(".")}},{key:"toString",value:function(){return this.canonicalString()}},{key:"isKeyField",value:function(){return 1===this.length&&"__name__"===this.get(0)}}],[{key:"isValidIdentifier",value:function(e){return jv.test(e)}},{key:"keyField",value:function(){return new n(["__name__"])}},{key:"fromServerFormat",value:function(e){for(var t=[],r="",i=0,a=function(){if(0===r.length)throw new kv(gv.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(r),r=""},o=!1;i<e.length;){var u=e[i];if("\\"===u){if(i+1===e.length)throw new kv(gv.INVALID_ARGUMENT,"Path has trailing escape character: "+e);var s=e[i+1];if("\\"!==s&&"."!==s&&"`"!==s)throw new kv(gv.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=s,i+=2}else"`"===u?(o=!o,i++):"."!==u||o?(r+=u,i++):(a(),i++)}if(a(),o)throw new kv(gv.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(Mv),Vv=function(){function e(t){s(this,e),this.path=t}return(0,c.Z)(e,[{key:"collectionGroup",get:function(){return this.path.popLast().lastSegment()}},{key:"hasCollectionId",value:function(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}},{key:"getCollectionGroup",value:function(){return this.path.get(this.path.length-2)}},{key:"getCollectionPath",value:function(){return this.path.popLast()}},{key:"isEqual",value:function(e){return null!==e&&0===Fv.comparator(this.path,e.path)}},{key:"toString",value:function(){return this.path.toString()}}],[{key:"fromPath",value:function(t){return new e(Fv.fromString(t))}},{key:"fromName",value:function(t){return new e(Fv.fromString(t).popFirst(5))}},{key:"empty",value:function(){return new e(Fv.emptyPath())}},{key:"comparator",value:function(e,t){return Fv.comparator(e.path,t.path)}},{key:"isDocumentKey",value:function(e){return e.length%2==0}},{key:"fromSegments",value:function(t){return new e(new Fv(t.slice()))}}]),e}(),Zv=(0,c.Z)((function e(t,n,r,i){s(this,e),this.indexId=t,this.collectionGroup=n,this.fields=r,this.indexState=i}));function zv(e){return e.fields.find((function(e){return 2===e.kind}))}function Bv(e){return e.fields.filter((function(e){return 2!==e.kind}))}Zv.UNKNOWN_ID=-1;var qv=(0,c.Z)((function e(t,n){s(this,e),this.fieldPath=t,this.kind=n}));var Gv=function(){function e(t,n){s(this,e),this.sequenceNumber=t,this.offset=n}return(0,c.Z)(e,null,[{key:"empty",value:function(){return new e(0,Hv.min())}}]),e}();function Kv(e,t){var n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=Lv.fromTimestamp(1e9===r?new Dv(n+1,0):new Dv(n,r));return new Hv(i,Vv.empty(),t)}function Wv(e){return new Hv(e.readTime,e.key,-1)}var Hv=function(){function e(t,n,r){s(this,e),this.readTime=t,this.documentKey=n,this.largestBatchId=r}return(0,c.Z)(e,null,[{key:"min",value:function(){return new e(Lv.min(),Vv.empty(),-1)}},{key:"max",value:function(){return new e(Lv.max(),Vv.empty(),-1)}}]),e}();function Qv(e,t){var n=e.readTime.compareTo(t.readTime);return 0!==n?n:0!==(n=Vv.comparator(e.documentKey,t.documentKey))?n:Rv(e.largestBatchId,t.largestBatchId)}var Yv="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",$v=function(){function e(){s(this,e),this.onCommittedListeners=[]}return(0,c.Z)(e,[{key:"addOnCommittedListener",value:function(e){this.onCommittedListeners.push(e)}},{key:"raiseOnCommittedEvent",value:function(){this.onCommittedListeners.forEach((function(e){return e()}))}}]),e}();function Xv(e){return Jv.apply(this,arguments)}function Jv(){return(Jv=Je($e().mark((function e(t){return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.code===gv.FAILED_PRECONDITION&&t.message===Yv){e.next=2;break}throw t;case 2:fv("LocalStore","Unexpectedly lost primary lease");case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var em=function(){function e(t){var n=this;s(this,e),this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((function(e){n.isDone=!0,n.result=e,n.nextCallback&&n.nextCallback(e)}),(function(e){n.isDone=!0,n.error=e,n.catchCallback&&n.catchCallback(e)}))}return(0,c.Z)(e,[{key:"catch",value:function(e){return this.next(void 0,e)}},{key:"next",value:function(t,n){var r=this;return this.callbackAttached&&vv(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new e((function(e,i){r.nextCallback=function(n){r.wrapSuccess(t,n).next(e,i)},r.catchCallback=function(t){r.wrapFailure(n,t).next(e,i)}}))}},{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.next(t,n)}))}},{key:"wrapUserFunction",value:function(t){try{var n=t();return n instanceof e?n:e.resolve(n)}catch(t){return e.reject(t)}}},{key:"wrapSuccess",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.resolve(n)}},{key:"wrapFailure",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.reject(n)}}],[{key:"resolve",value:function(t){return new e((function(e,n){e(t)}))}},{key:"reject",value:function(t){return new e((function(e,n){n(t)}))}},{key:"waitFor",value:function(t){return new e((function(e,n){var r=0,i=0,a=!1;t.forEach((function(t){++r,t.next((function(){++i,a&&i===r&&e()}),(function(e){return n(e)}))})),a=!0,i===r&&e()}))}},{key:"or",value:function(t){var n,r=e.resolve(!1),i=S(t);try{var a=function(){var t=n.value;r=r.next((function(n){return n?e.resolve(n):t()}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return r}},{key:"forEach",value:function(e,t){var n=this,r=[];return e.forEach((function(e,i){r.push(t.call(n,e,i))})),this.waitFor(r)}},{key:"mapArray",value:function(t,n){return new e((function(e,r){for(var i=t.length,a=new Array(i),o=0,u=function(){var u=s;n(t[u]).next((function(t){a[u]=t,++o===i&&e(a)}),(function(e){return r(e)}))},s=0;s<i;s++)u()}))}},{key:"doWhile",value:function(t,n){return new e((function(e,r){!function i(){!0===t()?n().next((function(){i()}),r):e()}()}))}}]),e}(),tm=function(){function e(t,n){var r=this;s(this,e),this.action=t,this.transaction=n,this.aborted=!1,this.v=new bv,this.transaction.oncomplete=function(){r.v.resolve()},this.transaction.onabort=function(){n.error?r.v.reject(new im(t,n.error)):r.v.resolve()},this.transaction.onerror=function(e){var n=cm(e.target.error);r.v.reject(new im(t,n))}}return(0,c.Z)(e,[{key:"R",get:function(){return this.v.promise}},{key:"abort",value:function(e){e&&this.v.reject(e),this.aborted||(fv("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}},{key:"P",value:function(){var e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}},{key:"store",value:function(e){var t=this.transaction.objectStore(e);return new om(t)}}],[{key:"open",value:function(t,n,r,i){try{return new e(n,t.transaction(i,r))}catch(t){throw new im(n,t)}}}]),e}(),nm=function(){function e(t,n,r){s(this,e),this.name=t,this.version=n,this.V=r,12.2===e.S(ft())&&hv("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return(0,c.Z)(e,[{key:"$",value:function(){var e=Je($e().mark((function e(t){var n=this;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.db,e.t0){e.next=6;break}return fv("SimpleDb","Opening database:",this.name),e.next=5,new Promise((function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){var n=t.target.result;e(n)},i.onblocked=function(){r(new im(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;"VersionError"===n.name?r(new kv(gv.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===n.name?r(new kv(gv.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+n)):r(new im(t,n))},i.onupgradeneeded=function(e){fv("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',e.oldVersion);var t=e.target.result;n.V.O(t,i.transaction,e.oldVersion,n.version).next((function(){fv("SimpleDb","Database upgrade to version "+n.version+" complete")}))}}));case 5:this.db=e.sent;case 6:return this.F&&(this.db.onversionchange=function(e){return n.F(e)}),e.abrupt("return",this.db);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"B",value:function(e){this.F=e,this.db&&(this.db.onversionchange=function(t){return e(t)})}},{key:"runTransaction",value:function(){var e=Je($e().mark((function e(t,n,r,i){var a,o,u,s,c=this;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a="readonly"===n,o=0,u=$e().mark((function e(){var n,u,s,l;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return++o,e.prev=1,e.next=4,c.$(t);case 4:return c.db=e.sent,n=tm.open(c.db,t,a?"readonly":"readwrite",r),u=i(n).next((function(e){return n.P(),e})).catch((function(e){return n.abort(e),em.reject(e)})).toPromise(),u.catch((function(){})),e.next=9,n.R;case 9:return e.t0=u,e.abrupt("return",{v:e.t0});case 13:if(e.prev=13,e.t1=e.catch(1),s=e.t1,l="FirebaseError"!==s.name&&o<3,fv("SimpleDb","Transaction failed with error:",s.message,"Retrying:",l),c.close(),l){e.next=18;break}return e.abrupt("return",{v:Promise.reject(s)});case 18:case"end":return e.stop()}}),e,null,[[1,13]])}));case 3:return e.delegateYield(u(),"t0",4);case 4:if("object"!==typeof(s=e.t0)){e.next=7;break}return e.abrupt("return",s.v);case 7:e.next=3;break;case 9:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"close",value:function(){this.db&&this.db.close(),this.db=void 0}}],[{key:"delete",value:function(e){return fv("SimpleDb","Removing database:",e),um(window.indexedDB.deleteDatabase(e)).toPromise()}},{key:"D",value:function(){if(!mt())return!1;if(e.C())return!0;var t=ft(),n=e.S(t),r=0<n&&n<10,i=e.N(t),a=0<i&&i<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||r||a)}},{key:"C",value:function(){var e;return"undefined"!=typeof process&&"YES"===(null===(e={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0})||void 0===e?void 0:e.k)}},{key:"M",value:function(e,t){return e.store(t)}},{key:"S",value:function(e){var t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}},{key:"N",value:function(e){var t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}}]),e}(),rm=function(){function e(t){s(this,e),this.L=t,this.q=!1,this.U=null}return(0,c.Z)(e,[{key:"isDone",get:function(){return this.q}},{key:"K",get:function(){return this.U}},{key:"cursor",set:function(e){this.L=e}},{key:"done",value:function(){this.q=!0}},{key:"G",value:function(e){this.U=e}},{key:"delete",value:function(){return um(this.L.delete())}}]),e}(),im=function(e){f(n,e);var t=m(n);function n(e,r){var i;return s(this,n),(i=t.call(this,gv.UNAVAILABLE,"IndexedDB transaction '".concat(e,"' failed: ").concat(r))).name="IndexedDbTransactionError",i}return(0,c.Z)(n)}(kv);function am(e){return"IndexedDbTransactionError"===e.name}var om=function(){function e(t){s(this,e),this.store=t}return(0,c.Z)(e,[{key:"put",value:function(e,t){var n;return void 0!==t?(fv("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(fv("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),um(n)}},{key:"add",value:function(e){return fv("SimpleDb","ADD",this.store.name,e,e),um(this.store.add(e))}},{key:"get",value:function(e){var t=this;return um(this.store.get(e)).next((function(n){return void 0===n&&(n=null),fv("SimpleDb","GET",t.store.name,e,n),n}))}},{key:"delete",value:function(e){return fv("SimpleDb","DELETE",this.store.name,e),um(this.store.delete(e))}},{key:"count",value:function(){return fv("SimpleDb","COUNT",this.store.name),um(this.store.count())}},{key:"j",value:function(e,t){var n=this.options(e,t);if(n.index||"function"!=typeof this.store.getAll){var r=this.cursor(n),i=[];return this.W(r,(function(e,t){i.push(t)})).next((function(){return i}))}var a=this.store.getAll(n.range);return new em((function(e,t){a.onerror=function(e){t(e.target.error)},a.onsuccess=function(t){e(t.target.result)}}))}},{key:"H",value:function(e,t){var n=this.store.getAll(e,null===t?void 0:t);return new em((function(e,t){n.onerror=function(e){t(e.target.error)},n.onsuccess=function(t){e(t.target.result)}}))}},{key:"J",value:function(e,t){fv("SimpleDb","DELETE ALL",this.store.name);var n=this.options(e,t);n.Y=!1;var r=this.cursor(n);return this.W(r,(function(e,t,n){return n.delete()}))}},{key:"X",value:function(e,t){var n;t?n=e:(n={},t=e);var r=this.cursor(n);return this.W(r,t)}},{key:"Z",value:function(e){var t=this.cursor({});return new em((function(n,r){t.onerror=function(e){var t=cm(e.target.error);r(t)},t.onsuccess=function(t){var r=t.target.result;r?e(r.primaryKey,r.value).next((function(e){e?r.continue():n()})):n()}}))}},{key:"W",value:function(e,t){var n=[];return new em((function(r,i){e.onerror=function(e){i(e.target.error)},e.onsuccess=function(e){var i=e.target.result;if(i){var a=new rm(i),o=t(i.primaryKey,i.value,a);if(o instanceof em){var u=o.catch((function(e){return a.done(),em.reject(e)}));n.push(u)}a.isDone?r():null===a.K?i.continue():i.continue(a.K)}else r()}})).next((function(){return em.waitFor(n)}))}},{key:"options",value:function(e,t){var n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}}},{key:"cursor",value:function(e){var t="next";if(e.reverse&&(t="prev"),e.index){var n=this.store.index(e.index);return e.Y?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}]),e}();function um(e){return new em((function(t,n){e.onsuccess=function(e){var n=e.target.result;t(n)},e.onerror=function(e){var t=cm(e.target.error);n(t)}}))}var sm=!1;function cm(e){var t=nm.S(ft());if(t>=12.2&&t<13){var n="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(n)>=0){var r=new kv("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '".concat(n,"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround."));return sm||(sm=!0,setTimeout((function(){throw r}),0)),r}}return e}var lm=function(){function e(t,n){s(this,e),this.asyncQueue=t,this.tt=n,this.task=null}return(0,c.Z)(e,[{key:"start",value:function(){this.et(15e3)}},{key:"stop",value:function(){this.task&&(this.task.cancel(),this.task=null)}},{key:"started",get:function(){return null!==this.task}},{key:"et",value:function(e){var t=this;fv("IndexBackiller","Scheduled in ".concat(e,"ms")),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,Je($e().mark((function e(){return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.task=null,e.prev=1,e.t0=fv,e.t1="Documents written: ",e.next=6,t.tt.nt();case 6:e.t2=e.sent,e.t3=e.t1.concat.call(e.t1,e.t2),(0,e.t0)("IndexBackiller",e.t3),e.next=19;break;case 11:if(e.prev=11,e.t4=e.catch(1),!am(e.t4)){e.next=17;break}fv("IndexBackiller","Ignoring IndexedDB error during index backfill: ",e.t4),e.next=19;break;case 17:return e.next=19,Xv(e.t4);case 19:return e.next=21,t.et(6e4);case 21:case"end":return e.stop()}}),e,null,[[1,11]])}))))}}]),e}(),fm=function(){function e(t,n){s(this,e),this.localStore=t,this.persistence=n}return(0,c.Z)(e,[{key:"nt",value:function(){var e=Je($e().mark((function e(){var t,n=this,r=arguments;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:50,e.abrupt("return",this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(function(e){return n.st(e,t)})));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"st",value:function(e,t){var n=this,r=new Set,i=t,a=!0;return em.doWhile((function(){return!0===a&&i>0}),(function(){return n.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((function(t){if(null!==t&&!r.has(t))return fv("IndexBackiller","Processing collection: ".concat(t)),n.it(e,t,i).next((function(e){i-=e,r.add(t)}));a=!1}))})).next((function(){return t-i}))}},{key:"it",value:function(e,t,n){var r=this;return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((function(i){return r.localStore.localDocuments.getNextDocuments(e,t,i,n).next((function(n){var a=n.changes;return r.localStore.indexManager.updateIndexEntries(e,a).next((function(){return r.rt(i,n)})).next((function(n){return fv("IndexBackiller","Updating offset: ".concat(n)),r.localStore.indexManager.updateCollectionGroup(e,t,n)})).next((function(){return a.size}))}))}))}},{key:"rt",value:function(e,t){var n=e;return t.changes.forEach((function(e,t){var r=Wv(t);Qv(r,n)>0&&(n=r)})),new Hv(n.readTime,n.documentKey,Math.max(t.batchId,e.largestBatchId))}}]),e}(),hm=function(){function e(t,n){var r=this;s(this,e),this.previousValue=t,n&&(n.sequenceNumberHandler=function(e){return r.ot(e)},this.ut=function(e){return n.writeSequenceNumber(e)})}return(0,c.Z)(e,[{key:"ot",value:function(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}},{key:"next",value:function(){var e=++this.previousValue;return this.ut&&this.ut(e),e}}]),e}();function dm(e){return null==e}function pm(e){return 0===e&&1/e==-1/0}function vm(e){return"number"==typeof e&&Number.isInteger(e)&&!pm(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}function mm(e){for(var t="",n=0;n<e.length;n++)t.length>0&&(t=gm(t)),t=ym(e.get(n),t);return gm(t)}function ym(e,t){for(var n=t,r=e.length,i=0;i<r;i++){var a=e.charAt(i);switch(a){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=a}}return n}function gm(e){return e+"\x01\x01"}function km(e){var t=e.length;if(mv(t>=2),2===t)return mv("\x01"===e.charAt(0)&&"\x01"===e.charAt(1)),Fv.emptyPath();for(var n=t-2,r=[],i="",a=0;a<t;){var o=e.indexOf("\x01",a);switch((o<0||o>n)&&vv(),e.charAt(o+1)){case"\x01":var u=e.substring(a,o),s=void 0;0===i.length?s=u:(s=i+=u,i=""),r.push(s);break;case"\x10":i+=e.substring(a,o),i+="\0";break;case"\x11":i+=e.substring(a,o+1);break;default:vv()}a=o+2}return new Fv(r)}hm.ct=-1;var bm=["userId","batchId"];function wm(e,t){return[e,mm(t)]}function xm(e,t,n){return[e,mm(t),n]}var _m={},Im=["prefixPath","collectionGroup","readTime","documentId"],Sm=["prefixPath","collectionGroup","documentId"],Em=["collectionGroup","readTime","prefixPath","documentId"],Tm=["canonicalId","targetId"],Cm=["targetId","path"],Am=["path","targetId"],Nm=["collectionId","parent"],Rm=["indexId","uid"],Pm=["uid","sequenceNumber"],Om=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Dm=["indexId","uid","orderedDocumentKey"],Lm=["userId","collectionPath","documentId"],Mm=["userId","collectionPath","largestBatchId"],Fm=["userId","collectionGroup","largestBatchId"],jm=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments"].concat(["clientMetadata"]).concat(["remoteDocumentGlobal"]).concat(["collectionParents"]).concat(["bundles","namedQueries"]),Um=[].concat((0,u.Z)(jm),["documentOverlays"]),Vm=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Zm=Vm,zm=[].concat(Zm,["indexConfiguration","indexState","indexEntries"]),Bm=function(e){f(n,e);var t=m(n);function n(e,r){var i;return s(this,n),(i=t.call(this)).ht=e,i.currentSequenceNumber=r,i}return(0,c.Z)(n)}($v);function qm(e,t){var n=yv(e);return nm.M(n.ht,t)}function Gm(e){var t=0;for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Km(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function Wm(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}var Hm=function(){function e(t,n){s(this,e),this.comparator=t,this.root=n||Ym.EMPTY}return(0,c.Z)(e,[{key:"insert",value:function(t,n){return new e(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,Ym.BLACK,null,null))}},{key:"remove",value:function(t){return new e(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Ym.BLACK,null,null))}},{key:"get",value:function(e){for(var t=this.root;!t.isEmpty();){var n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}},{key:"indexOf",value:function(e){for(var t=0,n=this.root;!n.isEmpty();){var r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}},{key:"isEmpty",value:function(){return this.root.isEmpty()}},{key:"size",get:function(){return this.root.size}},{key:"minKey",value:function(){return this.root.minKey()}},{key:"maxKey",value:function(){return this.root.maxKey()}},{key:"inorderTraversal",value:function(e){return this.root.inorderTraversal(e)}},{key:"forEach",value:function(e){this.inorderTraversal((function(t,n){return e(t,n),!1}))}},{key:"toString",value:function(){var e=[];return this.inorderTraversal((function(t,n){return e.push("".concat(t,":").concat(n)),!1})),"{".concat(e.join(", "),"}")}},{key:"reverseTraversal",value:function(e){return this.root.reverseTraversal(e)}},{key:"getIterator",value:function(){return new Qm(this.root,null,this.comparator,!1)}},{key:"getIteratorFrom",value:function(e){return new Qm(this.root,e,this.comparator,!1)}},{key:"getReverseIterator",value:function(){return new Qm(this.root,null,this.comparator,!0)}},{key:"getReverseIteratorFrom",value:function(e){return new Qm(this.root,e,this.comparator,!0)}}]),e}(),Qm=function(){function e(t,n,r,i){s(this,e),this.isReverse=i,this.nodeStack=[];for(var a=1;!t.isEmpty();)if(a=n?r(t.key,n):1,n&&i&&(a*=-1),a<0)t=this.isReverse?t.left:t.right;else{if(0===a){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return(0,c.Z)(e,[{key:"getNext",value:function(){var e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}},{key:"hasNext",value:function(){return this.nodeStack.length>0}},{key:"peek",value:function(){if(0===this.nodeStack.length)return null;var e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}]),e}(),Ym=function(){function e(t,n,r,i,a){s(this,e),this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:e.EMPTY,this.right=null!=a?a:e.EMPTY,this.size=this.left.size+1+this.right.size}return(0,c.Z)(e,[{key:"copy",value:function(t,n,r,i,a){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=a?a:this.right)}},{key:"isEmpty",value:function(){return!1}},{key:"inorderTraversal",value:function(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}},{key:"min",value:function(){return this.left.isEmpty()?this:this.left.min()}},{key:"minKey",value:function(){return this.min().key}},{key:"maxKey",value:function(){return this.right.isEmpty()?this.key:this.right.maxKey()}},{key:"insert",value:function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp()}},{key:"removeMin",value:function(){if(this.left.isEmpty())return e.EMPTY;var t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),(t=t.copy(null,null,null,t.left.removeMin(),null)).fixUp()}},{key:"remove",value:function(t,n){var r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(t,i.key)){if(i.right.isEmpty())return e.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()}},{key:"isRed",value:function(){return this.color}},{key:"fixUp",value:function(){var e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}},{key:"moveRedLeft",value:function(){var e=this.colorFlip();return e.right.left.isRed()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight())).rotateLeft()).colorFlip()),e}},{key:"moveRedRight",value:function(){var e=this.colorFlip();return e.left.left.isRed()&&(e=(e=e.rotateRight()).colorFlip()),e}},{key:"rotateLeft",value:function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}},{key:"rotateRight",value:function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}},{key:"colorFlip",value:function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}},{key:"checkMaxDepth",value:function(){var e=this.check();return Math.pow(2,e)<=this.size+1}},{key:"check",value:function(){if(this.isRed()&&this.left.isRed())throw vv();if(this.right.isRed())throw vv();var e=this.left.check();if(e!==this.right.check())throw vv();return e+(this.isRed()?0:1)}}]),e}();Ym.EMPTY=null,Ym.RED=!0,Ym.BLACK=!1,Ym.EMPTY=new(function(){function e(){s(this,e),this.size=0}return(0,c.Z)(e,[{key:"key",get:function(){throw vv()}},{key:"value",get:function(){throw vv()}},{key:"color",get:function(){throw vv()}},{key:"left",get:function(){throw vv()}},{key:"right",get:function(){throw vv()}},{key:"copy",value:function(e,t,n,r,i){return this}},{key:"insert",value:function(e,t,n){return new Ym(e,t)}},{key:"remove",value:function(e,t){return this}},{key:"isEmpty",value:function(){return!0}},{key:"inorderTraversal",value:function(e){return!1}},{key:"reverseTraversal",value:function(e){return!1}},{key:"minKey",value:function(){return null}},{key:"maxKey",value:function(){return null}},{key:"isRed",value:function(){return!1}},{key:"checkMaxDepth",value:function(){return!0}},{key:"check",value:function(){return 0}}]),e}());var $m=function(){function e(t){s(this,e),this.comparator=t,this.data=new Hm(this.comparator)}return(0,c.Z)(e,[{key:"has",value:function(e){return null!==this.data.get(e)}},{key:"first",value:function(){return this.data.minKey()}},{key:"last",value:function(){return this.data.maxKey()}},{key:"size",get:function(){return this.data.size}},{key:"indexOf",value:function(e){return this.data.indexOf(e)}},{key:"forEach",value:function(e){this.data.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"forEachInRange",value:function(e,t){for(var n=this.data.getIteratorFrom(e[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}},{key:"forEachWhile",value:function(e,t){var n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}},{key:"firstAfterOrEqual",value:function(e){var t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}},{key:"getIterator",value:function(){return new Xm(this.data.getIterator())}},{key:"getIteratorFrom",value:function(e){return new Xm(this.data.getIteratorFrom(e))}},{key:"add",value:function(e){return this.copy(this.data.remove(e).insert(e,!0))}},{key:"delete",value:function(e){return this.has(e)?this.copy(this.data.remove(e)):this}},{key:"isEmpty",value:function(){return this.data.isEmpty()}},{key:"unionWith",value:function(e){var t=this;return t.size<e.size&&(t=e,e=this),e.forEach((function(e){t=t.add(e)})),t}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.data.getIterator(),r=t.data.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(0!==this.comparator(i,a))return!1}return!0}},{key:"toArray",value:function(){var e=[];return this.forEach((function(t){e.push(t)})),e}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){return e.push(t)})),"SortedSet("+e.toString()+")"}},{key:"copy",value:function(t){var n=new e(this.comparator);return n.data=t,n}}]),e}(),Xm=function(){function e(t){s(this,e),this.iter=t}return(0,c.Z)(e,[{key:"getNext",value:function(){return this.iter.getNext().key}},{key:"hasNext",value:function(){return this.iter.hasNext()}}]),e}();function Jm(e){return e.hasNext()?e.getNext():void 0}var ey=function(){function e(t){s(this,e),this.fields=t,t.sort(Uv.comparator)}return(0,c.Z)(e,[{key:"unionWith",value:function(t){var n,r=new $m(Uv.comparator),i=S(this.fields);try{for(i.s();!(n=i.n()).done;){var a=n.value;r=r.add(a)}}catch(c){i.e(c)}finally{i.f()}var o,u=S(t);try{for(u.s();!(o=u.n()).done;){var s=o.value;r=r.add(s)}}catch(c){u.e(c)}finally{u.f()}return new e(r.toArray())}},{key:"covers",value:function(e){var t,n=S(this.fields);try{for(n.s();!(t=n.n()).done;){if(t.value.isPrefixOf(e))return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"isEqual",value:function(e){return Pv(this.fields,e.fields,(function(e,t){return e.isEqual(t)}))}}],[{key:"empty",value:function(){return new e([])}}]),e}(),ty=function(e){f(n,e);var t=m(n);function n(){var e;return s(this,n),(e=t.apply(this,arguments)).name="Base64DecodeError",e}return(0,c.Z)(n)}(g(Error));var ny=function(e){function t(e){s(this,t),this.binaryString=e}return(0,c.Z)(t,[{key:e,value:function(){var e=this,t=0;return{next:function(){return t<e.binaryString.length?{value:e.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}}},{key:"toBase64",value:function(){return e=this.binaryString,btoa(e);var e}},{key:"toUint8Array",value:function(){return function(e){for(var t=new Uint8Array(e.length),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}},{key:"approximateByteSize",value:function(){return 2*this.binaryString.length}},{key:"compareTo",value:function(e){return Rv(this.binaryString,e.binaryString)}},{key:"isEqual",value:function(e){return this.binaryString===e.binaryString}}],[{key:"fromBase64String",value:function(e){var n=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new ty("Invalid base64 string: "+e):e}}(e);return new t(n)}},{key:"fromUint8Array",value:function(e){var n=function(e){for(var t="",n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new t(n)}}]),t}(Symbol.iterator);ny.EMPTY_BYTE_STRING=new ny("");var ry=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function iy(e){if(mv(!!e),"string"==typeof e){var t=0,n=ry.exec(e);if(mv(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),t=Number(r)}var i=new Date(e);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:ay(e.seconds),nanos:ay(e.nanos)}}function ay(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function oy(e){return"string"==typeof e?ny.fromBase64String(e):ny.fromUint8Array(e)}function uy(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function sy(e){var t=e.mapValue.fields.__previous_value__;return uy(t)?sy(t):t}function cy(e){var t=iy(e.mapValue.fields.__local_write_time__.timestampValue);return new Dv(t.seconds,t.nanos)}var ly=(0,c.Z)((function e(t,n,r,i,a,o,u,c,l){s(this,e),this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=o,this.autoDetectLongPolling=u,this.longPollingOptions=c,this.useFetchStreams=l})),fy=function(){function e(t,n){s(this,e),this.projectId=t,this.database=n||"(default)"}return(0,c.Z)(e,[{key:"isDefaultDatabase",get:function(){return"(default)"===this.database}},{key:"isEqual",value:function(t){return t instanceof e&&t.projectId===this.projectId&&t.database===this.database}}],[{key:"empty",value:function(){return new e("","")}}]),e}(),hy={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},dy={nullValue:"NULL_VALUE"};function py(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?uy(e)?4:Cy(e)?9007199254740991:10:vv()}function vy(e,t){if(e===t)return!0;var n=py(e);if(n!==py(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return cy(e).isEqual(cy(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;var n=iy(e.timestampValue),r=iy(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return oy(e.bytesValue).isEqual(oy(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return ay(e.geoPointValue.latitude)===ay(t.geoPointValue.latitude)&&ay(e.geoPointValue.longitude)===ay(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return ay(e.integerValue)===ay(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){var n=ay(e.doubleValue),r=ay(t.doubleValue);return n===r?pm(n)===pm(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return Pv(e.arrayValue.values||[],t.arrayValue.values||[],vy);case 10:return function(e,t){var n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(Gm(n)!==Gm(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!vy(n[i],r[i])))return!1;return!0}(e,t);default:return vv()}}function my(e,t){return void 0!==(e.values||[]).find((function(e){return vy(e,t)}))}function yy(e,t){if(e===t)return 0;var n=py(e),r=py(t);if(n!==r)return Rv(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Rv(e.booleanValue,t.booleanValue);case 2:return function(e,t){var n=ay(e.integerValue||e.doubleValue),r=ay(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return gy(e.timestampValue,t.timestampValue);case 4:return gy(cy(e),cy(t));case 5:return Rv(e.stringValue,t.stringValue);case 6:return function(e,t){var n=oy(e),r=oy(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){for(var n=e.split("/"),r=t.split("/"),i=0;i<n.length&&i<r.length;i++){var a=Rv(n[i],r[i]);if(0!==a)return a}return Rv(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){var n=Rv(ay(e.latitude),ay(t.latitude));return 0!==n?n:Rv(ay(e.longitude),ay(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){for(var n=e.values||[],r=t.values||[],i=0;i<n.length&&i<r.length;++i){var a=yy(n[i],r[i]);if(a)return a}return Rv(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){if(e===hy.mapValue&&t===hy.mapValue)return 0;if(e===hy.mapValue)return 1;if(t===hy.mapValue)return-1;var n=e.fields||{},r=Object.keys(n),i=t.fields||{},a=Object.keys(i);r.sort(),a.sort();for(var o=0;o<r.length&&o<a.length;++o){var u=Rv(r[o],a[o]);if(0!==u)return u;var s=yy(n[r[o]],i[a[o]]);if(0!==s)return s}return Rv(r.length,a.length)}(e.mapValue,t.mapValue);default:throw vv()}}function gy(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return Rv(e,t);var n=iy(e),r=iy(t),i=Rv(n.seconds,r.seconds);return 0!==i?i:Rv(n.nanos,r.nanos)}function ky(e){return by(e)}function by(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){var t=iy(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?oy(e.bytesValue).toBase64():"referenceValue"in e?(n=e.referenceValue,Vv.fromName(n).toString()):"geoPointValue"in e?"geo(".concat((t=e.geoPointValue).latitude,",").concat(t.longitude,")"):"arrayValue"in e?function(e){var t,n="[",r=!0,i=S(e.values||[]);try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+=by(a)}}catch(o){i.e(o)}finally{i.f()}return n+"]"}(e.arrayValue):"mapValue"in e?function(e){var t,n="{",r=!0,i=S(Object.keys(e.fields||{}).sort());try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+="".concat(a,":").concat(by(e.fields[a]))}}catch(o){i.e(o)}finally{i.f()}return n+"}"}(e.mapValue):vv();var t,n}function wy(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function xy(e){return!!e&&"integerValue"in e}function _y(e){return!!e&&"arrayValue"in e}function Iy(e){return!!e&&"nullValue"in e}function Sy(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function Ey(e){return!!e&&"mapValue"in e}function Ty(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){var t={mapValue:{fields:{}}};return Km(e.mapValue.fields,(function(e,n){return t.mapValue.fields[e]=Ty(n)})),t}if(e.arrayValue){for(var n={arrayValue:{values:[]}},r=0;r<(e.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=Ty(e.arrayValue.values[r]);return n}return Object.assign({},e)}function Cy(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}function Ay(e){return"nullValue"in e?dy:"booleanValue"in e?{booleanValue:!1}:"integerValue"in e||"doubleValue"in e?{doubleValue:NaN}:"timestampValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in e?{stringValue:""}:"bytesValue"in e?{bytesValue:""}:"referenceValue"in e?wy(fy.empty(),Vv.empty()):"geoPointValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in e?{arrayValue:{}}:"mapValue"in e?{mapValue:{}}:vv()}function Ny(e){return"nullValue"in e?{booleanValue:!1}:"booleanValue"in e?{doubleValue:NaN}:"integerValue"in e||"doubleValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in e?{stringValue:""}:"stringValue"in e?{bytesValue:""}:"bytesValue"in e?wy(fy.empty(),Vv.empty()):"referenceValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in e?{arrayValue:{}}:"arrayValue"in e?{mapValue:{}}:"mapValue"in e?hy:vv()}function Ry(e,t){var n=yy(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?-1:!e.inclusive&&t.inclusive?1:0}function Py(e,t){var n=yy(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?1:!e.inclusive&&t.inclusive?-1:0}var Oy=function(){function e(t){s(this,e),this.value=t}return(0,c.Z)(e,[{key:"field",value:function(e){if(e.isEmpty())return this.value;for(var t=this.value,n=0;n<e.length-1;++n)if(!Ey(t=(t.mapValue.fields||{})[e.get(n)]))return null;return(t=(t.mapValue.fields||{})[e.lastSegment()])||null}},{key:"set",value:function(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ty(t)}},{key:"setAll",value:function(e){var t=this,n=Uv.emptyPath(),r={},i=[];e.forEach((function(e,a){if(!n.isImmediateParentOf(a)){var o=t.getFieldsMap(n);t.applyChanges(o,r,i),r={},i=[],n=a.popLast()}e?r[a.lastSegment()]=Ty(e):i.push(a.lastSegment())}));var a=this.getFieldsMap(n);this.applyChanges(a,r,i)}},{key:"delete",value:function(e){var t=this.field(e.popLast());Ey(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}},{key:"isEqual",value:function(e){return vy(this.value,e.value)}},{key:"getFieldsMap",value:function(e){var t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(var n=0;n<e.length;++n){var r=t.mapValue.fields[e.get(n)];Ey(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}},{key:"applyChanges",value:function(e,t,n){Km(t,(function(t,n){return e[t]=n}));var r,i=S(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;delete e[a]}}catch(o){i.e(o)}finally{i.f()}}},{key:"clone",value:function(){return new e(Ty(this.value))}}],[{key:"empty",value:function(){return new e({mapValue:{}})}}]),e}();function Dy(e){var t=[];return Km(e.fields,(function(e,n){var r=new Uv([e]);if(Ey(n)){var i=Dy(n.mapValue).fields;if(0===i.length)t.push(r);else{var a,o=S(i);try{for(o.s();!(a=o.n()).done;){var u=a.value;t.push(r.child(u))}}catch(s){o.e(s)}finally{o.f()}}}else t.push(r)})),new ey(t)}var Ly=function(){function e(t,n,r,i,a,o,u){s(this,e),this.key=t,this.documentType=n,this.version=r,this.readTime=i,this.createTime=a,this.data=o,this.documentState=u}return(0,c.Z)(e,[{key:"convertToFoundDocument",value:function(e,t){return!this.createTime.isEqual(Lv.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}},{key:"convertToNoDocument",value:function(e){return this.version=e,this.documentType=2,this.data=Oy.empty(),this.documentState=0,this}},{key:"convertToUnknownDocument",value:function(e){return this.version=e,this.documentType=3,this.data=Oy.empty(),this.documentState=2,this}},{key:"setHasCommittedMutations",value:function(){return this.documentState=2,this}},{key:"setHasLocalMutations",value:function(){return this.documentState=1,this.version=Lv.min(),this}},{key:"setReadTime",value:function(e){return this.readTime=e,this}},{key:"hasLocalMutations",get:function(){return 1===this.documentState}},{key:"hasCommittedMutations",get:function(){return 2===this.documentState}},{key:"hasPendingWrites",get:function(){return this.hasLocalMutations||this.hasCommittedMutations}},{key:"isValidDocument",value:function(){return 0!==this.documentType}},{key:"isFoundDocument",value:function(){return 1===this.documentType}},{key:"isNoDocument",value:function(){return 2===this.documentType}},{key:"isUnknownDocument",value:function(){return 3===this.documentType}},{key:"isEqual",value:function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}},{key:"mutableCopy",value:function(){return new e(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}},{key:"toString",value:function(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {createTime: ").concat(this.createTime,"}), {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}],[{key:"newInvalidDocument",value:function(t){return new e(t,0,Lv.min(),Lv.min(),Lv.min(),Oy.empty(),0)}},{key:"newFoundDocument",value:function(t,n,r,i){return new e(t,1,n,Lv.min(),r,i,0)}},{key:"newNoDocument",value:function(t,n){return new e(t,2,n,Lv.min(),Lv.min(),Oy.empty(),0)}},{key:"newUnknownDocument",value:function(t,n){return new e(t,3,n,Lv.min(),Lv.min(),Oy.empty(),2)}}]),e}(),My=(0,c.Z)((function e(t,n){s(this,e),this.position=t,this.inclusive=n}));function Fy(e,t,n){for(var r=0,i=0;i<e.position.length;i++){var a=t[i],o=e.position[i];if(r=a.field.isKeyField()?Vv.comparator(Vv.fromName(o.referenceValue),n.key):yy(o,n.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return r}function jy(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(var n=0;n<e.position.length;n++)if(!vy(e.position[n],t.position[n]))return!1;return!0}var Uy=(0,c.Z)((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";s(this,e),this.field=t,this.dir=n}));function Vy(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}var Zy=(0,c.Z)((function e(){s(this,e)})),zy=function(e){f(n,e);var t=m(n);function n(e,r,i){var a;return s(this,n),(a=t.call(this)).field=e,a.op=r,a.value=i,a}return(0,c.Z)(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(yy(t,this.value)):null!==t&&py(this.value)===py(t)&&this.matchesComparison(yy(t,this.value))}},{key:"matchesComparison",value:function(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return vv()}}},{key:"isInequality",value:function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}},{key:"getFlattenedFilters",value:function(){return[this]}},{key:"getFilters",value:function(){return[this]}},{key:"getFirstInequalityField",value:function(){return this.isInequality()?this.field:null}}],[{key:"create",value:function(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new Xy(e,t,r):"array-contains"===t?new ng(e,r):"in"===t?new rg(e,r):"not-in"===t?new ig(e,r):"array-contains-any"===t?new ag(e,r):new n(e,t,r)}},{key:"createKeyFieldInFilter",value:function(e,t,n){return"in"===t?new Jy(e,n):new eg(e,n)}}]),n}(Zy),By=function(e){f(n,e);var t=m(n);function n(e,r){var i;return s(this,n),(i=t.call(this)).filters=e,i.op=r,i.lt=null,i}return(0,c.Z)(n,[{key:"matches",value:function(e){return qy(this)?void 0===this.filters.find((function(t){return!t.matches(e)})):void 0!==this.filters.find((function(t){return t.matches(e)}))}},{key:"getFlattenedFilters",value:function(){return null!==this.lt||(this.lt=this.filters.reduce((function(e,t){return e.concat(t.getFlattenedFilters())}),[])),this.lt}},{key:"getFilters",value:function(){return Object.assign([],this.filters)}},{key:"getFirstInequalityField",value:function(){var e=this.ft((function(e){return e.isInequality()}));return null!==e?e.field:null}},{key:"ft",value:function(e){var t,n=S(this.getFlattenedFilters());try{for(n.s();!(t=n.n()).done;){var r=t.value;if(e(r))return r}}catch(i){n.e(i)}finally{n.f()}return null}}],[{key:"create",value:function(e,t){return new n(e,t)}}]),n}(Zy);function qy(e){return"and"===e.op}function Gy(e){return"or"===e.op}function Ky(e){return Wy(e)&&qy(e)}function Wy(e){var t,n=S(e.filters);try{for(n.s();!(t=n.n()).done;){if(t.value instanceof By)return!1}}catch(r){n.e(r)}finally{n.f()}return!0}function Hy(e){if(e instanceof zy)return e.field.canonicalString()+e.op.toString()+ky(e.value);if(Ky(e))return e.filters.map((function(e){return Hy(e)})).join(",");var t=e.filters.map((function(e){return Hy(e)})).join(",");return"".concat(e.op,"(").concat(t,")")}function Qy(e,t){return e instanceof zy?function(e,t){return t instanceof zy&&e.op===t.op&&e.field.isEqual(t.field)&&vy(e.value,t.value)}(e,t):e instanceof By?function(e,t){return t instanceof By&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce((function(e,n,r){return e&&Qy(n,t.filters[r])}),!0)}(e,t):void vv()}function Yy(e,t){var n=e.filters.concat(t);return By.create(n,e.op)}function $y(e){return e instanceof zy?function(e){return"".concat(e.field.canonicalString()," ").concat(e.op," ").concat(ky(e.value))}(e):e instanceof By?function(e){return e.op.toString()+" {"+e.getFilters().map($y).join(" ,")+"}"}(e):"Filter"}var Xy=function(e){f(n,e);var t=m(n);function n(e,r,i){var a;return s(this,n),(a=t.call(this,e,r,i)).key=Vv.fromName(i.referenceValue),a}return(0,c.Z)(n,[{key:"matches",value:function(e){var t=Vv.comparator(e.key,this.key);return this.matchesComparison(t)}}]),n}(zy),Jy=function(e){f(n,e);var t=m(n);function n(e,r){var i;return s(this,n),(i=t.call(this,e,"in",r)).keys=tg("in",r),i}return(0,c.Z)(n,[{key:"matches",value:function(e){return this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(zy),eg=function(e){f(n,e);var t=m(n);function n(e,r){var i;return s(this,n),(i=t.call(this,e,"not-in",r)).keys=tg("not-in",r),i}return(0,c.Z)(n,[{key:"matches",value:function(e){return!this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(zy);function tg(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(e){return Vv.fromName(e.referenceValue)}))}var ng=function(e){f(n,e);var t=m(n);function n(e,r){return s(this,n),t.call(this,e,"array-contains",r)}return(0,c.Z)(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return _y(t)&&my(t.arrayValue,this.value)}}]),n}(zy),rg=function(e){f(n,e);var t=m(n);function n(e,r){return s(this,n),t.call(this,e,"in",r)}return(0,c.Z)(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return null!==t&&my(this.value.arrayValue,t)}}]),n}(zy),ig=function(e){f(n,e);var t=m(n);function n(e,r){return s(this,n),t.call(this,e,"not-in",r)}return(0,c.Z)(n,[{key:"matches",value:function(e){if(my(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var t=e.data.field(this.field);return null!==t&&!my(this.value.arrayValue,t)}}]),n}(zy),ag=function(e){f(n,e);var t=m(n);function n(e,r){return s(this,n),t.call(this,e,"array-contains-any",r)}return(0,c.Z)(n,[{key:"matches",value:function(e){var t=this,n=e.data.field(this.field);return!(!_y(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(e){return my(t.value.arrayValue,e)}))}}]),n}(zy),og=(0,c.Z)((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;s(this,e),this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=o,this.endAt=u,this.dt=null}));function ug(e){return new og(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function sg(e){var t=yv(e);if(null===t.dt){var n=t.path.canonicalString();null!==t.collectionGroup&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map((function(e){return Hy(e)})).join(","),n+="|ob:",n+=t.orderBy.map((function(e){return function(e){return e.field.canonicalString()+e.dir}(e)})).join(","),dm(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map((function(e){return ky(e)})).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map((function(e){return ky(e)})).join(",")),t.dt=n}return t.dt}function cg(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(var n=0;n<e.orderBy.length;n++)if(!Vy(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(var r=0;r<e.filters.length;r++)if(!Qy(e.filters[r],t.filters[r]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!jy(e.startAt,t.startAt)&&jy(e.endAt,t.endAt)}function lg(e){return Vv.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}function fg(e,t){return e.filters.filter((function(e){return e instanceof zy&&e.field.isEqual(t)}))}function hg(e,t,n){var r,i=dy,a=!0,o=S(fg(e,t));try{for(o.s();!(r=o.n()).done;){var u=r.value,s=dy,c=!0;switch(u.op){case"<":case"<=":s=Ay(u.value);break;case"==":case"in":case">=":s=u.value;break;case">":s=u.value,c=!1;break;case"!=":case"not-in":s=dy}Ry({value:i,inclusive:a},{value:s,inclusive:c})<0&&(i=s,a=c)}}catch(h){o.e(h)}finally{o.f()}if(null!==n)for(var l=0;l<e.orderBy.length;++l)if(e.orderBy[l].field.isEqual(t)){var f=n.position[l];Ry({value:i,inclusive:a},{value:f,inclusive:n.inclusive})<0&&(i=f,a=n.inclusive);break}return{value:i,inclusive:a}}function dg(e,t,n){var r,i=hy,a=!0,o=S(fg(e,t));try{for(o.s();!(r=o.n()).done;){var u=r.value,s=hy,c=!0;switch(u.op){case">=":case">":s=Ny(u.value),c=!1;break;case"==":case"in":case"<=":s=u.value;break;case"<":s=u.value,c=!1;break;case"!=":case"not-in":s=hy}Py({value:i,inclusive:a},{value:s,inclusive:c})>0&&(i=s,a=c)}}catch(h){o.e(h)}finally{o.f()}if(null!==n)for(var l=0;l<e.orderBy.length;++l)if(e.orderBy[l].field.isEqual(t)){var f=n.position[l];Py({value:i,inclusive:a},{value:f,inclusive:n.inclusive})>0&&(i=f,a=n.inclusive);break}return{value:i,inclusive:a}}var pg=(0,c.Z)((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,c=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;s(this,e),this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=o,this.startAt=u,this.endAt=c,this.wt=null,this._t=null,this.startAt,this.endAt}));function vg(e,t,n,r,i,a,o,u){return new pg(e,t,n,r,i,a,o,u)}function mg(e){return new pg(e)}function yg(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function gg(e){return e.explicitOrderBy.length>0?e.explicitOrderBy[0].field:null}function kg(e){var t,n=S(e.filters);try{for(n.s();!(t=n.n()).done;){var r=t.value.getFirstInequalityField();if(null!==r)return r}}catch(i){n.e(i)}finally{n.f()}return null}function bg(e){return null!==e.collectionGroup}function wg(e){var t=yv(e);if(null===t.wt){t.wt=[];var n=kg(t),r=gg(t);if(null!==n&&null===r)n.isKeyField()||t.wt.push(new Uy(n)),t.wt.push(new Uy(Uv.keyField(),"asc"));else{var i,a=!1,o=S(t.explicitOrderBy);try{for(o.s();!(i=o.n()).done;){var u=i.value;t.wt.push(u),u.field.isKeyField()&&(a=!0)}}catch(c){o.e(c)}finally{o.f()}if(!a){var s=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.wt.push(new Uy(Uv.keyField(),s))}}}return t.wt}function xg(e){var t=yv(e);if(!t._t)if("F"===t.limitType)t._t=ug(t.path,t.collectionGroup,wg(t),t.filters,t.limit,t.startAt,t.endAt);else{var n,r=[],i=S(wg(t));try{for(i.s();!(n=i.n()).done;){var a=n.value,o="desc"===a.dir?"asc":"desc";r.push(new Uy(a.field,o))}}catch(c){i.e(c)}finally{i.f()}var u=t.endAt?new My(t.endAt.position,t.endAt.inclusive):null,s=t.startAt?new My(t.startAt.position,t.startAt.inclusive):null;t._t=ug(t.path,t.collectionGroup,r,t.filters,t.limit,u,s)}return t._t}function _g(e,t){t.getFirstInequalityField(),kg(e);var n=e.filters.concat([t]);return new pg(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function Ig(e,t,n){return new pg(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function Sg(e,t){return cg(xg(e),xg(t))&&e.limitType===t.limitType}function Eg(e){return"".concat(sg(xg(e)),"|lt:").concat(e.limitType)}function Tg(e){return"Query(target=".concat(function(e){var t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map((function(e){return $y(e)})).join(", "),"]")),dm(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map((function(e){return function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e)})).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((function(e){return ky(e)})).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((function(e){return ky(e)})).join(",")),"Target(".concat(t,")")}(xg(e)),"; limitType=").concat(e.limitType,")")}function Cg(e,t){return t.isFoundDocument()&&function(e,t){var n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):Vv.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){var n,r=S(wg(e));try{for(r.s();!(n=r.n()).done;){var i=n.value;if(!i.field.isKeyField()&&null===t.data.field(i.field))return!1}}catch(a){r.e(a)}finally{r.f()}return!0}(e,t)&&function(e,t){var n,r=S(e.filters);try{for(r.s();!(n=r.n()).done;){if(!n.value.matches(t))return!1}}catch(i){r.e(i)}finally{r.f()}return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){var r=Fy(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,wg(e),t))&&!(e.endAt&&!function(e,t,n){var r=Fy(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,wg(e),t))}(e,t)}function Ag(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function Ng(e){return function(t,n){var r,i=!1,a=S(wg(e));try{for(a.s();!(r=a.n()).done;){var o=r.value,u=Rg(o,t,n);if(0!==u)return u;i=i||o.field.isKeyField()}}catch(s){a.e(s)}finally{a.f()}return 0}}function Rg(e,t,n){var r=e.field.isKeyField()?Vv.comparator(t.key,n.key):function(e,t,n){var r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?yy(r,i):vv()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return vv()}}var Pg=function(){function e(t,n){s(this,e),this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}return(0,c.Z)(e,[{key:"get",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n){var r,a=S(n);try{for(a.s();!(r=a.n()).done;){var o=(0,i.Z)(r.value,2),u=o[0],s=o[1];if(this.equalsFn(u,e))return s}}catch(c){a.e(c)}finally{a.f()}}}},{key:"has",value:function(e){return void 0!==this.get(e)}},{key:"set",value:function(e,t){var n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}},{key:"delete",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}},{key:"forEach",value:function(e){Km(this.inner,(function(t,n){var r,a=S(n);try{for(a.s();!(r=a.n()).done;){var o=(0,i.Z)(r.value,2),u=o[0],s=o[1];e(u,s)}}catch(c){a.e(c)}finally{a.f()}}))}},{key:"isEmpty",value:function(){return Wm(this.inner)}},{key:"size",value:function(){return this.innerSize}}]),e}(),Og=new Hm(Vv.comparator);function Dg(){return Og}var Lg=new Hm(Vv.comparator);function Mg(){for(var e=Lg,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.insert(o.key,o)}return e}function Fg(e){var t=Lg;return e.forEach((function(e,n){return t=t.insert(e,n.overlayedDocument)})),t}function jg(){return Vg()}function Ug(){return Vg()}function Vg(){return new Pg((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)}))}var Zg=new Hm(Vv.comparator),zg=new $m(Vv.comparator);function Bg(){for(var e=zg,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.add(o)}return e}var qg=new $m(Rv);function Gg(){return qg}function Kg(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:pm(t)?"-0":t}}function Wg(e){return{integerValue:""+e}}function Hg(e,t){return vm(t)?Wg(t):Kg(e,t)}var Qg=(0,c.Z)((function e(){s(this,e),this._=void 0}));function Yg(e,t,n){return e instanceof Jg?function(e,t){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&uy(t)&&(t=sy(t)),t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof ek?tk(e,t):e instanceof nk?rk(e,t):function(e,t){var n=Xg(e,t),r=ak(n)+ak(e.gt);return xy(n)&&xy(e.gt)?Wg(r):Kg(e.serializer,r)}(e,t)}function $g(e,t,n){return e instanceof ek?tk(e,t):e instanceof nk?rk(e,t):n}function Xg(e,t){return e instanceof ik?xy(n=t)||function(e){return!!e&&"doubleValue"in e}(n)?t:{integerValue:0}:null;var n}var Jg=function(e){f(n,e);var t=m(n);function n(){return s(this,n),t.apply(this,arguments)}return(0,c.Z)(n)}(Qg),ek=function(e){f(n,e);var t=m(n);function n(e){var r;return s(this,n),(r=t.call(this)).elements=e,r}return(0,c.Z)(n)}(Qg);function tk(e,t){var n,r=ok(t),i=S(e.elements);try{var a=function(){var e=n.value;r.some((function(t){return vy(t,e)}))||r.push(e)};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var nk=function(e){f(n,e);var t=m(n);function n(e){var r;return s(this,n),(r=t.call(this)).elements=e,r}return(0,c.Z)(n)}(Qg);function rk(e,t){var n,r=ok(t),i=S(e.elements);try{var a=function(){var e=n.value;r=r.filter((function(t){return!vy(t,e)}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var ik=function(e){f(n,e);var t=m(n);function n(e,r){var i;return s(this,n),(i=t.call(this)).serializer=e,i.gt=r,i}return(0,c.Z)(n)}(Qg);function ak(e){return ay(e.integerValue||e.doubleValue)}function ok(e){return _y(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}var uk=(0,c.Z)((function e(t,n){s(this,e),this.field=t,this.transform=n}));var sk=(0,c.Z)((function e(t,n){s(this,e),this.version=t,this.transformResults=n})),ck=function(){function e(t,n){s(this,e),this.updateTime=t,this.exists=n}return(0,c.Z)(e,[{key:"isNone",get:function(){return void 0===this.updateTime&&void 0===this.exists}},{key:"isEqual",value:function(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}],[{key:"none",value:function(){return new e}},{key:"exists",value:function(t){return new e(void 0,t)}},{key:"updateTime",value:function(t){return new e(t)}}]),e}();function lk(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}var fk=(0,c.Z)((function e(){s(this,e)}));function hk(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new Ik(e.key,ck.none()):new yk(e.key,e.data,ck.none());var n,r=e.data,i=Oy.empty(),a=new $m(Uv.comparator),o=S(t.fields);try{for(o.s();!(n=o.n()).done;){var u=n.value;if(!a.has(u)){var s=r.field(u);null===s&&u.length>1&&(u=u.popLast(),s=r.field(u)),null===s?i.delete(u):i.set(u,s),a=a.add(u)}}}catch(c){o.e(c)}finally{o.f()}return new gk(e.key,i,new ey(a.toArray()),ck.none())}function dk(e,t,n){e instanceof yk?function(e,t,n){var r=e.value.clone(),i=bk(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof gk?function(e,t,n){if(lk(e.precondition,t)){var r=bk(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(kk(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else t.convertToUnknownDocument(n.version)}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function pk(e,t,n,r){return e instanceof yk?function(e,t,n,r){if(!lk(e.precondition,t))return n;var i=e.value.clone(),a=wk(e.fieldTransforms,r,t);return i.setAll(a),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof gk?function(e,t,n,r){if(!lk(e.precondition,t))return n;var i=wk(e.fieldTransforms,r,t),a=t.data;return a.setAll(kk(e)),a.setAll(i),t.convertToFoundDocument(t.version,a).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map((function(e){return e.field})))}(e,t,n,r):function(e,t,n){return lk(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function vk(e,t){var n,r=null,i=S(e.fieldTransforms);try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.field),u=Xg(a.transform,o||null);null!=u&&(null===r&&(r=Oy.empty()),r.set(a.field,u))}}catch(s){i.e(s)}finally{i.f()}return r||null}function mk(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&Pv(e,t,(function(e,t){return function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof ek&&t instanceof ek||e instanceof nk&&t instanceof nk?Pv(e.elements,t.elements,vy):e instanceof ik&&t instanceof ik?vy(e.gt,t.gt):e instanceof Jg&&t instanceof Jg}(e.transform,t.transform)}(e,t)}))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}var yk=function(e){f(n,e);var t=m(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return s(this,n),(a=t.call(this)).key=e,a.value=r,a.precondition=i,a.fieldTransforms=o,a.type=0,a}return(0,c.Z)(n,[{key:"getFieldMask",value:function(){return null}}]),n}(fk),gk=function(e){f(n,e);var t=m(n);function n(e,r,i,a){var o,u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];return s(this,n),(o=t.call(this)).key=e,o.data=r,o.fieldMask=i,o.precondition=a,o.fieldTransforms=u,o.type=1,o}return(0,c.Z)(n,[{key:"getFieldMask",value:function(){return this.fieldMask}}]),n}(fk);function kk(e){var t=new Map;return e.fieldMask.fields.forEach((function(n){if(!n.isEmpty()){var r=e.data.field(n);t.set(n,r)}})),t}function bk(e,t,n){var r=new Map;mv(e.length===n.length);for(var i=0;i<n.length;i++){var a=e[i],o=a.transform,u=t.data.field(a.field);r.set(a.field,$g(o,u,n[i]))}return r}function wk(e,t,n){var r,i=new Map,a=S(e);try{for(a.s();!(r=a.n()).done;){var o=r.value,u=o.transform,s=n.data.field(o.field);i.set(o.field,Yg(u,s,t))}}catch(c){a.e(c)}finally{a.f()}return i}var xk,_k,Ik=function(e){f(n,e);var t=m(n);function n(e,r){var i;return s(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=2,i.fieldTransforms=[],i}return(0,c.Z)(n,[{key:"getFieldMask",value:function(){return null}}]),n}(fk),Sk=function(e){f(n,e);var t=m(n);function n(e,r){var i;return s(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=3,i.fieldTransforms=[],i}return(0,c.Z)(n,[{key:"getFieldMask",value:function(){return null}}]),n}(fk),Ek=function(){function e(t,n,r,i){s(this,e),this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}return(0,c.Z)(e,[{key:"applyToRemoteDocument",value:function(e,t){for(var n=t.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(e.key)&&dk(i,e,n[r])}}},{key:"applyToLocalView",value:function(e,t){var n,r=S(this.baseMutations);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.key.isEqual(e.key)&&(t=pk(i,e,t,this.localWriteTime))}}catch(s){r.e(s)}finally{r.f()}var a,o=S(this.mutations);try{for(o.s();!(a=o.n()).done;){var u=a.value;u.key.isEqual(e.key)&&(t=pk(u,e,t,this.localWriteTime))}}catch(s){o.e(s)}finally{o.f()}return t}},{key:"applyToLocalDocumentSet",value:function(e,t){var n=this,r=Ug();return this.mutations.forEach((function(i){var a=e.get(i.key),o=a.overlayedDocument,u=n.applyToLocalView(o,a.mutatedFields),s=hk(o,u=t.has(i.key)?null:u);null!==s&&r.set(i.key,s),o.isValidDocument()||o.convertToNoDocument(Lv.min())})),r}},{key:"keys",value:function(){return this.mutations.reduce((function(e,t){return e.add(t.key)}),Bg())}},{key:"isEqual",value:function(e){return this.batchId===e.batchId&&Pv(this.mutations,e.mutations,(function(e,t){return mk(e,t)}))&&Pv(this.baseMutations,e.baseMutations,(function(e,t){return mk(e,t)}))}}]),e}(),Tk=function(){function e(t,n,r,i){s(this,e),this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}return(0,c.Z)(e,null,[{key:"from",value:function(t,n,r){mv(t.mutations.length===r.length);for(var i=Zg,a=t.mutations,o=0;o<a.length;o++)i=i.insert(a[o].key,r[o].version);return new e(t,n,r,i)}}]),e}(),Ck=function(){function e(t,n){s(this,e),this.largestBatchId=t,this.mutation=n}return(0,c.Z)(e,[{key:"getKey",value:function(){return this.mutation.key}},{key:"isEqual",value:function(e){return null!==e&&this.mutation===e.mutation}},{key:"toString",value:function(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}]),e}(),Ak=(0,c.Z)((function e(t,n){s(this,e),this.count=t,this.unchangedNames=n}));function Nk(e){switch(e){default:return vv();case gv.CANCELLED:case gv.UNKNOWN:case gv.DEADLINE_EXCEEDED:case gv.RESOURCE_EXHAUSTED:case gv.INTERNAL:case gv.UNAVAILABLE:case gv.UNAUTHENTICATED:return!1;case gv.INVALID_ARGUMENT:case gv.NOT_FOUND:case gv.ALREADY_EXISTS:case gv.PERMISSION_DENIED:case gv.FAILED_PRECONDITION:case gv.ABORTED:case gv.OUT_OF_RANGE:case gv.UNIMPLEMENTED:case gv.DATA_LOSS:return!0}}function Rk(e){if(void 0===e)return hv("GRPC error has no .code"),gv.UNKNOWN;switch(e){case xk.OK:return gv.OK;case xk.CANCELLED:return gv.CANCELLED;case xk.UNKNOWN:return gv.UNKNOWN;case xk.DEADLINE_EXCEEDED:return gv.DEADLINE_EXCEEDED;case xk.RESOURCE_EXHAUSTED:return gv.RESOURCE_EXHAUSTED;case xk.INTERNAL:return gv.INTERNAL;case xk.UNAVAILABLE:return gv.UNAVAILABLE;case xk.UNAUTHENTICATED:return gv.UNAUTHENTICATED;case xk.INVALID_ARGUMENT:return gv.INVALID_ARGUMENT;case xk.NOT_FOUND:return gv.NOT_FOUND;case xk.ALREADY_EXISTS:return gv.ALREADY_EXISTS;case xk.PERMISSION_DENIED:return gv.PERMISSION_DENIED;case xk.FAILED_PRECONDITION:return gv.FAILED_PRECONDITION;case xk.ABORTED:return gv.ABORTED;case xk.OUT_OF_RANGE:return gv.OUT_OF_RANGE;case xk.UNIMPLEMENTED:return gv.UNIMPLEMENTED;case xk.DATA_LOSS:return gv.DATA_LOSS;default:return vv()}}(_k=xk||(xk={}))[_k.OK=0]="OK",_k[_k.CANCELLED=1]="CANCELLED",_k[_k.UNKNOWN=2]="UNKNOWN",_k[_k.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",_k[_k.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",_k[_k.NOT_FOUND=5]="NOT_FOUND",_k[_k.ALREADY_EXISTS=6]="ALREADY_EXISTS",_k[_k.PERMISSION_DENIED=7]="PERMISSION_DENIED",_k[_k.UNAUTHENTICATED=16]="UNAUTHENTICATED",_k[_k.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",_k[_k.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",_k[_k.ABORTED=10]="ABORTED",_k[_k.OUT_OF_RANGE=11]="OUT_OF_RANGE",_k[_k.UNIMPLEMENTED=12]="UNIMPLEMENTED",_k[_k.INTERNAL=13]="INTERNAL",_k[_k.UNAVAILABLE=14]="UNAVAILABLE",_k[_k.DATA_LOSS=15]="DATA_LOSS";var Pk=function(){function e(){s(this,e),this.onExistenceFilterMismatchCallbacks=new Map}return(0,c.Z)(e,[{key:"onExistenceFilterMismatch",value:function(e){var t=this,n=Symbol();return this.onExistenceFilterMismatchCallbacks.set(n,e),function(){return t.onExistenceFilterMismatchCallbacks.delete(n)}}},{key:"notifyOnExistenceFilterMismatch",value:function(e){this.onExistenceFilterMismatchCallbacks.forEach((function(t){return t(e)}))}}],[{key:"instance",get:function(){return Ok}},{key:"getOrCreateInstance",value:function(){return null===Ok&&(Ok=new e),Ok}}]),e}(),Ok=null;function Dk(){return new TextEncoder}var Lk=new av([4294967295,4294967295],0);function Mk(e){var t=Dk().encode(e),n=new iv;return n.update(t),new Uint8Array(n.digest())}function Fk(e){var t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),a=t.getUint32(12,!0);return[new av([n,r],0),new av([i,a],0)]}var jk=function(){function e(t,n,r){if(s(this,e),this.bitmap=t,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Uk("Invalid padding: ".concat(n));if(r<0)throw new Uk("Invalid hash count: ".concat(r));if(t.length>0&&0===this.hashCount)throw new Uk("Invalid hash count: ".concat(r));if(0===t.length&&0!==n)throw new Uk("Invalid padding when bitmap length is 0: ".concat(n));this.It=8*t.length-n,this.Tt=av.fromNumber(this.It)}return(0,c.Z)(e,[{key:"Et",value:function(e,t,n){var r=e.add(t.multiply(av.fromNumber(n)));return 1===r.compare(Lk)&&(r=new av([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Tt).toNumber()}},{key:"At",value:function(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}},{key:"vt",value:function(e){if(0===this.It)return!1;for(var t=Fk(Mk(e)),n=(0,i.Z)(t,2),r=n[0],a=n[1],o=0;o<this.hashCount;o++){var u=this.Et(r,a,o);if(!this.At(u))return!1}return!0}},{key:"insert",value:function(e){if(0!==this.It)for(var t=Fk(Mk(e)),n=(0,i.Z)(t,2),r=n[0],a=n[1],o=0;o<this.hashCount;o++){var u=this.Et(r,a,o);this.Rt(u)}}},{key:"Rt",value:function(e){var t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}],[{key:"create",value:function(t,n,r){var i=t%8==0?0:8-t%8,a=new e(new Uint8Array(Math.ceil(t/8)),i,n);return r.forEach((function(e){return a.insert(e)})),a}}]),e}(),Uk=function(e){f(n,e);var t=m(n);function n(){var e;return s(this,n),(e=t.apply(this,arguments)).name="BloomFilterError",e}return(0,c.Z)(n)}(g(Error)),Vk=function(){function e(t,n,r,i,a){s(this,e),this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}return(0,c.Z)(e,null,[{key:"createSynthesizedRemoteEventForCurrentChange",value:function(t,n,r){var i=new Map;return i.set(t,Zk.createSynthesizedTargetChangeForCurrentChange(t,n,r)),new e(Lv.min(),i,new Hm(Rv),Dg(),Bg())}}]),e}(),Zk=function(){function e(t,n,r,i,a){s(this,e),this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}return(0,c.Z)(e,null,[{key:"createSynthesizedTargetChangeForCurrentChange",value:function(t,n,r){return new e(r,n,Bg(),Bg(),Bg())}}]),e}(),zk=(0,c.Z)((function e(t,n,r,i){s(this,e),this.Pt=t,this.removedTargetIds=n,this.key=r,this.bt=i})),Bk=(0,c.Z)((function e(t,n){s(this,e),this.targetId=t,this.Vt=n})),qk=(0,c.Z)((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ny.EMPTY_BYTE_STRING,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;s(this,e),this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=i})),Gk=function(){function e(){s(this,e),this.St=0,this.Dt=Hk(),this.Ct=ny.EMPTY_BYTE_STRING,this.xt=!1,this.Nt=!0}return(0,c.Z)(e,[{key:"current",get:function(){return this.xt}},{key:"resumeToken",get:function(){return this.Ct}},{key:"kt",get:function(){return 0!==this.St}},{key:"Mt",get:function(){return this.Nt}},{key:"$t",value:function(e){e.approximateByteSize()>0&&(this.Nt=!0,this.Ct=e)}},{key:"Ot",value:function(){var e=Bg(),t=Bg(),n=Bg();return this.Dt.forEach((function(r,i){switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:vv()}})),new Zk(this.Ct,this.xt,e,t,n)}},{key:"Ft",value:function(){this.Nt=!1,this.Dt=Hk()}},{key:"Bt",value:function(e,t){this.Nt=!0,this.Dt=this.Dt.insert(e,t)}},{key:"Lt",value:function(e){this.Nt=!0,this.Dt=this.Dt.remove(e)}},{key:"qt",value:function(){this.St+=1}},{key:"Ut",value:function(){this.St-=1}},{key:"Kt",value:function(){this.Nt=!0,this.xt=!0}}]),e}(),Kk=function(){function e(t){s(this,e),this.Gt=t,this.Qt=new Map,this.jt=Dg(),this.zt=Wk(),this.Wt=new Hm(Rv)}return(0,c.Z)(e,[{key:"Ht",value:function(e){var t,n=S(e.Pt);try{for(n.s();!(t=n.n()).done;){var r=t.value;e.bt&&e.bt.isFoundDocument()?this.Jt(r,e.bt):this.Yt(r,e.key,e.bt)}}catch(u){n.e(u)}finally{n.f()}var i,a=S(e.removedTargetIds);try{for(a.s();!(i=a.n()).done;){var o=i.value;this.Yt(o,e.key,e.bt)}}catch(u){a.e(u)}finally{a.f()}}},{key:"Xt",value:function(e){var t=this;this.forEachTarget(e,(function(n){var r=t.Zt(n);switch(e.state){case 0:t.te(n)&&r.$t(e.resumeToken);break;case 1:r.Ut(),r.kt||r.Ft(),r.$t(e.resumeToken);break;case 2:r.Ut(),r.kt||t.removeTarget(n);break;case 3:t.te(n)&&(r.Kt(),r.$t(e.resumeToken));break;case 4:t.te(n)&&(t.ee(n),r.$t(e.resumeToken));break;default:vv()}}))}},{key:"forEachTarget",value:function(e,t){var n=this;e.targetIds.length>0?e.targetIds.forEach(t):this.Qt.forEach((function(e,r){n.te(r)&&t(r)}))}},{key:"ne",value:function(e){var t,n=e.targetId,r=e.Vt.count,i=this.se(n);if(i){var a=i.target;if(lg(a))if(0===r){var o=new Vv(a.path);this.Yt(n,o,Ly.newNoDocument(o,Lv.min()))}else mv(1===r);else{var u=this.ie(n);if(u!==r){var s=this.re(e,u);if(0!==s){this.ee(n);var c=2===s?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Wt=this.Wt.insert(n,c)}null===(t=Pk.instance)||void 0===t||t.notifyOnExistenceFilterMismatch(function(e,t,n){var r,i,a,o,u,s,c={localCacheCount:t,existenceFilterCount:n.count},l=n.unchangedNames;return l&&(c.bloomFilter={applied:0===e,hashCount:null!==(r=null==l?void 0:l.hashCount)&&void 0!==r?r:0,bitmapLength:null!==(o=null===(a=null===(i=null==l?void 0:l.bits)||void 0===i?void 0:i.bitmap)||void 0===a?void 0:a.length)&&void 0!==o?o:0,padding:null!==(s=null===(u=null==l?void 0:l.bits)||void 0===u?void 0:u.padding)&&void 0!==s?s:0}),c}(s,u,e.Vt))}}}}},{key:"re",value:function(e,t){var n=e.Vt,r=n.unchangedNames,i=n.count;if(!r||!r.bits)return 1;var a,o,u=r.bits,s=u.bitmap,c=void 0===s?"":s,l=u.padding,f=void 0===l?0:l,h=r.hashCount,d=void 0===h?0:h;try{a=oy(c).toUint8Array()}catch(e){if(e instanceof ty)return dv("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),1;throw e}try{o=new jk(a,f,d)}catch(e){return dv(e instanceof Uk?"BloomFilter error: ":"Applying bloom filter failed: ",e),1}return 0===o.It?1:i!==t-this.oe(e.targetId,o)?2:0}},{key:"oe",value:function(e,t){var n=this,r=this.Gt.getRemoteKeysForTarget(e),i=0;return r.forEach((function(r){var a=n.Gt.ue(),o="projects/".concat(a.projectId,"/databases/").concat(a.database,"/documents/").concat(r.path.canonicalString());t.vt(o)||(n.Yt(e,r,null),i++)})),i}},{key:"ce",value:function(e){var t=this,n=new Map;this.Qt.forEach((function(r,i){var a=t.se(i);if(a){if(r.current&&lg(a.target)){var o=new Vv(a.target.path);null!==t.jt.get(o)||t.ae(i,o)||t.Yt(i,o,Ly.newNoDocument(o,e))}r.Mt&&(n.set(i,r.Ot()),r.Ft())}}));var r=Bg();this.zt.forEach((function(e,n){var i=!0;n.forEachWhile((function(e){var n=t.se(e);return!n||"TargetPurposeLimboResolution"===n.purpose||(i=!1,!1)})),i&&(r=r.add(e))})),this.jt.forEach((function(t,n){return n.setReadTime(e)}));var i=new Vk(e,n,this.Wt,this.jt,r);return this.jt=Dg(),this.zt=Wk(),this.Wt=new Hm(Rv),i}},{key:"Jt",value:function(e,t){if(this.te(e)){var n=this.ae(e,t.key)?2:0;this.Zt(e).Bt(t.key,n),this.jt=this.jt.insert(t.key,t),this.zt=this.zt.insert(t.key,this.he(t.key).add(e))}}},{key:"Yt",value:function(e,t,n){if(this.te(e)){var r=this.Zt(e);this.ae(e,t)?r.Bt(t,1):r.Lt(t),this.zt=this.zt.insert(t,this.he(t).delete(e)),n&&(this.jt=this.jt.insert(t,n))}}},{key:"removeTarget",value:function(e){this.Qt.delete(e)}},{key:"ie",value:function(e){var t=this.Zt(e).Ot();return this.Gt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}},{key:"qt",value:function(e){this.Zt(e).qt()}},{key:"Zt",value:function(e){var t=this.Qt.get(e);return t||(t=new Gk,this.Qt.set(e,t)),t}},{key:"he",value:function(e){var t=this.zt.get(e);return t||(t=new $m(Rv),this.zt=this.zt.insert(e,t)),t}},{key:"te",value:function(e){var t=null!==this.se(e);return t||fv("WatchChangeAggregator","Detected inactive target",e),t}},{key:"se",value:function(e){var t=this.Qt.get(e);return t&&t.kt?null:this.Gt.le(e)}},{key:"ee",value:function(e){var t=this;this.Qt.set(e,new Gk),this.Gt.getRemoteKeysForTarget(e).forEach((function(n){t.Yt(e,n,null)}))}},{key:"ae",value:function(e,t){return this.Gt.getRemoteKeysForTarget(e).has(t)}}]),e}();function Wk(){return new Hm(Vv.comparator)}function Hk(){return new Hm(Vv.comparator)}var Qk={asc:"ASCENDING",desc:"DESCENDING"},Yk={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},$k={and:"AND",or:"OR"},Xk=(0,c.Z)((function e(t,n){s(this,e),this.databaseId=t,this.useProto3Json=n}));function Jk(e,t){return e.useProto3Json||dm(t)?t:{value:t}}function eb(e,t){return e.useProto3Json?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function tb(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function nb(e,t){return eb(e,t.toTimestamp())}function rb(e){return mv(!!e),Lv.fromTimestamp(function(e){var t=iy(e);return new Dv(t.seconds,t.nanos)}(e))}function ib(e,t){return function(e){return new Fv(["projects",e.projectId,"databases",e.database])}(e).child("documents").child(t).canonicalString()}function ab(e){var t=Fv.fromString(e);return mv(Cb(t)),t}function ob(e,t){return ib(e.databaseId,t.path)}function ub(e,t){var n=ab(t);if(n.get(1)!==e.databaseId.projectId)throw new kv(gv.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new kv(gv.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new Vv(fb(n))}function sb(e,t){return ib(e.databaseId,t)}function cb(e){var t=ab(e);return 4===t.length?Fv.emptyPath():fb(t)}function lb(e){return new Fv(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function fb(e){return mv(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function hb(e,t,n){return{name:ob(e,t),fields:n.value.mapValue.fields}}function db(e,t,n){var r=ub(e,t.name),i=rb(t.updateTime),a=t.createTime?rb(t.createTime):Lv.min(),o=new Oy({mapValue:{fields:t.fields}}),u=Ly.newFoundDocument(r,i,a,o);return n&&u.setHasCommittedMutations(),n?u.setHasCommittedMutations():u}function pb(e,t){return"found"in t?function(e,t){mv(!!t.found),t.found.name,t.found.updateTime;var n=ub(e,t.found.name),r=rb(t.found.updateTime),i=t.found.createTime?rb(t.found.createTime):Lv.min(),a=new Oy({mapValue:{fields:t.found.fields}});return Ly.newFoundDocument(n,r,i,a)}(e,t):"missing"in t?function(e,t){mv(!!t.missing),mv(!!t.readTime);var n=ub(e,t.missing),r=rb(t.readTime);return Ly.newNoDocument(n,r)}(e,t):vv()}function vb(e,t){var n;if(t instanceof yk)n={update:hb(e,t.key,t.value)};else if(t instanceof Ik)n={delete:ob(e,t.key)};else if(t instanceof gk)n={update:hb(e,t.key,t.data),updateMask:Tb(t.fieldMask)};else{if(!(t instanceof Sk))return vv();n={verify:ob(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((function(e){return function(e,t){var n=t.transform;if(n instanceof Jg)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof ek)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof nk)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof ik)return{fieldPath:t.field.canonicalString(),increment:n.gt};throw vv()}(0,e)}))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:nb(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:vv()}(e,t.precondition)),n}function mb(e,t){var n=t.currentDocument?function(e){return void 0!==e.updateTime?ck.updateTime(rb(e.updateTime)):void 0!==e.exists?ck.exists(e.exists):ck.none()}(t.currentDocument):ck.none(),r=t.updateTransforms?t.updateTransforms.map((function(t){return function(e,t){var n=null;if("setToServerValue"in t)mv("REQUEST_TIME"===t.setToServerValue),n=new Jg;else if("appendMissingElements"in t){var r=t.appendMissingElements.values||[];n=new ek(r)}else if("removeAllFromArray"in t){var i=t.removeAllFromArray.values||[];n=new nk(i)}else"increment"in t?n=new ik(e,t.increment):vv();var a=Uv.fromServerFormat(t.fieldPath);return new uk(a,n)}(e,t)})):[];if(t.update){t.update.name;var i=ub(e,t.update.name),a=new Oy({mapValue:{fields:t.update.fields}});if(t.updateMask){var o=function(e){var t=e.fieldPaths||[];return new ey(t.map((function(e){return Uv.fromServerFormat(e)})))}(t.updateMask);return new gk(i,a,o,n,r)}return new yk(i,a,n,r)}if(t.delete){var u=ub(e,t.delete);return new Ik(u,n)}if(t.verify){var s=ub(e,t.verify);return new Sk(s,n)}return vv()}function yb(e,t){return{documents:[sb(e,t.path)]}}function gb(e,t){var n={structuredQuery:{}},r=t.path;null!==t.collectionGroup?(n.parent=sb(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=sb(e,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(e){if(0!==e.length)return Eb(By.create(e,"and"))}(t.filters);i&&(n.structuredQuery.where=i);var a=function(e){if(0!==e.length)return e.map((function(e){return function(e){return{field:Ib(e.field),direction:wb(e.dir)}}(e)}))}(t.orderBy);a&&(n.structuredQuery.orderBy=a);var o,u=Jk(e,t.limit);return null!==u&&(n.structuredQuery.limit=u),t.startAt&&(n.structuredQuery.startAt={before:(o=t.startAt).inclusive,values:o.position}),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),n}function kb(e){var t=cb(e.parent),n=e.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){mv(1===r);var a=n.from[0];a.allDescendants?i=a.collectionId:t=t.child(a.collectionId)}var o=[];n.where&&(o=function(e){var t=bb(e);return t instanceof By&&Ky(t)?t.getFilters():[t]}(n.where));var u=[];n.orderBy&&(u=n.orderBy.map((function(e){return function(e){return new Uy(Sb(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)})));var s=null;n.limit&&(s=function(e){var t;return dm(t="object"==typeof e?e.value:e)?null:t}(n.limit));var c=null;n.startAt&&(c=function(e){var t=!!e.before,n=e.values||[];return new My(n,t)}(n.startAt));var l=null;return n.endAt&&(l=function(e){var t=!e.before,n=e.values||[];return new My(n,t)}(n.endAt)),vg(t,i,u,o,s,"F",c,l)}function bb(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":var t=Sb(e.unaryFilter.field);return zy.create(t,"==",{doubleValue:NaN});case"IS_NULL":var n=Sb(e.unaryFilter.field);return zy.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=Sb(e.unaryFilter.field);return zy.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=Sb(e.unaryFilter.field);return zy.create(i,"!=",{nullValue:"NULL_VALUE"});default:return vv()}}(e):void 0!==e.fieldFilter?function(e){return zy.create(Sb(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return vv()}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return By.create(e.compositeFilter.filters.map((function(e){return bb(e)})),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return vv()}}(e.compositeFilter.op))}(e):vv()}function wb(e){return Qk[e]}function xb(e){return Yk[e]}function _b(e){return $k[e]}function Ib(e){return{fieldPath:e.canonicalString()}}function Sb(e){return Uv.fromServerFormat(e.fieldPath)}function Eb(e){return e instanceof zy?function(e){if("=="===e.op){if(Sy(e.value))return{unaryFilter:{field:Ib(e.field),op:"IS_NAN"}};if(Iy(e.value))return{unaryFilter:{field:Ib(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(Sy(e.value))return{unaryFilter:{field:Ib(e.field),op:"IS_NOT_NAN"}};if(Iy(e.value))return{unaryFilter:{field:Ib(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ib(e.field),op:xb(e.op),value:e.value}}}(e):e instanceof By?function(e){var t=e.getFilters().map((function(e){return Eb(e)}));return 1===t.length?t[0]:{compositeFilter:{op:_b(e.op),filters:t}}}(e):vv()}function Tb(e){var t=[];return e.fields.forEach((function(e){return t.push(e.canonicalString())})),{fieldPaths:t}}function Cb(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}var Ab=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Lv.min(),o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:Lv.min(),u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:ny.EMPTY_BYTE_STRING,c=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;s(this,e),this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=u,this.expectedCount=c}return(0,c.Z)(e,[{key:"withSequenceNumber",value:function(t){return new e(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}},{key:"withResumeToken",value:function(t,n){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t,null)}},{key:"withExpectedCount",value:function(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}},{key:"withLastLimboFreeSnapshotVersion",value:function(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}]),e}(),Nb=(0,c.Z)((function e(t){s(this,e),this.fe=t}));function Rb(e,t){var n=t.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:Pb(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())r.document=function(e,t){return{name:ob(e,t.key),fields:t.data.value.mapValue.fields,updateTime:eb(e,t.version.toTimestamp()),createTime:eb(e,t.createTime.toTimestamp())}}(e.fe,t);else if(t.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:Ob(t.version)};else{if(!t.isUnknownDocument())return vv();r.unknownDocument={path:n.path.toArray(),version:Ob(t.version)}}return r}function Pb(e){var t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function Ob(e){var t=e.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function Db(e){var t=new Dv(e.seconds,e.nanoseconds);return Lv.fromTimestamp(t)}function Lb(e,t){for(var n=(t.baseMutations||[]).map((function(t){return mb(e.fe,t)})),r=0;r<t.mutations.length-1;++r){var i=t.mutations[r];if(r+1<t.mutations.length&&void 0!==t.mutations[r+1].transform){var a=t.mutations[r+1];i.updateTransforms=a.transform.fieldTransforms,t.mutations.splice(r+1,1),++r}}var o=t.mutations.map((function(t){return mb(e.fe,t)})),u=Dv.fromMillis(t.localWriteTimeMs);return new Ek(t.batchId,u,n,o)}function Mb(e){var t,n,r=Db(e.readTime),i=void 0!==e.lastLimboFreeSnapshotVersion?Db(e.lastLimboFreeSnapshotVersion):Lv.min();return void 0!==e.query.documents?(mv(1===(n=e.query).documents.length),t=xg(mg(cb(n.documents[0])))):t=function(e){return xg(kb(e))}(e.query),new Ab(t,e.targetId,"TargetPurposeListen",e.lastListenSequenceNumber,r,i,ny.fromBase64String(e.resumeToken))}function Fb(e,t){var n,r=Ob(t.snapshotVersion),i=Ob(t.lastLimboFreeSnapshotVersion);n=lg(t.target)?yb(e.fe,t.target):gb(e.fe,t.target);var a=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:sg(t.target),readTime:r,resumeToken:a,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:n}}function jb(e){var t=kb({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?Ig(t,t.limit,"L"):t}function Ub(e,t){return new Ck(t.largestBatchId,mb(e.fe,t.overlayMutation))}function Vb(e,t){var n=t.path.lastSegment();return[e,mm(t.path.popLast()),n]}function Zb(e,t,n,r){return{indexId:e,uid:t.uid||"",sequenceNumber:n,readTime:Ob(r.readTime),documentKey:mm(r.documentKey.path),largestBatchId:r.largestBatchId}}var zb=function(){function e(){s(this,e)}return(0,c.Z)(e,[{key:"getBundleMetadata",value:function(e,t){return Bb(e).get(t).next((function(e){if(e)return{id:(t=e).bundleId,createTime:Db(t.createTime),version:t.version};var t}))}},{key:"saveBundleMetadata",value:function(e,t){return Bb(e).put({bundleId:(n=t).id,createTime:Ob(rb(n.createTime)),version:n.version});var n}},{key:"getNamedQuery",value:function(e,t){return qb(e).get(t).next((function(e){if(e)return{name:(t=e).name,query:jb(t.bundledQuery),readTime:Db(t.readTime)};var t}))}},{key:"saveNamedQuery",value:function(e,t){return qb(e).put(function(e){return{name:e.name,readTime:Ob(rb(e.readTime)),bundledQuery:e.bundledQuery}}(t))}}]),e}();function Bb(e){return qm(e,"bundles")}function qb(e){return qm(e,"namedQueries")}var Gb=function(){function e(t,n){s(this,e),this.serializer=t,this.userId=n}return(0,c.Z)(e,[{key:"getOverlay",value:function(e,t){var n=this;return Kb(e).get(Vb(this.userId,t)).next((function(e){return e?Ub(n.serializer,e):null}))}},{key:"getOverlays",value:function(e,t){var n=this,r=jg();return em.forEach(t,(function(t){return n.getOverlay(e,t).next((function(e){null!==e&&r.set(t,e)}))})).next((function(){return r}))}},{key:"saveOverlays",value:function(e,t,n){var r=this,i=[];return n.forEach((function(n,a){var o=new Ck(t,a);i.push(r.we(e,o))})),em.waitFor(i)}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=new Set;t.forEach((function(e){return i.add(mm(e.getCollectionPath()))}));var a=[];return i.forEach((function(t){var i=IDBKeyRange.bound([r.userId,t,n],[r.userId,t,n+1],!1,!0);a.push(Kb(e).J("collectionPathOverlayIndex",i))})),em.waitFor(a)}},{key:"getOverlaysForCollection",value:function(e,t,n){var r=this,i=jg(),a=mm(t),o=IDBKeyRange.bound([this.userId,a,n],[this.userId,a,Number.POSITIVE_INFINITY],!0);return Kb(e).j("collectionPathOverlayIndex",o).next((function(e){var t,n=S(e);try{for(n.s();!(t=n.n()).done;){var a=t.value,o=Ub(r.serializer,a);i.set(o.getKey(),o)}}catch(u){n.e(u)}finally{n.f()}return i}))}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){var i,a=this,o=jg(),u=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Kb(e).X({index:"collectionGroupOverlayIndex",range:u},(function(e,t,n){var u=Ub(a.serializer,t);o.size()<r||u.largestBatchId===i?(o.set(u.getKey(),u),i=u.largestBatchId):n.done()})).next((function(){return o}))}},{key:"we",value:function(e,t){return Kb(e).put(function(e,t,n){var r=Vb(t,n.mutation.key),a=(0,i.Z)(r,3);a[0];return{userId:t,collectionPath:a[1],documentId:a[2],collectionGroup:n.mutation.key.getCollectionGroup(),largestBatchId:n.largestBatchId,overlayMutation:vb(e.fe,n.mutation)}}(this.serializer,this.userId,t))}}],[{key:"de",value:function(t,n){return new e(t,n.uid||"")}}]),e}();function Kb(e){return qm(e,"documentOverlays")}var Wb=function(){function e(){s(this,e)}return(0,c.Z)(e,[{key:"_e",value:function(e,t){this.me(e,t),t.ge()}},{key:"me",value:function(e,t){if("nullValue"in e)this.ye(t,5);else if("booleanValue"in e)this.ye(t,10),t.pe(e.booleanValue?1:0);else if("integerValue"in e)this.ye(t,15),t.pe(ay(e.integerValue));else if("doubleValue"in e){var n=ay(e.doubleValue);isNaN(n)?this.ye(t,13):(this.ye(t,15),pm(n)?t.pe(0):t.pe(n))}else if("timestampValue"in e){var r=e.timestampValue;this.ye(t,20),"string"==typeof r?t.Ie(r):(t.Ie("".concat(r.seconds||"")),t.pe(r.nanos||0))}else if("stringValue"in e)this.Te(e.stringValue,t),this.Ee(t);else if("bytesValue"in e)this.ye(t,30),t.Ae(oy(e.bytesValue)),this.Ee(t);else if("referenceValue"in e)this.ve(e.referenceValue,t);else if("geoPointValue"in e){var i=e.geoPointValue;this.ye(t,45),t.pe(i.latitude||0),t.pe(i.longitude||0)}else"mapValue"in e?Cy(e)?this.ye(t,Number.MAX_SAFE_INTEGER):(this.Re(e.mapValue,t),this.Ee(t)):"arrayValue"in e?(this.Pe(e.arrayValue,t),this.Ee(t)):vv()}},{key:"Te",value:function(e,t){this.ye(t,25),this.be(e,t)}},{key:"be",value:function(e,t){t.Ie(e)}},{key:"Re",value:function(e,t){var n=e.fields||{};this.ye(t,55);for(var r=0,i=Object.keys(n);r<i.length;r++){var a=i[r];this.Te(a,t),this.me(n[a],t)}}},{key:"Pe",value:function(e,t){var n=e.values||[];this.ye(t,50);var r,i=S(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;this.me(a,t)}}catch(o){i.e(o)}finally{i.f()}}},{key:"ve",value:function(e,t){var n=this;this.ye(t,37),Vv.fromName(e).path.forEach((function(e){n.ye(t,60),n.be(e,t)}))}},{key:"ye",value:function(e,t){e.pe(t)}},{key:"Ee",value:function(e){e.pe(2)}}]),e}();function Hb(e){if(0===e)return 8;var t=0;return e>>4==0&&(t+=4,e<<=4),e>>6==0&&(t+=2,e<<=2),e>>7==0&&(t+=1),t}function Qb(e){var t=64-function(e){for(var t=0,n=0;n<8;++n){var r=Hb(255&e[n]);if(t+=r,8!==r)break}return t}(e);return Math.ceil(t/8)}Wb.Ve=new Wb;var Yb=function(){function e(){s(this,e),this.buffer=new Uint8Array(1024),this.position=0}return(0,c.Z)(e,[{key:"Se",value:function(e){for(var t=e[Symbol.iterator](),n=t.next();!n.done;)this.De(n.value),n=t.next();this.Ce()}},{key:"xe",value:function(e){for(var t=e[Symbol.iterator](),n=t.next();!n.done;)this.Ne(n.value),n=t.next();this.ke()}},{key:"Me",value:function(e){var t,n=S(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.charCodeAt(0);if(i<128)this.De(i);else if(i<2048)this.De(960|i>>>6),this.De(128|63&i);else if(r<"\ud800"||"\udbff"<r)this.De(480|i>>>12),this.De(128|63&i>>>6),this.De(128|63&i);else{var a=r.codePointAt(0);this.De(240|a>>>18),this.De(128|63&a>>>12),this.De(128|63&a>>>6),this.De(128|63&a)}}}catch(o){n.e(o)}finally{n.f()}this.Ce()}},{key:"$e",value:function(e){var t,n=S(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.charCodeAt(0);if(i<128)this.Ne(i);else if(i<2048)this.Ne(960|i>>>6),this.Ne(128|63&i);else if(r<"\ud800"||"\udbff"<r)this.Ne(480|i>>>12),this.Ne(128|63&i>>>6),this.Ne(128|63&i);else{var a=r.codePointAt(0);this.Ne(240|a>>>18),this.Ne(128|63&a>>>12),this.Ne(128|63&a>>>6),this.Ne(128|63&a)}}}catch(o){n.e(o)}finally{n.f()}this.ke()}},{key:"Oe",value:function(e){var t=this.Fe(e),n=Qb(t);this.Be(1+n),this.buffer[this.position++]=255&n;for(var r=t.length-n;r<t.length;++r)this.buffer[this.position++]=255&t[r]}},{key:"Le",value:function(e){var t=this.Fe(e),n=Qb(t);this.Be(1+n),this.buffer[this.position++]=~(255&n);for(var r=t.length-n;r<t.length;++r)this.buffer[this.position++]=~(255&t[r])}},{key:"qe",value:function(){this.Ue(255),this.Ue(255)}},{key:"Ke",value:function(){this.Ge(255),this.Ge(255)}},{key:"reset",value:function(){this.position=0}},{key:"seed",value:function(e){this.Be(e.length),this.buffer.set(e,this.position),this.position+=e.length}},{key:"Qe",value:function(){return this.buffer.slice(0,this.position)}},{key:"Fe",value:function(e){var t=function(e){var t=new DataView(new ArrayBuffer(8));return t.setFloat64(0,e,!1),new Uint8Array(t.buffer)}(e),n=0!=(128&t[0]);t[0]^=n?255:128;for(var r=1;r<t.length;++r)t[r]^=n?255:0;return t}},{key:"De",value:function(e){var t=255&e;0===t?(this.Ue(0),this.Ue(255)):255===t?(this.Ue(255),this.Ue(0)):this.Ue(t)}},{key:"Ne",value:function(e){var t=255&e;0===t?(this.Ge(0),this.Ge(255)):255===t?(this.Ge(255),this.Ge(0)):this.Ge(e)}},{key:"Ce",value:function(){this.Ue(0),this.Ue(1)}},{key:"ke",value:function(){this.Ge(0),this.Ge(1)}},{key:"Ue",value:function(e){this.Be(1),this.buffer[this.position++]=e}},{key:"Ge",value:function(e){this.Be(1),this.buffer[this.position++]=~e}},{key:"Be",value:function(e){var t=e+this.position;if(!(t<=this.buffer.length)){var n=2*this.buffer.length;n<t&&(n=t);var r=new Uint8Array(n);r.set(this.buffer),this.buffer=r}}}]),e}(),$b=function(){function e(t){s(this,e),this.je=t}return(0,c.Z)(e,[{key:"Ae",value:function(e){this.je.Se(e)}},{key:"Ie",value:function(e){this.je.Me(e)}},{key:"pe",value:function(e){this.je.Oe(e)}},{key:"ge",value:function(){this.je.qe()}}]),e}(),Xb=function(){function e(t){s(this,e),this.je=t}return(0,c.Z)(e,[{key:"Ae",value:function(e){this.je.xe(e)}},{key:"Ie",value:function(e){this.je.$e(e)}},{key:"pe",value:function(e){this.je.Le(e)}},{key:"ge",value:function(){this.je.Ke()}}]),e}(),Jb=function(){function e(){s(this,e),this.je=new Yb,this.ze=new $b(this.je),this.We=new Xb(this.je)}return(0,c.Z)(e,[{key:"seed",value:function(e){this.je.seed(e)}},{key:"He",value:function(e){return 0===e?this.ze:this.We}},{key:"Qe",value:function(){return this.je.Qe()}},{key:"reset",value:function(){this.je.reset()}}]),e}(),ew=function(){function e(t,n,r,i){s(this,e),this.indexId=t,this.documentKey=n,this.arrayValue=r,this.directionalValue=i}return(0,c.Z)(e,[{key:"Je",value:function(){var t=this.directionalValue.length,n=0===t||255===this.directionalValue[t-1]?t+1:t,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==t?r.set([0],this.directionalValue.length):++r[r.length-1],new e(this.indexId,this.documentKey,this.arrayValue,r)}}]),e}();function tw(e,t){var n=e.indexId-t.indexId;return 0!==n?n:0!==(n=nw(e.arrayValue,t.arrayValue))?n:0!==(n=nw(e.directionalValue,t.directionalValue))?n:Vv.comparator(e.documentKey,t.documentKey)}function nw(e,t){for(var n=0;n<e.length&&n<t.length;++n){var r=e[n]-t[n];if(0!==r)return r}return e.length-t.length}var rw=function(){function e(t){s(this,e),this.collectionId=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment(),this.Ye=t.orderBy,this.Xe=[];var n,r=S(t.filters);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.isInequality()?this.Ze=i:this.Xe.push(i)}}catch(a){r.e(a)}finally{r.f()}}return(0,c.Z)(e,[{key:"tn",value:function(e){mv(e.collectionGroup===this.collectionId);var t=zv(e);if(void 0!==t&&!this.en(t))return!1;for(var n=Bv(e),r=0,i=0;r<n.length&&this.en(n[r]);++r);if(r===n.length)return!0;if(void 0!==this.Ze){var a=n[r];if(!this.nn(this.Ze,a)||!this.sn(this.Ye[i++],a))return!1;++r}for(;r<n.length;++r){var o=n[r];if(i>=this.Ye.length||!this.sn(this.Ye[i++],o))return!1}return!0}},{key:"en",value:function(e){var t,n=S(this.Xe);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(this.nn(r,e))return!0}}catch(i){n.e(i)}finally{n.f()}return!1}},{key:"nn",value:function(e,t){if(void 0===e||!e.field.isEqual(t.fieldPath))return!1;var n="array-contains"===e.op||"array-contains-any"===e.op;return 2===t.kind===n}},{key:"sn",value:function(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}]),e}();function iw(e){var t,n;if(mv(e instanceof zy||e instanceof By),e instanceof zy){if(e instanceof rg){var r=(null===(n=null===(t=e.value.arrayValue)||void 0===t?void 0:t.values)||void 0===n?void 0:n.map((function(t){return zy.create(e.field,"==",t)})))||[];return By.create(r,"or")}return e}var i=e.filters.map((function(e){return iw(e)}));return By.create(i,e.op)}function aw(e){if(0===e.getFilters().length)return[];var t=cw(iw(e));return mv(sw(t)),ow(t)||uw(t)?[t]:t.getFilters()}function ow(e){return e instanceof zy}function uw(e){return e instanceof By&&Ky(e)}function sw(e){return ow(e)||uw(e)||function(e){if(e instanceof By&&Gy(e)){var t,n=S(e.getFilters());try{for(n.s();!(t=n.n()).done;){var r=t.value;if(!ow(r)&&!uw(r))return!1}}catch(i){n.e(i)}finally{n.f()}return!0}return!1}(e)}function cw(e){if(mv(e instanceof zy||e instanceof By),e instanceof zy)return e;if(1===e.filters.length)return cw(e.filters[0]);var t=e.filters.map((function(e){return cw(e)})),n=By.create(t,e.op);return sw(n=hw(n))?n:(mv(n instanceof By),mv(qy(n)),mv(n.filters.length>1),n.filters.reduce((function(e,t){return lw(e,t)})))}function lw(e,t){var n;return mv(e instanceof zy||e instanceof By),mv(t instanceof zy||t instanceof By),n=e instanceof zy?t instanceof zy?function(e,t){return By.create([e,t],"and")}(e,t):fw(e,t):t instanceof zy?fw(t,e):function(e,t){if(mv(e.filters.length>0&&t.filters.length>0),qy(e)&&qy(t))return Yy(e,t.getFilters());var n=Gy(e)?e:t,r=Gy(e)?t:e,i=n.filters.map((function(e){return lw(e,r)}));return By.create(i,"or")}(e,t),hw(n)}function fw(e,t){if(qy(t))return Yy(t,e.getFilters());var n=t.filters.map((function(t){return lw(e,t)}));return By.create(n,"or")}function hw(e){if(mv(e instanceof zy||e instanceof By),e instanceof zy)return e;var t=e.getFilters();if(1===t.length)return hw(t[0]);if(Wy(e))return e;var n=t.map((function(e){return hw(e)})),r=[];return n.forEach((function(t){t instanceof zy?r.push(t):t instanceof By&&(t.op===e.op?r.push.apply(r,(0,u.Z)(t.filters)):r.push(t))})),1===r.length?r[0]:By.create(r,e.op)}var dw=function(){function e(){s(this,e),this.rn=new pw}return(0,c.Z)(e,[{key:"addToCollectionParentIndex",value:function(e,t){return this.rn.add(t),em.resolve()}},{key:"getCollectionParents",value:function(e,t){return em.resolve(this.rn.getEntries(t))}},{key:"addFieldIndex",value:function(e,t){return em.resolve()}},{key:"deleteFieldIndex",value:function(e,t){return em.resolve()}},{key:"getDocumentsMatchingTarget",value:function(e,t){return em.resolve(null)}},{key:"getIndexType",value:function(e,t){return em.resolve(0)}},{key:"getFieldIndexes",value:function(e,t){return em.resolve([])}},{key:"getNextCollectionGroupToUpdate",value:function(e){return em.resolve(null)}},{key:"getMinOffset",value:function(e,t){return em.resolve(Hv.min())}},{key:"getMinOffsetFromCollectionGroup",value:function(e,t){return em.resolve(Hv.min())}},{key:"updateCollectionGroup",value:function(e,t,n){return em.resolve()}},{key:"updateIndexEntries",value:function(e,t){return em.resolve()}}]),e}(),pw=function(){function e(){s(this,e),this.index={}}return(0,c.Z)(e,[{key:"add",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new $m(Fv.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}},{key:"has",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}},{key:"getEntries",value:function(e){return(this.index[e]||new $m(Fv.comparator)).toArray()}}]),e}(),vw=new Uint8Array(0),mw=function(){function e(t,n){s(this,e),this.user=t,this.databaseId=n,this.on=new pw,this.un=new Pg((function(e){return sg(e)}),(function(e,t){return cg(e,t)})),this.uid=t.uid||""}return(0,c.Z)(e,[{key:"addToCollectionParentIndex",value:function(e,t){var n=this;if(!this.on.has(t)){var r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener((function(){n.on.add(t)}));var a={collectionId:r,parent:mm(i)};return yw(e).put(a)}return em.resolve()}},{key:"getCollectionParents",value:function(e,t){var n=[],r=IDBKeyRange.bound([t,""],[Ov(t),""],!1,!0);return yw(e).j(r).next((function(e){var r,i=S(e);try{for(i.s();!(r=i.n()).done;){var a=r.value;if(a.collectionId!==t)break;n.push(km(a.parent))}}catch(o){i.e(o)}finally{i.f()}return n}))}},{key:"addFieldIndex",value:function(e,t){var n=this,r=kw(e),i=function(e){return{indexId:e.indexId,collectionGroup:e.collectionGroup,fields:e.fields.map((function(e){return[e.fieldPath.canonicalString(),e.kind]}))}}(t);delete i.indexId;var a=r.add(i);if(t.indexState){var o=bw(e);return a.next((function(e){o.put(Zb(e,n.user,t.indexState.sequenceNumber,t.indexState.offset))}))}return a.next()}},{key:"deleteFieldIndex",value:function(e,t){var n=kw(e),r=bw(e),i=gw(e);return n.delete(t.indexId).next((function(){return r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))})).next((function(){return i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))}))}},{key:"getDocumentsMatchingTarget",value:function(e,t){var n=this,r=gw(e),i=!0,a=new Map;return em.forEach(this.cn(t),(function(t){return n.an(e,t).next((function(e){i&&(i=!!e),a.set(t,e)}))})).next((function(){if(i){var e=Bg(),o=[];return em.forEach(a,(function(i,a){var u;fv("IndexedDbIndexManager","Using index ".concat((u=i,"id=".concat(u.indexId,"|cg=").concat(u.collectionGroup,"|f=").concat(u.fields.map((function(e){return"".concat(e.fieldPath,":").concat(e.kind)})).join(",")))," to execute ").concat(sg(t)));var s=function(e,t){var n=zv(t);if(void 0===n)return null;var r,i=S(fg(e,n.fieldPath));try{for(i.s();!(r=i.n()).done;){var a=r.value;switch(a.op){case"array-contains-any":return a.value.arrayValue.values||[];case"array-contains":return[a.value]}}}catch(o){i.e(o)}finally{i.f()}return null}(a,i),c=function(e,t){var n,r=new Map,i=S(Bv(t));try{for(i.s();!(n=i.n()).done;){var a,o=n.value,u=S(fg(e,o.fieldPath));try{for(u.s();!(a=u.n()).done;){var s=a.value;switch(s.op){case"==":case"in":r.set(o.fieldPath.canonicalString(),s.value);break;case"not-in":case"!=":return r.set(o.fieldPath.canonicalString(),s.value),Array.from(r.values())}}}catch(c){u.e(c)}finally{u.f()}}}catch(c){i.e(c)}finally{i.f()}return null}(a,i),l=function(e,t){var n,r=[],i=!0,a=S(Bv(t));try{for(a.s();!(n=a.n()).done;){var o=n.value,u=0===o.kind?hg(e,o.fieldPath,e.startAt):dg(e,o.fieldPath,e.startAt);r.push(u.value),i&&(i=u.inclusive)}}catch(s){a.e(s)}finally{a.f()}return new My(r,i)}(a,i),f=function(e,t){var n,r=[],i=!0,a=S(Bv(t));try{for(a.s();!(n=a.n()).done;){var o=n.value,u=0===o.kind?dg(e,o.fieldPath,e.endAt):hg(e,o.fieldPath,e.endAt);r.push(u.value),i&&(i=u.inclusive)}}catch(s){a.e(s)}finally{a.f()}return new My(r,i)}(a,i),h=n.hn(i,a,l),d=n.hn(i,a,f),p=n.ln(i,a,c),v=n.fn(i.indexId,s,h,l.inclusive,d,f.inclusive,p);return em.forEach(v,(function(n){return r.H(n,t.limit).next((function(t){t.forEach((function(t){var n=Vv.fromSegments(t.documentKey);e.has(n)||(e=e.add(n),o.push(n))}))}))}))})).next((function(){return o}))}return em.resolve(null)}))}},{key:"cn",value:function(e){var t=this.un.get(e);return t||(t=0===e.filters.length?[e]:aw(By.create(e.filters,"and")).map((function(t){return ug(e.path,e.collectionGroup,e.orderBy,t.getFilters(),e.limit,e.startAt,e.endAt)})),this.un.set(e,t),t)}},{key:"fn",value:function(e,t,n,r,i,a,o){for(var s=this,c=(null!=t?t.length:1)*Math.max(n.length,i.length),l=c/(null!=t?t.length:1),f=[],h=function(){var c=t?s.dn(t[d/l]):vw,h=s.wn(e,c,n[d%l],r),p=s._n(e,c,i[d%l],a),v=o.map((function(t){return s.wn(e,c,t,!0)}));f.push.apply(f,(0,u.Z)(s.createRange(h,p,v)))},d=0;d<c;++d)h();return f}},{key:"wn",value:function(e,t,n,r){var i=new ew(e,Vv.empty(),t,n);return r?i:i.Je()}},{key:"_n",value:function(e,t,n,r){var i=new ew(e,Vv.empty(),t,n);return r?i.Je():i}},{key:"an",value:function(e,t){var n=new rw(t),r=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,r).next((function(e){var t,r=null,i=S(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;n.tn(a)&&(!r||a.fields.length>r.fields.length)&&(r=a)}}catch(o){i.e(o)}finally{i.f()}return r}))}},{key:"getIndexType",value:function(e,t){var n=this,r=2,i=this.cn(t);return em.forEach(i,(function(t){return n.an(e,t).next((function(e){e?0!==r&&e.fields.length<function(e){var t,n=new $m(Uv.comparator),r=!1,i=S(e.filters);try{for(i.s();!(t=i.n()).done;){var a,o=S(t.value.getFlattenedFilters());try{for(o.s();!(a=o.n()).done;){var u=a.value;u.field.isKeyField()||("array-contains"===u.op||"array-contains-any"===u.op?r=!0:n=n.add(u.field))}}catch(f){o.e(f)}finally{o.f()}}}catch(f){i.e(f)}finally{i.f()}var s,c=S(e.orderBy);try{for(c.s();!(s=c.n()).done;){var l=s.value;l.field.isKeyField()||(n=n.add(l.field))}}catch(f){c.e(f)}finally{c.f()}return n.size+(r?1:0)}(t)&&(r=1):r=0}))})).next((function(){return function(e){return null!==e.limit}(t)&&i.length>1&&2===r?1:r}))}},{key:"mn",value:function(e,t){var n,r=new Jb,i=S(Bv(e));try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.fieldPath);if(null==o)return null;var u=r.He(a.kind);Wb.Ve._e(o,u)}}catch(s){i.e(s)}finally{i.f()}return r.Qe()}},{key:"dn",value:function(e){var t=new Jb;return Wb.Ve._e(e,t.He(0)),t.Qe()}},{key:"gn",value:function(e,t){var n=new Jb;return Wb.Ve._e(wy(this.databaseId,t),n.He(function(e){var t=Bv(e);return 0===t.length?0:t[t.length-1].kind}(e))),n.Qe()}},{key:"ln",value:function(e,t,n){if(null===n)return[];var r=[];r.push(new Jb);var i,a=0,o=S(Bv(e));try{for(o.s();!(i=o.n()).done;){var u,s=i.value,c=n[a++],l=S(r);try{for(l.s();!(u=l.n()).done;){var f=u.value;if(this.yn(t,s.fieldPath)&&_y(c))r=this.pn(r,s,c);else{var h=f.He(s.kind);Wb.Ve._e(c,h)}}}catch(d){l.e(d)}finally{l.f()}}}catch(d){o.e(d)}finally{o.f()}return this.In(r)}},{key:"hn",value:function(e,t,n){return this.ln(e,t,n.position)}},{key:"In",value:function(e){for(var t=[],n=0;n<e.length;++n)t[n]=e[n].Qe();return t}},{key:"pn",value:function(e,t,n){var r,i=(0,u.Z)(e),a=[],o=S(n.arrayValue.values||[]);try{for(o.s();!(r=o.n()).done;){var s,c=r.value,l=S(i);try{for(l.s();!(s=l.n()).done;){var f=s.value,h=new Jb;h.seed(f.Qe()),Wb.Ve._e(c,h.He(t.kind)),a.push(h)}}catch(d){l.e(d)}finally{l.f()}}}catch(d){o.e(d)}finally{o.f()}return a}},{key:"yn",value:function(e,t){return!!e.filters.find((function(e){return e instanceof zy&&e.field.isEqual(t)&&("in"===e.op||"not-in"===e.op)}))}},{key:"getFieldIndexes",value:function(e,t){var n=this,r=kw(e),a=bw(e);return(t?r.j("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.j()).next((function(e){var t=[];return em.forEach(e,(function(e){return a.get([e.indexId,n.uid]).next((function(n){t.push(function(e,t){var n=t?new Gv(t.sequenceNumber,new Hv(Db(t.readTime),new Vv(km(t.documentKey)),t.largestBatchId)):Gv.empty(),r=e.fields.map((function(e){var t=(0,i.Z)(e,2),n=t[0],r=t[1];return new qv(Uv.fromServerFormat(n),r)}));return new Zv(e.indexId,e.collectionGroup,r,n)}(e,n))}))})).next((function(){return t}))}))}},{key:"getNextCollectionGroupToUpdate",value:function(e){return this.getFieldIndexes(e).next((function(e){return 0===e.length?null:(e.sort((function(e,t){var n=e.indexState.sequenceNumber-t.indexState.sequenceNumber;return 0!==n?n:Rv(e.collectionGroup,t.collectionGroup)})),e[0].collectionGroup)}))}},{key:"updateCollectionGroup",value:function(e,t,n){var r=this,i=kw(e),a=bw(e);return this.Tn(e).next((function(e){return i.j("collectionGroupIndex",IDBKeyRange.bound(t,t)).next((function(t){return em.forEach(t,(function(t){return a.put(Zb(t.indexId,r.user,e,n))}))}))}))}},{key:"updateIndexEntries",value:function(e,t){var n=this,r=new Map;return em.forEach(t,(function(t,i){var a=r.get(t.collectionGroup);return(a?em.resolve(a):n.getFieldIndexes(e,t.collectionGroup)).next((function(a){return r.set(t.collectionGroup,a),em.forEach(a,(function(r){return n.En(e,t,r).next((function(t){var a=n.An(i,r);return t.isEqual(a)?em.resolve():n.vn(e,i,r,t,a)}))}))}))}))}},{key:"Rn",value:function(e,t,n,r){return gw(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.gn(n,t.key),documentKey:t.key.path.toArray()})}},{key:"Pn",value:function(e,t,n,r){return gw(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.gn(n,t.key),t.key.path.toArray()])}},{key:"En",value:function(e,t,n){var r=gw(e),i=new $m(tw);return r.X({index:"documentKeyIndex",range:IDBKeyRange.only([n.indexId,this.uid,this.gn(n,t)])},(function(e,r){i=i.add(new ew(n.indexId,t,r.arrayValue,r.directionalValue))})).next((function(){return i}))}},{key:"An",value:function(e,t){var n=new $m(tw),r=this.mn(t,e);if(null==r)return n;var i=zv(t);if(null!=i){var a=e.data.field(i.fieldPath);if(_y(a)){var o,u=S(a.arrayValue.values||[]);try{for(u.s();!(o=u.n()).done;){var s=o.value;n=n.add(new ew(t.indexId,e.key,this.dn(s),r))}}catch(c){u.e(c)}finally{u.f()}}}else n=n.add(new ew(t.indexId,e.key,vw,r));return n}},{key:"vn",value:function(e,t,n,r,i){var a=this;fv("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);var o=[];return function(e,t,n,r,i){for(var a=e.getIterator(),o=t.getIterator(),u=Jm(a),s=Jm(o);u||s;){var c=!1,l=!1;if(u&&s){var f=n(u,s);f<0?l=!0:f>0&&(c=!0)}else null!=u?l=!0:c=!0;c?(r(s),s=Jm(o)):l?(i(u),u=Jm(a)):(u=Jm(a),s=Jm(o))}}(r,i,tw,(function(r){o.push(a.Rn(e,t,n,r))}),(function(r){o.push(a.Pn(e,t,n,r))})),em.waitFor(o)}},{key:"Tn",value:function(e){var t=1;return bw(e).X({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(function(e,n,r){r.done(),t=n.sequenceNumber+1})).next((function(){return t}))}},{key:"createRange",value:function(e,t,n){n=n.sort((function(e,t){return tw(e,t)})).filter((function(e,t,n){return!t||0!==tw(e,n[t-1])}));var r=[];r.push(e);var i,a=S(n);try{for(a.s();!(i=a.n()).done;){var o=i.value,u=tw(o,e),s=tw(o,t);if(0===u)r[0]=e.Je();else if(u>0&&s<0)r.push(o),r.push(o.Je());else if(s>0)break}}catch(d){a.e(d)}finally{a.f()}r.push(t);for(var c=[],l=0;l<r.length;l+=2){if(this.bn(r[l],r[l+1]))return[];var f=[r[l].indexId,this.uid,r[l].arrayValue,r[l].directionalValue,vw,[]],h=[r[l+1].indexId,this.uid,r[l+1].arrayValue,r[l+1].directionalValue,vw,[]];c.push(IDBKeyRange.bound(f,h))}return c}},{key:"bn",value:function(e,t){return tw(e,t)>0}},{key:"getMinOffsetFromCollectionGroup",value:function(e,t){return this.getFieldIndexes(e,t).next(ww)}},{key:"getMinOffset",value:function(e,t){var n=this;return em.mapArray(this.cn(t),(function(t){return n.an(e,t).next((function(e){return e||vv()}))})).next(ww)}}]),e}();function yw(e){return qm(e,"collectionParents")}function gw(e){return qm(e,"indexEntries")}function kw(e){return qm(e,"indexConfiguration")}function bw(e){return qm(e,"indexState")}function ww(e){mv(0!==e.length);for(var t=e[0].indexState.offset,n=t.largestBatchId,r=1;r<e.length;r++){var i=e[r].indexState.offset;Qv(i,t)<0&&(t=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new Hv(t.readTime,t.documentKey,n)}var xw={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},_w=function(){function e(t,n,r){s(this,e),this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}return(0,c.Z)(e,null,[{key:"withCacheSize",value:function(t){return new e(t,e.DEFAULT_COLLECTION_PERCENTILE,e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}]),e}();function Iw(e,t,n){var r=e.store("mutations"),i=e.store("documentMutations"),a=[],o=IDBKeyRange.only(n.batchId),u=0,s=r.X({range:o},(function(e,t,n){return u++,n.delete()}));a.push(s.next((function(){mv(1===u)})));var c,l=[],f=S(n.mutations);try{for(f.s();!(c=f.n()).done;){var h=c.value,d=xm(t,h.key.path,n.batchId);a.push(i.delete(d)),l.push(h.key)}}catch(p){f.e(p)}finally{f.f()}return em.waitFor(a).next((function(){return l}))}function Sw(e){if(!e)return 0;var t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw vv();t=e.noDocument}return JSON.stringify(t).length}_w.DEFAULT_COLLECTION_PERCENTILE=10,_w.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,_w.DEFAULT=new _w(41943040,_w.DEFAULT_COLLECTION_PERCENTILE,_w.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),_w.DISABLED=new _w(-1,0,0);var Ew=function(){function e(t,n,r,i){s(this,e),this.userId=t,this.serializer=n,this.indexManager=r,this.referenceDelegate=i,this.Vn={}}return(0,c.Z)(e,[{key:"checkEmpty",value:function(e){var t=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Cw(e).X({index:"userMutationsIndex",range:n},(function(e,n,r){t=!1,r.done()})).next((function(){return t}))}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this,a=Aw(e),o=Cw(e);return o.add({}).next((function(u){mv("number"==typeof u);var s,c=new Ek(u,t,n,r),l=function(e,t,n){var r=n.baseMutations.map((function(t){return vb(e.fe,t)})),i=n.mutations.map((function(t){return vb(e.fe,t)}));return{userId:t,batchId:n.batchId,localWriteTimeMs:n.localWriteTime.toMillis(),baseMutations:r,mutations:i}}(i.serializer,i.userId,c),f=[],h=new $m((function(e,t){return Rv(e.canonicalString(),t.canonicalString())})),d=S(r);try{for(d.s();!(s=d.n()).done;){var p=s.value,v=xm(i.userId,p.key.path,u);h=h.add(p.key.path.popLast()),f.push(o.put(l)),f.push(a.put(v,_m))}}catch(m){d.e(m)}finally{d.f()}return h.forEach((function(t){f.push(i.indexManager.addToCollectionParentIndex(e,t))})),e.addOnCommittedListener((function(){i.Vn[u]=c.keys()})),em.waitFor(f).next((function(){return c}))}))}},{key:"lookupMutationBatch",value:function(e,t){var n=this;return Cw(e).get(t).next((function(e){return e?(mv(e.userId===n.userId),Lb(n.serializer,e)):null}))}},{key:"Sn",value:function(e,t){var n=this;return this.Vn[t]?em.resolve(this.Vn[t]):this.lookupMutationBatch(e,t).next((function(e){if(e){var r=e.keys();return n.Vn[t]=r,r}return null}))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=this,r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]),a=null;return Cw(e).X({index:"userMutationsIndex",range:i},(function(e,t,i){t.userId===n.userId&&(mv(t.batchId>=r),a=Lb(n.serializer,t)),i.done()})).next((function(){return a}))}},{key:"getHighestUnacknowledgedBatchId",value:function(e){var t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return Cw(e).X({index:"userMutationsIndex",range:t,reverse:!0},(function(e,t,r){n=t.batchId,r.done()})).next((function(){return n}))}},{key:"getAllMutationBatches",value:function(e){var t=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Cw(e).j("userMutationsIndex",n).next((function(e){return e.map((function(e){return Lb(t.serializer,e)}))}))}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=wm(this.userId,t.path),a=IDBKeyRange.lowerBound(r),o=[];return Aw(e).X({range:a},(function(r,a,u){var s=(0,i.Z)(r,3),c=s[0],l=s[1],f=s[2],h=km(l);if(c===n.userId&&t.path.isEqual(h))return Cw(e).get(f).next((function(e){if(!e)throw vv();mv(e.userId===n.userId),o.push(Lb(n.serializer,e))}));u.done()})).next((function(){return o}))}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new $m(Rv),a=[];return t.forEach((function(t){var o=wm(n.userId,t.path),u=IDBKeyRange.lowerBound(o),s=Aw(e).X({range:u},(function(e,a,o){var u=(0,i.Z)(e,3),s=u[0],c=u[1],l=u[2],f=km(c);s===n.userId&&t.path.isEqual(f)?r=r.add(l):o.done()}));a.push(s)})),em.waitFor(a).next((function(){return n.Dn(e,r)}))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=this,r=t.path,a=r.length+1,o=wm(this.userId,r),u=IDBKeyRange.lowerBound(o),s=new $m(Rv);return Aw(e).X({range:u},(function(e,t,o){var u=(0,i.Z)(e,3),c=u[0],l=u[1],f=u[2],h=km(l);c===n.userId&&r.isPrefixOf(h)?h.length===a&&(s=s.add(f)):o.done()})).next((function(){return n.Dn(e,s)}))}},{key:"Dn",value:function(e,t){var n=this,r=[],i=[];return t.forEach((function(t){i.push(Cw(e).get(t).next((function(e){if(null===e)throw vv();mv(e.userId===n.userId),r.push(Lb(n.serializer,e))})))})),em.waitFor(i).next((function(){return r}))}},{key:"removeMutationBatch",value:function(e,t){var n=this;return Iw(e.ht,this.userId,t).next((function(r){return e.addOnCommittedListener((function(){n.Cn(t.batchId)})),em.forEach(r,(function(t){return n.referenceDelegate.markPotentiallyOrphaned(e,t)}))}))}},{key:"Cn",value:function(e){delete this.Vn[e]}},{key:"performConsistencyCheck",value:function(e){var t=this;return this.checkEmpty(e).next((function(n){if(!n)return em.resolve();var r=IDBKeyRange.lowerBound([t.userId]),i=[];return Aw(e).X({range:r},(function(e,n,r){if(e[0]===t.userId){var a=km(e[1]);i.push(a)}else r.done()})).next((function(){mv(0===i.length)}))}))}},{key:"containsKey",value:function(e,t){return Tw(e,this.userId,t)}},{key:"xn",value:function(e){var t=this;return Nw(e).get(this.userId).next((function(e){return e||{userId:t.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""}}))}}],[{key:"de",value:function(t,n,r,i){return mv(""!==t.uid),new e(t.isAuthenticated()?t.uid:"",n,r,i)}}]),e}();function Tw(e,t,n){var r=wm(t,n.path),a=r[1],o=IDBKeyRange.lowerBound(r),u=!1;return Aw(e).X({range:o,Y:!0},(function(e,n,r){var o=(0,i.Z)(e,3),s=o[0],c=o[1];o[2];s===t&&c===a&&(u=!0),r.done()})).next((function(){return u}))}function Cw(e){return qm(e,"mutations")}function Aw(e){return qm(e,"documentMutations")}function Nw(e){return qm(e,"mutationQueues")}var Rw=function(){function e(t){s(this,e),this.Nn=t}return(0,c.Z)(e,[{key:"next",value:function(){return this.Nn+=2,this.Nn}}],[{key:"kn",value:function(){return new e(0)}},{key:"Mn",value:function(){return new e(-1)}}]),e}(),Pw=function(){function e(t,n){s(this,e),this.referenceDelegate=t,this.serializer=n}return(0,c.Z)(e,[{key:"allocateTargetId",value:function(e){var t=this;return this.$n(e).next((function(n){var r=new Rw(n.highestTargetId);return n.highestTargetId=r.next(),t.On(e,n).next((function(){return n.highestTargetId}))}))}},{key:"getLastRemoteSnapshotVersion",value:function(e){return this.$n(e).next((function(e){return Lv.fromTimestamp(new Dv(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))}))}},{key:"getHighestSequenceNumber",value:function(e){return this.$n(e).next((function(e){return e.highestListenSequenceNumber}))}},{key:"setTargetsMetadata",value:function(e,t,n){var r=this;return this.$n(e).next((function(i){return i.highestListenSequenceNumber=t,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),r.On(e,i)}))}},{key:"addTargetData",value:function(e,t){var n=this;return this.Fn(e,t).next((function(){return n.$n(e).next((function(r){return r.targetCount+=1,n.Bn(t,r),n.On(e,r)}))}))}},{key:"updateTargetData",value:function(e,t){return this.Fn(e,t)}},{key:"removeTargetData",value:function(e,t){var n=this;return this.removeMatchingKeysForTargetId(e,t.targetId).next((function(){return Ow(e).delete(t.targetId)})).next((function(){return n.$n(e)})).next((function(t){return mv(t.targetCount>0),t.targetCount-=1,n.On(e,t)}))}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return Ow(e).X((function(o,u){var s=Mb(u);s.sequenceNumber<=t&&null===n.get(s.targetId)&&(i++,a.push(r.removeTargetData(e,s)))})).next((function(){return em.waitFor(a)})).next((function(){return i}))}},{key:"forEachTarget",value:function(e,t){return Ow(e).X((function(e,n){var r=Mb(n);t(r)}))}},{key:"$n",value:function(e){return Dw(e).get("targetGlobalKey").next((function(e){return mv(null!==e),e}))}},{key:"On",value:function(e,t){return Dw(e).put("targetGlobalKey",t)}},{key:"Fn",value:function(e,t){return Ow(e).put(Fb(this.serializer,t))}},{key:"Bn",value:function(e,t){var n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}},{key:"getTargetCount",value:function(e){return this.$n(e).next((function(e){return e.targetCount}))}},{key:"getTargetData",value:function(e,t){var n=sg(t),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return Ow(e).X({range:r,index:"queryTargetsIndex"},(function(e,n,r){var a=Mb(n);cg(t,a.target)&&(i=a,r.done())})).next((function(){return i}))}},{key:"addMatchingKeys",value:function(e,t,n){var r=this,i=[],a=Lw(e);return t.forEach((function(t){var o=mm(t.path);i.push(a.put({targetId:n,path:o})),i.push(r.referenceDelegate.addReference(e,n,t))})),em.waitFor(i)}},{key:"removeMatchingKeys",value:function(e,t,n){var r=this,i=Lw(e);return em.forEach(t,(function(t){var a=mm(t.path);return em.waitFor([i.delete([n,a]),r.referenceDelegate.removeReference(e,n,t)])}))}},{key:"removeMatchingKeysForTargetId",value:function(e,t){var n=Lw(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=IDBKeyRange.bound([t],[t+1],!1,!0),r=Lw(e),i=Bg();return r.X({range:n,Y:!0},(function(e,t,n){var r=km(e[1]),a=new Vv(r);i=i.add(a)})).next((function(){return i}))}},{key:"containsKey",value:function(e,t){var n=mm(t.path),r=IDBKeyRange.bound([n],[Ov(n)],!1,!0),a=0;return Lw(e).X({index:"documentTargetsIndex",Y:!0,range:r},(function(e,t,n){var r=(0,i.Z)(e,2),o=r[0];r[1];0!==o&&(a++,n.done())})).next((function(){return a>0}))}},{key:"le",value:function(e,t){return Ow(e).get(t).next((function(e){return e?Mb(e):null}))}}]),e}();function Ow(e){return qm(e,"targets")}function Dw(e){return qm(e,"targetGlobal")}function Lw(e){return qm(e,"targetDocuments")}function Mw(e,t){var n=(0,i.Z)(e,2),r=n[0],a=n[1],o=(0,i.Z)(t,2),u=o[0],s=o[1],c=Rv(r,u);return 0===c?Rv(a,s):c}var Fw=function(){function e(t){s(this,e),this.Ln=t,this.buffer=new $m(Mw),this.qn=0}return(0,c.Z)(e,[{key:"Un",value:function(){return++this.qn}},{key:"Kn",value:function(e){var t=[e,this.Un()];if(this.buffer.size<this.Ln)this.buffer=this.buffer.add(t);else{var n=this.buffer.last();Mw(t,n)<0&&(this.buffer=this.buffer.delete(n).add(t))}}},{key:"maxValue",get:function(){return this.buffer.last()[0]}}]),e}(),jw=function(){function e(t,n,r){s(this,e),this.garbageCollector=t,this.asyncQueue=n,this.localStore=r,this.Gn=null}return(0,c.Z)(e,[{key:"start",value:function(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Qn(6e4)}},{key:"stop",value:function(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}},{key:"started",get:function(){return null!==this.Gn}},{key:"Qn",value:function(e){var t=this;fv("LruGarbageCollector","Garbage collection scheduled in ".concat(e,"ms")),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,Je($e().mark((function e(){return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.Gn=null,e.prev=1,e.next=4,t.localStore.collectGarbage(t.garbageCollector);case 4:e.next=14;break;case 6:if(e.prev=6,e.t0=e.catch(1),!am(e.t0)){e.next=12;break}fv("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e.t0),e.next=14;break;case 12:return e.next=14,Xv(e.t0);case 14:return e.next=16,t.Qn(3e5);case 16:case"end":return e.stop()}}),e,null,[[1,6]])}))))}}]),e}(),Uw=function(){function e(t,n){s(this,e),this.jn=t,this.params=n}return(0,c.Z)(e,[{key:"calculateTargetCount",value:function(e,t){return this.jn.zn(e).next((function(e){return Math.floor(t/100*e)}))}},{key:"nthSequenceNumber",value:function(e,t){var n=this;if(0===t)return em.resolve(hm.ct);var r=new Fw(t);return this.jn.forEachTarget(e,(function(e){return r.Kn(e.sequenceNumber)})).next((function(){return n.jn.Wn(e,(function(e){return r.Kn(e)}))})).next((function(){return r.maxValue}))}},{key:"removeTargets",value:function(e,t,n){return this.jn.removeTargets(e,t,n)}},{key:"removeOrphanedDocuments",value:function(e,t){return this.jn.removeOrphanedDocuments(e,t)}},{key:"collect",value:function(e,t){var n=this;return-1===this.params.cacheSizeCollectionThreshold?(fv("LruGarbageCollector","Garbage collection skipped; disabled"),em.resolve(xw)):this.getCacheSize(e).next((function(r){return r<n.params.cacheSizeCollectionThreshold?(fv("LruGarbageCollector","Garbage collection skipped; Cache size ".concat(r," is lower than threshold ").concat(n.params.cacheSizeCollectionThreshold)),xw):n.Hn(e,t)}))}},{key:"getCacheSize",value:function(e){return this.jn.getCacheSize(e)}},{key:"Hn",value:function(e,t){var n,r,i,a,o,u,s,c=this,l=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((function(t){return t>c.params.maximumSequenceNumbersToCollect?(fv("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of ".concat(c.params.maximumSequenceNumbersToCollect," from ").concat(t)),r=c.params.maximumSequenceNumbersToCollect):r=t,a=Date.now(),c.nthSequenceNumber(e,r)})).next((function(r){return n=r,o=Date.now(),c.removeTargets(e,n,t)})).next((function(t){return i=t,u=Date.now(),c.removeOrphanedDocuments(e,n)})).next((function(e){return s=Date.now(),lv()<=Lt.DEBUG&&fv("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in ".concat(a-l,"ms\n\tDetermined least recently used ").concat(r," in ")+(o-a)+"ms\n"+"\tRemoved ".concat(i," targets in ")+(u-o)+"ms\n"+"\tRemoved ".concat(e," documents in ")+(s-u)+"ms\n"+"Total Duration: ".concat(s-l,"ms")),em.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e})}))}}]),e}();function Vw(e,t){return new Uw(e,t)}var Zw=function(){function e(t,n){s(this,e),this.db=t,this.garbageCollector=Vw(this,n)}return(0,c.Z)(e,[{key:"zn",value:function(e){var t=this.Jn(e);return this.db.getTargetCache().getTargetCount(e).next((function(e){return t.next((function(t){return e+t}))}))}},{key:"Jn",value:function(e){var t=0;return this.Wn(e,(function(e){t++})).next((function(){return t}))}},{key:"forEachTarget",value:function(e,t){return this.db.getTargetCache().forEachTarget(e,t)}},{key:"Wn",value:function(e,t){return this.Yn(e,(function(e,n){return t(n)}))}},{key:"addReference",value:function(e,t,n){return zw(e,n)}},{key:"removeReference",value:function(e,t,n){return zw(e,n)}},{key:"removeTargets",value:function(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}},{key:"markPotentiallyOrphaned",value:function(e,t){return zw(e,t)}},{key:"Xn",value:function(e,t){return function(e,t){var n=!1;return Nw(e).Z((function(r){return Tw(e,r,t).next((function(e){return e&&(n=!0),em.resolve(!e)}))})).next((function(){return n}))}(e,t)}},{key:"removeOrphanedDocuments",value:function(e,t){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],a=0;return this.Yn(e,(function(o,u){if(u<=t){var s=n.Xn(e,o).next((function(t){if(!t)return a++,r.getEntry(e,o).next((function(){return r.removeEntry(o,Lv.min()),Lw(e).delete([0,mm(o.path)])}))}));i.push(s)}})).next((function(){return em.waitFor(i)})).next((function(){return r.apply(e)})).next((function(){return a}))}},{key:"removeTarget",value:function(e,t){var n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}},{key:"updateLimboDocument",value:function(e,t){return zw(e,t)}},{key:"Yn",value:function(e,t){var n,r=Lw(e),a=hm.ct;return r.X({index:"documentTargetsIndex"},(function(e,r){var o=(0,i.Z)(e,2),u=o[0],s=(o[1],r.path),c=r.sequenceNumber;0===u?(a!==hm.ct&&t(new Vv(km(n)),a),a=c,n=s):a=hm.ct})).next((function(){a!==hm.ct&&t(new Vv(km(n)),a)}))}},{key:"getCacheSize",value:function(e){return this.db.getRemoteDocumentCache().getSize(e)}}]),e}();function zw(e,t){return Lw(e).put(function(e,t){return{targetId:0,path:mm(e.path),sequenceNumber:t}}(t,e.currentSequenceNumber))}var Bw=function(){function e(){s(this,e),this.changes=new Pg((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),this.changesApplied=!1}return(0,c.Z)(e,[{key:"addEntry",value:function(e){this.assertNotApplied(),this.changes.set(e.key,e)}},{key:"removeEntry",value:function(e,t){this.assertNotApplied(),this.changes.set(e,Ly.newInvalidDocument(e).setReadTime(t))}},{key:"getEntry",value:function(e,t){this.assertNotApplied();var n=this.changes.get(t);return void 0!==n?em.resolve(n):this.getFromCache(e,t)}},{key:"getEntries",value:function(e,t){return this.getAllFromCache(e,t)}},{key:"apply",value:function(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}},{key:"assertNotApplied",value:function(){}}]),e}(),qw=function(){function e(t){s(this,e),this.serializer=t}return(0,c.Z)(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t,n){return Hw(e).put(n)}},{key:"removeEntry",value:function(e,t,n){return Hw(e).delete(function(e,t){var n=e.path.toArray();return[n.slice(0,n.length-2),n[n.length-2],Pb(t),n[n.length-1]]}(t,n))}},{key:"updateMetadata",value:function(e,t){var n=this;return this.getMetadata(e).next((function(r){return r.byteSize+=t,n.Zn(e,r)}))}},{key:"getEntry",value:function(e,t){var n=this,r=Ly.newInvalidDocument(t);return Hw(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(Qw(t))},(function(e,i){r=n.ts(t,i)})).next((function(){return r}))}},{key:"es",value:function(e,t){var n=this,r={size:0,document:Ly.newInvalidDocument(t)};return Hw(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(Qw(t))},(function(e,i){r={document:n.ts(t,i),size:Sw(i)}})).next((function(){return r}))}},{key:"getEntries",value:function(e,t){var n=this,r=Dg();return this.ns(e,t,(function(e,t){var i=n.ts(e,t);r=r.insert(e,i)})).next((function(){return r}))}},{key:"ss",value:function(e,t){var n=this,r=Dg(),i=new Hm(Vv.comparator);return this.ns(e,t,(function(e,t){var a=n.ts(e,t);r=r.insert(e,a),i=i.insert(e,Sw(t))})).next((function(){return{documents:r,rs:i}}))}},{key:"ns",value:function(e,t,n){if(t.isEmpty())return em.resolve();var r=new $m($w);t.forEach((function(e){return r=r.add(e)}));var i=IDBKeyRange.bound(Qw(r.first()),Qw(r.last())),a=r.getIterator(),o=a.getNext();return Hw(e).X({index:"documentKeyIndex",range:i},(function(e,t,r){for(var i=Vv.fromSegments([].concat((0,u.Z)(t.prefixPath),[t.collectionGroup,t.documentId]));o&&$w(o,i)<0;)n(o,null),o=a.getNext();o&&o.isEqual(i)&&(n(o,t),o=a.hasNext()?a.getNext():null),o?r.G(Qw(o)):r.done()})).next((function(){for(;o;)n(o,null),o=a.hasNext()?a.getNext():null}))}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r){var i=this,a=t.path,o=[a.popLast().toArray(),a.lastSegment(),Pb(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],u=[a.popLast().toArray(),a.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Hw(e).j(IDBKeyRange.bound(o,u,!0)).next((function(e){var n,a=Dg(),o=S(e);try{for(o.s();!(n=o.n()).done;){var u=n.value,s=i.ts(Vv.fromSegments(u.prefixPath.concat(u.collectionGroup,u.documentId)),u);s.isFoundDocument()&&(Cg(t,s)||r.has(s.key))&&(a=a.insert(s.key,s))}}catch(c){o.e(c)}finally{o.f()}return a}))}},{key:"getAllFromCollectionGroup",value:function(e,t,n,r){var i=this,a=Dg(),o=Yw(t,n),u=Yw(t,Hv.max());return Hw(e).X({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,u,!0)},(function(e,t,n){var o=i.ts(Vv.fromSegments(t.prefixPath.concat(t.collectionGroup,t.documentId)),t);(a=a.insert(o.key,o)).size===r&&n.done()})).next((function(){return a}))}},{key:"newChangeBuffer",value:function(e){return new Kw(this,!!e&&e.trackRemovals)}},{key:"getSize",value:function(e){return this.getMetadata(e).next((function(e){return e.byteSize}))}},{key:"getMetadata",value:function(e){return Ww(e).get("remoteDocumentGlobalKey").next((function(e){return mv(!!e),e}))}},{key:"Zn",value:function(e,t){return Ww(e).put("remoteDocumentGlobalKey",t)}},{key:"ts",value:function(e,t){if(t){var n=function(e,t){var n;if(t.document)n=db(e.fe,t.document,!!t.hasCommittedMutations);else if(t.noDocument){var r=Vv.fromSegments(t.noDocument.path),i=Db(t.noDocument.readTime);n=Ly.newNoDocument(r,i),t.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!t.unknownDocument)return vv();var a=Vv.fromSegments(t.unknownDocument.path),o=Db(t.unknownDocument.version);n=Ly.newUnknownDocument(a,o)}return t.readTime&&n.setReadTime(function(e){var t=new Dv(e[0],e[1]);return Lv.fromTimestamp(t)}(t.readTime)),n}(this.serializer,t);if(!n.isNoDocument()||!n.version.isEqual(Lv.min()))return n}return Ly.newInvalidDocument(e)}}]),e}();function Gw(e){return new qw(e)}var Kw=function(e){f(n,e);var t=m(n);function n(e,r){var i;return s(this,n),(i=t.call(this)).os=e,i.trackRemovals=r,i.us=new Pg((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),i}return(0,c.Z)(n,[{key:"applyChanges",value:function(e){var t=this,n=[],r=0,i=new $m((function(e,t){return Rv(e.canonicalString(),t.canonicalString())}));return this.changes.forEach((function(a,o){var u=t.us.get(a);if(n.push(t.os.removeEntry(e,a,u.readTime)),o.isValidDocument()){var s=Rb(t.os.serializer,o);i=i.add(a.path.popLast());var c=Sw(s);r+=c-u.size,n.push(t.os.addEntry(e,a,s))}else if(r-=u.size,t.trackRemovals){var l=Rb(t.os.serializer,o.convertToNoDocument(Lv.min()));n.push(t.os.addEntry(e,a,l))}})),i.forEach((function(r){n.push(t.os.indexManager.addToCollectionParentIndex(e,r))})),n.push(this.os.updateMetadata(e,r)),em.waitFor(n)}},{key:"getFromCache",value:function(e,t){var n=this;return this.os.es(e,t).next((function(e){return n.us.set(t,{size:e.size,readTime:e.document.readTime}),e.document}))}},{key:"getAllFromCache",value:function(e,t){var n=this;return this.os.ss(e,t).next((function(e){var t=e.documents;return e.rs.forEach((function(e,r){n.us.set(e,{size:r,readTime:t.get(e).readTime})})),t}))}}]),n}(Bw);function Ww(e){return qm(e,"remoteDocumentGlobal")}function Hw(e){return qm(e,"remoteDocumentsV14")}function Qw(e){var t=e.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function Yw(e,t){var n=t.documentKey.path.toArray();return[e,Pb(t.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function $w(e,t){for(var n=e.path.toArray(),r=t.path.toArray(),i=0,a=0;a<n.length-2&&a<r.length-2;++a)if(i=Rv(n[a],r[a]))return i;return(i=Rv(n.length,r.length))||((i=Rv(n[n.length-2],r[r.length-2]))||Rv(n[n.length-1],r[r.length-1]))}var Xw=(0,c.Z)((function e(t,n){s(this,e),this.overlayedDocument=t,this.mutatedFields=n})),Jw=function(){function e(t,n,r,i){s(this,e),this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}return(0,c.Z)(e,[{key:"getDocument",value:function(e,t){var n=this,r=null;return this.documentOverlayCache.getOverlay(e,t).next((function(i){return r=i,n.remoteDocumentCache.getEntry(e,t)})).next((function(e){return null!==r&&pk(r.mutation,e,ey.empty(),Dv.now()),e}))}},{key:"getDocuments",value:function(e,t){var n=this;return this.remoteDocumentCache.getEntries(e,t).next((function(t){return n.getLocalViewOfDocuments(e,t,Bg()).next((function(){return t}))}))}},{key:"getLocalViewOfDocuments",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Bg(),i=jg();return this.populateOverlays(e,i,t).next((function(){return n.computeViews(e,t,i,r).next((function(e){var t=Mg();return e.forEach((function(e,n){t=t.insert(e,n.overlayedDocument)})),t}))}))}},{key:"getOverlayedDocuments",value:function(e,t){var n=this,r=jg();return this.populateOverlays(e,r,t).next((function(){return n.computeViews(e,t,r,Bg())}))}},{key:"populateOverlays",value:function(e,t,n){var r=[];return n.forEach((function(e){t.has(e)||r.push(e)})),this.documentOverlayCache.getOverlays(e,r).next((function(e){e.forEach((function(e,n){t.set(e,n)}))}))}},{key:"computeViews",value:function(e,t,n,r){var i=Dg(),a=Vg(),o=Vg();return t.forEach((function(e,t){var o=n.get(t.key);r.has(t.key)&&(void 0===o||o.mutation instanceof gk)?i=i.insert(t.key,t):void 0!==o?(a.set(t.key,o.mutation.getFieldMask()),pk(o.mutation,t,o.mutation.getFieldMask(),Dv.now())):a.set(t.key,ey.empty())})),this.recalculateAndSaveOverlays(e,i).next((function(e){return e.forEach((function(e,t){return a.set(e,t)})),t.forEach((function(e,t){var n;return o.set(e,new Xw(t,null!==(n=a.get(e))&&void 0!==n?n:null))})),o}))}},{key:"recalculateAndSaveOverlays",value:function(e,t){var n=this,r=Vg(),i=new Hm((function(e,t){return e-t})),a=Bg();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((function(e){var n,a=S(e);try{var o=function(){var e=n.value;e.keys().forEach((function(n){var a=t.get(n);if(null!==a){var o=r.get(n)||ey.empty();o=e.applyToLocalView(a,o),r.set(n,o);var u=(i.get(e.batchId)||Bg()).add(n);i=i.insert(e.batchId,u)}}))};for(a.s();!(n=a.n()).done;)o()}catch(u){a.e(u)}finally{a.f()}})).next((function(){for(var o=[],u=i.getReverseIterator(),s=function(){var i=u.getNext(),s=i.key,c=i.value,l=Ug();c.forEach((function(e){if(!a.has(e)){var n=hk(t.get(e),r.get(e));null!==n&&l.set(e,n),a=a.add(e)}})),o.push(n.documentOverlayCache.saveOverlays(e,s,l))};u.hasNext();)s();return em.waitFor(o)})).next((function(){return r}))}},{key:"recalculateAndSaveOverlaysForDocumentKeys",value:function(e,t){var n=this;return this.remoteDocumentCache.getEntries(e,t).next((function(t){return n.recalculateAndSaveOverlays(e,t)}))}},{key:"getDocumentsMatchingQuery",value:function(e,t,n){return function(e){return Vv.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):bg(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n):this.getDocumentsMatchingCollectionQuery(e,t,n)}},{key:"getNextDocuments",value:function(e,t,n,r){var i=this;return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next((function(a){var o=r-a.size>0?i.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-a.size):em.resolve(jg()),u=-1,s=a;return o.next((function(t){return em.forEach(t,(function(t,n){return u<n.largestBatchId&&(u=n.largestBatchId),a.get(t)?em.resolve():i.remoteDocumentCache.getEntry(e,t).next((function(e){s=s.insert(t,e)}))})).next((function(){return i.populateOverlays(e,t,a)})).next((function(){return i.computeViews(e,s,t,Bg())})).next((function(e){return{batchId:u,changes:Fg(e)}}))}))}))}},{key:"getDocumentsMatchingDocumentQuery",value:function(e,t){return this.getDocument(e,new Vv(t)).next((function(e){var t=Mg();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}},{key:"getDocumentsMatchingCollectionGroupQuery",value:function(e,t,n){var r=this,i=t.collectionGroup,a=Mg();return this.indexManager.getCollectionParents(e,i).next((function(o){return em.forEach(o,(function(o){var u=function(e,t){return new pg(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,o.child(i));return r.getDocumentsMatchingCollectionQuery(e,u,n).next((function(e){e.forEach((function(e,t){a=a.insert(e,t)}))}))})).next((function(){return a}))}))}},{key:"getDocumentsMatchingCollectionQuery",value:function(e,t,n){var r,i=this;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next((function(a){return r=a,i.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,r)})).next((function(e){r.forEach((function(t,n){var r=n.getKey();null===e.get(r)&&(e=e.insert(r,Ly.newInvalidDocument(r)))}));var n=Mg();return e.forEach((function(e,i){var a=r.get(e);void 0!==a&&pk(a.mutation,i,ey.empty(),Dv.now()),Cg(t,i)&&(n=n.insert(e,i))})),n}))}}]),e}(),ex=function(){function e(t){s(this,e),this.serializer=t,this.cs=new Map,this.hs=new Map}return(0,c.Z)(e,[{key:"getBundleMetadata",value:function(e,t){return em.resolve(this.cs.get(t))}},{key:"saveBundleMetadata",value:function(e,t){var n;return this.cs.set(t.id,{id:(n=t).id,version:n.version,createTime:rb(n.createTime)}),em.resolve()}},{key:"getNamedQuery",value:function(e,t){return em.resolve(this.hs.get(t))}},{key:"saveNamedQuery",value:function(e,t){return this.hs.set(t.name,function(e){return{name:e.name,query:jb(e.bundledQuery),readTime:rb(e.readTime)}}(t)),em.resolve()}}]),e}(),tx=function(){function e(){s(this,e),this.overlays=new Hm(Vv.comparator),this.ls=new Map}return(0,c.Z)(e,[{key:"getOverlay",value:function(e,t){return em.resolve(this.overlays.get(t))}},{key:"getOverlays",value:function(e,t){var n=this,r=jg();return em.forEach(t,(function(t){return n.getOverlay(e,t).next((function(e){null!==e&&r.set(t,e)}))})).next((function(){return r}))}},{key:"saveOverlays",value:function(e,t,n){var r=this;return n.forEach((function(n,i){r.we(e,t,i)})),em.resolve()}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=this.ls.get(n);return void 0!==i&&(i.forEach((function(e){return r.overlays=r.overlays.remove(e)})),this.ls.delete(n)),em.resolve()}},{key:"getOverlaysForCollection",value:function(e,t,n){for(var r=jg(),i=t.length+1,a=new Vv(t.child("")),o=this.overlays.getIteratorFrom(a);o.hasNext();){var u=o.getNext().value,s=u.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===i&&u.largestBatchId>n&&r.set(u.getKey(),u)}return em.resolve(r)}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){for(var i=new Hm((function(e,t){return e-t})),a=this.overlays.getIterator();a.hasNext();){var o=a.getNext().value;if(o.getKey().getCollectionGroup()===t&&o.largestBatchId>n){var u=i.get(o.largestBatchId);null===u&&(u=jg(),i=i.insert(o.largestBatchId,u)),u.set(o.getKey(),o)}}for(var s=jg(),c=i.getIterator();c.hasNext()&&(c.getNext().value.forEach((function(e,t){return s.set(e,t)})),!(s.size()>=r)););return em.resolve(s)}},{key:"we",value:function(e,t,n){var r=this.overlays.get(n.key);if(null!==r){var i=this.ls.get(r.largestBatchId).delete(n.key);this.ls.set(r.largestBatchId,i)}this.overlays=this.overlays.insert(n.key,new Ck(t,n));var a=this.ls.get(t);void 0===a&&(a=Bg(),this.ls.set(t,a)),this.ls.set(t,a.add(n.key))}}]),e}(),nx=function(){function e(){s(this,e),this.fs=new $m(rx.ds),this.ws=new $m(rx._s)}return(0,c.Z)(e,[{key:"isEmpty",value:function(){return this.fs.isEmpty()}},{key:"addReference",value:function(e,t){var n=new rx(e,t);this.fs=this.fs.add(n),this.ws=this.ws.add(n)}},{key:"gs",value:function(e,t){var n=this;e.forEach((function(e){return n.addReference(e,t)}))}},{key:"removeReference",value:function(e,t){this.ys(new rx(e,t))}},{key:"ps",value:function(e,t){var n=this;e.forEach((function(e){return n.removeReference(e,t)}))}},{key:"Is",value:function(e){var t=this,n=new Vv(new Fv([])),r=new rx(n,e),i=new rx(n,e+1),a=[];return this.ws.forEachInRange([r,i],(function(e){t.ys(e),a.push(e.key)})),a}},{key:"Ts",value:function(){var e=this;this.fs.forEach((function(t){return e.ys(t)}))}},{key:"ys",value:function(e){this.fs=this.fs.delete(e),this.ws=this.ws.delete(e)}},{key:"Es",value:function(e){var t=new Vv(new Fv([])),n=new rx(t,e),r=new rx(t,e+1),i=Bg();return this.ws.forEachInRange([n,r],(function(e){i=i.add(e.key)})),i}},{key:"containsKey",value:function(e){var t=new rx(e,0),n=this.fs.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}]),e}(),rx=function(){function e(t,n){s(this,e),this.key=t,this.As=n}return(0,c.Z)(e,null,[{key:"ds",value:function(e,t){return Vv.comparator(e.key,t.key)||Rv(e.As,t.As)}},{key:"_s",value:function(e,t){return Rv(e.As,t.As)||Vv.comparator(e.key,t.key)}}]),e}(),ix=function(){function e(t,n){s(this,e),this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.vs=1,this.Rs=new $m(rx.ds)}return(0,c.Z)(e,[{key:"checkEmpty",value:function(e){return em.resolve(0===this.mutationQueue.length)}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this.vs;this.vs++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];var a=new Ek(i,t,n,r);this.mutationQueue.push(a);var o,u=S(r);try{for(u.s();!(o=u.n()).done;){var s=o.value;this.Rs=this.Rs.add(new rx(s.key,i)),this.indexManager.addToCollectionParentIndex(e,s.key.path.popLast())}}catch(c){u.e(c)}finally{u.f()}return em.resolve(a)}},{key:"lookupMutationBatch",value:function(e,t){return em.resolve(this.Ps(t))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=t+1,r=this.bs(n),i=r<0?0:r;return em.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}},{key:"getHighestUnacknowledgedBatchId",value:function(){return em.resolve(0===this.mutationQueue.length?-1:this.vs-1)}},{key:"getAllMutationBatches",value:function(e){return em.resolve(this.mutationQueue.slice())}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=new rx(t,0),i=new rx(t,Number.POSITIVE_INFINITY),a=[];return this.Rs.forEachInRange([r,i],(function(e){var t=n.Ps(e.As);a.push(t)})),em.resolve(a)}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new $m(Rv);return t.forEach((function(e){var t=new rx(e,0),i=new rx(e,Number.POSITIVE_INFINITY);n.Rs.forEachInRange([t,i],(function(e){r=r.add(e.As)}))})),em.resolve(this.Vs(r))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=t.path,r=n.length+1,i=n;Vv.isDocumentKey(i)||(i=i.child(""));var a=new rx(new Vv(i),0),o=new $m(Rv);return this.Rs.forEachWhile((function(e){var t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.As)),!0)}),a),em.resolve(this.Vs(o))}},{key:"Vs",value:function(e){var t=this,n=[];return e.forEach((function(e){var r=t.Ps(e);null!==r&&n.push(r)})),n}},{key:"removeMutationBatch",value:function(e,t){var n=this;mv(0===this.Ss(t.batchId,"removed")),this.mutationQueue.shift();var r=this.Rs;return em.forEach(t.mutations,(function(i){var a=new rx(i.key,t.batchId);return r=r.delete(a),n.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((function(){n.Rs=r}))}},{key:"Cn",value:function(e){}},{key:"containsKey",value:function(e,t){var n=new rx(t,0),r=this.Rs.firstAfterOrEqual(n);return em.resolve(t.isEqual(r&&r.key))}},{key:"performConsistencyCheck",value:function(e){return this.mutationQueue.length,em.resolve()}},{key:"Ss",value:function(e,t){return this.bs(e)}},{key:"bs",value:function(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}},{key:"Ps",value:function(e){var t=this.bs(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}]),e}(),ax=function(){function e(t){s(this,e),this.Ds=t,this.docs=new Hm(Vv.comparator),this.size=0}return(0,c.Z)(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t){var n=t.key,r=this.docs.get(n),i=r?r.size:0,a=this.Ds(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}},{key:"removeEntry",value:function(e){var t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}},{key:"getEntry",value:function(e,t){var n=this.docs.get(t);return em.resolve(n?n.document.mutableCopy():Ly.newInvalidDocument(t))}},{key:"getEntries",value:function(e,t){var n=this,r=Dg();return t.forEach((function(e){var t=n.docs.get(e);r=r.insert(e,t?t.document.mutableCopy():Ly.newInvalidDocument(e))})),em.resolve(r)}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r){for(var i=Dg(),a=t.path,o=new Vv(a.child("")),u=this.docs.getIteratorFrom(o);u.hasNext();){var s=u.getNext(),c=s.key,l=s.value.document;if(!a.isPrefixOf(c.path))break;c.path.length>a.length+1||Qv(Wv(l),n)<=0||(r.has(l.key)||Cg(t,l))&&(i=i.insert(l.key,l.mutableCopy()))}return em.resolve(i)}},{key:"getAllFromCollectionGroup",value:function(e,t,n,r){vv()}},{key:"Cs",value:function(e,t){return em.forEach(this.docs,(function(e){return t(e)}))}},{key:"newChangeBuffer",value:function(e){return new ox(this)}},{key:"getSize",value:function(e){return em.resolve(this.size)}}]),e}(),ox=function(e){f(n,e);var t=m(n);function n(e){var r;return s(this,n),(r=t.call(this)).os=e,r}return(0,c.Z)(n,[{key:"applyChanges",value:function(e){var t=this,n=[];return this.changes.forEach((function(r,i){i.isValidDocument()?n.push(t.os.addEntry(e,i)):t.os.removeEntry(r)})),em.waitFor(n)}},{key:"getFromCache",value:function(e,t){return this.os.getEntry(e,t)}},{key:"getAllFromCache",value:function(e,t){return this.os.getEntries(e,t)}}]),n}(Bw),ux=function(){function e(t){s(this,e),this.persistence=t,this.xs=new Pg((function(e){return sg(e)}),cg),this.lastRemoteSnapshotVersion=Lv.min(),this.highestTargetId=0,this.Ns=0,this.ks=new nx,this.targetCount=0,this.Ms=Rw.kn()}return(0,c.Z)(e,[{key:"forEachTarget",value:function(e,t){return this.xs.forEach((function(e,n){return t(n)})),em.resolve()}},{key:"getLastRemoteSnapshotVersion",value:function(e){return em.resolve(this.lastRemoteSnapshotVersion)}},{key:"getHighestSequenceNumber",value:function(e){return em.resolve(this.Ns)}},{key:"allocateTargetId",value:function(e){return this.highestTargetId=this.Ms.next(),em.resolve(this.highestTargetId)}},{key:"setTargetsMetadata",value:function(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Ns&&(this.Ns=t),em.resolve()}},{key:"Fn",value:function(e){this.xs.set(e.target,e);var t=e.targetId;t>this.highestTargetId&&(this.Ms=new Rw(t),this.highestTargetId=t),e.sequenceNumber>this.Ns&&(this.Ns=e.sequenceNumber)}},{key:"addTargetData",value:function(e,t){return this.Fn(t),this.targetCount+=1,em.resolve()}},{key:"updateTargetData",value:function(e,t){return this.Fn(t),em.resolve()}},{key:"removeTargetData",value:function(e,t){return this.xs.delete(t.target),this.ks.Is(t.targetId),this.targetCount-=1,em.resolve()}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return this.xs.forEach((function(o,u){u.sequenceNumber<=t&&null===n.get(u.targetId)&&(r.xs.delete(o),a.push(r.removeMatchingKeysForTargetId(e,u.targetId)),i++)})),em.waitFor(a).next((function(){return i}))}},{key:"getTargetCount",value:function(e){return em.resolve(this.targetCount)}},{key:"getTargetData",value:function(e,t){var n=this.xs.get(t)||null;return em.resolve(n)}},{key:"addMatchingKeys",value:function(e,t,n){return this.ks.gs(t,n),em.resolve()}},{key:"removeMatchingKeys",value:function(e,t,n){this.ks.ps(t,n);var r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((function(t){i.push(r.markPotentiallyOrphaned(e,t))})),em.waitFor(i)}},{key:"removeMatchingKeysForTargetId",value:function(e,t){return this.ks.Is(t),em.resolve()}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=this.ks.Es(t);return em.resolve(n)}},{key:"containsKey",value:function(e,t){return em.resolve(this.ks.containsKey(t))}}]),e}(),sx=function(){function e(t,n){var r=this;s(this,e),this.$s={},this.overlays={},this.Os=new hm(0),this.Fs=!1,this.Fs=!0,this.referenceDelegate=t(this),this.Bs=new ux(this),this.indexManager=new dw,this.remoteDocumentCache=new ax((function(e){return r.referenceDelegate.Ls(e)})),this.serializer=new Nb(n),this.qs=new ex(this.serializer)}return(0,c.Z)(e,[{key:"start",value:function(){return Promise.resolve()}},{key:"shutdown",value:function(){return this.Fs=!1,Promise.resolve()}},{key:"started",get:function(){return this.Fs}},{key:"setDatabaseDeletedListener",value:function(){}},{key:"setNetworkEnabled",value:function(){}},{key:"getIndexManager",value:function(e){return this.indexManager}},{key:"getDocumentOverlayCache",value:function(e){var t=this.overlays[e.toKey()];return t||(t=new tx,this.overlays[e.toKey()]=t),t}},{key:"getMutationQueue",value:function(e,t){var n=this.$s[e.toKey()];return n||(n=new ix(t,this.referenceDelegate),this.$s[e.toKey()]=n),n}},{key:"getTargetCache",value:function(){return this.Bs}},{key:"getRemoteDocumentCache",value:function(){return this.remoteDocumentCache}},{key:"getBundleCache",value:function(){return this.qs}},{key:"runTransaction",value:function(e,t,n){var r=this;fv("MemoryPersistence","Starting transaction:",e);var i=new cx(this.Os.next());return this.referenceDelegate.Us(),n(i).next((function(e){return r.referenceDelegate.Ks(i).next((function(){return e}))})).toPromise().then((function(e){return i.raiseOnCommittedEvent(),e}))}},{key:"Gs",value:function(e,t){return em.or(Object.values(this.$s).map((function(n){return function(){return n.containsKey(e,t)}})))}}]),e}(),cx=function(e){f(n,e);var t=m(n);function n(e){var r;return s(this,n),(r=t.call(this)).currentSequenceNumber=e,r}return(0,c.Z)(n)}($v),lx=function(){function e(t){s(this,e),this.persistence=t,this.Qs=new nx,this.js=null}return(0,c.Z)(e,[{key:"Ws",get:function(){if(this.js)return this.js;throw vv()}},{key:"addReference",value:function(e,t,n){return this.Qs.addReference(n,t),this.Ws.delete(n.toString()),em.resolve()}},{key:"removeReference",value:function(e,t,n){return this.Qs.removeReference(n,t),this.Ws.add(n.toString()),em.resolve()}},{key:"markPotentiallyOrphaned",value:function(e,t){return this.Ws.add(t.toString()),em.resolve()}},{key:"removeTarget",value:function(e,t){var n=this;this.Qs.Is(t.targetId).forEach((function(e){return n.Ws.add(e.toString())}));var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((function(e){e.forEach((function(e){return n.Ws.add(e.toString())}))})).next((function(){return r.removeTargetData(e,t)}))}},{key:"Us",value:function(){this.js=new Set}},{key:"Ks",value:function(e){var t=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return em.forEach(this.Ws,(function(r){var i=Vv.fromPath(r);return t.Hs(e,i).next((function(e){e||n.removeEntry(i,Lv.min())}))})).next((function(){return t.js=null,n.apply(e)}))}},{key:"updateLimboDocument",value:function(e,t){var n=this;return this.Hs(e,t).next((function(e){e?n.Ws.delete(t.toString()):n.Ws.add(t.toString())}))}},{key:"Ls",value:function(e){return 0}},{key:"Hs",value:function(e,t){var n=this;return em.or([function(){return em.resolve(n.Qs.containsKey(t))},function(){return n.persistence.getTargetCache().containsKey(e,t)},function(){return n.persistence.Gs(e,t)}])}}],[{key:"zs",value:function(t){return new e(t)}}]),e}(),fx=function(){function e(t){s(this,e),this.serializer=t}return(0,c.Z)(e,[{key:"O",value:function(e,t,n,r){var i=this,a=new tm("createOrUpgrade",t);n<1&&r>=1&&(function(e){e.createObjectStore("owner")}(e),function(e){e.createObjectStore("mutationQueues",{keyPath:"userId"}),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",bm,{unique:!0}),e.createObjectStore("documentMutations")}(e),hx(e),function(e){e.createObjectStore("remoteDocuments")}(e));var o=em.resolve();return n<3&&r>=3&&(0!==n&&(function(e){e.deleteObjectStore("targetDocuments"),e.deleteObjectStore("targets"),e.deleteObjectStore("targetGlobal")}(e),hx(e)),o=o.next((function(){return function(e){var t=e.store("targetGlobal"),n={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Lv.min().toTimestamp(),targetCount:0};return t.put("targetGlobalKey",n)}(a)}))),n<4&&r>=4&&(0!==n&&(o=o.next((function(){return function(e,t){return t.store("mutations").j().next((function(n){e.deleteObjectStore("mutations"),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",bm,{unique:!0});var r=t.store("mutations"),i=n.map((function(e){return r.put(e)}));return em.waitFor(i)}))}(e,a)}))),o=o.next((function(){!function(e){e.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)}))),n<5&&r>=5&&(o=o.next((function(){return i.Ys(a)}))),n<6&&r>=6&&(o=o.next((function(){return function(e){e.createObjectStore("remoteDocumentGlobal")}(e),i.Xs(a)}))),n<7&&r>=7&&(o=o.next((function(){return i.Zs(a)}))),n<8&&r>=8&&(o=o.next((function(){return i.ti(e,a)}))),n<9&&r>=9&&(o=o.next((function(){!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e)}))),n<10&&r>=10&&(o=o.next((function(){return i.ei(a)}))),n<11&&r>=11&&(o=o.next((function(){!function(e){e.createObjectStore("bundles",{keyPath:"bundleId"})}(e),function(e){e.createObjectStore("namedQueries",{keyPath:"name"})}(e)}))),n<12&&r>=12&&(o=o.next((function(){!function(e){var t=e.createObjectStore("documentOverlays",{keyPath:Lm});t.createIndex("collectionPathOverlayIndex",Mm,{unique:!1}),t.createIndex("collectionGroupOverlayIndex",Fm,{unique:!1})}(e)}))),n<13&&r>=13&&(o=o.next((function(){return function(e){var t=e.createObjectStore("remoteDocumentsV14",{keyPath:Im});t.createIndex("documentKeyIndex",Sm),t.createIndex("collectionGroupIndex",Em)}(e)})).next((function(){return i.ni(e,a)})).next((function(){return e.deleteObjectStore("remoteDocuments")}))),n<14&&r>=14&&(o=o.next((function(){return i.si(e,a)}))),n<15&&r>=15&&(o=o.next((function(){return function(e){e.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),e.createObjectStore("indexState",{keyPath:Rm}).createIndex("sequenceNumberIndex",Pm,{unique:!1}),e.createObjectStore("indexEntries",{keyPath:Om}).createIndex("documentKeyIndex",Dm,{unique:!1})}(e)}))),o}},{key:"Xs",value:function(e){var t=0;return e.store("remoteDocuments").X((function(e,n){t+=Sw(n)})).next((function(){var n={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",n)}))}},{key:"Ys",value:function(e){var t=this,n=e.store("mutationQueues"),r=e.store("mutations");return n.j().next((function(n){return em.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.j("userMutationsIndex",i).next((function(r){return em.forEach(r,(function(r){mv(r.userId===n.userId);var i=Lb(t.serializer,r);return Iw(e,n.userId,i).next((function(){}))}))}))}))}))}},{key:"Zs",value:function(e){var t=e.store("targetDocuments"),n=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next((function(e){var r=[];return n.X((function(n,i){var a=new Fv(n),o=function(e){return[0,mm(e)]}(a);r.push(t.get(o).next((function(n){return n?em.resolve():function(n){return t.put({targetId:0,path:mm(n),sequenceNumber:e.highestListenSequenceNumber})}(a)})))})).next((function(){return em.waitFor(r)}))}))}},{key:"ti",value:function(e,t){e.createObjectStore("collectionParents",{keyPath:Nm});var n=t.store("collectionParents"),r=new pw,a=function(e){if(r.add(e)){var t=e.lastSegment(),i=e.popLast();return n.put({collectionId:t,parent:mm(i)})}};return t.store("remoteDocuments").X({Y:!0},(function(e,t){var n=new Fv(e);return a(n.popLast())})).next((function(){return t.store("documentMutations").X({Y:!0},(function(e,t){var n=(0,i.Z)(e,3),r=(n[0],n[1]),o=(n[2],km(r));return a(o.popLast())}))}))}},{key:"ei",value:function(e){var t=this,n=e.store("targets");return n.X((function(e,r){var i=Mb(r),a=Fb(t.serializer,i);return n.put(a)}))}},{key:"ni",value:function(e,t){var n=t.store("remoteDocuments"),r=[];return n.X((function(e,n){var i,a=t.store("remoteDocumentsV14"),o=(i=n,i.document?new Vv(Fv.fromString(i.document.name).popFirst(5)):i.noDocument?Vv.fromSegments(i.noDocument.path):i.unknownDocument?Vv.fromSegments(i.unknownDocument.path):vv()).path.toArray(),u={prefixPath:o.slice(0,o.length-2),collectionGroup:o[o.length-2],documentId:o[o.length-1],readTime:n.readTime||[0,0],unknownDocument:n.unknownDocument,noDocument:n.noDocument,document:n.document,hasCommittedMutations:!!n.hasCommittedMutations};r.push(a.put(u))})).next((function(){return em.waitFor(r)}))}},{key:"si",value:function(e,t){var n=this,r=t.store("mutations"),i=Gw(this.serializer),a=new sx(lx.zs,this.serializer.fe);return r.j().next((function(e){var r=new Map;return e.forEach((function(e){var t,i=null!==(t=r.get(e.userId))&&void 0!==t?t:Bg();Lb(n.serializer,e).keys().forEach((function(e){return i=i.add(e)})),r.set(e.userId,i)})),em.forEach(r,(function(e,r){var o=new uv(r),u=Gb.de(n.serializer,o),s=a.getIndexManager(o),c=Ew.de(o,n.serializer,s,a.referenceDelegate);return new Jw(i,c,u,s).recalculateAndSaveOverlaysForDocumentKeys(new Bm(t,hm.ct),e).next()}))}))}}]),e}();function hx(e){e.createObjectStore("targetDocuments",{keyPath:Cm}).createIndex("documentTargetsIndex",Am,{unique:!0}),e.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",Tm,{unique:!0}),e.createObjectStore("targetGlobal")}var dx="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",px=function(){function e(t,n,r,i,a,o,u,c,l,f){var h=arguments.length>10&&void 0!==arguments[10]?arguments[10]:15;if(s(this,e),this.allowTabSynchronization=t,this.persistenceKey=n,this.clientId=r,this.ii=a,this.window=o,this.document=u,this.ri=l,this.oi=f,this.ui=h,this.Os=null,this.Fs=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.ai=null,this.hi=null,this.li=Number.NEGATIVE_INFINITY,this.fi=function(e){return Promise.resolve()},!e.D())throw new kv(gv.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Zw(this,i),this.di=n+"main",this.serializer=new Nb(c),this.wi=new nm(this.di,this.ui,new fx(this.serializer)),this.Bs=new Pw(this.referenceDelegate,this.serializer),this.remoteDocumentCache=Gw(this.serializer),this.qs=new zb,this.window&&this.window.localStorage?this._i=this.window.localStorage:(this._i=null,!1===f&&hv("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return(0,c.Z)(e,[{key:"start",value:function(){var e=this;return this.mi().then((function(){if(!e.isPrimary&&!e.allowTabSynchronization)throw new kv(gv.FAILED_PRECONDITION,dx);return e.gi(),e.yi(),e.pi(),e.runTransaction("getHighestListenSequenceNumber","readonly",(function(t){return e.Bs.getHighestSequenceNumber(t)}))})).then((function(t){e.Os=new hm(t,e.ri)})).then((function(){e.Fs=!0})).catch((function(t){return e.wi&&e.wi.close(),Promise.reject(t)}))}},{key:"Ii",value:function(e){var t=this;return this.fi=function(){var n=Je($e().mark((function n(r){return $e().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!t.started){n.next=2;break}return n.abrupt("return",e(r));case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),e(this.isPrimary)}},{key:"setDatabaseDeletedListener",value:function(e){this.wi.B(function(){var t=Je($e().mark((function t(n){return $e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=null===n.newVersion,!t.t0){t.next=4;break}return t.next=4,e();case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}},{key:"setNetworkEnabled",value:function(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.ii.enqueueAndForget(Je($e().mark((function e(){return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.started,!e.t0){e.next=4;break}return e.next=4,t.mi();case 4:case"end":return e.stop()}}),e)})))))}},{key:"mi",value:function(){var e=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(function(t){return mx(t).put({clientId:e.clientId,updateTimeMs:Date.now(),networkEnabled:e.networkEnabled,inForeground:e.inForeground}).next((function(){if(e.isPrimary)return e.Ti(t).next((function(t){t||(e.isPrimary=!1,e.ii.enqueueRetryable((function(){return e.fi(!1)})))}))})).next((function(){return e.Ei(t)})).next((function(n){return e.isPrimary&&!n?e.Ai(t).next((function(){return!1})):!!n&&e.vi(t).next((function(){return!0}))}))})).catch((function(t){if(am(t))return fv("IndexedDbPersistence","Failed to extend owner lease: ",t),e.isPrimary;if(!e.allowTabSynchronization)throw t;return fv("IndexedDbPersistence","Releasing owner lease after error during lease refresh",t),!1})).then((function(t){e.isPrimary!==t&&e.ii.enqueueRetryable((function(){return e.fi(t)})),e.isPrimary=t}))}},{key:"Ti",value:function(e){var t=this;return vx(e).get("owner").next((function(e){return em.resolve(t.Ri(e))}))}},{key:"Pi",value:function(e){return mx(e).delete(this.clientId)}},{key:"bi",value:function(){var e=Je($e().mark((function e(){var t,n,r,i,a=this;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isPrimary||this.Vi(this.li,18e5)){e.next=6;break}return this.li=Date.now(),e.next=4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(e){var t=qm(e,"clientMetadata");return t.j().next((function(e){var n=a.Si(e,18e5),r=e.filter((function(e){return-1===n.indexOf(e)}));return em.forEach(r,(function(e){return t.delete(e.clientId)})).next((function(){return r}))}))})).catch((function(){return[]}));case 4:if(t=e.sent,this._i){n=S(t);try{for(n.s();!(r=n.n()).done;)i=r.value,this._i.removeItem(this.Di(i.clientId))}catch(o){n.e(o)}finally{n.f()}}case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"pi",value:function(){var e=this;this.hi=this.ii.enqueueAfterDelay("client_metadata_refresh",4e3,(function(){return e.mi().then((function(){return e.bi()})).then((function(){return e.pi()}))}))}},{key:"Ri",value:function(e){return!!e&&e.ownerId===this.clientId}},{key:"Ei",value:function(e){var t=this;return this.oi?em.resolve(!0):vx(e).get("owner").next((function(n){if(null!==n&&t.Vi(n.leaseTimestampMs,5e3)&&!t.Ci(n.ownerId)){if(t.Ri(n)&&t.networkEnabled)return!0;if(!t.Ri(n)){if(!n.allowTabSynchronization)throw new kv(gv.FAILED_PRECONDITION,dx);return!1}}return!(!t.networkEnabled||!t.inForeground)||mx(e).j().next((function(e){return void 0===t.Si(e,5e3).find((function(e){if(t.clientId!==e.clientId){var n=!t.networkEnabled&&e.networkEnabled,r=!t.inForeground&&e.inForeground,i=t.networkEnabled===e.networkEnabled;if(n||r&&i)return!0}return!1}))}))})).next((function(e){return t.isPrimary!==e&&fv("IndexedDbPersistence","Client ".concat(e?"is":"is not"," eligible for a primary lease.")),e}))}},{key:"shutdown",value:function(){var e=Je($e().mark((function e(){var t=this;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.Fs=!1,this.xi(),this.hi&&(this.hi.cancel(),this.hi=null),this.Ni(),this.ki(),e.next=7,this.wi.runTransaction("shutdown","readwrite",["owner","clientMetadata"],(function(e){var n=new Bm(e,hm.ct);return t.Ai(n).next((function(){return t.Pi(n)}))}));case 7:this.wi.close(),this.Mi();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Si",value:function(e,t){var n=this;return e.filter((function(e){return n.Vi(e.updateTimeMs,t)&&!n.Ci(e.clientId)}))}},{key:"$i",value:function(){var e=this;return this.runTransaction("getActiveClients","readonly",(function(t){return mx(t).j().next((function(t){return e.Si(t,18e5).map((function(e){return e.clientId}))}))}))}},{key:"started",get:function(){return this.Fs}},{key:"getMutationQueue",value:function(e,t){return Ew.de(e,this.serializer,t,this.referenceDelegate)}},{key:"getTargetCache",value:function(){return this.Bs}},{key:"getRemoteDocumentCache",value:function(){return this.remoteDocumentCache}},{key:"getIndexManager",value:function(e){return new mw(e,this.serializer.fe.databaseId)}},{key:"getDocumentOverlayCache",value:function(e){return Gb.de(this.serializer,e)}},{key:"getBundleCache",value:function(){return this.qs}},{key:"runTransaction",value:function(e,t,n){var r=this;fv("IndexedDbPersistence","Starting transaction:",e);var i,a,o="readonly"===t?"readonly":"readwrite",u=15===(i=this.ui)?zm:14===i?Zm:13===i?Vm:12===i?Um:11===i?jm:void vv();return this.wi.runTransaction(e,o,u,(function(i){return a=new Bm(i,r.Os?r.Os.next():hm.ct),"readwrite-primary"===t?r.Ti(a).next((function(e){return!!e||r.Ei(a)})).next((function(t){if(!t)throw hv("Failed to obtain primary lease for action '".concat(e,"'.")),r.isPrimary=!1,r.ii.enqueueRetryable((function(){return r.fi(!1)})),new kv(gv.FAILED_PRECONDITION,Yv);return n(a)})).next((function(e){return r.vi(a).next((function(){return e}))})):r.Oi(a).next((function(){return n(a)}))})).then((function(e){return a.raiseOnCommittedEvent(),e}))}},{key:"Oi",value:function(e){var t=this;return vx(e).get("owner").next((function(e){if(null!==e&&t.Vi(e.leaseTimestampMs,5e3)&&!t.Ci(e.ownerId)&&!t.Ri(e)&&!(t.oi||t.allowTabSynchronization&&e.allowTabSynchronization))throw new kv(gv.FAILED_PRECONDITION,dx)}))}},{key:"vi",value:function(e){var t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return vx(e).put("owner",t)}},{key:"Ai",value:function(e){var t=this,n=vx(e);return n.get("owner").next((function(e){return t.Ri(e)?(fv("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):em.resolve()}))}},{key:"Vi",value:function(e,t){var n=Date.now();return!(e<n-t)&&(!(e>n)||(hv("Detected an update time that is in the future: ".concat(e," > ").concat(n)),!1))}},{key:"gi",value:function(){var e=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ai=function(){e.ii.enqueueAndForget((function(){return e.inForeground="visible"===e.document.visibilityState,e.mi()}))},this.document.addEventListener("visibilitychange",this.ai),this.inForeground="visible"===this.document.visibilityState)}},{key:"Ni",value:function(){this.ai&&(this.document.removeEventListener("visibilitychange",this.ai),this.ai=null)}},{key:"yi",value:function(){var e,t=this;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ci=function(){t.xi();var e=/(?:Version|Mobile)\/1[456]/;!ht()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&t.ii.enterRestrictedMode(!0),t.ii.enqueueAndForget((function(){return t.shutdown()}))},this.window.addEventListener("pagehide",this.ci))}},{key:"ki",value:function(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}},{key:"Ci",value:function(e){var t;try{var n=null!==(null===(t=this._i)||void 0===t?void 0:t.getItem(this.Di(e)));return fv("IndexedDbPersistence","Client '".concat(e,"' ").concat(n?"is":"is not"," zombied in LocalStorage")),n}catch(e){return hv("IndexedDbPersistence","Failed to get zombied client id.",e),!1}}},{key:"xi",value:function(){if(this._i)try{this._i.setItem(this.Di(this.clientId),String(Date.now()))}catch(e){hv("Failed to set zombie client id.",e)}}},{key:"Mi",value:function(){if(this._i)try{this._i.removeItem(this.Di(this.clientId))}catch(e){}}},{key:"Di",value:function(e){return"firestore_zombie_".concat(this.persistenceKey,"_").concat(e)}}],[{key:"D",value:function(){return nm.D()}}]),e}();function vx(e){return qm(e,"owner")}function mx(e){return qm(e,"clientMetadata")}function yx(e,t){var n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}var gx=function(){function e(t,n,r,i){s(this,e),this.targetId=t,this.fromCache=n,this.Fi=r,this.Bi=i}return(0,c.Z)(e,null,[{key:"Li",value:function(t,n){var r,i=Bg(),a=Bg(),o=S(n.docChanges);try{for(o.s();!(r=o.n()).done;){var u=r.value;switch(u.type){case 0:i=i.add(u.doc.key);break;case 1:a=a.add(u.doc.key)}}}catch(s){o.e(s)}finally{o.f()}return new e(t,n.fromCache,i,a)}}]),e}(),kx=function(){function e(){s(this,e),this.qi=!1}return(0,c.Z)(e,[{key:"initialize",value:function(e,t){this.Ui=e,this.indexManager=t,this.qi=!0}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r){var i=this;return this.Ki(e,t).next((function(a){return a||i.Gi(e,t,r,n)})).next((function(n){return n||i.Qi(e,t)}))}},{key:"Ki",value:function(e,t){var n=this;if(yg(t))return em.resolve(null);var r=xg(t);return this.indexManager.getIndexType(e,r).next((function(i){return 0===i?null:(null!==t.limit&&1===i&&(t=Ig(t,null,"F"),r=xg(t)),n.indexManager.getDocumentsMatchingTarget(e,r).next((function(i){var a=Bg.apply(void 0,(0,u.Z)(i));return n.Ui.getDocuments(e,a).next((function(i){return n.indexManager.getMinOffset(e,r).next((function(r){var o=n.ji(t,i);return n.zi(t,o,a,r.readTime)?n.Ki(e,Ig(t,null,"F")):n.Wi(e,o,t,r)}))}))})))}))}},{key:"Gi",value:function(e,t,n,r){var i=this;return yg(t)||r.isEqual(Lv.min())?this.Qi(e,t):this.Ui.getDocuments(e,n).next((function(a){var o=i.ji(t,a);return i.zi(t,o,n,r)?i.Qi(e,t):(lv()<=Lt.DEBUG&&fv("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Tg(t)),i.Wi(e,o,t,Kv(r,-1)))}))}},{key:"ji",value:function(e,t){var n=new $m(Ng(e));return t.forEach((function(t,r){Cg(e,r)&&(n=n.add(r))})),n}},{key:"zi",value:function(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;var i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}},{key:"Qi",value:function(e,t){return lv()<=Lt.DEBUG&&fv("QueryEngine","Using full collection scan to execute query:",Tg(t)),this.Ui.getDocumentsMatchingQuery(e,t,Hv.min())}},{key:"Wi",value:function(e,t,n,r){return this.Ui.getDocumentsMatchingQuery(e,n,r).next((function(e){return t.forEach((function(t){e=e.insert(t.key,t)})),e}))}}]),e}(),bx=function(){function e(t,n,r,i){s(this,e),this.persistence=t,this.Hi=n,this.serializer=i,this.Ji=new Hm(Rv),this.Yi=new Pg((function(e){return sg(e)}),cg),this.Xi=new Map,this.Zi=t.getRemoteDocumentCache(),this.Bs=t.getTargetCache(),this.qs=t.getBundleCache(),this.tr(r)}return(0,c.Z)(e,[{key:"tr",value:function(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Jw(this.Zi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Zi.setIndexManager(this.indexManager),this.Hi.initialize(this.localDocuments,this.indexManager)}},{key:"collectGarbage",value:function(e){var t=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return e.collect(n,t.Ji)}))}}]),e}();function wx(e,t,n,r){return new bx(e,t,n,r)}function xx(e,t){return _x.apply(this,arguments)}function _x(){return _x=Je($e().mark((function e(t,n){var r;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=yv(t),e.next=3,r.persistence.runTransaction("Handle user change","readonly",(function(e){var t;return r.mutationQueue.getAllMutationBatches(e).next((function(i){return t=i,r.tr(n),r.mutationQueue.getAllMutationBatches(e)})).next((function(n){var i,a=[],o=[],u=Bg(),s=S(t);try{for(s.s();!(i=s.n()).done;){var c=i.value;a.push(c.batchId);var l,f=S(c.mutations);try{for(f.s();!(l=f.n()).done;){var h=l.value;u=u.add(h.key)}}catch(k){f.e(k)}finally{f.f()}}}catch(k){s.e(k)}finally{s.f()}var d,p=S(n);try{for(p.s();!(d=p.n()).done;){var v=d.value;o.push(v.batchId);var m,y=S(v.mutations);try{for(y.s();!(m=y.n()).done;){var g=m.value;u=u.add(g.key)}}catch(k){y.e(k)}finally{y.f()}}}catch(k){p.e(k)}finally{p.f()}return r.localDocuments.getDocuments(e,u).next((function(e){return{er:e,removedBatchIds:a,addedBatchIds:o}}))}))}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)}))),_x.apply(this,arguments)}function Ix(e,t){var n=yv(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(e){var r=t.batch.keys(),i=n.Zi.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){var i=n.batch,a=i.keys(),o=em.resolve();return a.forEach((function(e){o=o.next((function(){return r.getEntry(t,e)})).next((function(t){var a=n.docVersions.get(e);mv(null!==a),t.version.compareTo(a)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),o.next((function(){return e.mutationQueue.removeMutationBatch(t,i)}))}(n,e,t,i).next((function(){return i.apply(e)})).next((function(){return n.mutationQueue.performConsistencyCheck(e)})).next((function(){return n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId)})).next((function(){return n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){for(var t=Bg(),n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t))})).next((function(){return n.localDocuments.getDocuments(e,r)}))}))}function Sx(e){var t=yv(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(function(e){return t.Bs.getLastRemoteSnapshotVersion(e)}))}function Ex(e,t){var n=yv(e),r=t.snapshotVersion,i=n.Ji;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(e){var a=n.Zi.newChangeBuffer({trackRemovals:!0});i=n.Ji;var o=[];t.targetChanges.forEach((function(a,u){var s=i.get(u);if(s){o.push(n.Bs.removeMatchingKeys(e,a.removedDocuments,u).next((function(){return n.Bs.addMatchingKeys(e,a.addedDocuments,u)})));var c=s.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(u)?c=c.withResumeToken(ny.EMPTY_BYTE_STRING,Lv.min()).withLastLimboFreeSnapshotVersion(Lv.min()):a.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(a.resumeToken,r)),i=i.insert(u,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)}(s,c,a)&&o.push(n.Bs.updateTargetData(e,c))}}));var u=Dg(),s=Bg();if(t.documentUpdates.forEach((function(r){t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),o.push(Tx(e,a,t.documentUpdates).next((function(e){u=e.nr,s=e.sr}))),!r.isEqual(Lv.min())){var c=n.Bs.getLastRemoteSnapshotVersion(e).next((function(t){return n.Bs.setTargetsMetadata(e,e.currentSequenceNumber,r)}));o.push(c)}return em.waitFor(o).next((function(){return a.apply(e)})).next((function(){return n.localDocuments.getLocalViewOfDocuments(e,u,s)})).next((function(){return u}))})).then((function(e){return n.Ji=i,e}))}function Tx(e,t,n){var r=Bg(),i=Bg();return n.forEach((function(e){return r=r.add(e)})),t.getEntries(e,r).next((function(e){var r=Dg();return n.forEach((function(n,a){var o=e.get(n);a.isFoundDocument()!==o.isFoundDocument()&&(i=i.add(n)),a.isNoDocument()&&a.version.isEqual(Lv.min())?(t.removeEntry(n,a.readTime),r=r.insert(n,a)):!o.isValidDocument()||a.version.compareTo(o.version)>0||0===a.version.compareTo(o.version)&&o.hasPendingWrites?(t.addEntry(a),r=r.insert(n,a)):fv("LocalStore","Ignoring outdated watch update for ",n,". Current version:",o.version," Watch version:",a.version)})),{nr:r,sr:i}}))}function Cx(e,t){var n=yv(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(e){return void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t)}))}function Ax(e,t){var n=yv(e);return n.persistence.runTransaction("Allocate target","readwrite",(function(e){var r;return n.Bs.getTargetData(e,t).next((function(i){return i?(r=i,em.resolve(r)):n.Bs.allocateTargetId(e).next((function(i){return r=new Ab(t,i,"TargetPurposeListen",e.currentSequenceNumber),n.Bs.addTargetData(e,r).next((function(){return r}))}))}))})).then((function(e){var r=n.Ji.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Ji=n.Ji.insert(e.targetId,e),n.Yi.set(t,e.targetId)),e}))}function Nx(e,t,n){return Rx.apply(this,arguments)}function Rx(){return Rx=Je($e().mark((function e(t,n,r){var i,a,o;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=yv(t),a=i.Ji.get(n),o=r?"readwrite":"readwrite-primary",e.prev=1,e.t0=r,e.t0){e.next=6;break}return e.next=6,i.persistence.runTransaction("Release target",o,(function(e){return i.persistence.referenceDelegate.removeTarget(e,a)}));case 6:e.next=13;break;case 8:if(e.prev=8,e.t1=e.catch(1),am(e.t1)){e.next=12;break}throw e.t1;case 12:fv("LocalStore","Failed to update sequence numbers for target ".concat(n,": ").concat(e.t1));case 13:i.Ji=i.Ji.remove(n),i.Yi.delete(a.target);case 14:case"end":return e.stop()}}),e,null,[[1,8]])}))),Rx.apply(this,arguments)}function Px(e,t,n){var r=yv(e),i=Lv.min(),a=Bg();return r.persistence.runTransaction("Execute query","readonly",(function(e){return function(e,t,n){var r=yv(e),i=r.Yi.get(n);return void 0!==i?em.resolve(r.Ji.get(i)):r.Bs.getTargetData(t,n)}(r,e,xg(t)).next((function(t){if(t)return i=t.lastLimboFreeSnapshotVersion,r.Bs.getMatchingKeysForTargetId(e,t.targetId).next((function(e){a=e}))})).next((function(){return r.Hi.getDocumentsMatchingQuery(e,t,n?i:Lv.min(),n?a:Bg())})).next((function(e){return Lx(r,Ag(t),e),{documents:e,ir:a}}))}))}function Ox(e,t){var n=yv(e),r=yv(n.Bs),i=n.Ji.get(t);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(function(e){return r.le(e,t).next((function(e){return e?e.target:null}))}))}function Dx(e,t){var n=yv(e),r=n.Xi.get(t)||Lv.min();return n.persistence.runTransaction("Get new document changes","readonly",(function(e){return n.Zi.getAllFromCollectionGroup(e,t,Kv(r,-1),Number.MAX_SAFE_INTEGER)})).then((function(e){return Lx(n,t,e),e}))}function Lx(e,t,n){var r=e.Xi.get(t)||Lv.min();n.forEach((function(e,t){t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.Xi.set(t,r)}function Mx(e,t,n,r){return Fx.apply(this,arguments)}function Fx(){return Fx=Je($e().mark((function e(t,n,r,i){var a,o,u,s,c,l,f,h,d,p;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=yv(t),o=Bg(),u=Dg(),s=S(r);try{for(s.s();!(c=s.n()).done;)l=c.value,f=n.rr(l.metadata.name),l.document&&(o=o.add(f)),(h=n.ur(l)).setReadTime(n.cr(l.metadata.readTime)),u=u.insert(f,h)}catch(v){s.e(v)}finally{s.f()}return d=a.Zi.newChangeBuffer({trackRemovals:!0}),e.next=7,Ax(a,function(e){return xg(mg(Fv.fromString("__bundle__/docs/".concat(e))))}(i));case 7:return p=e.sent,e.abrupt("return",a.persistence.runTransaction("Apply bundle documents","readwrite",(function(e){return Tx(e,d,u).next((function(t){return d.apply(e),t})).next((function(t){return a.Bs.removeMatchingKeysForTargetId(e,p.targetId).next((function(){return a.Bs.addMatchingKeys(e,o,p.targetId)})).next((function(){return a.localDocuments.getLocalViewOfDocuments(e,t.nr,t.sr)})).next((function(){return t.nr}))}))})));case 9:case"end":return e.stop()}}),e)}))),Fx.apply(this,arguments)}function jx(e,t){return Ux.apply(this,arguments)}function Ux(){return Ux=Je($e().mark((function e(t,n){var r,i,a,o=arguments;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>2&&void 0!==o[2]?o[2]:Bg(),e.next=3,Ax(t,xg(jb(n.bundledQuery)));case 3:return i=e.sent,a=yv(t),e.abrupt("return",a.persistence.runTransaction("Save named query","readwrite",(function(e){var t=rb(n.readTime);if(i.snapshotVersion.compareTo(t)>=0)return a.qs.saveNamedQuery(e,n);var o=i.withResumeToken(ny.EMPTY_BYTE_STRING,t);return a.Ji=a.Ji.insert(o.targetId,o),a.Bs.updateTargetData(e,o).next((function(){return a.Bs.removeMatchingKeysForTargetId(e,i.targetId)})).next((function(){return a.Bs.addMatchingKeys(e,r,i.targetId)})).next((function(){return a.qs.saveNamedQuery(e,n)}))})));case 6:case"end":return e.stop()}}),e)}))),Ux.apply(this,arguments)}function Vx(e,t){return"firestore_clients_".concat(e,"_").concat(t)}function Zx(e,t,n){var r="firestore_mutations_".concat(e,"_").concat(n);return t.isAuthenticated()&&(r+="_".concat(t.uid)),r}function zx(e,t){return"firestore_targets_".concat(e,"_").concat(t)}var Bx=function(){function e(t,n,r,i){s(this,e),this.user=t,this.batchId=n,this.state=r,this.error=i}return(0,c.Z)(e,[{key:"hr",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"ar",value:function(t,n,r){var i,a=JSON.parse(r),o="object"==typeof a&&-1!==["pending","acknowledged","rejected"].indexOf(a.state)&&(void 0===a.error||"object"==typeof a.error);return o&&a.error&&((o="string"==typeof a.error.message&&"string"==typeof a.error.code)&&(i=new kv(a.error.code,a.error.message))),o?new e(t,n,a.state,i):(hv("SharedClientState","Failed to parse mutation state for ID '".concat(n,"': ").concat(r)),null)}}]),e}(),qx=function(){function e(t,n,r){s(this,e),this.targetId=t,this.state=n,this.error=r}return(0,c.Z)(e,[{key:"hr",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"ar",value:function(t,n){var r,i=JSON.parse(n),a="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return a&&i.error&&((a="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new kv(i.error.code,i.error.message))),a?new e(t,i.state,r):(hv("SharedClientState","Failed to parse target state for ID '".concat(t,"': ").concat(n)),null)}}]),e}(),Gx=function(){function e(t,n){s(this,e),this.clientId=t,this.activeTargetIds=n}return(0,c.Z)(e,null,[{key:"ar",value:function(t,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,a=Gg(),o=0;i&&o<r.activeTargetIds.length;++o)i=vm(r.activeTargetIds[o]),a=a.add(r.activeTargetIds[o]);return i?new e(t,a):(hv("SharedClientState","Failed to parse client data for instance '".concat(t,"': ").concat(n)),null)}}]),e}(),Kx=function(){function e(t,n){s(this,e),this.clientId=t,this.onlineState=n}return(0,c.Z)(e,null,[{key:"ar",value:function(t){var n=JSON.parse(t);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new e(n.clientId,n.onlineState):(hv("SharedClientState","Failed to parse online state: ".concat(t)),null)}}]),e}(),Wx=function(){function e(){s(this,e),this.activeTargetIds=Gg()}return(0,c.Z)(e,[{key:"lr",value:function(e){this.activeTargetIds=this.activeTargetIds.add(e)}},{key:"dr",value:function(e){this.activeTargetIds=this.activeTargetIds.delete(e)}},{key:"hr",value:function(){var e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}]),e}(),Hx=function(){function e(t,n,r,i,a){s(this,e),this.window=t,this.ii=n,this.persistenceKey=r,this.wr=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this._r=this.mr.bind(this),this.gr=new Hm(Rv),this.started=!1,this.yr=[];var o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=a,this.pr=Vx(this.persistenceKey,this.wr),this.Ir=function(e){return"firestore_sequence_number_".concat(e)}(this.persistenceKey),this.gr=this.gr.insert(this.wr,new Wx),this.Tr=new RegExp("^firestore_clients_".concat(o,"_([^_]*)$")),this.Er=new RegExp("^firestore_mutations_".concat(o,"_(\\d+)(?:_(.*))?$")),this.Ar=new RegExp("^firestore_targets_".concat(o,"_(\\d+)$")),this.vr=function(e){return"firestore_online_state_".concat(e)}(this.persistenceKey),this.Rr=function(e){return"firestore_bundle_loaded_v2_".concat(e)}(this.persistenceKey),this.window.addEventListener("storage",this._r)}return(0,c.Z)(e,[{key:"start",value:function(){var e=Je($e().mark((function e(){var t,n,r,i,a,o,u,s,c,l,f,h=this;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.syncEngine.$i();case 2:t=e.sent,n=S(t),e.prev=4,n.s();case 6:if((r=n.n()).done){e.next=14;break}if((i=r.value)!==this.wr){e.next=10;break}return e.abrupt("continue",12);case 10:(a=this.getItem(Vx(this.persistenceKey,i)))&&(o=Gx.ar(i,a))&&(this.gr=this.gr.insert(o.clientId,o));case 12:e.next=6;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(4),n.e(e.t0);case 19:return e.prev=19,n.f(),e.finish(19);case 22:this.Pr(),(u=this.storage.getItem(this.vr))&&(s=this.br(u))&&this.Vr(s),c=S(this.yr);try{for(c.s();!(l=c.n()).done;)f=l.value,this.mr(f)}catch(d){c.e(d)}finally{c.f()}this.yr=[],this.window.addEventListener("pagehide",(function(){return h.shutdown()})),this.started=!0;case 28:case"end":return e.stop()}}),e,this,[[4,16,19,22]])})));return function(){return e.apply(this,arguments)}}()},{key:"writeSequenceNumber",value:function(e){this.setItem(this.Ir,JSON.stringify(e))}},{key:"getAllActiveQueryTargets",value:function(){return this.Sr(this.gr)}},{key:"isActiveQueryTarget",value:function(e){var t=!1;return this.gr.forEach((function(n,r){r.activeTargetIds.has(e)&&(t=!0)})),t}},{key:"addPendingMutation",value:function(e){this.Dr(e,"pending")}},{key:"updateMutationState",value:function(e,t,n){this.Dr(e,t,n),this.Cr(e)}},{key:"addLocalQueryTarget",value:function(e){var t="not-current";if(this.isActiveQueryTarget(e)){var n=this.storage.getItem(zx(this.persistenceKey,e));if(n){var r=qx.ar(e,n);r&&(t=r.state)}}return this.Nr.lr(e),this.Pr(),t}},{key:"removeLocalQueryTarget",value:function(e){this.Nr.dr(e),this.Pr()}},{key:"isLocalQueryTarget",value:function(e){return this.Nr.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){this.removeItem(zx(this.persistenceKey,e))}},{key:"updateQueryState",value:function(e,t,n){this.kr(e,t,n)}},{key:"handleUserChange",value:function(e,t,n){var r=this;t.forEach((function(e){r.Cr(e)})),this.currentUser=e,n.forEach((function(e){r.addPendingMutation(e)}))}},{key:"setOnlineState",value:function(e){this.Mr(e)}},{key:"notifyBundleLoaded",value:function(e){this.$r(e)}},{key:"shutdown",value:function(){this.started&&(this.window.removeEventListener("storage",this._r),this.removeItem(this.pr),this.started=!1)}},{key:"getItem",value:function(e){var t=this.storage.getItem(e);return fv("SharedClientState","READ",e,t),t}},{key:"setItem",value:function(e,t){fv("SharedClientState","SET",e,t),this.storage.setItem(e,t)}},{key:"removeItem",value:function(e){fv("SharedClientState","REMOVE",e),this.storage.removeItem(e)}},{key:"mr",value:function(e){var t=this,n=e;if(n.storageArea===this.storage){if(fv("SharedClientState","EVENT",n.key,n.newValue),n.key===this.pr)return void hv("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ii.enqueueRetryable(Je($e().mark((function e(){var r,i,a,o,u,s,c;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.started){e.next=43;break}if(null===n.key){e.next=41;break}if(!t.Tr.test(n.key)){e.next=11;break}if(null!=n.newValue){e.next=6;break}return r=t.Or(n.key),e.abrupt("return",t.Fr(r,null));case 6:if(!(i=t.Br(n.key,n.newValue))){e.next=9;break}return e.abrupt("return",t.Fr(i.clientId,i));case 9:e.next=41;break;case 11:if(!t.Er.test(n.key)){e.next=18;break}if(null===n.newValue){e.next=16;break}if(!(a=t.Lr(n.key,n.newValue))){e.next=16;break}return e.abrupt("return",t.qr(a));case 16:e.next=41;break;case 18:if(!t.Ar.test(n.key)){e.next=25;break}if(null===n.newValue){e.next=23;break}if(!(o=t.Ur(n.key,n.newValue))){e.next=23;break}return e.abrupt("return",t.Kr(o));case 23:e.next=41;break;case 25:if(n.key!==t.vr){e.next=32;break}if(null===n.newValue){e.next=30;break}if(!(u=t.br(n.newValue))){e.next=30;break}return e.abrupt("return",t.Vr(u));case 30:e.next=41;break;case 32:if(n.key!==t.Ir){e.next=37;break}s=function(e){var t=hm.ct;if(null!=e)try{var n=JSON.parse(e);mv("number"==typeof n),t=n}catch(e){hv("SharedClientState","Failed to read sequence number from WebStorage",e)}return t}(n.newValue),s!==hm.ct&&t.sequenceNumberHandler(s),e.next=41;break;case 37:if(n.key!==t.Rr){e.next=41;break}return c=t.Gr(n.newValue),e.next=41,Promise.all(c.map((function(e){return t.syncEngine.Qr(e)})));case 41:e.next=44;break;case 43:t.yr.push(n);case 44:case"end":return e.stop()}}),e)}))))}}},{key:"Nr",get:function(){return this.gr.get(this.wr)}},{key:"Pr",value:function(){this.setItem(this.pr,this.Nr.hr())}},{key:"Dr",value:function(e,t,n){var r=new Bx(this.currentUser,e,t,n),i=Zx(this.persistenceKey,this.currentUser,e);this.setItem(i,r.hr())}},{key:"Cr",value:function(e){var t=Zx(this.persistenceKey,this.currentUser,e);this.removeItem(t)}},{key:"Mr",value:function(e){var t={clientId:this.wr,onlineState:e};this.storage.setItem(this.vr,JSON.stringify(t))}},{key:"kr",value:function(e,t,n){var r=zx(this.persistenceKey,e),i=new qx(e,t,n);this.setItem(r,i.hr())}},{key:"$r",value:function(e){var t=JSON.stringify(Array.from(e));this.setItem(this.Rr,t)}},{key:"Or",value:function(e){var t=this.Tr.exec(e);return t?t[1]:null}},{key:"Br",value:function(e,t){var n=this.Or(e);return Gx.ar(n,t)}},{key:"Lr",value:function(e,t){var n=this.Er.exec(e),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return Bx.ar(new uv(i),r,t)}},{key:"Ur",value:function(e,t){var n=this.Ar.exec(e),r=Number(n[1]);return qx.ar(r,t)}},{key:"br",value:function(e){return Kx.ar(e)}},{key:"Gr",value:function(e){return JSON.parse(e)}},{key:"qr",value:function(){var e=Je($e().mark((function e(t){return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.user.uid!==this.currentUser.uid){e.next=2;break}return e.abrupt("return",this.syncEngine.jr(t.batchId,t.state,t.error));case 2:fv("SharedClientState","Ignoring mutation for non-active user ".concat(t.user.uid));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Kr",value:function(e){return this.syncEngine.zr(e.targetId,e.state,e.error)}},{key:"Fr",value:function(e,t){var n=this,r=t?this.gr.insert(e,t):this.gr.remove(e),i=this.Sr(this.gr),a=this.Sr(r),o=[],u=[];return a.forEach((function(e){i.has(e)||o.push(e)})),i.forEach((function(e){a.has(e)||u.push(e)})),this.syncEngine.Wr(o,u).then((function(){n.gr=r}))}},{key:"Vr",value:function(e){this.gr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}},{key:"Sr",value:function(e){var t=Gg();return e.forEach((function(e,n){t=t.unionWith(n.activeTargetIds)})),t}}],[{key:"D",value:function(e){return!(!e||!e.localStorage)}}]),e}(),Qx=function(){function e(){s(this,e),this.Hr=new Wx,this.Jr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return(0,c.Z)(e,[{key:"addPendingMutation",value:function(e){}},{key:"updateMutationState",value:function(e,t,n){}},{key:"addLocalQueryTarget",value:function(e){return this.Hr.lr(e),this.Jr[e]||"not-current"}},{key:"updateQueryState",value:function(e,t,n){this.Jr[e]=t}},{key:"removeLocalQueryTarget",value:function(e){this.Hr.dr(e)}},{key:"isLocalQueryTarget",value:function(e){return this.Hr.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){delete this.Jr[e]}},{key:"getAllActiveQueryTargets",value:function(){return this.Hr.activeTargetIds}},{key:"isActiveQueryTarget",value:function(e){return this.Hr.activeTargetIds.has(e)}},{key:"start",value:function(){return this.Hr=new Wx,Promise.resolve()}},{key:"handleUserChange",value:function(e,t,n){}},{key:"setOnlineState",value:function(e){}},{key:"shutdown",value:function(){}},{key:"writeSequenceNumber",value:function(e){}},{key:"notifyBundleLoaded",value:function(e){}}]),e}(),Yx=function(){function e(){s(this,e)}return(0,c.Z)(e,[{key:"Yr",value:function(e){}},{key:"shutdown",value:function(){}}]),e}(),$x=function(){function e(){var t=this;s(this,e),this.Xr=function(){return t.Zr()},this.eo=function(){return t.no()},this.so=[],this.io()}return(0,c.Z)(e,[{key:"Yr",value:function(e){this.so.push(e)}},{key:"shutdown",value:function(){window.removeEventListener("online",this.Xr),window.removeEventListener("offline",this.eo)}},{key:"io",value:function(){window.addEventListener("online",this.Xr),window.addEventListener("offline",this.eo)}},{key:"Zr",value:function(){fv("ConnectivityMonitor","Network connectivity changed: AVAILABLE");var e,t=S(this.so);try{for(t.s();!(e=t.n()).done;){(0,e.value)(0)}}catch(n){t.e(n)}finally{t.f()}}},{key:"no",value:function(){fv("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");var e,t=S(this.so);try{for(t.s();!(e=t.n()).done;){(0,e.value)(1)}}catch(n){t.e(n)}finally{t.f()}}}],[{key:"D",value:function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}]),e}(),Xx=null;function Jx(){return null===Xx?Xx=268435456+Math.round(2147483648*Math.random()):Xx++,"0x"+Xx.toString(16)}var e_={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},t_=function(){function e(t){s(this,e),this.ro=t.ro,this.oo=t.oo}return(0,c.Z)(e,[{key:"uo",value:function(e){this.co=e}},{key:"ao",value:function(e){this.ho=e}},{key:"onMessage",value:function(e){this.lo=e}},{key:"close",value:function(){this.oo()}},{key:"send",value:function(e){this.ro(e)}},{key:"fo",value:function(){this.co()}},{key:"wo",value:function(e){this.ho(e)}},{key:"_o",value:function(e){this.lo(e)}}]),e}(),n_="WebChannelConnection",r_=function(e){f(n,e);var t=m(n);function n(e){var r;return s(this,n),(r=t.call(this,e)).forceLongPolling=e.forceLongPolling,r.autoDetectLongPolling=e.autoDetectLongPolling,r.useFetchStreams=e.useFetchStreams,r.longPollingOptions=e.longPollingOptions,r}return(0,c.Z)(n,[{key:"Ao",value:function(e,t,n,r){var i=Jx();return new Promise((function(a,o){var u=new rv;u.setWithCredentials(!0),u.listenOnce(Xp.COMPLETE,(function(){try{switch(u.getLastErrorCode()){case $p.NO_ERROR:var t=u.getResponseJson();fv(n_,"XHR for RPC '".concat(e,"' ").concat(i," received:"),JSON.stringify(t)),a(t);break;case $p.TIMEOUT:fv(n_,"RPC '".concat(e,"' ").concat(i," timed out")),o(new kv(gv.DEADLINE_EXCEEDED,"Request time out"));break;case $p.HTTP_ERROR:var n=u.getStatus();if(fv(n_,"RPC '".concat(e,"' ").concat(i," failed with status:"),n,"response text:",u.getResponseText()),n>0){var r=u.getResponseJson();Array.isArray(r)&&(r=r[0]);var s=null==r?void 0:r.error;if(s&&s.status&&s.message){var c=function(e){var t=e.toLowerCase().replace(/_/g,"-");return Object.values(gv).indexOf(t)>=0?t:gv.UNKNOWN}(s.status);o(new kv(c,s.message))}else o(new kv(gv.UNKNOWN,"Server responded with status "+u.getStatus()))}else o(new kv(gv.UNAVAILABLE,"Connection failed."));break;default:vv()}}finally{fv(n_,"RPC '".concat(e,"' ").concat(i," completed."))}}));var s=JSON.stringify(r);fv(n_,"RPC '".concat(e,"' ").concat(i," sending request:"),r),u.send(t,"POST",s,n,15)}))}},{key:"Ro",value:function(e,t,n){var r=Jx(),i=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=Qp(),o=Yp(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},s=this.longPollingOptions.timeoutSeconds;void 0!==s&&(u.longPollingTimeout=Math.round(1e3*s)),this.useFetchStreams&&(u.xmlHttpFactory=new tv({})),this.Eo(u.initMessageHeaders,t,n),u.encodeInitMessageHeaders=!0;var c=i.join("");fv(n_,"Creating RPC '".concat(e,"' stream ").concat(r,": ").concat(c),u);var l=a.createWebChannel(c,u),f=!1,h=!1,d=new t_({ro:function(t){h?fv(n_,"Not sending because RPC '".concat(e,"' stream ").concat(r," is closed:"),t):(f||(fv(n_,"Opening RPC '".concat(e,"' stream ").concat(r," transport.")),l.open(),f=!0),fv(n_,"RPC '".concat(e,"' stream ").concat(r," sending:"),t),l.send(t))},oo:function(){return l.close()}}),p=function(e,t,n){e.listen(t,(function(e){try{n(e)}catch(e){setTimeout((function(){throw e}),0)}}))};return p(l,nv.EventType.OPEN,(function(){h||fv(n_,"RPC '".concat(e,"' stream ").concat(r," transport opened."))})),p(l,nv.EventType.CLOSE,(function(){h||(h=!0,fv(n_,"RPC '".concat(e,"' stream ").concat(r," transport closed")),d.wo())})),p(l,nv.EventType.ERROR,(function(t){h||(h=!0,dv(n_,"RPC '".concat(e,"' stream ").concat(r," transport errored:"),t),d.wo(new kv(gv.UNAVAILABLE,"The operation could not be completed")))})),p(l,nv.EventType.MESSAGE,(function(t){var n;if(!h){var i=t.data[0];mv(!!i);var a=i,o=a.error||(null===(n=a[0])||void 0===n?void 0:n.error);if(o){fv(n_,"RPC '".concat(e,"' stream ").concat(r," received error:"),o);var u=o.status,s=function(e){var t=xk[e];if(void 0!==t)return Rk(t)}(u),c=o.message;void 0===s&&(s=gv.INTERNAL,c="Unknown error status: "+u+" with message "+o.message),h=!0,d.wo(new kv(s,c)),l.close()}else fv(n_,"RPC '".concat(e,"' stream ").concat(r," received:"),i),d._o(i)}})),p(o,Jp.STAT_EVENT,(function(t){t.stat===ev.PROXY?fv(n_,"RPC '".concat(e,"' stream ").concat(r," detected buffering proxy")):t.stat===ev.NOPROXY&&fv(n_,"RPC '".concat(e,"' stream ").concat(r," detected no buffering proxy"))})),setTimeout((function(){d.fo()}),0),d}}]),n}(function(){function e(t){s(this,e),this.databaseInfo=t,this.databaseId=t.databaseId;var n=t.ssl?"https":"http";this.mo=n+"://"+t.host,this.yo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return(0,c.Z)(e,[{key:"po",get:function(){return!1}},{key:"Io",value:function(e,t,n,r,i){var a=Jx(),o=this.To(e,t);fv("RestConnection","Sending RPC '".concat(e,"' ").concat(a,":"),o,n);var u={};return this.Eo(u,r,i),this.Ao(e,o,u,n).then((function(t){return fv("RestConnection","Received RPC '".concat(e,"' ").concat(a,": "),t),t}),(function(t){throw dv("RestConnection","RPC '".concat(e,"' ").concat(a," failed with error: "),t,"url: ",o,"request:",n),t}))}},{key:"vo",value:function(e,t,n,r,i,a){return this.Io(e,t,n,r,i)}},{key:"Eo",value:function(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+sv,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((function(t,n){return e[n]=t})),n&&n.headers.forEach((function(t,n){return e[n]=t}))}},{key:"To",value:function(e,t){var n=e_[e];return"".concat(this.mo,"/v1/").concat(t,":").concat(n)}}]),e}());function i_(){return"undefined"!=typeof window?window:null}function a_(){return"undefined"!=typeof document?document:null}function o_(e){return new Xk(e,!0)}var u_=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;s(this,e),this.ii=t,this.timerId=n,this.Po=r,this.bo=i,this.Vo=a,this.So=0,this.Do=null,this.Co=Date.now(),this.reset()}return(0,c.Z)(e,[{key:"reset",value:function(){this.So=0}},{key:"xo",value:function(){this.So=this.Vo}},{key:"No",value:function(e){var t=this;this.cancel();var n=Math.floor(this.So+this.ko()),r=Math.max(0,Date.now()-this.Co),i=Math.max(0,n-r);i>0&&fv("ExponentialBackoff","Backing off for ".concat(i," ms (base delay: ").concat(this.So," ms, delay with jitter: ").concat(n," ms, last attempt: ").concat(r," ms ago)")),this.Do=this.ii.enqueueAfterDelay(this.timerId,i,(function(){return t.Co=Date.now(),e()})),this.So*=this.bo,this.So<this.Po&&(this.So=this.Po),this.So>this.Vo&&(this.So=this.Vo)}},{key:"Mo",value:function(){null!==this.Do&&(this.Do.skipDelay(),this.Do=null)}},{key:"cancel",value:function(){null!==this.Do&&(this.Do.cancel(),this.Do=null)}},{key:"ko",value:function(){return(Math.random()-.5)*this.So}}]),e}(),s_=function(){function e(t,n,r,i,a,o,u,c){s(this,e),this.ii=t,this.$o=r,this.Oo=i,this.connection=a,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=u,this.listener=c,this.state=0,this.Fo=0,this.Bo=null,this.Lo=null,this.stream=null,this.qo=new u_(t,n)}return(0,c.Z)(e,[{key:"Uo",value:function(){return 1===this.state||5===this.state||this.Ko()}},{key:"Ko",value:function(){return 2===this.state||3===this.state}},{key:"start",value:function(){4!==this.state?this.auth():this.Go()}},{key:"stop",value:function(){var e=Je($e().mark((function e(){return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.Uo(),!e.t0){e.next=4;break}return e.next=4,this.close(0);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Qo",value:function(){this.state=0,this.qo.reset()}},{key:"jo",value:function(){var e=this;this.Ko()&&null===this.Bo&&(this.Bo=this.ii.enqueueAfterDelay(this.$o,6e4,(function(){return e.zo()})))}},{key:"Wo",value:function(e){this.Ho(),this.stream.send(e)}},{key:"zo",value:function(){var e=Je($e().mark((function e(){return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.Ko()){e.next=2;break}return e.abrupt("return",this.close(0));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Ho",value:function(){this.Bo&&(this.Bo.cancel(),this.Bo=null)}},{key:"Jo",value:function(){this.Lo&&(this.Lo.cancel(),this.Lo=null)}},{key:"close",value:function(){var e=Je($e().mark((function e(t,n){return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.Ho(),this.Jo(),this.qo.cancel(),this.Fo++,4!==t?this.qo.reset():n&&n.code===gv.RESOURCE_EXHAUSTED?(hv(n.toString()),hv("Using maximum backoff delay to prevent overloading the backend."),this.qo.xo()):n&&n.code===gv.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.Yo(),this.stream.close(),this.stream=null),this.state=t,e.next=9,this.listener.ao(n);case 9:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"Yo",value:function(){}},{key:"auth",value:function(){var e=this;this.state=1;var t=this.Xo(this.Fo),n=this.Fo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((function(t){var r=(0,i.Z)(t,2),a=r[0],o=r[1];e.Fo===n&&e.Zo(a,o)}),(function(n){t((function(){var t=new kv(gv.UNKNOWN,"Fetching auth token failed: "+n.message);return e.tu(t)}))}))}},{key:"Zo",value:function(e,t){var n=this,r=this.Xo(this.Fo);this.stream=this.eu(e,t),this.stream.uo((function(){r((function(){return n.state=2,n.Lo=n.ii.enqueueAfterDelay(n.Oo,1e4,(function(){return n.Ko()&&(n.state=3),Promise.resolve()})),n.listener.uo()}))})),this.stream.ao((function(e){r((function(){return n.tu(e)}))})),this.stream.onMessage((function(e){r((function(){return n.onMessage(e)}))}))}},{key:"Go",value:function(){var e=this;this.state=5,this.qo.No(Je($e().mark((function t(){return $e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.state=0,e.start();case 1:case"end":return t.stop()}}),t)}))))}},{key:"tu",value:function(e){return fv("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}},{key:"Xo",value:function(e){var t=this;return function(n){t.ii.enqueueAndForget((function(){return t.Fo===e?n():(fv("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}}}]),e}(),c_=function(e){f(n,e);var t=m(n);function n(e,r,i,a,o,u){var c;return s(this,n),(c=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,i,a,u)).serializer=o,c}return(0,c.Z)(n,[{key:"eu",value:function(e,t){return this.connection.Ro("Listen",e,t)}},{key:"onMessage",value:function(e){this.qo.reset();var t=function(e,t){var n;if("targetChange"in t){t.targetChange;var r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:vv()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],a=function(e,t){return e.useProto3Json?(mv(void 0===t||"string"==typeof t),ny.fromBase64String(t||"")):(mv(void 0===t||t instanceof Uint8Array),ny.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,u=o&&function(e){var t=void 0===e.code?gv.UNKNOWN:Rk(e.code);return new kv(t,e.message||"")}(o);n=new qk(r,i,a,u||null)}else if("documentChange"in t){t.documentChange;var s=t.documentChange;s.document,s.document.name,s.document.updateTime;var c=ub(e,s.document.name),l=rb(s.document.updateTime),f=s.document.createTime?rb(s.document.createTime):Lv.min(),h=new Oy({mapValue:{fields:s.document.fields}}),d=Ly.newFoundDocument(c,l,f,h),p=s.targetIds||[],v=s.removedTargetIds||[];n=new zk(p,v,d.key,d)}else if("documentDelete"in t){t.documentDelete;var m=t.documentDelete;m.document;var y=ub(e,m.document),g=m.readTime?rb(m.readTime):Lv.min(),k=Ly.newNoDocument(y,g),b=m.removedTargetIds||[];n=new zk([],b,k.key,k)}else if("documentRemove"in t){t.documentRemove;var w=t.documentRemove;w.document;var x=ub(e,w.document),_=w.removedTargetIds||[];n=new zk([],_,x,null)}else{if(!("filter"in t))return vv();t.filter;var I=t.filter;I.targetId;var S=I.count,E=void 0===S?0:S,T=I.unchangedNames,C=new Ak(E,T),A=I.targetId;n=new Bk(A,C)}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return Lv.min();var t=e.targetChange;return t.targetIds&&t.targetIds.length?Lv.min():t.readTime?rb(t.readTime):Lv.min()}(e);return this.listener.nu(t,n)}},{key:"su",value:function(e){var t={};t.database=lb(this.serializer),t.addTarget=function(e,t){var n,r=t.target;if((n=lg(r)?{documents:yb(e,r)}:{query:gb(e,r)}).targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=tb(e,t.resumeToken);var i=Jk(e,t.expectedCount);null!==i&&(n.expectedCount=i)}else if(t.snapshotVersion.compareTo(Lv.min())>0){n.readTime=eb(e,t.snapshotVersion.toTimestamp());var a=Jk(e,t.expectedCount);null!==a&&(n.expectedCount=a)}return n}(this.serializer,e);var n=function(e,t){var n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return vv()}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.Wo(t)}},{key:"iu",value:function(e){var t={};t.database=lb(this.serializer),t.removeTarget=e,this.Wo(t)}}]),n}(s_),l_=function(e){f(n,e);var t=m(n);function n(e,r,i,a,o,u){var c;return s(this,n),(c=t.call(this,e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,i,a,u)).serializer=o,c.ru=!1,c}return(0,c.Z)(n,[{key:"ou",get:function(){return this.ru}},{key:"start",value:function(){this.ru=!1,this.lastStreamToken=void 0,ur(h(n.prototype),"start",this).call(this)}},{key:"Yo",value:function(){this.ru&&this.uu([])}},{key:"eu",value:function(e,t){return this.connection.Ro("Write",e,t)}},{key:"onMessage",value:function(e){if(mv(!!e.streamToken),this.lastStreamToken=e.streamToken,this.ru){this.qo.reset();var t=function(e,t){return e&&e.length>0?(mv(void 0!==t),e.map((function(e){return function(e,t){var n=e.updateTime?rb(e.updateTime):rb(t);return n.isEqual(Lv.min())&&(n=rb(t)),new sk(n,e.transformResults||[])}(e,t)}))):[]}(e.writeResults,e.commitTime),n=rb(e.commitTime);return this.listener.cu(n,t)}return mv(!e.writeResults||0===e.writeResults.length),this.ru=!0,this.listener.au()}},{key:"hu",value:function(){var e={};e.database=lb(this.serializer),this.Wo(e)}},{key:"uu",value:function(e){var t=this,n={streamToken:this.lastStreamToken,writes:e.map((function(e){return vb(t.serializer,e)}))};this.Wo(n)}}]),n}(s_),f_=function(e){f(n,e);var t=m(n);function n(e,r,i,a){var o;return s(this,n),(o=t.call(this)).authCredentials=e,o.appCheckCredentials=r,o.connection=i,o.serializer=a,o.lu=!1,o}return(0,c.Z)(n,[{key:"fu",value:function(){if(this.lu)throw new kv(gv.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"Io",value:function(e,t,n){var r=this;return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(a){var o=(0,i.Z)(a,2),u=o[0],s=o[1];return r.connection.Io(e,t,n,u,s)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===gv.UNAUTHENTICATED&&(r.authCredentials.invalidateToken(),r.appCheckCredentials.invalidateToken()),e):new kv(gv.UNKNOWN,e.toString())}))}},{key:"vo",value:function(e,t,n,r){var a=this;return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(o){var u=(0,i.Z)(o,2),s=u[0],c=u[1];return a.connection.vo(e,t,n,s,c,r)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===gv.UNAUTHENTICATED&&(a.authCredentials.invalidateToken(),a.appCheckCredentials.invalidateToken()),e):new kv(gv.UNKNOWN,e.toString())}))}},{key:"terminate",value:function(){this.lu=!0}}]),n}(function(){return(0,c.Z)((function e(){s(this,e)}))}());var h_=function(){function e(t,n){s(this,e),this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.wu=0,this._u=null,this.mu=!0}return(0,c.Z)(e,[{key:"gu",value:function(){var e=this;0===this.wu&&(this.yu("Unknown"),this._u=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(function(){return e._u=null,e.pu("Backend didn't respond within 10 seconds."),e.yu("Offline"),Promise.resolve()})))}},{key:"Iu",value:function(e){"Online"===this.state?this.yu("Unknown"):(this.wu++,this.wu>=1&&(this.Tu(),this.pu("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.yu("Offline")))}},{key:"set",value:function(e){this.Tu(),this.wu=0,"Online"===e&&(this.mu=!1),this.yu(e)}},{key:"yu",value:function(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}},{key:"pu",value:function(e){var t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.mu?(hv(t),this.mu=!1):fv("OnlineStateTracker",t)}},{key:"Tu",value:function(){null!==this._u&&(this._u.cancel(),this._u=null)}}]),e}(),d_=(0,c.Z)((function e(t,n,r,i,a){var o=this;s(this,e),this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Eu=[],this.Au=new Map,this.vu=new Set,this.Ru=[],this.Pu=a,this.Pu.Yr((function(e){r.enqueueAndForget(Je($e().mark((function e(){return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=I_(o),!e.t0){e.next=5;break}return fv("RemoteStore","Restarting streams for network reachability change."),e.next=5,function(){var e=Je($e().mark((function e(t){var n;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=yv(t)).vu.add(4),e.next=4,m_(n);case 4:return n.bu.set("Unknown"),n.vu.delete(4),e.next=8,p_(n);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(o);case 5:case"end":return e.stop()}}),e)}))))})),this.bu=new h_(r,i)}));function p_(e){return v_.apply(this,arguments)}function v_(){return(v_=Je($e().mark((function e(t){var n,r,i;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!I_(t)){e.next=18;break}n=S(t.Ru),e.prev=2,n.s();case 4:if((r=n.n()).done){e.next=10;break}return i=r.value,e.next=8,i(!0);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),n.e(e.t0);case 15:return e.prev=15,n.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[2,12,15,18]])})))).apply(this,arguments)}function m_(e){return y_.apply(this,arguments)}function y_(){return(y_=Je($e().mark((function e(t){var n,r,i;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=S(t.Ru),e.prev=1,n.s();case 3:if((r=n.n()).done){e.next=9;break}return i=r.value,e.next=7,i(!1);case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),n.e(e.t0);case 14:return e.prev=14,n.f(),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[1,11,14,17]])})))).apply(this,arguments)}function g_(e,t){var n=yv(e);n.Au.has(t.targetId)||(n.Au.set(t.targetId,t),__(n)?x_(n):J_(n).Ko()&&b_(n,t))}function k_(e,t){var n=yv(e),r=J_(n);n.Au.delete(t),r.Ko()&&w_(n,t),0===n.Au.size&&(r.Ko()?r.jo():I_(n)&&n.bu.set("Unknown"))}function b_(e,t){if(e.Vu.qt(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(Lv.min())>0){var n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}J_(e).su(t)}function w_(e,t){e.Vu.qt(t),J_(e).iu(t)}function x_(e){e.Vu=new Kk({getRemoteKeysForTarget:function(t){return e.remoteSyncer.getRemoteKeysForTarget(t)},le:function(t){return e.Au.get(t)||null},ue:function(){return e.datastore.serializer.databaseId}}),J_(e).start(),e.bu.gu()}function __(e){return I_(e)&&!J_(e).Uo()&&e.Au.size>0}function I_(e){return 0===yv(e).vu.size}function S_(e){e.Vu=void 0}function E_(e){return T_.apply(this,arguments)}function T_(){return(T_=Je($e().mark((function e(t){return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.Au.forEach((function(e,n){b_(t,e)}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function C_(e,t){return A_.apply(this,arguments)}function A_(){return(A_=Je($e().mark((function e(t,n){return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:S_(t),__(t)?(t.bu.Iu(n),x_(t)):t.bu.set("Unknown");case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function N_(e,t,n){return R_.apply(this,arguments)}function R_(){return R_=Je($e().mark((function e(t,n,r){var i;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.bu.set("Online"),!(n instanceof qk&&2===n.state&&n.cause)){e.next=13;break}return e.prev=1,e.next=4,function(){var e=Je($e().mark((function e(t,n){var r,i,a,o;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n.cause,i=S(n.targetIds),e.prev=2,i.s();case 4:if((a=i.n()).done){e.next=14;break}if(o=a.value,e.t0=t.Au.has(o),!e.t0){e.next=12;break}return e.next=10,t.remoteSyncer.rejectListen(o,r);case 10:t.Au.delete(o),t.Vu.removeTarget(o);case 12:e.next=4;break;case 14:e.next=19;break;case 16:e.prev=16,e.t1=e.catch(2),i.e(e.t1);case 19:return e.prev=19,i.f(),e.finish(19);case 22:case"end":return e.stop()}}),e,null,[[2,16,19,22]])})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:e.next=11;break;case 6:return e.prev=6,e.t0=e.catch(1),fv("RemoteStore","Failed to remove targets %s: %s ",n.targetIds.join(","),e.t0),e.next=11,P_(t,e.t0);case 11:case 22:e.next=29;break;case 13:if(n instanceof zk?t.Vu.Ht(n):n instanceof Bk?t.Vu.ne(n):t.Vu.Xt(n),r.isEqual(Lv.min())){e.next=29;break}return e.prev=14,e.next=17,Sx(t.localStore);case 17:if(i=e.sent,e.t1=r.compareTo(i)>=0,!e.t1){e.next=22;break}return e.next=22,function(e,t){var n=e.Vu.ce(t);return n.targetChanges.forEach((function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=e.Au.get(r);i&&e.Au.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach((function(t,n){var r=e.Au.get(t);if(r){e.Au.set(t,r.withResumeToken(ny.EMPTY_BYTE_STRING,r.snapshotVersion)),w_(e,t);var i=new Ab(r.target,t,n,r.sequenceNumber);b_(e,i)}})),e.remoteSyncer.applyRemoteEvent(n)}(t,r);case 24:return e.prev=24,e.t2=e.catch(14),fv("RemoteStore","Failed to raise snapshot:",e.t2),e.next=29,P_(t,e.t2);case 29:case"end":return e.stop()}}),e,null,[[1,6],[14,24]])}))),R_.apply(this,arguments)}function P_(e,t,n){return O_.apply(this,arguments)}function O_(){return(O_=Je($e().mark((function e(t,n,r){return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(am(n)){e.next=2;break}throw n;case 2:return t.vu.add(1),e.next=5,m_(t);case 5:t.bu.set("Offline"),r||(r=function(){return Sx(t.localStore)}),t.asyncQueue.enqueueRetryable(Je($e().mark((function e(){return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return fv("RemoteStore","Retrying IndexedDB access"),e.next=3,r();case 3:return t.vu.delete(1),e.next=6,p_(t);case 6:case"end":return e.stop()}}),e)}))));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function D_(e,t){return t().catch((function(n){return P_(e,n,t)}))}function L_(e){return M_.apply(this,arguments)}function M_(){return(M_=Je($e().mark((function e(t){var n,r,i,a;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=yv(t),r=eI(n),i=n.Eu.length>0?n.Eu[n.Eu.length-1].batchId:-1;case 2:if(!F_(n)){e.next=19;break}return e.prev=3,e.next=6,Cx(n.localStore,i);case 6:if(null!==(a=e.sent)){e.next=10;break}return 0===n.Eu.length&&r.jo(),e.abrupt("break",19);case 10:i=a.batchId,j_(n,a),e.next=17;break;case 13:return e.prev=13,e.t0=e.catch(3),e.next=17,P_(n,e.t0);case 17:e.next=2;break;case 19:U_(n)&&V_(n);case 20:case"end":return e.stop()}}),e,null,[[3,13]])})))).apply(this,arguments)}function F_(e){return I_(e)&&e.Eu.length<10}function j_(e,t){e.Eu.push(t);var n=eI(e);n.Ko()&&n.ou&&n.uu(t.mutations)}function U_(e){return I_(e)&&!eI(e).Uo()&&e.Eu.length>0}function V_(e){eI(e).start()}function Z_(e){return z_.apply(this,arguments)}function z_(){return(z_=Je($e().mark((function e(t){return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:eI(t).hu();case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function B_(e){return q_.apply(this,arguments)}function q_(){return(q_=Je($e().mark((function e(t){var n,r,i,a;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=eI(t),r=S(t.Eu);try{for(r.s();!(i=r.n()).done;)a=i.value,n.uu(a.mutations)}catch(o){r.e(o)}finally{r.f()}case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function G_(e,t,n){return K_.apply(this,arguments)}function K_(){return(K_=Je($e().mark((function e(t,n,r){var i,a;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.Eu.shift(),a=Tk.from(i,n,r),e.next=3,D_(t,(function(){return t.remoteSyncer.applySuccessfulWrite(a)}));case 3:return e.next=5,L_(t);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function W_(e,t){return H_.apply(this,arguments)}function H_(){return H_=Je($e().mark((function e(t,n){return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=n&&eI(t).ou,!e.t0){e.next=4;break}return e.next=4,function(){var e=Je($e().mark((function e(t,n){var r,i;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Nk(i=n.code)||i===gv.ABORTED){e.next=7;break}return r=t.Eu.shift(),eI(t).Qo(),e.next=5,D_(t,(function(){return t.remoteSyncer.rejectFailedWrite(r.batchId,n)}));case 5:return e.next=7,L_(t);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:U_(t)&&V_(t);case 5:case"end":return e.stop()}}),e)}))),H_.apply(this,arguments)}function Q_(e,t){return Y_.apply(this,arguments)}function Y_(){return(Y_=Je($e().mark((function e(t,n){var r,i;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=yv(t)).asyncQueue.verifyOperationInProgress(),fv("RemoteStore","RemoteStore received new credentials"),i=I_(r),r.vu.add(3),e.next=6,m_(r);case 6:return i&&r.bu.set("Unknown"),e.next=9,r.remoteSyncer.handleCredentialChange(n);case 9:return r.vu.delete(3),e.next=12,p_(r);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function $_(e,t){return X_.apply(this,arguments)}function X_(){return(X_=Je($e().mark((function e(t,n){var r;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=yv(t),!n){e.next=7;break}return r.vu.delete(2),e.next=5,p_(r);case 5:e.next=13;break;case 7:if(e.t0=n,e.t0){e.next=13;break}return r.vu.add(2),e.next=12,m_(r);case 12:r.bu.set("Unknown");case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function J_(e){return e.Su||(e.Su=function(e,t,n){var r=yv(e);return r.fu(),new c_(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{uo:E_.bind(null,e),ao:C_.bind(null,e),nu:N_.bind(null,e)}),e.Ru.push(function(){var t=Je($e().mark((function t(n){return $e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=4;break}e.Su.Qo(),__(e)?x_(e):e.bu.set("Unknown"),t.next=7;break;case 4:return t.next=6,e.Su.stop();case 6:S_(e);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.Su}function eI(e){return e.Du||(e.Du=function(e,t,n){var r=yv(e);return r.fu(),new l_(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{uo:Z_.bind(null,e),ao:W_.bind(null,e),au:B_.bind(null,e),cu:G_.bind(null,e)}),e.Ru.push(function(){var t=Je($e().mark((function t(n){return $e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=6;break}return e.Du.Qo(),t.next=4,L_(e);case 4:t.next=9;break;case 6:return t.next=8,e.Du.stop();case 8:e.Eu.length>0&&(fv("RemoteStore","Stopping write stream with ".concat(e.Eu.length," pending writes")),e.Eu=[]);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.Du}var tI=function(){function e(t,n,r,i,a){s(this,e),this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new bv,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((function(e){}))}return(0,c.Z)(e,[{key:"start",value:function(e){var t=this;this.timerHandle=setTimeout((function(){return t.handleDelayElapsed()}),e)}},{key:"skipDelay",value:function(){return this.handleDelayElapsed()}},{key:"cancel",value:function(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new kv(gv.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}},{key:"handleDelayElapsed",value:function(){var e=this;this.asyncQueue.enqueueAndForget((function(){return null!==e.timerHandle?(e.clearTimeout(),e.op().then((function(t){return e.deferred.resolve(t)}))):Promise.resolve()}))}},{key:"clearTimeout",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}))}],[{key:"createAndSchedule",value:function(t,n,r,i,a){var o=new e(t,n,Date.now()+r,i,a);return o.start(r),o}}]),e}();function nI(e,t){if(hv("AsyncQueue","".concat(t,": ").concat(e)),am(e))return new kv(gv.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}var rI=function(){function e(t){s(this,e),this.comparator=t?function(e,n){return t(e,n)||Vv.comparator(e.key,n.key)}:function(e,t){return Vv.comparator(e.key,t.key)},this.keyedMap=Mg(),this.sortedSet=new Hm(this.comparator)}return(0,c.Z)(e,[{key:"has",value:function(e){return null!=this.keyedMap.get(e)}},{key:"get",value:function(e){return this.keyedMap.get(e)}},{key:"first",value:function(){return this.sortedSet.minKey()}},{key:"last",value:function(){return this.sortedSet.maxKey()}},{key:"isEmpty",value:function(){return this.sortedSet.isEmpty()}},{key:"indexOf",value:function(e){var t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}},{key:"size",get:function(){return this.sortedSet.size}},{key:"forEach",value:function(e){this.sortedSet.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"add",value:function(e){var t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}},{key:"delete",value:function(e){var t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}},{key:"copy",value:function(t,n){var r=new e;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}],[{key:"emptySet",value:function(t){return new e(t.comparator)}}]),e}(),iI=function(){function e(){s(this,e),this.Cu=new Hm(Vv.comparator)}return(0,c.Z)(e,[{key:"track",value:function(e){var t=e.doc.key,n=this.Cu.get(t);n?0!==e.type&&3===n.type?this.Cu=this.Cu.insert(t,e):3===e.type&&1!==n.type?this.Cu=this.Cu.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.Cu=this.Cu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.Cu=this.Cu.remove(t):1===e.type&&2===n.type?this.Cu=this.Cu.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):vv():this.Cu=this.Cu.insert(t,e)}},{key:"xu",value:function(){var e=[];return this.Cu.inorderTraversal((function(t,n){e.push(n)})),e}}]),e}(),aI=function(){function e(t,n,r,i,a,o,u,c,l){s(this,e),this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=o,this.syncStateChanged=u,this.excludesMetadataChanges=c,this.hasCachedResults=l}return(0,c.Z)(e,[{key:"hasPendingWrites",get:function(){return!this.mutatedKeys.isEmpty()}},{key:"isEqual",value:function(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Sg(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;var t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(var r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}],[{key:"fromInitialDocuments",value:function(t,n,r,i,a){var o=[];return n.forEach((function(e){o.push({type:0,doc:e})})),new e(t,n,rI.emptySet(n),o,r,i,!0,!1,a)}}]),e}(),oI=(0,c.Z)((function e(){s(this,e),this.Nu=void 0,this.listeners=[]})),uI=(0,c.Z)((function e(){s(this,e),this.queries=new Pg((function(e){return Eg(e)}),Sg),this.onlineState="Unknown",this.ku=new Set}));function sI(e,t){return cI.apply(this,arguments)}function cI(){return cI=Je($e().mark((function e(t,n){var r,i,a,o,u;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=yv(t),i=n.query,a=!1,(o=r.queries.get(i))||(a=!0,o=new oI),!a){e.next=13;break}return e.prev=3,e.next=6,r.onListen(i);case 6:o.Nu=e.sent,e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(3),u=nI(e.t0,"Initialization of query '".concat(Tg(n.query),"' failed")),e.abrupt("return",void n.onError(u));case 13:r.queries.set(i,o),o.listeners.push(n),n.Mu(r.onlineState),o.Nu&&n.$u(o.Nu)&&pI(r);case 14:case"end":return e.stop()}}),e,null,[[3,9]])}))),cI.apply(this,arguments)}function lI(e,t){return fI.apply(this,arguments)}function fI(){return fI=Je($e().mark((function e(t,n){var r,i,a,o,u;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=yv(t),i=n.query,a=!1,(o=r.queries.get(i))&&(u=o.listeners.indexOf(n))>=0&&(o.listeners.splice(u,1),a=0===o.listeners.length),!a){e.next=6;break}return e.abrupt("return",(r.queries.delete(i),r.onUnlisten(i)));case 6:case"end":return e.stop()}}),e)}))),fI.apply(this,arguments)}function hI(e,t){var n,r=yv(e),i=!1,a=S(t);try{for(a.s();!(n=a.n()).done;){var o=n.value,u=o.query,s=r.queries.get(u);if(s){var c,l=S(s.listeners);try{for(l.s();!(c=l.n()).done;){c.value.$u(o)&&(i=!0)}}catch(f){l.e(f)}finally{l.f()}s.Nu=o}}}catch(f){a.e(f)}finally{a.f()}i&&pI(r)}function dI(e,t,n){var r=yv(e),i=r.queries.get(t);if(i){var a,o=S(i.listeners);try{for(o.s();!(a=o.n()).done;){a.value.onError(n)}}catch(u){o.e(u)}finally{o.f()}}r.queries.delete(t)}function pI(e){e.ku.forEach((function(e){e.next()}))}var vI=function(){function e(t,n,r){s(this,e),this.query=t,this.Ou=n,this.Fu=!1,this.Bu=null,this.onlineState="Unknown",this.options=r||{}}return(0,c.Z)(e,[{key:"$u",value:function(e){if(!this.options.includeMetadataChanges){var t,n=[],r=S(e.docChanges);try{for(r.s();!(t=r.n()).done;){var i=t.value;3!==i.type&&n.push(i)}}catch(o){r.e(o)}finally{r.f()}e=new aI(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}var a=!1;return this.Fu?this.Lu(e)&&(this.Ou.next(e),a=!0):this.qu(e,this.onlineState)&&(this.Uu(e),a=!0),this.Bu=e,a}},{key:"onError",value:function(e){this.Ou.error(e)}},{key:"Mu",value:function(e){this.onlineState=e;var t=!1;return this.Bu&&!this.Fu&&this.qu(this.Bu,e)&&(this.Uu(this.Bu),t=!0),t}},{key:"qu",value:function(e,t){if(!e.fromCache)return!0;var n="Offline"!==t;return(!this.options.Ku||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}},{key:"Lu",value:function(e){if(e.docChanges.length>0)return!0;var t=this.Bu&&this.Bu.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}},{key:"Uu",value:function(e){e=aI.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Fu=!0,this.Ou.next(e)}}]),e}(),mI=function(){function e(t,n){s(this,e),this.Gu=t,this.byteLength=n}return(0,c.Z)(e,[{key:"Qu",value:function(){return"metadata"in this.Gu}}]),e}(),yI=function(){function e(t){s(this,e),this.serializer=t}return(0,c.Z)(e,[{key:"rr",value:function(e){return ub(this.serializer,e)}},{key:"ur",value:function(e){return e.metadata.exists?db(this.serializer,e.document,!1):Ly.newNoDocument(this.rr(e.metadata.name),this.cr(e.metadata.readTime))}},{key:"cr",value:function(e){return rb(e)}}]),e}(),gI=function(){function e(t,n,r){s(this,e),this.ju=t,this.localStore=n,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=kI(t)}return(0,c.Z)(e,[{key:"zu",value:function(e){this.progress.bytesLoaded+=e.byteLength;var t=this.progress.documentsLoaded;if(e.Gu.namedQuery)this.queries.push(e.Gu.namedQuery);else if(e.Gu.documentMetadata){this.documents.push({metadata:e.Gu.documentMetadata}),e.Gu.documentMetadata.exists||++t;var n=Fv.fromString(e.Gu.documentMetadata.name);this.collectionGroups.add(n.get(n.length-2))}else e.Gu.document&&(this.documents[this.documents.length-1].document=e.Gu.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}},{key:"Wu",value:function(e){var t,n=new Map,r=new yI(this.serializer),i=S(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;if(a.metadata.queries){var o,u=r.rr(a.metadata.name),s=S(a.metadata.queries);try{for(s.s();!(o=s.n()).done;){var c=o.value,l=(n.get(c)||Bg()).add(u);n.set(c,l)}}catch(f){s.e(f)}finally{s.f()}}}}catch(f){i.e(f)}finally{i.f()}return n}},{key:"complete",value:function(){var e=Je($e().mark((function e(){var t,n,r,i,a;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Mx(this.localStore,new yI(this.serializer),this.documents,this.ju.id);case 2:t=e.sent,n=this.Wu(this.documents),r=S(this.queries),e.prev=5,r.s();case 7:if((i=r.n()).done){e.next=13;break}return a=i.value,e.next=11,jx(this.localStore,a,n.get(a.name));case 11:e.next=7;break;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(5),r.e(e.t0);case 18:return e.prev=18,r.f(),e.finish(18);case 21:return e.abrupt("return",(this.progress.taskState="Success",{progress:this.progress,Hu:this.collectionGroups,Ju:t}));case 22:case"end":return e.stop()}}),e,this,[[5,15,18,21]])})));return function(){return e.apply(this,arguments)}}()}]),e}();function kI(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}var bI=(0,c.Z)((function e(t){s(this,e),this.key=t})),wI=(0,c.Z)((function e(t){s(this,e),this.key=t})),xI=function(){function e(t,n){s(this,e),this.query=t,this.Yu=n,this.Xu=null,this.hasCachedResults=!1,this.current=!1,this.Zu=Bg(),this.mutatedKeys=Bg(),this.tc=Ng(t),this.ec=new rI(this.tc)}return(0,c.Z)(e,[{key:"nc",get:function(){return this.Yu}},{key:"sc",value:function(e,t){var n=this,r=t?t.ic:new iI,i=t?t.ec:this.ec,a=t?t.mutatedKeys:this.mutatedKeys,o=i,u=!1,s="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,c="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((function(e,t){var l=i.get(e),f=Cg(n.query,t)?t:null,h=!!l&&n.mutatedKeys.has(l.key),d=!!f&&(f.hasLocalMutations||n.mutatedKeys.has(f.key)&&f.hasCommittedMutations),p=!1;l&&f?l.data.isEqual(f.data)?h!==d&&(r.track({type:3,doc:f}),p=!0):n.rc(l,f)||(r.track({type:2,doc:f}),p=!0,(s&&n.tc(f,s)>0||c&&n.tc(f,c)<0)&&(u=!0)):!l&&f?(r.track({type:0,doc:f}),p=!0):l&&!f&&(r.track({type:1,doc:l}),p=!0,(s||c)&&(u=!0)),p&&(f?(o=o.add(f),a=d?a.add(e):a.delete(e)):(o=o.delete(e),a=a.delete(e)))})),null!==this.query.limit)for(;o.size>this.query.limit;){var l="F"===this.query.limitType?o.last():o.first();o=o.delete(l.key),a=a.delete(l.key),r.track({type:1,doc:l})}return{ec:o,ic:r,zi:u,mutatedKeys:a}}},{key:"rc",value:function(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}},{key:"applyChanges",value:function(e,t,n){var r=this,i=this.ec;this.ec=e.ec,this.mutatedKeys=e.mutatedKeys;var a=e.ic.xu();a.sort((function(e,t){return function(e,t){var n=function(e){switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return vv()}};return n(e)-n(t)}(e.type,t.type)||r.tc(e.doc,t.doc)})),this.oc(n);var o=t?this.uc():[],u=0===this.Zu.size&&this.current?1:0,s=u!==this.Xu;return this.Xu=u,0!==a.length||s?{snapshot:new aI(this.query,e.ec,i,a,e.mutatedKeys,0===u,s,!1,!!n&&n.resumeToken.approximateByteSize()>0),cc:o}:{cc:o}}},{key:"Mu",value:function(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({ec:this.ec,ic:new iI,mutatedKeys:this.mutatedKeys,zi:!1},!1)):{cc:[]}}},{key:"ac",value:function(e){return!this.Yu.has(e)&&!!this.ec.has(e)&&!this.ec.get(e).hasLocalMutations}},{key:"oc",value:function(e){var t=this;e&&(e.addedDocuments.forEach((function(e){return t.Yu=t.Yu.add(e)})),e.modifiedDocuments.forEach((function(e){})),e.removedDocuments.forEach((function(e){return t.Yu=t.Yu.delete(e)})),this.current=e.current)}},{key:"uc",value:function(){var e=this;if(!this.current)return[];var t=this.Zu;this.Zu=Bg(),this.ec.forEach((function(t){e.ac(t.key)&&(e.Zu=e.Zu.add(t.key))}));var n=[];return t.forEach((function(t){e.Zu.has(t)||n.push(new wI(t))})),this.Zu.forEach((function(e){t.has(e)||n.push(new bI(e))})),n}},{key:"hc",value:function(e){this.Yu=e.ir,this.Zu=Bg();var t=this.sc(e.documents);return this.applyChanges(t,!0)}},{key:"lc",value:function(){return aI.fromInitialDocuments(this.query,this.ec,this.mutatedKeys,0===this.Xu,this.hasCachedResults)}}]),e}(),_I=(0,c.Z)((function e(t,n,r){s(this,e),this.query=t,this.targetId=n,this.view=r})),II=(0,c.Z)((function e(t){s(this,e),this.key=t,this.fc=!1})),SI=function(){function e(t,n,r,i,a,o){s(this,e),this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=o,this.dc={},this.wc=new Pg((function(e){return Eg(e)}),Sg),this._c=new Map,this.mc=new Set,this.gc=new Hm(Vv.comparator),this.yc=new Map,this.Ic=new nx,this.Tc={},this.Ec=new Map,this.Ac=Rw.Mn(),this.onlineState="Unknown",this.vc=void 0}return(0,c.Z)(e,[{key:"isPrimaryClient",get:function(){return!0===this.vc}}]),e}();function EI(e,t){return TI.apply(this,arguments)}function TI(){return TI=Je($e().mark((function e(t,n){var r,i,a,o,u,s;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=kS(t),!(o=r.wc.get(n))){e.next=6;break}i=o.targetId,r.sharedClientState.addLocalQueryTarget(i),a=o.view.lc(),e.next=15;break;case 6:return e.next=8,Ax(r.localStore,xg(n));case 8:return u=e.sent,s=r.sharedClientState.addLocalQueryTarget(u.targetId),i=u.targetId,e.next=13,CI(r,n,i,"current"===s,u.resumeToken);case 13:a=e.sent,r.isPrimaryClient&&g_(r.remoteStore,u);case 15:return e.abrupt("return",a);case 16:case"end":return e.stop()}}),e)}))),TI.apply(this,arguments)}function CI(e,t,n,r,i){return AI.apply(this,arguments)}function AI(){return AI=Je($e().mark((function e(t,n,r,i,a){var o,u,s,c,l,f;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.Rc=function(e,n,r){return function(){var e=Je($e().mark((function e(t,n,r,i){var a,o,u;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.view.sc(r),e.t0=a.zi,!e.t0){e.next=6;break}return e.next=5,Px(t.localStore,n.query,!1).then((function(e){var t=e.documents;return n.view.sc(t,a)}));case 5:a=e.sent;case 6:return o=i&&i.targetChanges.get(n.targetId),u=n.view.applyChanges(a,t.isPrimaryClient,o),e.abrupt("return",(QI(t,n.targetId,u.cc),u.snapshot));case 8:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}()(t,e,n,r)},e.next=3,Px(t.localStore,n,!0);case 3:return o=e.sent,u=new xI(n,o.ir),s=u.sc(o.documents),c=Zk.createSynthesizedTargetChangeForCurrentChange(r,i&&"Offline"!==t.onlineState,a),l=u.applyChanges(s,t.isPrimaryClient,c),QI(t,r,l.cc),f=new _I(n,r,u),e.abrupt("return",(t.wc.set(n,f),t._c.has(r)?t._c.get(r).push(n):t._c.set(r,[n]),l.snapshot));case 11:case"end":return e.stop()}}),e)}))),AI.apply(this,arguments)}function NI(e,t){return RI.apply(this,arguments)}function RI(){return(RI=Je($e().mark((function e(t,n){var r,i,a;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=yv(t),i=r.wc.get(n),!((a=r._c.get(i.targetId)).length>1)){e.next=3;break}return e.abrupt("return",(r._c.set(i.targetId,a.filter((function(e){return!Sg(e,n)}))),void r.wc.delete(n)));case 3:if(!r.isPrimaryClient){e.next=11;break}if(r.sharedClientState.removeLocalQueryTarget(i.targetId),e.t0=r.sharedClientState.isActiveQueryTarget(i.targetId),e.t0){e.next=9;break}return e.next=9,Nx(r.localStore,i.targetId,!1).then((function(){r.sharedClientState.clearQueryState(i.targetId),k_(r.remoteStore,i.targetId),WI(r,i.targetId)})).catch(Xv);case 9:e.next=14;break;case 11:return WI(r,i.targetId),e.next=14,Nx(r.localStore,i.targetId,!0);case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function PI(e,t,n){return OI.apply(this,arguments)}function OI(){return OI=Je($e().mark((function e(t,n,r){var i,a,o;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=bS(t),e.prev=1,e.next=4,function(e,t){var n,r,i=yv(e),a=Dv.now(),o=t.reduce((function(e,t){return e.add(t.key)}),Bg());return i.persistence.runTransaction("Locally write mutations","readwrite",(function(e){var u=Dg(),s=Bg();return i.Zi.getEntries(e,o).next((function(e){(u=e).forEach((function(e,t){t.isValidDocument()||(s=s.add(e))}))})).next((function(){return i.localDocuments.getOverlayedDocuments(e,u)})).next((function(r){n=r;var o,u=[],s=S(t);try{for(s.s();!(o=s.n()).done;){var c=o.value,l=vk(c,n.get(c.key).overlayedDocument);null!=l&&u.push(new gk(c.key,l,Dy(l.value.mapValue),ck.exists(!0)))}}catch(f){s.e(f)}finally{s.f()}return i.mutationQueue.addMutationBatch(e,a,u,t)})).next((function(t){r=t;var a=t.applyToLocalDocumentSet(n,s);return i.documentOverlayCache.saveOverlays(e,t.batchId,a)}))})).then((function(){return{batchId:r.batchId,changes:Fg(n)}}))}(i.localStore,n);case 4:return a=e.sent,i.sharedClientState.addPendingMutation(a.batchId),function(e,t,n){var r=e.Tc[e.currentUser.toKey()];r||(r=new Hm(Rv)),r=r.insert(t,n),e.Tc[e.currentUser.toKey()]=r}(i,a.batchId,r),e.next=9,XI(i,a.changes);case 9:return e.next=11,L_(i.remoteStore);case 11:e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),o=nI(e.t0,"Failed to persist write"),r.reject(o);case 17:case"end":return e.stop()}}),e,null,[[1,13]])}))),OI.apply(this,arguments)}function DI(e,t){return LI.apply(this,arguments)}function LI(){return(LI=Je($e().mark((function e(t,n){var r,i;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=yv(t),e.prev=1,e.next=4,Ex(r.localStore,n);case 4:return i=e.sent,n.targetChanges.forEach((function(e,t){var n=r.yc.get(t);n&&(mv(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?n.fc=!0:e.modifiedDocuments.size>0?mv(n.fc):e.removedDocuments.size>0&&(mv(n.fc),n.fc=!1))})),e.next=8,XI(r,i,n);case 8:e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(1),e.next=14,Xv(e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,10]])})))).apply(this,arguments)}function MI(e,t,n){var r=yv(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.wc.forEach((function(e,n){var r=n.view.Mu(t);r.snapshot&&i.push(r.snapshot)})),function(e,t){var n=yv(e);n.onlineState=t;var r=!1;n.queries.forEach((function(e,n){var i,a=S(n.listeners);try{for(a.s();!(i=a.n()).done;){i.value.Mu(t)&&(r=!0)}}catch(o){a.e(o)}finally{a.f()}})),r&&pI(n)}(r.eventManager,t),i.length&&r.dc.nu(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}function FI(e,t,n){return jI.apply(this,arguments)}function jI(){return jI=Je($e().mark((function e(t,n,r){var i,a,o,u,s,c;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((i=yv(t)).sharedClientState.updateQueryState(n,"rejected",r),a=i.yc.get(n),!(o=a&&a.key)){e.next=14;break}return u=(u=new Hm(Vv.comparator)).insert(o,Ly.newNoDocument(o,Lv.min())),s=Bg().add(o),c=new Vk(Lv.min(),new Map,new Hm(Rv),u,s),e.next=9,DI(i,c);case 9:i.gc=i.gc.remove(o),i.yc.delete(n),$I(i),e.next=16;break;case 14:return e.next=16,Nx(i.localStore,n,!1).then((function(){return WI(i,n,r)})).catch(Xv);case 16:case"end":return e.stop()}}),e)}))),jI.apply(this,arguments)}function UI(e,t){return VI.apply(this,arguments)}function VI(){return(VI=Je($e().mark((function e(t,n){var r,i,a;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=yv(t),i=n.batch.batchId,e.prev=1,e.next=4,Ix(r.localStore,n);case 4:return a=e.sent,KI(r,i,null),GI(r,i),r.sharedClientState.updateMutationState(i,"acknowledged"),e.next=10,XI(r,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,Xv(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])})))).apply(this,arguments)}function ZI(e,t,n){return zI.apply(this,arguments)}function zI(){return(zI=Je($e().mark((function e(t,n,r){var i,a;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=yv(t),e.prev=1,e.next=4,function(e,t){var n=yv(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(function(e){var r;return n.mutationQueue.lookupMutationBatch(e,t).next((function(t){return mv(null!==t),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t)})).next((function(){return n.mutationQueue.performConsistencyCheck(e)})).next((function(){return n.documentOverlayCache.removeOverlaysForBatchId(e,r,t)})).next((function(){return n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r)})).next((function(){return n.localDocuments.getDocuments(e,r)}))}))}(i.localStore,n);case 4:return a=e.sent,KI(i,n,r),GI(i,n),i.sharedClientState.updateMutationState(n,"rejected",r),e.next=10,XI(i,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,Xv(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])})))).apply(this,arguments)}function BI(e,t){return qI.apply(this,arguments)}function qI(){return(qI=Je($e().mark((function e(t,n){var r,i,a,o;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return I_((r=yv(t)).remoteStore)||fv("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),e.prev=2,e.next=5,function(e){var t=yv(e);return t.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(e){return t.mutationQueue.getHighestUnacknowledgedBatchId(e)}))}(r.localStore);case 5:if(-1!==(i=e.sent)){e.next=8;break}return e.abrupt("return",void n.resolve());case 8:(a=r.Ec.get(i)||[]).push(n),r.Ec.set(i,a),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(2),o=nI(e.t0,"Initialization of waitForPendingWrites() operation failed"),n.reject(o);case 16:case"end":return e.stop()}}),e,null,[[2,12]])})))).apply(this,arguments)}function GI(e,t){(e.Ec.get(t)||[]).forEach((function(e){e.resolve()})),e.Ec.delete(t)}function KI(e,t,n){var r=yv(e),i=r.Tc[r.currentUser.toKey()];if(i){var a=i.get(t);a&&(n?a.reject(n):a.resolve(),i=i.remove(t)),r.Tc[r.currentUser.toKey()]=i}}function WI(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);var r,i=S(e._c.get(t));try{for(i.s();!(r=i.n()).done;){var a=r.value;e.wc.delete(a),n&&e.dc.Pc(a,n)}}catch(o){i.e(o)}finally{i.f()}e._c.delete(t),e.isPrimaryClient&&e.Ic.Is(t).forEach((function(t){e.Ic.containsKey(t)||HI(e,t)}))}function HI(e,t){e.mc.delete(t.path.canonicalString());var n=e.gc.get(t);null!==n&&(k_(e.remoteStore,n),e.gc=e.gc.remove(t),e.yc.delete(n),$I(e))}function QI(e,t,n){var r,i=S(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;a instanceof bI?(e.Ic.addReference(a.key,t),YI(e,a)):a instanceof wI?(fv("SyncEngine","Document no longer in limbo: "+a.key),e.Ic.removeReference(a.key,t),e.Ic.containsKey(a.key)||HI(e,a.key)):vv()}}catch(o){i.e(o)}finally{i.f()}}function YI(e,t){var n=t.key,r=n.path.canonicalString();e.gc.get(n)||e.mc.has(r)||(fv("SyncEngine","New document in limbo: "+n),e.mc.add(r),$I(e))}function $I(e){for(;e.mc.size>0&&e.gc.size<e.maxConcurrentLimboResolutions;){var t=e.mc.values().next().value;e.mc.delete(t);var n=new Vv(Fv.fromString(t)),r=e.Ac.next();e.yc.set(r,new II(n)),e.gc=e.gc.insert(n,r),g_(e.remoteStore,new Ab(xg(mg(n.path)),r,"TargetPurposeLimboResolution",hm.ct))}}function XI(e,t,n){return JI.apply(this,arguments)}function JI(){return JI=Je($e().mark((function e(t,n,r){var i,a,o,u;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=yv(t),a=[],o=[],u=[],e.t0=i.wc.isEmpty(),e.t0){e.next=9;break}return i.wc.forEach((function(e,t){u.push(i.Rc(t,n,r).then((function(e){if((e||r)&&i.isPrimaryClient&&i.sharedClientState.updateQueryState(t.targetId,(null==e?void 0:e.fromCache)?"not-current":"current"),e){a.push(e);var n=gx.Li(t.targetId,e);o.push(n)}})))})),e.next=6,Promise.all(u);case 6:return i.dc.nu(a),e.next=9,function(){var e=Je($e().mark((function e(t,n){var r,i,a,o,u,s,c,l;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=yv(t),e.prev=1,e.next=4,r.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(e){return em.forEach(n,(function(t){return em.forEach(t.Fi,(function(n){return r.persistence.referenceDelegate.addReference(e,t.targetId,n)})).next((function(){return em.forEach(t.Bi,(function(n){return r.persistence.referenceDelegate.removeReference(e,t.targetId,n)}))}))}))}));case 4:e.next=11;break;case 6:if(e.prev=6,e.t0=e.catch(1),am(e.t0)){e.next=10;break}throw e.t0;case 10:fv("LocalStore","Failed to update sequence numbers: "+e.t0);case 11:i=S(n);try{for(i.s();!(a=i.n()).done;)o=a.value,u=o.targetId,o.fromCache||(s=r.Ji.get(u),c=s.snapshotVersion,l=s.withLastLimboFreeSnapshotVersion(c),r.Ji=r.Ji.insert(u,l))}catch(f){i.e(f)}finally{i.f()}case 13:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t,n){return e.apply(this,arguments)}}()(i.localStore,o);case 9:case"end":return e.stop()}}),e)}))),JI.apply(this,arguments)}function eS(e,t){return tS.apply(this,arguments)}function tS(){return(tS=Je($e().mark((function e(t,n){var r,i;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((r=yv(t)).currentUser.isEqual(n)){e.next=11;break}return fv("SyncEngine","User change. New user:",n.toKey()),e.next=5,xx(r.localStore,n);case 5:return i=e.sent,r.currentUser=n,function(e,t){e.Ec.forEach((function(e){e.forEach((function(e){e.reject(new kv(gv.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),e.Ec.clear()}(r),r.sharedClientState.handleUserChange(n,i.removedBatchIds,i.addedBatchIds),e.next=11,XI(r,i.er);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function nS(e,t){var n=yv(e),r=n.yc.get(t);if(r&&r.fc)return Bg().add(r.key);var i=Bg(),a=n._c.get(t);if(!a)return i;var o,u=S(a);try{for(u.s();!(o=u.n()).done;){var s=o.value,c=n.wc.get(s);i=i.unionWith(c.view.nc)}}catch(l){u.e(l)}finally{u.f()}return i}function rS(e,t){return iS.apply(this,arguments)}function iS(){return(iS=Je($e().mark((function e(t,n){var r,i,a;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=yv(t),e.next=3,Px(r.localStore,n.query,!0);case 3:return i=e.sent,a=n.view.hc(i),e.abrupt("return",(r.isPrimaryClient&&QI(r,n.targetId,a.cc),a));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function aS(e,t){return oS.apply(this,arguments)}function oS(){return(oS=Je($e().mark((function e(t,n){var r;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=yv(t),e.abrupt("return",Dx(r.localStore,n).then((function(e){return XI(r,e)})));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function uS(e,t,n,r){return sS.apply(this,arguments)}function sS(){return sS=Je($e().mark((function e(t,n,r,i){var a,o;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=yv(t),e.next=3,function(e,t){var n=yv(e),r=yv(n.mutationQueue);return n.persistence.runTransaction("Lookup mutation documents","readonly",(function(e){return r.Sn(e,t).next((function(t){return t?n.localDocuments.getDocuments(e,t):em.resolve(null)}))}))}(a.localStore,n);case 3:if(null===(o=e.sent)){e.next=15;break}if("pending"!==r){e.next=10;break}return e.next=8,L_(a.remoteStore);case 8:e.next=11;break;case 10:"acknowledged"===r||"rejected"===r?(KI(a,n,i||null),GI(a,n),function(e,t){yv(yv(e).mutationQueue).Cn(t)}(a.localStore,n)):vv();case 11:return e.next=13,XI(a,o);case 13:e.next=16;break;case 15:fv("SyncEngine","Cannot apply mutation batch with id: "+n);case 16:case"end":return e.stop()}}),e)}))),sS.apply(this,arguments)}function cS(e,t){return lS.apply(this,arguments)}function lS(){return(lS=Je($e().mark((function e(t,n){var r,i,a,o,u,s,c,l;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(kS(r=yv(t)),bS(r),!0!==n||!0===r.vc){e.next=13;break}return i=r.sharedClientState.getAllActiveQueryTargets(),e.next=5,fS(r,i.toArray());case 5:return a=e.sent,r.vc=!0,e.next=9,$_(r.remoteStore,!0);case 9:o=S(a);try{for(o.s();!(u=o.n()).done;)s=u.value,g_(r.remoteStore,s)}catch(f){o.e(f)}finally{o.f()}e.next=25;break;case 13:if(!1!==n||!1===r.vc){e.next=25;break}return c=[],l=Promise.resolve(),r._c.forEach((function(e,t){r.sharedClientState.isLocalQueryTarget(t)?c.push(t):l=l.then((function(){return WI(r,t),Nx(r.localStore,t,!0)})),k_(r.remoteStore,t)})),e.next=19,l;case 19:return e.next=21,fS(r,c);case 21:return function(e){var t=yv(e);t.yc.forEach((function(e,n){k_(t.remoteStore,n)})),t.Ic.Ts(),t.yc=new Map,t.gc=new Hm(Vv.comparator)}(r),r.vc=!1,e.next=25,$_(r.remoteStore,!1);case 25:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function fS(e,t,n){return hS.apply(this,arguments)}function hS(){return hS=Je($e().mark((function e(t,n,r){var i,a,o,u,s,c,l,f,h,d,p,v,m,y;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=yv(t),a=[],o=[],u=S(n),e.prev=2,u.s();case 4:if((s=u.n()).done){e.next=45;break}if(c=s.value,l=void 0,!(f=i._c.get(c))||0===f.length){e.next=34;break}return e.next=11,Ax(i.localStore,xg(f[0]));case 11:l=e.sent,h=S(f),e.prev=13,h.s();case 15:if((d=h.n()).done){e.next=24;break}return p=d.value,v=i.wc.get(p),e.next=20,rS(i,v);case 20:(m=e.sent).snapshot&&o.push(m.snapshot);case 22:e.next=15;break;case 24:e.next=29;break;case 26:e.prev=26,e.t0=e.catch(13),h.e(e.t0);case 29:return e.prev=29,h.f(),e.finish(29);case 32:e.next=42;break;case 34:return e.next=36,Ox(i.localStore,c);case 36:return y=e.sent,e.next=39,Ax(i.localStore,y);case 39:return l=e.sent,e.next=42,CI(i,dS(y),c,!1,l.resumeToken);case 42:a.push(l);case 43:e.next=4;break;case 45:e.next=50;break;case 47:e.prev=47,e.t1=e.catch(2),u.e(e.t1);case 50:return e.prev=50,u.f(),e.finish(50);case 53:return e.abrupt("return",(i.dc.nu(o),a));case 54:case"end":return e.stop()}}),e,null,[[2,47,50,53],[13,26,29,32]])}))),hS.apply(this,arguments)}function dS(e){return vg(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function pS(e){var t=yv(e);return yv(yv(t.localStore).persistence).$i()}function vS(e,t,n,r){return mS.apply(this,arguments)}function mS(){return mS=Je($e().mark((function e(t,n,r,i){var a,o,u,s;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a=yv(t)).vc){e.next=3;break}return e.abrupt("return",void fv("SyncEngine","Ignoring unexpected query state notification."));case 3:if(!((o=a._c.get(n))&&o.length>0)){e.next=20;break}e.t0=r,e.next="current"===e.t0||"not-current"===e.t0?8:"rejected"===e.t0?15:19;break;case 8:return e.next=10,Dx(a.localStore,Ag(o[0]));case 10:return u=e.sent,s=Vk.createSynthesizedRemoteEventForCurrentChange(n,"current"===r,ny.EMPTY_BYTE_STRING),e.next=14,XI(a,u,s);case 14:return e.abrupt("break",20);case 15:return e.next=17,Nx(a.localStore,n,!0);case 17:return WI(a,n,i),e.abrupt("break",20);case 19:vv();case 20:case"end":return e.stop()}}),e)}))),mS.apply(this,arguments)}function yS(e,t,n){return gS.apply(this,arguments)}function gS(){return(gS=Je($e().mark((function e(t,n,r){var i,a,o,u,s,c,l,f,h;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(i=kS(t)).vc){e.next=45;break}a=S(n),e.prev=3,a.s();case 5:if((o=a.n()).done){e.next=21;break}if(u=o.value,!i._c.has(u)){e.next=10;break}return fv("SyncEngine","Adding an already active target "+u),e.abrupt("continue",19);case 10:return e.next=12,Ox(i.localStore,u);case 12:return s=e.sent,e.next=15,Ax(i.localStore,s);case 15:return c=e.sent,e.next=18,CI(i,dS(s),c.targetId,!1,c.resumeToken);case 18:g_(i.remoteStore,c);case 19:e.next=5;break;case 21:e.next=26;break;case 23:e.prev=23,e.t0=e.catch(3),a.e(e.t0);case 26:return e.prev=26,a.f(),e.finish(26);case 29:l=S(r),e.prev=30,h=$e().mark((function e(){var t;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=f.value,e.t0=i._c.has(t),!e.t0){e.next=5;break}return e.next=5,Nx(i.localStore,t,!1).then((function(){k_(i.remoteStore,t),WI(i,t)})).catch(Xv);case 5:case"end":return e.stop()}}),e)})),l.s();case 33:if((f=l.n()).done){e.next=37;break}return e.delegateYield(h(),"t1",35);case 35:e.next=33;break;case 37:e.next=42;break;case 39:e.prev=39,e.t2=e.catch(30),l.e(e.t2);case 42:return e.prev=42,l.f(),e.finish(42);case 45:case"end":return e.stop()}}),e,null,[[3,23,26,29],[30,39,42,45]])})))).apply(this,arguments)}function kS(e){var t=yv(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=DI.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=nS.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=FI.bind(null,t),t.dc.nu=hI.bind(null,t.eventManager),t.dc.Pc=dI.bind(null,t.eventManager),t}function bS(e){var t=yv(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=UI.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=ZI.bind(null,t),t}function wS(e,t,n){var r=yv(e);(function(){var e=Je($e().mark((function e(t,n,r){var i,a,o,u,s;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.getMetadata();case 3:return i=e.sent,e.next=6,function(e,t){var n=yv(e),r=rb(t.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",(function(e){return n.qs.getBundleMetadata(e,t.id)})).then((function(e){return!!e&&e.createTime.compareTo(r)>=0}))}(t.localStore,i);case 6:if(!e.sent){e.next=11;break}return e.next=9,n.close();case 9:return r._completeWith(function(e){return{taskState:"Success",documentsLoaded:e.totalDocuments,bytesLoaded:e.totalBytes,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}(i)),e.abrupt("return",Promise.resolve(new Set));case 11:return r._updateProgress(kI(i)),a=new gI(i,t.localStore,n.serializer),e.next=15,n.bc();case 15:o=e.sent;case 16:if(!o){e.next=26;break}return e.next=19,a.zu(o);case 19:return(u=e.sent)&&r._updateProgress(u),e.next=23,n.bc();case 23:o=e.sent;case 24:e.next=16;break;case 26:return e.next=28,a.complete();case 28:return s=e.sent,e.next=31,XI(t,s.Ju,void 0);case 31:return e.next=33,function(e,t){var n=yv(e);return n.persistence.runTransaction("Save bundle","readwrite",(function(e){return n.qs.saveBundleMetadata(e,t)}))}(t.localStore,i);case 33:return r._completeWith(s.progress),e.abrupt("return",Promise.resolve(s.Hu));case 37:return e.prev=37,e.t0=e.catch(0),e.abrupt("return",(dv("SyncEngine","Loading bundle failed with ".concat(e.t0)),r._failWith(e.t0),Promise.resolve(new Set)));case 40:case"end":return e.stop()}}),e,null,[[0,37]])})));return function(t,n,r){return e.apply(this,arguments)}})()(r,t,n).then((function(e){r.sharedClientState.notifyBundleLoaded(e)}))}var xS=function(){function e(){s(this,e),this.synchronizeTabs=!1}return(0,c.Z)(e,[{key:"initialize",value:function(){var e=Je($e().mark((function e(t){return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.serializer=o_(t.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(t),this.persistence=this.createPersistence(t),e.next=5,this.persistence.start();case 5:this.localStore=this.createLocalStore(t),this.gcScheduler=this.createGarbageCollectionScheduler(t,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(t,this.localStore);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createGarbageCollectionScheduler",value:function(e,t){return null}},{key:"createIndexBackfillerScheduler",value:function(e,t){return null}},{key:"createLocalStore",value:function(e){return wx(this.persistence,new kx,e.initialUser,this.serializer)}},{key:"createPersistence",value:function(e){return new sx(lx.zs,this.serializer)}},{key:"createSharedClientState",value:function(e){return new Qx}},{key:"terminate",value:function(){var e=Je($e().mark((function e(){return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.gcScheduler&&this.gcScheduler.stop(),e.next=3,this.sharedClientState.shutdown();case 3:return e.next=5,this.persistence.shutdown();case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),_S=function(e){f(n,e);var t=m(n);function n(e,r,i){var a;return s(this,n),(a=t.call(this)).Vc=e,a.cacheSizeBytes=r,a.forceOwnership=i,a.synchronizeTabs=!1,a}return(0,c.Z)(n,[{key:"initialize",value:function(){var e=Je($e().mark((function e(t){var r=this;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ur(h(n.prototype),"initialize",this).call(this,t);case 2:return e.next=4,this.Vc.initialize(this,t);case 4:return e.next=6,bS(this.Vc.syncEngine);case 6:return e.next=8,L_(this.Vc.remoteStore);case 8:return e.next=10,this.persistence.Ii((function(){return r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()}));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createLocalStore",value:function(e){return wx(this.persistence,new kx,e.initialUser,this.serializer)}},{key:"createGarbageCollectionScheduler",value:function(e,t){var n=this.persistence.referenceDelegate.garbageCollector;return new jw(n,e.asyncQueue,t)}},{key:"createIndexBackfillerScheduler",value:function(e,t){var n=new fm(t,this.persistence);return new lm(e.asyncQueue,n)}},{key:"createPersistence",value:function(e){var t=yx(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?_w.withCacheSize(this.cacheSizeBytes):_w.DEFAULT;return new px(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,i_(),a_(),this.serializer,this.sharedClientState,!!this.forceOwnership)}},{key:"createSharedClientState",value:function(e){return new Qx}}]),n}(xS),IS=function(e){f(n,e);var t=m(n);function n(e,r){var i;return s(this,n),(i=t.call(this,e,r,!1)).Vc=e,i.cacheSizeBytes=r,i.synchronizeTabs=!0,i}return(0,c.Z)(n,[{key:"initialize",value:function(){var e=Je($e().mark((function e(t){var r,i=this;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ur(h(n.prototype),"initialize",this).call(this,t);case 2:if(r=this.Vc.syncEngine,e.t0=this.sharedClientState instanceof Hx,!e.t0){e.next=8;break}return this.sharedClientState.syncEngine={jr:uS.bind(null,r),zr:vS.bind(null,r),Wr:yS.bind(null,r),$i:pS.bind(null,r),Qr:aS.bind(null,r)},e.next=8,this.sharedClientState.start();case 8:return e.next=10,this.persistence.Ii(function(){var e=Je($e().mark((function e(t){return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,cS(i.Vc.syncEngine,t);case 2:i.gcScheduler&&(t&&!i.gcScheduler.started?i.gcScheduler.start():t||i.gcScheduler.stop()),i.indexBackfillerScheduler&&(t&&!i.indexBackfillerScheduler.started?i.indexBackfillerScheduler.start():t||i.indexBackfillerScheduler.stop());case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createSharedClientState",value:function(e){var t=i_();if(!Hx.D(t))throw new kv(gv.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=yx(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Hx(t,e.asyncQueue,n,e.clientId,e.initialUser)}}]),n}(_S),SS=function(){function e(){s(this,e)}return(0,c.Z)(e,[{key:"initialize",value:function(){var e=Je($e().mark((function e(t,n){var r=this;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.localStore,e.t0){e.next=12;break}return this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(e){return MI(r.syncEngine,e,1)},this.remoteStore.remoteSyncer.handleCredentialChange=eS.bind(null,this.syncEngine),e.next=12,$_(this.remoteStore,this.syncEngine.isPrimaryClient);case 12:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"createEventManager",value:function(e){return new uI}},{key:"createDatastore",value:function(e){var t,n=o_(e.databaseInfo.databaseId),r=(t=e.databaseInfo,new r_(t));return function(e,t,n,r){return new f_(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,r,n)}},{key:"createRemoteStore",value:function(e){var t,n,r,i,a,o=this;return t=this.localStore,n=this.datastore,r=e.asyncQueue,i=function(e){return MI(o.syncEngine,e,0)},a=$x.D()?new $x:new Yx,new d_(t,n,r,i,a)}},{key:"createSyncEngine",value:function(e,t){return function(e,t,n,r,i,a,o){var u=new SI(e,t,n,r,i,a);return o&&(u.vc=!0),u}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}},{key:"terminate",value:function(){return function(){var e=Je($e().mark((function e(t){var n;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=yv(t),fv("RemoteStore","RemoteStore shutting down."),n.vu.add(5),e.next=5,m_(n);case 5:n.Pu.shutdown(),n.bu.set("Unknown");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(this.remoteStore)}}]),e}();function ES(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10240,n=0;return{read:function(){return Je($e().mark((function r(){var i;return $e().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!(n<e.byteLength)){r.next=3;break}return i={value:e.slice(n,n+t),done:!1},r.abrupt("return",(n+=t,i));case 3:return r.abrupt("return",{done:!0});case 4:case"end":return r.stop()}}),r)})))()},cancel:function(){return Je($e().mark((function e(){return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()},releaseLock:function(){},closed:Promise.resolve()}}var TS=function(){function e(t){s(this,e),this.observer=t,this.muted=!1}return(0,c.Z)(e,[{key:"next",value:function(e){this.observer.next&&this.Sc(this.observer.next,e)}},{key:"error",value:function(e){this.observer.error?this.Sc(this.observer.error,e):hv("Uncaught Error in snapshot listener:",e.toString())}},{key:"Dc",value:function(){this.muted=!0}},{key:"Sc",value:function(e,t){var n=this;this.muted||setTimeout((function(){n.muted||e(t)}),0)}}]),e}(),CS=function(){function e(t,n){var r=this;s(this,e),this.Cc=t,this.serializer=n,this.metadata=new bv,this.buffer=new Uint8Array,this.xc=new TextDecoder("utf-8"),this.Nc().then((function(e){e&&e.Qu()?r.metadata.resolve(e.Gu.metadata):r.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             ".concat(JSON.stringify(null==e?void 0:e.Gu))))}),(function(e){return r.metadata.reject(e)}))}return(0,c.Z)(e,[{key:"close",value:function(){return this.Cc.cancel()}},{key:"getMetadata",value:function(){var e=Je($e().mark((function e(){return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.metadata.promise);case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"bc",value:function(){var e=Je($e().mark((function e(){return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getMetadata();case 2:return e.abrupt("return",this.Nc());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Nc",value:function(){var e=Je($e().mark((function e(){var t,n,r,i;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.kc();case 2:if(null!==(t=e.sent)){e.next=5;break}return e.abrupt("return",null);case 5:return n=this.xc.decode(t),r=Number(n),isNaN(r)&&this.Mc("length string (".concat(n,") is not valid number")),e.next=9,this.$c(r);case 9:return i=e.sent,e.abrupt("return",new mI(JSON.parse(i),t.length+r));case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Oc",value:function(){return this.buffer.findIndex((function(e){return e==="{".charCodeAt(0)}))}},{key:"kc",value:function(){var e=Je($e().mark((function e(){var t,n;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.Oc()<0)){e.next=7;break}return e.next=3,this.Fc();case 3:if(!e.sent){e.next=5;break}return e.abrupt("break",7);case 5:e.next=0;break;case 7:if(0!==this.buffer.length){e.next=9;break}return e.abrupt("return",null);case 9:return(t=this.Oc())<0&&this.Mc("Reached the end of bundle when a length string is expected."),n=this.buffer.slice(0,t),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"$c",value:function(){var e=Je($e().mark((function e(t){var n;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.buffer.length<t)){e.next=8;break}return e.next=3,this.Fc();case 3:if(e.t0=e.sent,!e.t0){e.next=6;break}this.Mc("Reached the end of bundle when more is expected.");case 6:e.next=0;break;case 8:return n=this.xc.decode(this.buffer.slice(0,t)),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Mc",value:function(e){throw this.Cc.cancel(),new Error("Invalid bundle format: ".concat(e))}},{key:"Fc",value:function(){var e=Je($e().mark((function e(){var t,n;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.Cc.read();case 2:return(t=e.sent).done||((n=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),n.set(t.value,this.buffer.length),this.buffer=n),e.abrupt("return",t.done);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),AS=function(){function e(t){s(this,e),this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return(0,c.Z)(e,[{key:"lookup",value:function(){var e=Je($e().mark((function e(t){var n,r=this;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!(this.mutations.length>0)){e.next=2;break}throw new kv(gv.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");case 2:return e.next=4,function(){var e=Je($e().mark((function e(t,n){var r,i,a,o,u,s;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=yv(t),i=lb(r.serializer)+"/documents",a={documents:n.map((function(e){return ob(r.serializer,e)}))},e.next=5,r.vo("BatchGetDocuments",i,a,n.length);case 5:return o=e.sent,u=new Map,o.forEach((function(e){var t=pb(r.serializer,e);u.set(t.key.toString(),t)})),s=[],e.abrupt("return",(n.forEach((function(e){var t=u.get(e.toString());mv(!!t),s.push(t)})),s));case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,t);case 4:return n=e.sent,e.abrupt("return",(n.forEach((function(e){return r.recordVersion(e)})),n));case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"set",value:function(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"update",value:function(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastWriteError=e}this.writtenDocs.add(e.toString())}},{key:"delete",value:function(e){this.write(new Ik(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"commit",value:function(){var e=Je($e().mark((function e(){var t,n=this;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!this.lastWriteError){e.next=2;break}throw this.lastWriteError;case 2:return t=this.readVersions,this.mutations.forEach((function(e){t.delete(e.key.toString())})),t.forEach((function(e,t){var r=Vv.fromPath(t);n.mutations.push(new Sk(r,n.precondition(r)))})),e.next=7,function(){var e=Je($e().mark((function e(t,n){var r,i,a;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=yv(t),i=lb(r.serializer)+"/documents",a={writes:n.map((function(e){return vb(r.serializer,e)}))},e.next=3,r.Io("Commit",i,a);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,this.mutations);case 7:this.committed=!0;case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"recordVersion",value:function(e){var t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw vv();t=Lv.min()}var n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new kv(gv.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}},{key:"precondition",value:function(e){var t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Lv.min())?ck.exists(!1):ck.updateTime(t):ck.none()}},{key:"preconditionForUpdate",value:function(e){var t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Lv.min()))throw new kv(gv.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return ck.updateTime(t)}return ck.exists(!0)}},{key:"write",value:function(e){this.ensureCommitNotCalled(),this.mutations.push(e)}},{key:"ensureCommitNotCalled",value:function(){}}]),e}(),NS=function(){function e(t,n,r,i,a){s(this,e),this.asyncQueue=t,this.datastore=n,this.options=r,this.updateFunction=i,this.deferred=a,this.Bc=r.maxAttempts,this.qo=new u_(this.asyncQueue,"transaction_retry")}return(0,c.Z)(e,[{key:"run",value:function(){this.Bc-=1,this.Lc()}},{key:"Lc",value:function(){var e=this;this.qo.No(Je($e().mark((function t(){var n,r;return $e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=new AS(e.datastore),(r=e.qc(n))&&r.then((function(t){e.asyncQueue.enqueueAndForget((function(){return n.commit().then((function(){e.deferred.resolve(t)})).catch((function(t){e.Uc(t)}))}))})).catch((function(t){e.Uc(t)}));case 2:case"end":return t.stop()}}),t)}))))}},{key:"qc",value:function(e){try{var t=this.updateFunction(e);return!dm(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}},{key:"Uc",value:function(e){var t=this;this.Bc>0&&this.Kc(e)?(this.Bc-=1,this.asyncQueue.enqueueAndForget((function(){return t.Lc(),Promise.resolve()}))):this.deferred.reject(e)}},{key:"Kc",value:function(e){if("FirebaseError"===e.name){var t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!Nk(t)}return!1}}]),e}(),RS=function(){function e(t,n,r,i){var a=this;s(this,e),this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=uv.UNAUTHENTICATED,this.clientId=Nv.A(),this.authCredentialListener=function(){return Promise.resolve()},this.appCheckCredentialListener=function(){return Promise.resolve()},this.authCredentials.start(r,function(){var e=Je($e().mark((function e(t){return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return fv("FirestoreClient","Received user=",t.uid),e.next=3,a.authCredentialListener(t);case 3:a.user=t;case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),this.appCheckCredentials.start(r,(function(e){return fv("FirestoreClient","Received new app check token=",e),a.appCheckCredentialListener(e,a.user)}))}return(0,c.Z)(e,[{key:"getConfiguration",value:function(){var e=Je($e().mark((function e(){return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100});case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setCredentialChangeListener",value:function(e){this.authCredentialListener=e}},{key:"setAppCheckTokenChangeListener",value:function(e){this.appCheckCredentialListener=e}},{key:"verifyNotTerminated",value:function(){if(this.asyncQueue.isShuttingDown)throw new kv(gv.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"terminate",value:function(){var e=this;this.asyncQueue.enterRestrictedMode();var t=new bv;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(Je($e().mark((function n(){var r;return $e().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,n.t0=e._onlineComponents,!n.t0){n.next=5;break}return n.next=5,e._onlineComponents.terminate();case 5:if(n.t1=e._offlineComponents,!n.t1){n.next=9;break}return n.next=9,e._offlineComponents.terminate();case 9:e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve(),n.next=18;break;case 14:n.prev=14,n.t2=n.catch(0),r=nI(n.t2,"Failed to shutdown persistence"),t.reject(r);case 18:case"end":return n.stop()}}),n,null,[[0,14]])})))),t.promise}}]),e}();function PS(e,t){return OS.apply(this,arguments)}function OS(){return OS=Je($e().mark((function e(t,n){var r,i;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),fv("FirestoreClient","Initializing OfflineComponentProvider"),e.next=3,t.getConfiguration();case 3:return r=e.sent,e.next=6,n.initialize(r);case 6:i=r.initialUser,t.setCredentialChangeListener(function(){var e=Je($e().mark((function e(t){return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=i.isEqual(t),e.t0){e.next=5;break}return e.next=4,xx(n.localStore,t);case 4:i=t;case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),n.persistence.setDatabaseDeletedListener((function(){return t.terminate()})),t._offlineComponents=n;case 8:case"end":return e.stop()}}),e)}))),OS.apply(this,arguments)}function DS(e,t){return LS.apply(this,arguments)}function LS(){return(LS=Je($e().mark((function e(t,n){var r,i;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),e.next=3,FS(t);case 3:return r=e.sent,fv("FirestoreClient","Initializing OnlineComponentProvider"),e.next=7,t.getConfiguration();case 7:return i=e.sent,e.next=10,n.initialize(r,i);case 10:t.setCredentialChangeListener((function(e){return Q_(n.remoteStore,e)})),t.setAppCheckTokenChangeListener((function(e,t){return Q_(n.remoteStore,t)})),t._onlineComponents=n;case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function MS(e){return"FirebaseError"===e.name?e.code===gv.FAILED_PRECONDITION||e.code===gv.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}function FS(e){return jS.apply(this,arguments)}function jS(){return(jS=Je($e().mark((function e(t){var n;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t._offlineComponents){e.next=21;break}if(!t._uninitializedComponentsProvider){e.next=18;break}return fv("FirestoreClient","Using user provided OfflineComponentProvider"),e.prev=3,e.next=6,PS(t,t._uninitializedComponentsProvider._offline);case 6:e.next=16;break;case 8:if(e.prev=8,e.t0=e.catch(3),MS(n=e.t0)){e.next=13;break}throw n;case 13:return dv("Error using user provided cache. Falling back to memory cache: "+n),e.next=16,PS(t,new xS);case 16:e.next=21;break;case 18:return fv("FirestoreClient","Using default OfflineComponentProvider"),e.next=21,PS(t,new xS);case 21:return e.abrupt("return",t._offlineComponents);case 22:case"end":return e.stop()}}),e,null,[[3,8]])})))).apply(this,arguments)}function US(e){return VS.apply(this,arguments)}function VS(){return(VS=Je($e().mark((function e(t){return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t._onlineComponents,e.t0){e.next=11;break}if(!t._uninitializedComponentsProvider){e.next=8;break}return fv("FirestoreClient","Using user provided OnlineComponentProvider"),e.next=6,DS(t,t._uninitializedComponentsProvider._online);case 6:e.next=11;break;case 8:return fv("FirestoreClient","Using default OnlineComponentProvider"),e.next=11,DS(t,new SS);case 11:return e.abrupt("return",t._onlineComponents);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ZS(e){return FS(e).then((function(e){return e.persistence}))}function zS(e){return FS(e).then((function(e){return e.localStore}))}function BS(e){return US(e).then((function(e){return e.remoteStore}))}function qS(e){return US(e).then((function(e){return e.syncEngine}))}function GS(e){return US(e).then((function(e){return e.datastore}))}function KS(e){return WS.apply(this,arguments)}function WS(){return(WS=Je($e().mark((function e(t){var n,r;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,US(t);case 2:return n=e.sent,r=n.eventManager,e.abrupt("return",(r.onListen=EI.bind(null,n.syncEngine),r.onUnlisten=NI.bind(null,n.syncEngine),r));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function HS(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new bv;return e.asyncQueue.enqueueAndForget(Je($e().mark((function i(){return $e().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new TS({next:function(a){t.enqueueAndForget((function(){return lI(e,o)}));var u=a.docs.has(n);!u&&a.fromCache?i.reject(new kv(gv.UNAVAILABLE,"Failed to get document because the client is offline.")):u&&a.fromCache&&r&&"server"===r.source?i.reject(new kv(gv.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(a)},error:function(e){return i.reject(e)}}),o=new vI(mg(n.path),a,{includeMetadataChanges:!0,Ku:!0});return sI(e,o)},i.next=3,KS(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}function QS(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new bv;return e.asyncQueue.enqueueAndForget(Je($e().mark((function i(){return $e().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new TS({next:function(n){t.enqueueAndForget((function(){return lI(e,o)})),n.fromCache&&"server"===r.source?i.reject(new kv(gv.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(e){return i.reject(e)}}),o=new vI(n,a,{includeMetadataChanges:!0,Ku:!0});return sI(e,o)},i.next=3,KS(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}function YS(e){var t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}var $S=new Map;function XS(e,t,n){if(!n)throw new kv(gv.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function JS(e,t,n,r){if(!0===t&&!0===r)throw new kv(gv.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))}function eE(e){if(!Vv.isDocumentKey(e))throw new kv(gv.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function tE(e){if(Vv.isDocumentKey(e))throw new kv(gv.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function nE(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";var t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}return"function"==typeof e?"a function":vv()}function rE(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new kv(gv.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=nE(e);throw new kv(gv.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}return e}function iE(e,t){if(t<=0)throw new kv(gv.INVALID_ARGUMENT,"Function ".concat(e,"() requires a positive number, but it was: ").concat(t,"."))}var aE=function(){function e(t){var n,r;if(s(this,e),void 0===t.host){if(void 0!==t.ssl)throw new kv(gv.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(n=t.ssl)||void 0===n||n;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.cache=t.localCache,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new kv(gv.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}JS("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===t.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=YS(null!==(r=t.experimentalLongPollingOptions)&&void 0!==r?r:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new kv(gv.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (must not be NaN)"));if(e.timeoutSeconds<5)throw new kv(gv.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (minimum allowed value is 5)"));if(e.timeoutSeconds>30)throw new kv(gv.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (maximum allowed value is 30)"))}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}return(0,c.Z)(e,[{key:"isEqual",value:function(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(t=this.experimentalLongPollingOptions,n=e.experimentalLongPollingOptions,t.timeoutSeconds===n.timeoutSeconds)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams;var t,n}}]),e}(),oE=function(){function e(t,n,r,i){s(this,e),this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new aE({}),this._settingsFrozen=!1}return(0,c.Z)(e,[{key:"app",get:function(){if(!this._app)throw new kv(gv.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}},{key:"_initialized",get:function(){return this._settingsFrozen}},{key:"_terminated",get:function(){return void 0!==this._terminateTask}},{key:"_setSettings",value:function(e){if(this._settingsFrozen)throw new kv(gv.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new aE(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new xv;switch(e.type){case"firstParty":return new Ev(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new kv(gv.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}},{key:"_getSettings",value:function(){return this._settings}},{key:"_freezeSettings",value:function(){return this._settingsFrozen=!0,this._settings}},{key:"_delete",value:function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}},{key:"toJSON",value:function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}},{key:"_terminate",value:function(){return function(e){var t=$S.get(e);t&&(fv("ComponentProvider","Removing Datastore"),$S.delete(e),t.terminate())}(this),Promise.resolve()}}]),e}();function uE(e,t,n){var r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=(e=rE(e,oE))._getSettings();if("firestore.googleapis.com"!==a.host&&a.host!==t&&dv("Host has been set in both settings() and useEmulator(), emulator host will be used"),e._setSettings(Object.assign(Object.assign({},a),{host:"".concat(t,":").concat(n),ssl:!1})),i.mockUserToken){var o,u;if("string"==typeof i.mockUserToken)o=i.mockUserToken,u=uv.MOCK_USER;else{o=function(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var a=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[it(JSON.stringify({alg:"none",type:"JWT"})),it(JSON.stringify(a)),""].join(".")}(i.mockUserToken,null===(r=e._app)||void 0===r?void 0:r.options.projectId);var s=i.mockUserToken.sub||i.mockUserToken.user_id;if(!s)throw new kv(gv.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new uv(s)}e._authCredentials=new _v(new wv(o,u))}}var sE=function(){function e(t,n,r){s(this,e),this.converter=n,this._key=r,this.type="document",this.firestore=t}return(0,c.Z)(e,[{key:"_path",get:function(){return this._key.path}},{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"path",get:function(){return this._key.path.canonicalString()}},{key:"parent",get:function(){return new lE(this.firestore,this.converter,this._key.path.popLast())}},{key:"withConverter",value:function(t){return new e(this.firestore,t,this._key)}}]),e}(),cE=function(){function e(t,n,r){s(this,e),this.converter=n,this._query=r,this.type="query",this.firestore=t}return(0,c.Z)(e,[{key:"withConverter",value:function(t){return new e(this.firestore,t,this._query)}}]),e}(),lE=function(e){f(n,e);var t=m(n);function n(e,r,i){var a;return s(this,n),(a=t.call(this,e,r,mg(i)))._path=i,a.type="collection",a}return(0,c.Z)(n,[{key:"id",get:function(){return this._query.path.lastSegment()}},{key:"path",get:function(){return this._query.path.canonicalString()}},{key:"parent",get:function(){var e=this._path.popLast();return e.isEmpty()?null:new sE(this.firestore,null,new Vv(e))}},{key:"withConverter",value:function(e){return new n(this.firestore,e,this._path)}}]),n}(cE);function fE(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=Nt(e),XS("collection","path",t),e instanceof oE){var a=Fv.fromString.apply(Fv,[t].concat(r));return tE(a),new lE(e,null,a)}if(!(e instanceof sE||e instanceof lE))throw new kv(gv.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(Fv.fromString.apply(Fv,[t].concat(r)));return tE(o),new lE(e.firestore,null,o)}function hE(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=Nt(e),1===arguments.length&&(t=Nv.A()),XS("doc","path",t),e instanceof oE){var a=Fv.fromString.apply(Fv,[t].concat(r));return eE(a),new sE(e,null,new Vv(a))}if(!(e instanceof sE||e instanceof lE))throw new kv(gv.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(Fv.fromString.apply(Fv,[t].concat(r)));return eE(o),new sE(e.firestore,e instanceof lE?e.converter:null,new Vv(o))}function dE(e,t){return e=Nt(e),t=Nt(t),(e instanceof sE||e instanceof lE)&&(t instanceof sE||t instanceof lE)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter}function pE(e,t){return e=Nt(e),t=Nt(t),e instanceof cE&&t instanceof cE&&e.firestore===t.firestore&&Sg(e._query,t._query)&&e.converter===t.converter}var vE=function(){function e(){var t=this;s(this,e),this.Gc=Promise.resolve(),this.Qc=[],this.jc=!1,this.zc=[],this.Wc=null,this.Hc=!1,this.Jc=!1,this.Yc=[],this.qo=new u_(this,"async_queue_retry"),this.Xc=function(){var e=a_();e&&fv("AsyncQueue","Visibility state changed to "+e.visibilityState),t.qo.Mo()};var n=a_();n&&"function"==typeof n.addEventListener&&n.addEventListener("visibilitychange",this.Xc)}return(0,c.Z)(e,[{key:"isShuttingDown",get:function(){return this.jc}},{key:"enqueueAndForget",value:function(e){this.enqueue(e)}},{key:"enqueueAndForgetEvenWhileRestricted",value:function(e){this.Zc(),this.ta(e)}},{key:"enterRestrictedMode",value:function(e){if(!this.jc){this.jc=!0,this.Jc=e||!1;var t=a_();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Xc)}}},{key:"enqueue",value:function(e){var t=this;if(this.Zc(),this.jc)return new Promise((function(){}));var n=new bv;return this.ta((function(){return t.jc&&t.Jc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)})).then((function(){return n.promise}))}},{key:"enqueueRetryable",value:function(e){var t=this;this.enqueueAndForget((function(){return t.Qc.push(e),t.ea()}))}},{key:"ea",value:function(){var e=Je($e().mark((function e(){var t=this;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0===this.Qc.length){e.next=14;break}return e.prev=1,e.next=4,this.Qc[0]();case 4:this.Qc.shift(),this.qo.reset(),e.next=13;break;case 8:if(e.prev=8,e.t0=e.catch(1),am(e.t0)){e.next=12;break}throw e.t0;case 12:fv("AsyncQueue","Operation failed with retryable error: "+e.t0);case 13:this.Qc.length>0&&this.qo.No((function(){return t.ea()}));case 14:case"end":return e.stop()}}),e,this,[[1,8]])})));return function(){return e.apply(this,arguments)}}()},{key:"ta",value:function(e){var t=this,n=this.Gc.then((function(){return t.Hc=!0,e().catch((function(e){t.Wc=e,t.Hc=!1;var n=function(e){var t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw hv("INTERNAL UNHANDLED ERROR: ",n),e})).then((function(e){return t.Hc=!1,e}))}));return this.Gc=n,n}},{key:"enqueueAfterDelay",value:function(e,t,n){var r=this;this.Zc(),this.Yc.indexOf(e)>-1&&(t=0);var i=tI.createAndSchedule(this,e,t,n,(function(e){return r.na(e)}));return this.zc.push(i),i}},{key:"Zc",value:function(){this.Wc&&vv()}},{key:"verifyOperationInProgress",value:function(){}},{key:"sa",value:function(){var e=Je($e().mark((function e(){var t;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.Gc,e.next=3,t;case 3:if(t!==this.Gc){e.next=0;break}case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"ia",value:function(e){var t,n=S(this.zc);try{for(n.s();!(t=n.n()).done;){if(t.value.timerId===e)return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"ra",value:function(e){var t=this;return this.sa().then((function(){t.zc.sort((function(e,t){return e.targetTimeMs-t.targetTimeMs}));var n,r=S(t.zc);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i.skipDelay(),"all"!==e&&i.timerId===e)break}}catch(a){r.e(a)}finally{r.f()}return t.sa()}))}},{key:"oa",value:function(e){this.Yc.push(e)}},{key:"na",value:function(e){var t=this.zc.indexOf(e);this.zc.splice(t,1)}}]),e}();function mE(e){return function(e,t){if("object"!=typeof e||null===e)return!1;var n,r=e,i=S(["next","error","complete"]);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"==typeof r[a])return!0}}catch(o){i.e(o)}finally{i.f()}return!1}(e)}var yE=function(){function e(){s(this,e),this._progressObserver={},this._taskCompletionResolver=new bv,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}return(0,c.Z)(e,[{key:"onProgress",value:function(e,t,n){this._progressObserver={next:e,error:t,complete:n}}},{key:"catch",value:function(e){return this._taskCompletionResolver.promise.catch(e)}},{key:"then",value:function(e,t){return this._taskCompletionResolver.promise.then(e,t)}},{key:"_completeWith",value:function(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}},{key:"_failWith",value:function(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}},{key:"_updateProgress",value:function(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}]),e}(),gE=function(e){f(n,e);var t=m(n);function n(e,r,i,a){var o;return s(this,n),(o=t.call(this,e,r,i,a)).type="firestore",o._queue=new vE,o._persistenceKey=(null==a?void 0:a.name)||"[DEFAULT]",o}return(0,c.Z)(n,[{key:"_terminate",value:function(){return this._firestoreClient||bE(this),this._firestoreClient.terminate()}}]),n}(oE);function kE(e){return e._firestoreClient||bE(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function bE(e){var t,n,r,i=e._freezeSettings(),a=function(e,t,n,r){return new ly(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,YS(r.experimentalLongPollingOptions),r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,i);e._firestoreClient=new RS(e._authCredentials,e._appCheckCredentials,e._queue,a),(null===(n=i.cache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(r=i.cache)||void 0===r?void 0:r._onlineComponentProvider)&&(e._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.cache.kind,_offline:i.cache._offlineComponentProvider,_online:i.cache._onlineComponentProvider})}function wE(e,t,n){var r=new bv;return e.asyncQueue.enqueue(Je($e().mark((function i(){var a;return $e().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,PS(e,n);case 3:return i.next=5,DS(e,t);case 5:r.resolve(),i.next=14;break;case 8:if(i.prev=8,i.t0=i.catch(0),MS(a=i.t0)){i.next=13;break}throw a;case 13:dv("Error enabling indexeddb cache. Falling back to memory cache: "+a),r.reject(a);case 14:case"end":return i.stop()}}),i,null,[[0,8]])})))).then((function(){return r.promise}))}function xE(e){return function(e){return e.asyncQueue.enqueue(Je($e().mark((function t(){var n,r;return $e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,ZS(e);case 2:return n=t.sent,t.next=5,BS(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!0),function(e){var t=yv(e);return t.vu.delete(0),p_(t)}(r)));case 7:case"end":return t.stop()}}),t)}))))}(kE(e=rE(e,gE)))}function _E(e){return function(e){return e.asyncQueue.enqueue(Je($e().mark((function t(){var n,r;return $e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,ZS(e);case 2:return n=t.sent,t.next=5,BS(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!1),function(){var e=Je($e().mark((function e(t){var n;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=yv(t)).vu.add(0),e.next=4,m_(n);case 4:n.bu.set("Offline");case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(r)));case 7:case"end":return t.stop()}}),t)}))))}(kE(e=rE(e,gE)))}function IE(e,t){var n=kE(e=rE(e,gE)),r=new yE;return function(e,t,n,r){var i=function(e,t){return function(e,t){return new CS(e,t)}(function(e,t){if(e instanceof Uint8Array)return ES(e,t);if(e instanceof ArrayBuffer)return ES(new Uint8Array(e),t);if(e instanceof ReadableStream)return e.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}("string"==typeof e?Dk().encode(e):e),t)}(n,o_(t));e.asyncQueue.enqueueAndForget(Je($e().mark((function t(){return $e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=wS,t.next=3,qS(e);case 3:t.t1=t.sent,t.t2=i,t.t3=r,(0,t.t0)(t.t1,t.t2,t.t3);case 7:case"end":return t.stop()}}),t)}))))}(n,e._databaseId,t,r),r}function SE(e,t){return function(e,t){return e.asyncQueue.enqueue(Je($e().mark((function n(){return $e().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=function(e,t){var n=yv(e);return n.persistence.runTransaction("Get named query","readonly",(function(e){return n.qs.getNamedQuery(e,t)}))},n.next=3,zS(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)}))))}(kE(e=rE(e,gE)),t).then((function(t){return t?new cE(e,null,t.query):null}))}function EE(e){if(e._initialized||e._terminated)throw new kv(gv.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var TE=function(){function e(t){s(this,e),this._byteString=t}return(0,c.Z)(e,[{key:"toBase64",value:function(){return this._byteString.toBase64()}},{key:"toUint8Array",value:function(){return this._byteString.toUint8Array()}},{key:"toString",value:function(){return"Bytes(base64: "+this.toBase64()+")"}},{key:"isEqual",value:function(e){return this._byteString.isEqual(e._byteString)}}],[{key:"fromBase64String",value:function(t){try{return new e(ny.fromBase64String(t))}catch(t){throw new kv(gv.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}},{key:"fromUint8Array",value:function(t){return new e(ny.fromUint8Array(t))}}]),e}(),CE=function(){function e(){s(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0;i<n.length;++i)if(0===n[i].length)throw new kv(gv.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Uv(n)}return(0,c.Z)(e,[{key:"isEqual",value:function(e){return this._internalPath.isEqual(e._internalPath)}}]),e}();var AE=(0,c.Z)((function e(t){s(this,e),this._methodName=t})),NE=function(){function e(t,n){if(s(this,e),!isFinite(t)||t<-90||t>90)throw new kv(gv.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new kv(gv.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}return(0,c.Z)(e,[{key:"latitude",get:function(){return this._lat}},{key:"longitude",get:function(){return this._long}},{key:"isEqual",value:function(e){return this._lat===e._lat&&this._long===e._long}},{key:"toJSON",value:function(){return{latitude:this._lat,longitude:this._long}}},{key:"_compareTo",value:function(e){return Rv(this._lat,e._lat)||Rv(this._long,e._long)}}]),e}(),RE=/^__.*__$/,PE=function(){function e(t,n,r){s(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return(0,c.Z)(e,[{key:"toMutation",value:function(e,t){return null!==this.fieldMask?new gk(e,this.data,this.fieldMask,t,this.fieldTransforms):new yk(e,this.data,t,this.fieldTransforms)}}]),e}(),OE=function(){function e(t,n,r){s(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return(0,c.Z)(e,[{key:"toMutation",value:function(e,t){return new gk(e,this.data,this.fieldMask,t,this.fieldTransforms)}}]),e}();function DE(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw vv()}}var LE=function(){function e(t,n,r,i,a,o){s(this,e),this.settings=t,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,void 0===a&&this.ua(),this.fieldTransforms=a||[],this.fieldMask=o||[]}return(0,c.Z)(e,[{key:"path",get:function(){return this.settings.path}},{key:"ca",get:function(){return this.settings.ca}},{key:"aa",value:function(t){return new e(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}},{key:"ha",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.aa({path:n,la:!1});return r.fa(e),r}},{key:"da",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.aa({path:n,la:!1});return r.ua(),r}},{key:"wa",value:function(e){return this.aa({path:void 0,la:!0})}},{key:"_a",value:function(e){return tT(e,this.settings.methodName,this.settings.ma||!1,this.path,this.settings.ga)}},{key:"contains",value:function(e){return void 0!==this.fieldMask.find((function(t){return e.isPrefixOf(t)}))||void 0!==this.fieldTransforms.find((function(t){return e.isPrefixOf(t.field)}))}},{key:"ua",value:function(){if(this.path)for(var e=0;e<this.path.length;e++)this.fa(this.path.get(e))}},{key:"fa",value:function(e){if(0===e.length)throw this._a("Document fields must not be empty");if(DE(this.ca)&&RE.test(e))throw this._a('Document fields cannot begin and end with "__"')}}]),e}(),ME=function(){function e(t,n,r){s(this,e),this.databaseId=t,this.ignoreUndefinedProperties=n,this.serializer=r||o_(t)}return(0,c.Z)(e,[{key:"ya",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new LE({ca:e,methodName:t,ga:n,path:Uv.emptyPath(),la:!1,ma:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}]),e}();function FE(e){var t=e._freezeSettings(),n=o_(e._databaseId);return new ME(e._databaseId,!!t.ignoreUndefinedProperties,n)}function jE(e,t,n,r,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},o=e.ya(a.merge||a.mergeFields?2:0,t,n,i);$E("Data must be an object, but it was:",o,r);var u,s,c=QE(r,o);if(a.merge)u=new ey(o.fieldMask),s=o.fieldTransforms;else if(a.mergeFields){var l,f=[],h=S(a.mergeFields);try{for(h.s();!(l=h.n()).done;){var d=XE(t,l.value,n);if(!o.contains(d))throw new kv(gv.INVALID_ARGUMENT,"Field '".concat(d,"' is specified in your field mask but missing from your input data."));nT(f,d)||f.push(d)}}catch(p){h.e(p)}finally{h.f()}u=new ey(f),s=o.fieldTransforms.filter((function(e){return u.covers(e.field)}))}else u=null,s=o.fieldTransforms;return new PE(new Oy(c),u,s)}var UE=function(e){f(n,e);var t=m(n);function n(){return s(this,n),t.apply(this,arguments)}return(0,c.Z)(n,[{key:"_toFieldTransform",value:function(e){if(2!==e.ca)throw 1===e.ca?e._a("".concat(this._methodName,"() can only appear at the top level of your update data")):e._a("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(AE);function VE(e,t,n){return new LE({ca:3,ga:t.settings.ga,methodName:e._methodName,la:n},t.databaseId,t.serializer,t.ignoreUndefinedProperties)}var ZE=function(e){f(n,e);var t=m(n);function n(){return s(this,n),t.apply(this,arguments)}return(0,c.Z)(n,[{key:"_toFieldTransform",value:function(e){return new uk(e.path,new Jg)}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(AE),zE=function(e){f(n,e);var t=m(n);function n(e,r){var i;return s(this,n),(i=t.call(this,e)).pa=r,i}return(0,c.Z)(n,[{key:"_toFieldTransform",value:function(e){var t=VE(this,e,!0),n=this.pa.map((function(e){return HE(e,t)})),r=new ek(n);return new uk(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(AE),BE=function(e){f(n,e);var t=m(n);function n(e,r){var i;return s(this,n),(i=t.call(this,e)).pa=r,i}return(0,c.Z)(n,[{key:"_toFieldTransform",value:function(e){var t=VE(this,e,!0),n=this.pa.map((function(e){return HE(e,t)})),r=new nk(n);return new uk(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(AE),qE=function(e){f(n,e);var t=m(n);function n(e,r){var i;return s(this,n),(i=t.call(this,e)).Ia=r,i}return(0,c.Z)(n,[{key:"_toFieldTransform",value:function(e){var t=new ik(e.serializer,Hg(e.serializer,this.Ia));return new uk(e.path,t)}},{key:"isEqual",value:function(e){return this===e}}]),n}(AE);function GE(e,t,n,r){var i=e.ya(1,t,n);$E("Data must be an object, but it was:",i,r);var a=[],o=Oy.empty();Km(r,(function(e,r){var u=eT(t,e,n);r=Nt(r);var s=i.da(u);if(r instanceof UE)a.push(u);else{var c=HE(r,s);null!=c&&(a.push(u),o.set(u,c))}}));var u=new ey(a);return new OE(o,u,i.fieldTransforms)}function KE(e,t,n,r,i,a){var o=e.ya(1,t,n),u=[XE(t,r,n)],s=[i];if(a.length%2!=0)throw new kv(gv.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(var c=0;c<a.length;c+=2)u.push(XE(t,a[c])),s.push(a[c+1]);for(var l=[],f=Oy.empty(),h=u.length-1;h>=0;--h)if(!nT(l,u[h])){var d=u[h],p=s[h];p=Nt(p);var v=o.da(d);if(p instanceof UE)l.push(d);else{var m=HE(p,v);null!=m&&(l.push(d),f.set(d,m))}}var y=new ey(l);return new OE(f,y,o.fieldTransforms)}function WE(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return HE(n,e.ya(r?4:3,t))}function HE(e,t){if(YE(e=Nt(e)))return $E("Unsupported field value:",t,e),QE(e,t);if(e instanceof AE)return function(e,t){if(!DE(t.ca))throw t._a("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t._a("".concat(e._methodName,"() is not currently supported inside arrays"));var n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.la&&4!==t.ca)throw t._a("Nested arrays are not supported");return function(e,t){var n,r=[],i=0,a=S(e);try{for(a.s();!(n=a.n()).done;){var o=HE(n.value,t.wa(i));null==o&&(o={nullValue:"NULL_VALUE"}),r.push(o),i++}}catch(u){a.e(u)}finally{a.f()}return{arrayValue:{values:r}}}(e,t)}return function(e,t){if(null===(e=Nt(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return Hg(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){var n=Dv.fromDate(e);return{timestampValue:eb(t.serializer,n)}}if(e instanceof Dv){var r=new Dv(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:eb(t.serializer,r)}}if(e instanceof NE)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof TE)return{bytesValue:tb(t.serializer,e._byteString)};if(e instanceof sE){var i=t.databaseId,a=e.firestore._databaseId;if(!a.isEqual(i))throw t._a("Document reference is for database ".concat(a.projectId,"/").concat(a.database," but should be for database ").concat(i.projectId,"/").concat(i.database));return{referenceValue:ib(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t._a("Unsupported field value: ".concat(nE(e)))}(e,t)}function QE(e,t){var n={};return Wm(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Km(e,(function(e,r){var i=HE(r,t.ha(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function YE(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof Dv||e instanceof NE||e instanceof TE||e instanceof sE||e instanceof AE)}function $E(e,t,n){if(!YE(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){var r=nE(n);throw"an object"===r?t._a(e+" a custom object"):t._a(e+" "+r)}}function XE(e,t,n){if((t=Nt(t))instanceof CE)return t._internalPath;if("string"==typeof t)return eT(e,t);throw tT("Field path arguments must be of type string or ",e,!1,void 0,n)}var JE=new RegExp("[~\\*/\\[\\]]");function eT(e,t,n){if(t.search(JE)>=0)throw tT("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return y(CE,(0,u.Z)(t.split(".")))._internalPath}catch(r){throw tT("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function tT(e,t,n,r,i){var a=r&&!r.isEmpty(),o=void 0!==i,u="Function ".concat(t,"() called with invalid data");n&&(u+=" (via `toFirestore()`)"),u+=". ";var s="";return(a||o)&&(s+=" (found",a&&(s+=" in field ".concat(r)),o&&(s+=" in document ".concat(i)),s+=")"),new kv(gv.INVALID_ARGUMENT,u+e+s)}function nT(e,t){return e.some((function(e){return e.isEqual(t)}))}var rT=function(){function e(t,n,r,i,a){s(this,e),this._firestore=t,this._userDataWriter=n,this._key=r,this._document=i,this._converter=a}return(0,c.Z)(e,[{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"ref",get:function(){return new sE(this._firestore,this._converter,this._key)}},{key:"exists",value:function(){return null!==this._document}},{key:"data",value:function(){if(this._document){if(this._converter){var e=new iT(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}},{key:"get",value:function(e){if(this._document){var t=this._document.data.field(aT("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}]),e}(),iT=function(e){f(n,e);var t=m(n);function n(){return s(this,n),t.apply(this,arguments)}return(0,c.Z)(n,[{key:"data",value:function(){return ur(h(n.prototype),"data",this).call(this)}}]),n}(rT);function aT(e,t){return"string"==typeof t?eT(e,t):t instanceof CE?t._internalPath:t._delegate._internalPath}function oT(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new kv(gv.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var uT=(0,c.Z)((function e(){s(this,e)})),sT=function(e){f(n,e);var t=m(n);function n(){return s(this,n),t.apply(this,arguments)}return(0,c.Z)(n)}(uT);function cT(e,t){for(var n=[],r=arguments.length,i=new Array(r>2?r-2:0),a=2;a<r;a++)i[a-2]=arguments[a];t instanceof uT&&n.push(t),function(e){var t=e.filter((function(e){return e instanceof fT})).length,n=e.filter((function(e){return e instanceof lT})).length;if(t>1||t>0&&n>0)throw new kv(gv.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n=n.concat(i));var o,u=S(n);try{for(u.s();!(o=u.n()).done;){e=o.value._apply(e)}}catch(s){u.e(s)}finally{u.f()}return e}var lT=function(e){f(n,e);var t=m(n);function n(e,r,i){var a;return s(this,n),(a=t.call(this))._field=e,a._op=r,a._value=i,a.type="where",a}return(0,c.Z)(n,[{key:"_apply",value:function(e){var t=this._parse(e);return _T(e._query,t),new cE(e.firestore,e.converter,_g(e._query,t))}},{key:"_parse",value:function(e){var t=FE(e.firestore),n=function(e,t,n,r,i,a,o){var u;if(i.isKeyField()){if("array-contains"===a||"array-contains-any"===a)throw new kv(gv.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(a,"' queries on documentId()."));if("in"===a||"not-in"===a){xT(o,a);var s,c=[],l=S(o);try{for(l.s();!(s=l.n()).done;){var f=s.value;c.push(wT(r,e,f))}}catch(h){l.e(h)}finally{l.f()}u={arrayValue:{values:c}}}else u=wT(r,e,o)}else"in"!==a&&"not-in"!==a&&"array-contains-any"!==a||xT(o,a),u=WE(n,"where",o,"in"===a||"not-in"===a);return zy.create(i,a,u)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value);return n}}],[{key:"_create",value:function(e,t,r){return new n(e,t,r)}}]),n}(sT);var fT=function(e){f(n,e);var t=m(n);function n(e,r){var i;return s(this,n),(i=t.call(this)).type=e,i._queryConstraints=r,i}return(0,c.Z)(n,[{key:"_parse",value:function(e){var t=this._queryConstraints.map((function(t){return t._parse(e)})).filter((function(e){return e.getFilters().length>0}));return 1===t.length?t[0]:By.create(t,this._getOperator())}},{key:"_apply",value:function(e){var t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){var n,r=e,i=S(t.getFlattenedFilters());try{for(i.s();!(n=i.n()).done;){var a=n.value;_T(r,a),r=_g(r,a)}}catch(o){i.e(o)}finally{i.f()}}(e._query,t),new cE(e.firestore,e.converter,_g(e._query,t)))}},{key:"_getQueryConstraints",value:function(){return this._queryConstraints}},{key:"_getOperator",value:function(){return"and"===this.type?"and":"or"}}],[{key:"_create",value:function(e,t){return new n(e,t)}}]),n}(uT);var hT=function(e){f(n,e);var t=m(n);function n(e,r){var i;return s(this,n),(i=t.call(this))._field=e,i._direction=r,i.type="orderBy",i}return(0,c.Z)(n,[{key:"_apply",value:function(e){var t=function(e,t,n){if(null!==e.startAt)throw new kv(gv.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new kv(gv.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new Uy(t,n);return function(e,t){if(null===gg(e)){var n=kg(e);null!==n&&IT(e,n,t.field)}}(e,r),r}(e._query,this._field,this._direction);return new cE(e.firestore,e.converter,function(e,t){var n=e.explicitOrderBy.concat([t]);return new pg(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}],[{key:"_create",value:function(e,t){return new n(e,t)}}]),n}(sT);var dT=function(e){f(n,e);var t=m(n);function n(e,r,i){var a;return s(this,n),(a=t.call(this)).type=e,a._limit=r,a._limitType=i,a}return(0,c.Z)(n,[{key:"_apply",value:function(e){return new cE(e.firestore,e.converter,Ig(e._query,this._limit,this._limitType))}}],[{key:"_create",value:function(e,t,r){return new n(e,t,r)}}]),n}(sT);var pT=function(e){f(n,e);var t=m(n);function n(e,r,i){var a;return s(this,n),(a=t.call(this)).type=e,a._docOrFields=r,a._inclusive=i,a}return(0,c.Z)(n,[{key:"_apply",value:function(e){var t=bT(e,this.type,this._docOrFields,this._inclusive);return new cE(e.firestore,e.converter,function(e,t){return new pg(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,t,e.endAt)}(e._query,t))}}],[{key:"_create",value:function(e,t,r){return new n(e,t,r)}}]),n}(sT);function vT(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return pT._create("startAt",t,!0)}function mT(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return pT._create("startAfter",t,!1)}var yT=function(e){f(n,e);var t=m(n);function n(e,r,i){var a;return s(this,n),(a=t.call(this)).type=e,a._docOrFields=r,a._inclusive=i,a}return(0,c.Z)(n,[{key:"_apply",value:function(e){var t=bT(e,this.type,this._docOrFields,this._inclusive);return new cE(e.firestore,e.converter,function(e,t){return new pg(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,t)}(e._query,t))}}],[{key:"_create",value:function(e,t,r){return new n(e,t,r)}}]),n}(sT);function gT(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return yT._create("endBefore",t,!1)}function kT(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return yT._create("endAt",t,!0)}function bT(e,t,n,r){if(n[0]=Nt(n[0]),n[0]instanceof rT)return function(e,t,n,r,i){if(!r)throw new kv(gv.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for ".concat(n,"()."));var a,o=[],u=S(wg(e));try{for(u.s();!(a=u.n()).done;){var s=a.value;if(s.field.isKeyField())o.push(wy(t,r.key));else{var c=r.data.field(s.field);if(uy(c))throw new kv(gv.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+s.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var l=s.field.canonicalString();throw new kv(gv.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '".concat(l,"' (used as the orderBy) does not exist."))}o.push(c)}}}catch(f){u.e(f)}finally{u.f()}return new My(o,i)}(e._query,e.firestore._databaseId,t,n[0]._document,r);var i=FE(e.firestore);return function(e,t,n,r,i,a){var o=e.explicitOrderBy;if(i.length>o.length)throw new kv(gv.INVALID_ARGUMENT,"Too many arguments provided to ".concat(r,"(). The number of arguments must be less than or equal to the number of orderBy() clauses"));for(var u=[],s=0;s<i.length;s++){var c=i[s];if(o[s].field.isKeyField()){if("string"!=typeof c)throw new kv(gv.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in ".concat(r,"(), but got a ").concat(typeof c));if(!bg(e)&&-1!==c.indexOf("/"))throw new kv(gv.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by documentId(), the value passed to ".concat(r,"() must be a plain document ID, but '").concat(c,"' contains a slash."));var l=e.path.child(Fv.fromString(c));if(!Vv.isDocumentKey(l))throw new kv(gv.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by documentId(), the value passed to ".concat(r,"() must result in a valid document path, but '").concat(l,"' is not because it contains an odd number of segments."));var f=new Vv(l);u.push(wy(t,f))}else{var h=WE(n,r,c);u.push(h)}}return new My(u,a)}(e._query,e.firestore._databaseId,i,t,n,r)}function wT(e,t,n){if("string"==typeof(n=Nt(n))){if(""===n)throw new kv(gv.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!bg(t)&&-1!==n.indexOf("/"))throw new kv(gv.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));var r=t.path.child(Fv.fromString(n));if(!Vv.isDocumentKey(r))throw new kv(gv.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return wy(e,new Vv(r))}if(n instanceof sE)return wy(e,n._key);throw new kv(gv.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(nE(n),"."))}function xT(e,t){if(!Array.isArray(e)||0===e.length)throw new kv(gv.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."))}function _T(e,t){if(t.isInequality()){var n=kg(e),r=t.field;if(null!==n&&!n.isEqual(r))throw new kv(gv.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '".concat(n.toString(),"' and '").concat(r.toString(),"'"));var i=gg(e);null!==i&&IT(e,r,i)}var a=function(e,t){var n,r=S(e);try{for(r.s();!(n=r.n()).done;){var i,a=S(n.value.getFlattenedFilters());try{for(a.s();!(i=a.n()).done;){var o=i.value;if(t.indexOf(o.op)>=0)return o.op}}catch(u){a.e(u)}finally{a.f()}}}catch(u){r.e(u)}finally{r.f()}return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==a)throw a===t.op?new kv(gv.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new kv(gv.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(a.toString(),"' filters."))}function IT(e,t,n){if(!n.isEqual(t))throw new kv(gv.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '".concat(t.toString(),"' and so you must also use '").concat(t.toString(),"' as your first argument to orderBy(), but your first orderBy() is on field '").concat(n.toString(),"' instead."))}var ST=function(){function e(){s(this,e)}return(0,c.Z)(e,[{key:"convertValue",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(py(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ay(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(oy(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw vv()}}},{key:"convertObject",value:function(e,t){return this.convertObjectMap(e.fields,t)}},{key:"convertObjectMap",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none",r={};return Km(e,(function(e,i){r[e]=t.convertValue(i,n)})),r}},{key:"convertGeoPoint",value:function(e){return new NE(ay(e.latitude),ay(e.longitude))}},{key:"convertArray",value:function(e,t){var n=this;return(e.values||[]).map((function(e){return n.convertValue(e,t)}))}},{key:"convertServerTimestamp",value:function(e,t){switch(t){case"previous":var n=sy(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(cy(e));default:return null}}},{key:"convertTimestamp",value:function(e){var t=iy(e);return new Dv(t.seconds,t.nanos)}},{key:"convertDocumentKey",value:function(e,t){var n=Fv.fromString(e);mv(Cb(n));var r=new fy(n.get(1),n.get(3)),i=new Vv(n.popFirst(5));return r.isEqual(t)||hv("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}]),e}();function ET(e,t,n){return e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t}var TT=function(e){f(n,e);var t=m(n);function n(e){var r;return s(this,n),(r=t.call(this)).firestore=e,r}return(0,c.Z)(n,[{key:"convertBytes",value:function(e){return new TE(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new sE(this.firestore,null,t)}}]),n}(ST);var CT=function(){function e(t,n){s(this,e),this.hasPendingWrites=t,this.fromCache=n}return(0,c.Z)(e,[{key:"isEqual",value:function(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}]),e}(),AT=function(e){f(n,e);var t=m(n);function n(e,r,i,a,o,u){var c;return s(this,n),(c=t.call(this,e,r,i,a,u))._firestore=e,c._firestoreImpl=e,c.metadata=o,c}return(0,c.Z)(n,[{key:"exists",value:function(){return ur(h(n.prototype),"exists",this).call(this)}},{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){var t=new NT(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){var n=this._document.data.field(aT("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}]),n}(rT),NT=function(e){f(n,e);var t=m(n);function n(){return s(this,n),t.apply(this,arguments)}return(0,c.Z)(n,[{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return ur(h(n.prototype),"data",this).call(this,e)}}]),n}(AT),RT=function(){function e(t,n,r,i){s(this,e),this._firestore=t,this._userDataWriter=n,this._snapshot=i,this.metadata=new CT(i.hasPendingWrites,i.fromCache),this.query=r}return(0,c.Z)(e,[{key:"docs",get:function(){var e=[];return this.forEach((function(t){return e.push(t)})),e}},{key:"size",get:function(){return this._snapshot.docs.size}},{key:"empty",get:function(){return 0===this.size}},{key:"forEach",value:function(e,t){var n=this;this._snapshot.docs.forEach((function(r){e.call(t,new NT(n._firestore,n._userDataWriter,r.key,r,new CT(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query.converter))}))}},{key:"docChanges",value:function(){var e=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new kv(gv.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){var n=0;return e._snapshot.docChanges.map((function(t){var r=new NT(e._firestore,e._userDataWriter,t.doc.key,t.doc,new CT(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);return t.doc,{type:"added",doc:r,oldIndex:-1,newIndex:n++}}))}var r=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((function(e){return t||3!==e.type})).map((function(t){var n=new NT(e._firestore,e._userDataWriter,t.doc.key,t.doc,new CT(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),i=-1,a=-1;return 0!==t.type&&(i=r.indexOf(t.doc.key),r=r.delete(t.doc.key)),1!==t.type&&(a=(r=r.add(t.doc)).indexOf(t.doc.key)),{type:PT(t.type),doc:n,oldIndex:i,newIndex:a}}))}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}]),e}();function PT(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return vv()}}function OT(e,t){return e instanceof AT&&t instanceof AT?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(null===e._document?null===t._document:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof RT&&t instanceof RT&&e._firestore===t._firestore&&pE(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)}var DT=function(e){f(n,e);var t=m(n);function n(e){var r;return s(this,n),(r=t.call(this)).firestore=e,r}return(0,c.Z)(n,[{key:"convertBytes",value:function(e){return new TE(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new sE(this.firestore,null,t)}}]),n}(ST);function LT(e){e=rE(e,sE);var t=rE(e.firestore,gE),n=kE(t),r=new DT(t);return function(e,t){var n=new bv;return e.asyncQueue.enqueueAndForget(Je($e().mark((function r(){return $e().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=Je($e().mark((function e(t,n,r){var i,a;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,function(e,t){var n=yv(e);return n.persistence.runTransaction("read document","readonly",(function(e){return n.localDocuments.getDocument(e,t)}))}(t,n);case 3:(i=e.sent).isFoundDocument()?r.resolve(i):i.isNoDocument()?r.resolve(null):r.reject(new kv(gv.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),a=nI(e.t0,"Failed to get document '".concat(n," from cache")),r.reject(a);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,zS(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(n,e._key).then((function(n){return new AT(t,r,e._key,n,new CT(null!==n&&n.hasLocalMutations,!0),e.converter)}))}function MT(e){e=rE(e,cE);var t=rE(e.firestore,gE),n=kE(t),r=new DT(t);return function(e,t){var n=new bv;return e.asyncQueue.enqueueAndForget(Je($e().mark((function r(){return $e().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=Je($e().mark((function e(t,n,r){var i,a,o,u,s;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Px(t,n,!0);case 3:i=e.sent,a=new xI(n,i.ir),o=a.sc(i.documents),u=a.applyChanges(o,!1),r.resolve(u.snapshot),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),s=nI(e.t0,"Failed to execute query '".concat(n," against cache")),r.reject(s);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,zS(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(n,e._query).then((function(n){return new RT(t,r,e,n)}))}function FT(e,t,n){e=rE(e,sE);var r=rE(e.firestore,gE),i=ET(e.converter,t,n);return ZT(r,[jE(FE(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,ck.none())])}function jT(e,t,n){e=rE(e,sE);for(var r=rE(e.firestore,gE),i=FE(r),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return ZT(r,[("string"==typeof(t=Nt(t))||t instanceof CE?KE(i,"updateDoc",e._key,t,n,o):GE(i,"updateDoc",e._key,t)).toMutation(e._key,ck.exists(!0))])}function UT(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i,a,o;e=Nt(e);var u={includeMetadataChanges:!1},s=0;"object"!=typeof n[s]||mE(n[s])||(u=n[s],s++);var c,l,f,h={includeMetadataChanges:u.includeMetadataChanges};if(mE(n[s])){var d=n[s];n[s]=null===(i=d.next)||void 0===i?void 0:i.bind(d),n[s+1]=null===(a=d.error)||void 0===a?void 0:a.bind(d),n[s+2]=null===(o=d.complete)||void 0===o?void 0:o.bind(d)}if(e instanceof sE)l=rE(e.firestore,gE),f=mg(e._key.path),c={next:function(t){n[s]&&n[s](zT(l,e,t))},error:n[s+1],complete:n[s+2]};else{var p=rE(e,cE);l=rE(p.firestore,gE),f=p._query;var v=new DT(l);c={next:function(e){n[s]&&n[s](new RT(l,v,p,e))},error:n[s+1],complete:n[s+2]},oT(e._query)}return function(e,t,n,r){var i=new TS(r),a=new vI(t,i,n);return e.asyncQueue.enqueueAndForget(Je($e().mark((function t(){return $e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=sI,t.next=3,KS(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){i.Dc(),e.asyncQueue.enqueueAndForget(Je($e().mark((function t(){return $e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=lI,t.next=3,KS(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(kE(l),f,h,c)}function VT(e,t){return function(e,t){var n=new TS(t);return e.asyncQueue.enqueueAndForget(Je($e().mark((function t(){return $e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){yv(e).ku.add(t),t.next()},t.next=3,KS(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){n.Dc(),e.asyncQueue.enqueueAndForget(Je($e().mark((function t(){return $e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){yv(e).ku.delete(t)},t.next=3,KS(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(kE(e=rE(e,gE)),mE(t)?t:{next:t})}function ZT(e,t){return function(e,t){var n=new bv;return e.asyncQueue.enqueueAndForget(Je($e().mark((function r(){return $e().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=PI,r.next=3,qS(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(kE(e),t)}function zT(e,t,n){var r=n.docs.get(t._key),i=new DT(e);return new AT(e,i,t._key,r,new CT(n.hasPendingWrites,n.fromCache),t.converter)}var BT={maxAttempts:5},qT=function(){function e(t,n){s(this,e),this._firestore=t,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=FE(t)}return(0,c.Z)(e,[{key:"set",value:function(e,t,n){this._verifyNotCommitted();var r=GT(e,this._firestore),i=ET(r.converter,t,n),a=jE(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(a.toMutation(r._key,ck.none())),this}},{key:"update",value:function(e,t,n){this._verifyNotCommitted();for(var r,i=GT(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return r="string"==typeof(t=Nt(t))||t instanceof CE?KE(this._dataReader,"WriteBatch.update",i._key,t,n,o):GE(this._dataReader,"WriteBatch.update",i._key,t),this._mutations.push(r.toMutation(i._key,ck.exists(!0))),this}},{key:"delete",value:function(e){this._verifyNotCommitted();var t=GT(e,this._firestore);return this._mutations=this._mutations.concat(new Ik(t._key,ck.none())),this}},{key:"commit",value:function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}},{key:"_verifyNotCommitted",value:function(){if(this._committed)throw new kv(gv.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}]),e}();function GT(e,t){if((e=Nt(e)).firestore!==t)throw new kv(gv.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}var KT=function(e){f(n,e);var t=m(n);function n(e,r){var i;return s(this,n),(i=t.call(this,e,r))._firestore=e,i}return(0,c.Z)(n,[{key:"get",value:function(e){var t=this,r=GT(e,this._firestore),i=new DT(this._firestore);return ur(h(n.prototype),"get",this).call(this,e).then((function(e){return new AT(t._firestore,i,r._key,e._document,new CT(!1,!1),r.converter)}))}}]),n}(function(){function e(t,n){s(this,e),this._firestore=t,this._transaction=n,this._dataReader=FE(t)}return(0,c.Z)(e,[{key:"get",value:function(e){var t=this,n=GT(e,this._firestore),r=new TT(this._firestore);return this._transaction.lookup([n._key]).then((function(e){if(!e||1!==e.length)return vv();var i=e[0];if(i.isFoundDocument())return new rT(t._firestore,r,i.key,i,n.converter);if(i.isNoDocument())return new rT(t._firestore,r,n._key,null,n.converter);throw vv()}))}},{key:"set",value:function(e,t,n){var r=GT(e,this._firestore),i=ET(r.converter,t,n),a=jE(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,a),this}},{key:"update",value:function(e,t,n){for(var r,i=GT(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return r="string"==typeof(t=Nt(t))||t instanceof CE?KE(this._dataReader,"Transaction.update",i._key,t,n,o):GE(this._dataReader,"Transaction.update",i._key,t),this._transaction.update(i._key,r),this}},{key:"delete",value:function(e){var t=GT(e,this._firestore);return this._transaction.delete(t._key),this}}]),e}());function WT(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new zE("arrayUnion",t)}function HT(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new BE("arrayRemove",t)}!function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){sv=e}(Cn),wn(new Rt("firestore",(function(e,n){var r=n.instanceIdentifier,i=n.options,a=e.getProvider("app").getImmediate(),o=new gE(new Iv(e.getProvider("auth-internal")),new Cv(e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new kv(gv.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new fy(e.options.projectId,t)}(a,r),a);return i=Object.assign({useFetchStreams:t},i),o._setSettings(i),o}),"PUBLIC").setMultipleInstances(!0)),Dn(ov,"3.12.1",e),Dn(ov,"3.12.1","esm2017")}();function QT(e,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new kv("invalid-argument","Invalid options passed to function ".concat(e,"(): You cannot ")+'specify both "merge" and "mergeFields".');return t}function YT(){if("undefined"===typeof Uint8Array)throw new kv("unimplemented","Uint8Arrays are not available in this environment.")}function $T(){if("undefined"==typeof atob)throw new kv("unimplemented","Blobs are unavailable in Firestore in this environment.")}var XT=function(){function e(t){s(this,e),this._delegate=t}return(0,c.Z)(e,[{key:"toBase64",value:function(){return $T(),this._delegate.toBase64()}},{key:"toUint8Array",value:function(){return YT(),this._delegate.toUint8Array()}},{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}},{key:"toString",value:function(){return"Blob(base64: "+this.toBase64()+")"}}],[{key:"fromBase64String",value:function(t){return $T(),new e(TE.fromBase64String(t))}},{key:"fromUint8Array",value:function(t){return YT(),new e(TE.fromUint8Array(t))}}]),e}();function JT(e){return function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=e,i=S(t);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"===typeof r[a])return!0}}catch(o){i.e(o)}finally{i.f()}return!1}(e,["next","error","complete"])}var eC=function(){function e(){s(this,e)}return(0,c.Z)(e,[{key:"enableIndexedDbPersistence",value:function(e,t){return function(e,t){EE(e=rE(e,gE));var n=kE(e);if(n._uninitializedComponentsProvider)throw new kv(gv.FAILED_PRECONDITION,"SDK cache is already specified.");dv("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");var r=e._freezeSettings(),i=new SS;return wE(n,i,new _S(i,r.cacheSizeBytes,null==t?void 0:t.forceOwnership))}(e._delegate,{forceOwnership:t})}},{key:"enableMultiTabIndexedDbPersistence",value:function(e){return function(e){EE(e=rE(e,gE));var t=kE(e);if(t._uninitializedComponentsProvider)throw new kv(gv.FAILED_PRECONDITION,"SDK cache is already specified.");dv("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");var n=e._freezeSettings(),r=new SS;return wE(t,r,new IS(r,n.cacheSizeBytes))}(e._delegate)}},{key:"clearIndexedDbPersistence",value:function(e){return function(e){if(e._initialized&&!e._terminated)throw new kv(gv.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var t=new bv;return e._queue.enqueueAndForgetEvenWhileRestricted(Je($e().mark((function n(){return $e().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,function(){var e=Je($e().mark((function e(t){var n;return $e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(nm.D()){e.next=2;break}return e.abrupt("return",Promise.resolve());case 2:return n=t+"main",e.next=5,nm.delete(n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(yx(e._databaseId,e._persistenceKey));case 3:t.resolve(),n.next=9;break;case 6:n.prev=6,n.t0=n.catch(0),t.reject(n.t0);case 9:case"end":return n.stop()}}),n,null,[[0,6]])})))),t.promise}(e._delegate)}}]),e}(),tC=function(){function e(t,n,r){var i=this;s(this,e),this._delegate=n,this._persistenceProvider=r,this.INTERNAL={delete:function(){return i.terminate()}},t instanceof fy||(this._appCompat=t)}return(0,c.Z)(e,[{key:"_databaseId",get:function(){return this._delegate._databaseId}},{key:"settings",value:function(e){var t=this._delegate._getSettings();e.merge||t.host===e.host||dv("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}},{key:"useEmulator",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};uE(this._delegate,e,t,n)}},{key:"enableNetwork",value:function(){return xE(this._delegate)}},{key:"disableNetwork",value:function(){return _E(this._delegate)}},{key:"enablePersistence",value:function(e){var t=!1,n=!1;return e&&JS("synchronizeTabs",t=!!e.synchronizeTabs,"experimentalForceOwningTab",n=!!e.experimentalForceOwningTab),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,n)}},{key:"clearPersistence",value:function(){return this._persistenceProvider.clearIndexedDbPersistence(this)}},{key:"terminate",value:function(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}},{key:"waitForPendingWrites",value:function(){return function(e){var t=new bv;return e.asyncQueue.enqueueAndForget(Je($e().mark((function n(){return $e().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=BI,n.next=3,qS(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)})))),t.promise}(kE(rE(this._delegate,gE)))}},{key:"onSnapshotsInSync",value:function(e){return VT(this._delegate,e)}},{key:"app",get:function(){if(!this._appCompat)throw new kv("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}},{key:"collection",value:function(e){try{return new vC(this,fE(this._delegate,e))}catch(t){throw uC(t,"collection()","Firestore.collection()")}}},{key:"doc",value:function(e){try{return new oC(this,hE(this._delegate,e))}catch(t){throw uC(t,"doc()","Firestore.doc()")}}},{key:"collectionGroup",value:function(e){try{return new hC(this,function(e,t){if(e=rE(e,oE),XS("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new kv(gv.INVALID_ARGUMENT,"Invalid collection ID '".concat(t,"' passed to function collectionGroup(). Collection IDs must not contain '/'."));return new cE(e,null,function(e){return new pg(Fv.emptyPath(),e)}(t))}(this._delegate,e))}catch(t){throw uC(t,"collectionGroup()","Firestore.collectionGroup()")}}},{key:"runTransaction",value:function(e){var t=this;return function(e,t,n){e=rE(e,gE);var r=Object.assign(Object.assign({},BT),n);return function(e){if(e.maxAttempts<1)throw new kv(gv.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(e,t,n){var r=new bv;return e.asyncQueue.enqueueAndForget(Je($e().mark((function i(){var a;return $e().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,GS(e);case 2:a=i.sent,new NS(e.asyncQueue,a,n,t,r).run();case 4:case"end":return i.stop()}}),i)})))),r.promise}(kE(e),(function(n){return t(new KT(e,n))}),r)}(this._delegate,(function(n){return e(new rC(t,n))}))}},{key:"batch",value:function(){var e=this;return kE(this._delegate),new iC(new qT(this._delegate,(function(t){return ZT(e._delegate,t)})))}},{key:"loadBundle",value:function(e){return IE(this._delegate,e)}},{key:"namedQuery",value:function(e){var t=this;return SE(this._delegate,e).then((function(e){return e?new hC(t,e):null}))}}]),e}(),nC=function(e){f(n,e);var t=m(n);function n(e){var r;return s(this,n),(r=t.call(this)).firestore=e,r}return(0,c.Z)(n,[{key:"convertBytes",value:function(e){return new XT(new TE(e))}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return oC.forKey(t,this.firestore,null)}}]),n}(ST);var rC=function(){function e(t,n){s(this,e),this._firestore=t,this._delegate=n,this._userDataWriter=new nC(t)}return(0,c.Z)(e,[{key:"get",value:function(e){var t=this,n=mC(e);return this._delegate.get(n).then((function(e){return new lC(t._firestore,new AT(t._firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,n.converter))}))}},{key:"set",value:function(e,t,n){var r=mC(e);return n?(QT("Transaction.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var o,u=mC(e);2===arguments.length?this._delegate.update(u,t):(o=this._delegate).update.apply(o,[u,t,n].concat(i));return this}},{key:"delete",value:function(e){var t=mC(e);return this._delegate.delete(t),this}}]),e}(),iC=function(){function e(t){s(this,e),this._delegate=t}return(0,c.Z)(e,[{key:"set",value:function(e,t,n){var r=mC(e);return n?(QT("WriteBatch.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var o,u=mC(e);2===arguments.length?this._delegate.update(u,t):(o=this._delegate).update.apply(o,[u,t,n].concat(i));return this}},{key:"delete",value:function(e){var t=mC(e);return this._delegate.delete(t),this}},{key:"commit",value:function(){return this._delegate.commit()}}]),e}(),aC=function(){function e(t,n,r){s(this,e),this._firestore=t,this._userDataWriter=n,this._delegate=r}return(0,c.Z)(e,[{key:"fromFirestore",value:function(e,t){var n=new NT(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new fC(this._firestore,n),null!==t&&void 0!==t?t:{})}},{key:"toFirestore",value:function(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}}],[{key:"getInstance",value:function(t,n){var r=e.INSTANCES,i=r.get(t);i||(i=new WeakMap,r.set(t,i));var a=i.get(n);return a||(a=new e(t,new nC(t),n),i.set(n,a)),a}}]),e}();aC.INSTANCES=new WeakMap;var oC=function(){function e(t,n){s(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new nC(t)}return(0,c.Z)(e,[{key:"id",get:function(){return this._delegate.id}},{key:"parent",get:function(){return new vC(this.firestore,this._delegate.parent)}},{key:"path",get:function(){return this._delegate.path}},{key:"collection",value:function(e){try{return new vC(this.firestore,fE(this._delegate,e))}catch(t){throw uC(t,"collection()","DocumentReference.collection()")}}},{key:"isEqual",value:function(e){return(e=Nt(e))instanceof sE&&dE(this._delegate,e)}},{key:"set",value:function(e,t){t=QT("DocumentReference.set",t);try{return t?FT(this._delegate,e,t):FT(this._delegate,e)}catch(n){throw uC(n,"setDoc()","DocumentReference.set()")}}},{key:"update",value:function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];try{return 1===arguments.length?jT(this._delegate,e):jT.apply(void 0,[this._delegate,e,t].concat(r))}catch(a){throw uC(a,"updateDoc()","DocumentReference.update()")}}},{key:"delete",value:function(){return ZT(rE((e=this._delegate).firestore,gE),[new Ik(e._key,ck.none())]);var e}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=sC(n),a=cC(n,(function(t){return new lC(e.firestore,new AT(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate.converter))}));return UT(this._delegate,i,a)}},{key:"get",value:function(e){var t=this;return("cache"===(null===e||void 0===e?void 0:e.source)?LT(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=rE(e,sE);var t=rE(e.firestore,gE);return HS(kE(t),e._key,{source:"server"}).then((function(n){return zT(t,e,n)}))}(this._delegate):function(e){e=rE(e,sE);var t=rE(e.firestore,gE);return HS(kE(t),e._key).then((function(n){return zT(t,e,n)}))}(this._delegate)).then((function(e){return new lC(t.firestore,new AT(t.firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,t._delegate.converter))}))}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(aC.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}],[{key:"forPath",value:function(t,n,r){if(t.length%2!==0)throw new kv("invalid-argument","Invalid document reference. Document references must have an even number of segments, but "+"".concat(t.canonicalString()," has ").concat(t.length));return new e(n,new sE(n._delegate,r,new Vv(t)))}},{key:"forKey",value:function(t,n,r){return new e(n,new sE(n._delegate,r,t))}}]),e}();function uC(e,t,n){return e.message=e.message.replace(t,n),e}function sC(e){var t,n=S(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;if("object"===typeof r&&!JT(r))return r}}catch(i){n.e(i)}finally{n.f()}return{}}function cC(e,t){var n,r,i;return{next:function(e){i.next&&i.next(t(e))},error:null===(n=(i=JT(e[0])?e[0]:JT(e[1])?e[1]:"function"===typeof e[0]?{next:e[0],error:e[1],complete:e[2]}:{next:e[1],error:e[2],complete:e[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var lC=function(){function e(t,n){s(this,e),this._firestore=t,this._delegate=n}return(0,c.Z)(e,[{key:"ref",get:function(){return new oC(this._firestore,this._delegate.ref)}},{key:"id",get:function(){return this._delegate.id}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"exists",get:function(){return this._delegate.exists()}},{key:"data",value:function(e){return this._delegate.data(e)}},{key:"get",value:function(e,t){return this._delegate.get(e,t)}},{key:"isEqual",value:function(e){return OT(this._delegate,e._delegate)}}]),e}(),fC=function(e){f(n,e);var t=m(n);function n(){return s(this,n),t.apply(this,arguments)}return(0,c.Z)(n,[{key:"data",value:function(e){var t=this._delegate.data(e);return void 0!==t||vv(),t}}]),n}(lC),hC=function(){function e(t,n){s(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new nC(t)}return(0,c.Z)(e,[{key:"where",value:function(t,n,r){try{return new e(this.firestore,cT(this._delegate,function(e,t,n){var r=t,i=aT("where",e);return lT._create(i,r,n)}(t,n,r)))}catch(i){throw uC(i,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"orderBy",value:function(t,n){try{return new e(this.firestore,cT(this._delegate,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=aT("orderBy",e);return hT._create(n,t)}(t,n)))}catch(r){throw uC(r,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"limit",value:function(t){try{return new e(this.firestore,cT(this._delegate,(iE("limit",n=t),dT._create("limit",n,"F"))))}catch(r){throw uC(r,"limit()","Query.limit()")}var n}},{key:"limitToLast",value:function(t){try{return new e(this.firestore,cT(this._delegate,(iE("limitToLast",n=t),dT._create("limitToLast",n,"L"))))}catch(r){throw uC(r,"limitToLast()","Query.limitToLast()")}var n}},{key:"startAt",value:function(){try{return new e(this.firestore,cT(this._delegate,vT.apply(void 0,arguments)))}catch(t){throw uC(t,"startAt()","Query.startAt()")}}},{key:"startAfter",value:function(){try{return new e(this.firestore,cT(this._delegate,mT.apply(void 0,arguments)))}catch(t){throw uC(t,"startAfter()","Query.startAfter()")}}},{key:"endBefore",value:function(){try{return new e(this.firestore,cT(this._delegate,gT.apply(void 0,arguments)))}catch(t){throw uC(t,"endBefore()","Query.endBefore()")}}},{key:"endAt",value:function(){try{return new e(this.firestore,cT(this._delegate,kT.apply(void 0,arguments)))}catch(t){throw uC(t,"endAt()","Query.endAt()")}}},{key:"isEqual",value:function(e){return pE(this._delegate,e._delegate)}},{key:"get",value:function(e){var t=this;return("cache"===(null===e||void 0===e?void 0:e.source)?MT(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=rE(e,cE);var t=rE(e.firestore,gE),n=kE(t),r=new DT(t);return QS(n,e._query,{source:"server"}).then((function(n){return new RT(t,r,e,n)}))}(this._delegate):function(e){e=rE(e,cE);var t=rE(e.firestore,gE),n=kE(t),r=new DT(t);return oT(e._query),QS(n,e._query).then((function(n){return new RT(t,r,e,n)}))}(this._delegate)).then((function(e){return new pC(t.firestore,new RT(t.firestore._delegate,t._userDataWriter,t._delegate,e._snapshot))}))}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=sC(n),a=cC(n,(function(t){return new pC(e.firestore,new RT(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))}));return UT(this._delegate,i,a)}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(aC.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}]),e}(),dC=function(){function e(t,n){s(this,e),this._firestore=t,this._delegate=n}return(0,c.Z)(e,[{key:"type",get:function(){return this._delegate.type}},{key:"doc",get:function(){return new fC(this._firestore,this._delegate.doc)}},{key:"oldIndex",get:function(){return this._delegate.oldIndex}},{key:"newIndex",get:function(){return this._delegate.newIndex}}]),e}(),pC=function(){function e(t,n){s(this,e),this._firestore=t,this._delegate=n}return(0,c.Z)(e,[{key:"query",get:function(){return new hC(this._firestore,this._delegate.query)}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"size",get:function(){return this._delegate.size}},{key:"empty",get:function(){return this._delegate.empty}},{key:"docs",get:function(){var e=this;return this._delegate.docs.map((function(t){return new fC(e._firestore,t)}))}},{key:"docChanges",value:function(e){var t=this;return this._delegate.docChanges(e).map((function(e){return new dC(t._firestore,e)}))}},{key:"forEach",value:function(e,t){var n=this;this._delegate.forEach((function(r){e.call(t,new fC(n._firestore,r))}))}},{key:"isEqual",value:function(e){return OT(this._delegate,e._delegate)}}]),e}(),vC=function(e){f(n,e);var t=m(n);function n(e,r){var i;return s(this,n),(i=t.call(this,e,r)).firestore=e,i._delegate=r,i}return(0,c.Z)(n,[{key:"id",get:function(){return this._delegate.id}},{key:"path",get:function(){return this._delegate.path}},{key:"parent",get:function(){var e=this._delegate.parent;return e?new oC(this.firestore,e):null}},{key:"doc",value:function(e){try{return new oC(this.firestore,void 0===e?hE(this._delegate):hE(this._delegate,e))}catch(t){throw uC(t,"doc()","CollectionReference.doc()")}}},{key:"add",value:function(e){var t=this;return function(e,t){var n=rE(e.firestore,gE),r=hE(e),i=ET(e.converter,t);return ZT(n,[jE(FE(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,ck.exists(!1))]).then((function(){return r}))}(this._delegate,e).then((function(e){return new oC(t.firestore,e)}))}},{key:"isEqual",value:function(e){return dE(this._delegate,e._delegate)}},{key:"withConverter",value:function(e){return new n(this.firestore,e?this._delegate.withConverter(aC.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}]),n}(hC);function mC(e){return rE(e,sE)}var yC=function(){function e(){s(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];this._delegate=y(CE,n)}return(0,c.Z)(e,[{key:"isEqual",value:function(e){return(e=Nt(e))instanceof CE&&this._delegate._internalPath.isEqual(e._internalPath)}}],[{key:"documentId",value:function(){return new e(Uv.keyField().canonicalString())}}]),e}(),gC=function(){function e(t){s(this,e),this._delegate=t}return(0,c.Z)(e,[{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}}],[{key:"serverTimestamp",value:function(){var t=new ZE("serverTimestamp");return t._methodName="FieldValue.serverTimestamp",new e(t)}},{key:"delete",value:function(){var t=new UE("deleteField");return t._methodName="FieldValue.delete",new e(t)}},{key:"arrayUnion",value:function(){var t=WT.apply(void 0,arguments);return t._methodName="FieldValue.arrayUnion",new e(t)}},{key:"arrayRemove",value:function(){var t=HT.apply(void 0,arguments);return t._methodName="FieldValue.arrayRemove",new e(t)}},{key:"increment",value:function(t){var n=new qE("increment",t);return n._methodName="FieldValue.increment",new e(n)}}]),e}(),kC={Firestore:tC,GeoPoint:NE,Timestamp:Dv,Blob:XT,Transaction:rC,WriteBatch:iC,DocumentReference:oC,DocumentSnapshot:lC,Query:hC,QueryDocumentSnapshot:fC,QuerySnapshot:pC,CollectionReference:vC,FieldPath:yC,FieldValue:gC,setLogLevel:function(e){var t;t=e,cv.setLogLevel(t)},CACHE_SIZE_UNLIMITED:-1};!function(e){!function(e,t){e.INTERNAL.registerComponent(new Rt("firestore-compat",(function(e){var n=e.getProvider("app-compat").getImmediate(),r=e.getProvider("firestore").getImmediate();return t(n,r)}),"PUBLIC").setServiceProps(Object.assign({},kC)))}(e,(function(e,t){return new tC(e,t,new eC)})),e.registerVersion("@firebase/firestore-compat","0.3.10")}(or);var bC={apiKey:"AIzaSyArBjNzfIRKwdZEBrWFx74gFr0XmUzEQ5A",authDomain:"web-7747c.firebaseapp.com",projectId:"web-7747c",storageBucket:"web-7747c.appspot.com",messagingSenderId:"9067291674",appId:"1:9067291674:web:9d7a293cec63922a015da3"},wC=(An(bC),or.initializeApp(bC).firestore(),or.auth());var xC=function(){var e=Ye(),t=(0,i.Z)(e,2),n=t[0],r=n.basket,u=n.user;return t[1],(0,We.jsxs)("div",{className:"header",children:[(0,We.jsx)(qe,{to:"/",children:(0,We.jsx)("img",{className:"header__logo",src:"http://pngimg.com/uploads/amazon/amazon_PNG11.png"})}),(0,We.jsxs)("div",{className:"header__search",children:[(0,We.jsx)("input",{className:"header_searchInput",type:"text"}),(0,We.jsx)(a.Z,{className:"header__searchIcon"})]}),(0,We.jsxs)("div",{className:"header__nav",children:[(0,We.jsx)(qe,{to:!u&&"/login",children:(0,We.jsxs)("div",{onClick:function(){u&&wC.signOut()},className:"header__option",children:[(0,We.jsxs)("span",{className:"header_optionLineOne",children:["Hello ",u?u.email:"Guest"]}),(0,We.jsx)("span",{className:"header_optionLineTwo",children:u?"Sign Out":"Sign In"})]})}),(0,We.jsxs)("div",{className:"header__option",children:[(0,We.jsx)("span",{className:"header_optionLineOne",children:"Returns"}),(0,We.jsx)("span",{className:"header_optionLineTwo",children:"& Orders"})]}),(0,We.jsxs)("div",{className:"header__option",children:[(0,We.jsx)("span",{className:"header_optionLineOne",children:"Your"}),(0,We.jsx)("span",{className:"header_optionLineTwo",children:"Prime"})]}),(0,We.jsx)(qe,{to:"/checkout",children:(0,We.jsxs)("div",{className:"header__basket",children:[(0,We.jsx)(o.Z,{}),(0,We.jsx)("span",{className:"header__optionLineTwo header__basketCount",children:null===r||void 0===r?void 0:r.length})]})})]})]})};var _C=function(e){var t=e.id,n=e.title,r=e.image,a=e.price,o=e.rating,u=Ye(),s=(0,i.Z)(u,2),c=(s[0].basket,s[1]);return(0,We.jsxs)("div",{className:"product",children:[(0,We.jsxs)("div",{className:"product__info",children:[(0,We.jsx)("p",{children:n}),(0,We.jsxs)("p",{className:"product__price",children:[(0,We.jsx)("small",{children:"$"}),(0,We.jsx)("strong",{children:a})]}),(0,We.jsx)("div",{className:"product__rating",children:Array(o).fill().map((function(e,t){return(0,We.jsx)("p",{children:"\ud83c\udf1f"})}))})]}),(0,We.jsx)("img",{src:r,alt:""}),(0,We.jsx)("button",{onClick:function(){c({type:"ADD_TO_CART",item:{id:t,title:n,image:r,price:a,rating:o}})},children:"Add to cart"})]})};var IC=function(){return(0,We.jsx)("div",{className:"home",children:(0,We.jsxs)("div",{className:"home__container",children:[(0,We.jsx)("img",{className:"home__image",src:"https://images-eu.ssl-images-amazon.com/images/G/02/digital/video/merch2016/Hero/Covid19/Generic/GWBleedingHero_ENG_COVIDUPDATE__XSite_1500x600_PV_en-GB._CB428684220_.jpg",alt:""}),(0,We.jsxs)("div",{className:"home__rows",children:[(0,We.jsx)(_C,{id:"346743",title:"PRETTYGARDEN Women's Casual Summer Striped Dress Short Sleeve Wrap V Neck Ruffle Hem Mini Skater Dresses ",price:15.99,image:"https://m.media-amazon.com/images/I/71o65Obm0tL._MCnd_AC_UL640_FMwebp_QL65_.jpg ",rating:4}),(0,We.jsx)(_C,{id:"488692",title:"Apple iPhone 14, 128GB, Midnight",price:1299,image:"https://m.media-amazon.com/images/I/61cwywLZR-L._AC_UY436_FMwebp_QL65_.jpg",rating:5})]}),(0,We.jsxs)("div",{className:"home__rows",children:[(0,We.jsx)(_C,{id:"955712",title:"PUMA Mens Wild Rider Ls Lace Up Sneakers Casual Shoes Casual - Black",price:59.99,image:"https://m.media-amazon.com/images/I/513xypgrI1L._AC_UL640_FMwebp_QL65_.jpg",rating:5}),(0,We.jsx)(_C,{id:"875002",title:"Dove Advanced Hair Series Oxygen Moisture, Shampoo and Conditioner Set, 12 Ounce Each",price:23.92,image:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTgxWBJcpvrFk1IhM89tJdlZshA7wjB61kDKztgsXbIJQ&usqp=CAU&ec=48600113",rating:3}),(0,We.jsx)(_C,{id:"673340",title:"Avatar 4k UHD",price:33.99,image:"https://m.media-amazon.com/images/I/81SLoj0EmAL._AC_UY436_FMwebp_QL65_.jpg",rating:4})]}),(0,We.jsx)("div",{className:"home__rows",children:(0,We.jsx)(_C,{id:"714294",title:"Lay's Kettle Cooked Jalapeno Chips (Pack of 40)",price:23.29,image:"https://m.media-amazon.com/images/I/81JQG6WmV2L._AC_UL640_FMwebp_QL65_.jpg",rating:"5"})})]})})},SC=n(482),EC=n.n(SC),TC=function(e){return null===e||void 0===e?void 0:e.reduce((function(e,t){return t.price+e}),0)},CC=function(e,t){switch(console.log(t),t.type){case"ADD_TO_CART":return qt(qt({},e),{},{basket:[].concat((0,u.Z)(e.basket),[t.item])});case"REMOVE_FROM_CART":var n=e.basket.findIndex((function(e){return e.id===t.id})),r=(0,u.Z)(e.basket);return n>=0?r.splice(n,1):console.warn("Cant remove product (id: ".concat(t.id,") as its not in basket!")),qt(qt({},e),{},{basket:r});case"SET_USER":return qt(qt({},e),{},{user:t.user});default:return e}};var AC=function(){var e=Ye(),t=(0,i.Z)(e,2),n=t[0].basket;return t[1],(0,We.jsxs)("div",{className:"subtotal",children:[(0,We.jsx)(EC(),{renderText:function(e){return(0,We.jsxs)(We.Fragment,{children:[(0,We.jsxs)("p",{children:["Subtotal (",null===n||void 0===n?void 0:n.length," items): ",(0,We.jsx)("strong",{children:e})]}),(0,We.jsxs)("small",{className:"subtotal__gift",children:[(0,We.jsx)("input",{type:"checkbox"})," This order contains a gift"]})]})},decimalScale:2,value:TC(n),displayType:"text",thousandSeparator:!0,prefix:"$"}),(0,We.jsx)("button",{children:"Proceed to Checkout"})]})};var NC=function(e){var t=e.id,n=e.image,r=e.title,a=e.price,o=e.rating,u=Ye(),s=(0,i.Z)(u,2),c=(s[0].basket,s[1]);return(0,We.jsxs)("div",{className:"checkoutProduct",children:[(0,We.jsx)("img",{className:"checkoutProduct__image",src:n}),(0,We.jsxs)("div",{className:"checkoutProduct__info",children:[(0,We.jsx)("p",{className:"checkoutProduct__title",children:r}),(0,We.jsxs)("p",{className:"checkoutProduct__price",children:[(0,We.jsx)("small",{children:"$"}),(0,We.jsx)("strong",{children:a})]}),(0,We.jsx)("div",{className:"checkoutProduct__rating",children:Array(o).fill().map((function(e,t){return(0,We.jsx)("p",{children:"\ud83c\udf1f"})}))}),(0,We.jsx)("button",{onClick:function(){c({type:"REMOVE_FROM_CART",id:t})},children:"Remove from Cart"})]})]})};var RC=function(){var e=Ye(),t=(0,i.Z)(e,2),n=t[0],r=n.basket,a=n.user,o=(t[1],a.email.indexOf("@"));return a.email.substring(0,o),(0,We.jsxs)("div",{className:"checkout",children:[(0,We.jsxs)("div",{className:"checkout__left",children:[(0,We.jsx)("img",{className:"checkout__ad",src:"https://images-na.ssl-images-amazon.com/images/G/02/UK_CCMP/TM/OCC_Amazon1._CB423492668_.jpg",alt:""}),(0,We.jsxs)("div",{children:[(0,We.jsxs)("h3",{children:["Hey, ",null===a||void 0===a?void 0:a.email," "]}),(0,We.jsx)("h2",{className:"checkout__title",children:"Items in your cart"}),r.map((function(e){return(0,We.jsx)(NC,{id:e.id,title:e.title,image:e.image,price:e.price,rating:e.rating})}))]})]}),(0,We.jsx)("div",{className:"checkout__right",children:(0,We.jsx)(AC,{})})]})};var PC=function(){var e=ke(),n=(0,t.useState)(""),r=(0,i.Z)(n,2),a=r[0],o=r[1],u=(0,t.useState)(""),s=(0,i.Z)(u,2),c=s[0],l=s[1];return(0,We.jsxs)("div",{className:"login",children:[(0,We.jsx)(qe,{to:"/",children:(0,We.jsx)("img",{className:"login__logo",src:"https://upload.wikimedia.org/wikipedia/commons/thumb/a/a9/Amazon_logo.svg/1024px-Amazon_logo.svg.png"})}),(0,We.jsxs)("div",{className:"login__container",children:[(0,We.jsx)("h1",{children:"Sign-in"}),(0,We.jsxs)("form",{children:[(0,We.jsx)("h5",{children:"E-mail"}),(0,We.jsx)("input",{type:"text",value:a,onChange:function(e){return o(e.target.value)}}),(0,We.jsx)("h5",{children:"Password"}),(0,We.jsx)("input",{type:"password",value:c,onChange:function(e){return l(e.target.value)}}),(0,We.jsx)("button",{type:"submit",onClick:function(t){t.preventDefault(),wC.signInWithEmailAndPassword(a,c).then((function(t){e("/")})).catch((function(e){return alert(e.message)}))},className:"login__signInButton",children:"Sign In"})]}),(0,We.jsx)("p",{children:"By signing-in you agree to the AMAZON CLONE Conditions of Use & Sale. Please see our Privacy Notice, our Cookies Notice and our Interest-Based Ads Notice."}),(0,We.jsx)("button",{onClick:function(t){t.preventDefault(),wC.createUserWithEmailAndPassword(a,c).then((function(t){t&&e("/")})).catch((function(e){return alert(e.message)}))},className:"login__registerButton",children:"Create new account"})]})]})};var OC=function(){var e=Ye(),n=(0,i.Z)(e,2);!function(e){if(null==e)throw new TypeError("Cannot destructure "+e)}(n[0]);var r=n[1];return(0,t.useEffect)((function(){wC.onAuthStateChanged((function(e){console.log("THE USER IS >>> ",e),r(e?{type:"SET_USER",user:e}:{type:"SET_USER",user:null})}))}),[]),(0,We.jsx)(Ze,{children:(0,We.jsx)("div",{className:"app",children:(0,We.jsxs)(Le,{children:[(0,We.jsx)(Oe,{path:"/",element:[(0,We.jsx)(xC,{}),(0,We.jsx)(IC,{})]}),(0,We.jsx)(Oe,{path:"/checkout",element:[(0,We.jsx)(xC,{}),(0,We.jsx)(RC,{})]}),(0,We.jsx)(Oe,{path:"/login",element:(0,We.jsx)(PC,{})})]})})})};r.render((0,We.jsx)(t.StrictMode,{children:(0,We.jsx)(Qe,{initialState:{basket:[],user:null},reducer:CC,children:(0,We.jsx)(OC,{})})}),document.getElementById("root"))}()}();
//# sourceMappingURL=main.82b27ce7.js.map